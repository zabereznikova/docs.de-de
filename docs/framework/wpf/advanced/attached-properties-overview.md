---
title: Übersicht über angefügte Eigenschaften
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- attached properties [WPF Designer]
ms.assetid: 75928354-dc01-47e8-a018-8409aec1f32d
ms.openlocfilehash: f4e8ea9fb0643a4a434bf20fa719c3fd2d01435b
ms.sourcegitcommit: 7f8eeef060ddeb2cabfa52843776faf652c5a1f5
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/14/2019
ms.locfileid: "74089333"
---
# <a name="attached-properties-overview"></a><span data-ttu-id="af476-102">Übersicht über angefügte Eigenschaften</span><span class="sxs-lookup"><span data-stu-id="af476-102">Attached Properties Overview</span></span>

<span data-ttu-id="af476-103">Eine angefügte Eigenschaft ist ein von XAML definiertes Konzept.</span><span class="sxs-lookup"><span data-stu-id="af476-103">An attached property is a concept defined by XAML.</span></span> <span data-ttu-id="af476-104">Eine angefügte Eigenschaft ist für die Verwendung als Typ einer globalen Eigenschaft vorgesehen, der in jedem Objekt festgelegt werden kann.</span><span class="sxs-lookup"><span data-stu-id="af476-104">An attached property is intended to be used as a type of global property that is settable on any object.</span></span> <span data-ttu-id="af476-105">In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] werden angefügte Eigenschaften in der Regel als eine spezielle Form der Abhängigkeitseigenschaft definiert, die nicht die herkömmliche Eigenschaft „Wrapper“ aufweist.</span><span class="sxs-lookup"><span data-stu-id="af476-105">In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], attached properties are typically defined as a specialized form of dependency property that does not have the conventional property "wrapper".</span></span>

## <span data-ttu-id="af476-106">Voraussetzung<a name="prerequisites"></a></span><span class="sxs-lookup"><span data-stu-id="af476-106">Prerequisites <a name="prerequisites"></a></span></span>

<span data-ttu-id="af476-107">Dieses Thema setzt voraus, dass Sie Abhängigkeitseigenschaften vorhandener Abhängigkeitseigenschaften von [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]-Klassen aus Sicht eines Kunden verstehen und die [Übersicht über Abhängigkeitseigenschaften](dependency-properties-overview.md) gelesen haben.</span><span class="sxs-lookup"><span data-stu-id="af476-107">This topic assumes that you understand dependency properties from the perspective of a consumer of existing dependency properties on [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] classes, and have read the [Dependency Properties Overview](dependency-properties-overview.md).</span></span> <span data-ttu-id="af476-108">Um den Beispielen in diesem Thema zu folgen, sollten Sie sich auch mit XAML vertraut machen und wissen, wie WPF-Anwendungen geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="af476-108">To follow the examples in this topic, you should also understand XAML and know how to write WPF applications.</span></span>

## <span data-ttu-id="af476-109">Verwendungs Gründe für angefügte Eigenschaften<a name="attached_properties_usage"></a></span><span class="sxs-lookup"><span data-stu-id="af476-109">Why Use Attached Properties <a name="attached_properties_usage"></a></span></span>

<span data-ttu-id="af476-110">Ein Zweck einer angefügten Eigenschaft ist die Berechtigung für verschiedene untergeordnete Elemente, eindeutige Werte für eine Eigenschaft anzugeben, die eigentlich in einem übergeordneten Element definiert ist.</span><span class="sxs-lookup"><span data-stu-id="af476-110">One purpose of an attached property is to allow different child elements to specify unique values for a property that is actually defined in a parent element.</span></span> <span data-ttu-id="af476-111">Eine bestimmte Anwendung dieses Szenario: Untergeordnete Elemente informieren übergeordnete Element, wie diese im [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)] angezeigt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="af476-111">A specific application of this scenario is having child elements inform the parent element of how they are to be presented in the [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)].</span></span> <span data-ttu-id="af476-112">Ein Beispiel ist die <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType>-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="af476-112">One example is the <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="af476-113">Die <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType>-Eigenschaft wird als angefügte Eigenschaft erstellt, da Sie auf Elemente festgelegt werden soll, die in einem <xref:System.Windows.Controls.DockPanel>enthalten sind, und nicht auf <xref:System.Windows.Controls.DockPanel> selbst.</span><span class="sxs-lookup"><span data-stu-id="af476-113">The <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> property is created as an attached property because it is designed to be set on elements that are contained within a <xref:System.Windows.Controls.DockPanel>, rather than on <xref:System.Windows.Controls.DockPanel> itself.</span></span> <span data-ttu-id="af476-114">Die <xref:System.Windows.Controls.DockPanel>-Klasse definiert das statische <xref:System.Windows.DependencyProperty> Feld mit dem Namen <xref:System.Windows.Controls.DockPanel.DockProperty>und stellt dann die Methoden <xref:System.Windows.Controls.DockPanel.GetDock%2A> und <xref:System.Windows.Controls.DockPanel.SetDock%2A> als öffentliche Accessoren für die angefügte-Eigenschaft bereit.</span><span class="sxs-lookup"><span data-stu-id="af476-114">The <xref:System.Windows.Controls.DockPanel> class defines the static <xref:System.Windows.DependencyProperty> field named <xref:System.Windows.Controls.DockPanel.DockProperty>, and then provides the <xref:System.Windows.Controls.DockPanel.GetDock%2A> and <xref:System.Windows.Controls.DockPanel.SetDock%2A> methods as public accessors for the attached property.</span></span>

## <span data-ttu-id="af476-115">Angefügte Eigenschaften in XAML<a name="attached_properties_xaml"></a></span><span class="sxs-lookup"><span data-stu-id="af476-115">Attached Properties in XAML <a name="attached_properties_xaml"></a></span></span>

<span data-ttu-id="af476-116">In XAML legen Sie angefügte Eigenschaften mithilfe der Syntax *AttachedPropertyProvider*.*PropertyName* fest.</span><span class="sxs-lookup"><span data-stu-id="af476-116">In XAML, you set attached properties by using the syntax *AttachedPropertyProvider*.*PropertyName*</span></span>

<span data-ttu-id="af476-117">Im folgenden finden Sie ein Beispiel dafür, wie Sie <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> in XAML festlegen können:</span><span class="sxs-lookup"><span data-stu-id="af476-117">The following is an example of how you can set <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> in XAML:</span></span>

[!code-xaml[PropertiesOvwSupport#APBasicUsage](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page4.xaml#apbasicusage)]

<span data-ttu-id="af476-118">Beachten Sie, dass die Verwendung einer statischen Eigenschaft etwas ähnlich ist. Sie verweisen immer auf den Typ <xref:System.Windows.Controls.DockPanel>, der die angefügte Eigenschaft besitzt und registriert, anstatt auf eine durch den Namen angegebene Instanz zu verweisen.</span><span class="sxs-lookup"><span data-stu-id="af476-118">Note that the usage is somewhat similar to a static property; you always reference the type <xref:System.Windows.Controls.DockPanel> that owns and registers the attached property, rather than referring to any instance specified by name.</span></span>

<span data-ttu-id="af476-119">Da eine angefügte Eigenschaft in XAML ein Attribut ist, das Sie im Markup festlegen, besitzt außerdem nur der Mengenvorgang Relevanz.</span><span class="sxs-lookup"><span data-stu-id="af476-119">Also, because an attached property in XAML is an attribute that you set in markup, only the set operation has any relevance.</span></span> <span data-ttu-id="af476-120">Sie können eine Eigenschaft in XAML nicht direkt abrufen, obwohl einige indirekte Mechanismen zum Vergleichen von Werten vorhanden sind, wie z.B. Trigger in Formaten (weitere Informationen finden Sie unter [Erstellen von Formaten und Vorlagen](../controls/styling-and-templating.md)).</span><span class="sxs-lookup"><span data-stu-id="af476-120">You cannot directly get a property in XAML, although there are some indirect mechanisms for comparing values, such as triggers in styles (for details, see [Styling and Templating](../controls/styling-and-templating.md)).</span></span>

### <a name="attached-property-implementation-in-wpf"></a><span data-ttu-id="af476-121">Implementierung von angefügten Eigenschaften in WPF</span><span class="sxs-lookup"><span data-stu-id="af476-121">Attached Property Implementation in WPF</span></span>

<span data-ttu-id="af476-122">In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]werden die meisten angefügten Eigenschaften, die auf WPF-Typen im Zusammenhang mit der UI-Darstellung vorhanden sind, als Abhängigkeits Eigenschaften implementiert.</span><span class="sxs-lookup"><span data-stu-id="af476-122">In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], most of the attached properties that exist on WPF types that are related to UI presentation are implemented as dependency properties.</span></span> <span data-ttu-id="af476-123">Angefügte Eigenschaften sind ein XAML-Konzept, wohingegen Abhängigkeits Eigenschaften ein WPF-Konzept sind.</span><span class="sxs-lookup"><span data-stu-id="af476-123">Attached properties are a XAML concept, whereas dependency properties are a WPF concept.</span></span> <span data-ttu-id="af476-124">Da WPF-Eigenschaften Abhängigkeits Eigenschaften sind, unterstützen Sie Abhängigkeits Eigenschafts Konzepte wie z. b. Eigenschafts Metadaten und Standardwerte aus diesen Eigenschafts Metadaten.</span><span class="sxs-lookup"><span data-stu-id="af476-124">Because WPF attached properties are dependency properties, they support dependency property concepts such as property metadata, and default values from that property metadata.</span></span>

## <span data-ttu-id="af476-125">Verwendung angefügter Eigenschaften durch den besitzenden Typ<a name="howused"></a></span><span class="sxs-lookup"><span data-stu-id="af476-125">How Attached Properties Are Used by the Owning Type <a name="howused"></a></span></span>

<span data-ttu-id="af476-126">Obwohl angefügte Eigenschaften für jedes beliebige Objekt festgelegt werden können, bedeutet dies nicht automatisch, dass die Eigenschaft ein reales Ergebnis erzeugt, oder der Wert jemals von einem anderen Objekt verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="af476-126">Although attached properties are settable on any object, that does not automatically mean that setting the property will produce a tangible result, or that the value will ever be used by another object.</span></span> <span data-ttu-id="af476-127">Im Allgemeinen werden angefügte Eigenschaften vorgesehen, damit Objekte, die aus einer Vielzahl von möglichen Klassenhierarchien oder logischen Beziehungen stammen, dem Typ, der die angefügte Eigenschaft definiert, allgemeine Informationen melden können.</span><span class="sxs-lookup"><span data-stu-id="af476-127">Generally, attached properties are intended so that objects coming from a wide variety of possible class hierarchies or logical relationships can each report common information to the type that defines the attached property.</span></span> <span data-ttu-id="af476-128">Der Typ, der die angefügte Eigenschaft definiert, folgt in der Regel einem dieser Modelle:</span><span class="sxs-lookup"><span data-stu-id="af476-128">The type that defines the attached property typically follows one of these models:</span></span>

- <span data-ttu-id="af476-129">Der Typ, der die angefügte Eigenschaft definiert, ist so konzipiert, dass er das übergeordnete Element der Elemente sein kann, das Werte für die angefügte Eigenschaft festlegen wird.</span><span class="sxs-lookup"><span data-stu-id="af476-129">The type that defines the attached property is designed so that it can be the parent element of the elements that will set values for the attached property.</span></span> <span data-ttu-id="af476-130">Der Typ durchläuft dann seine untergeordneten Objekte durch die interne Logik auf der Grundlage der Objektstruktur, ruft die Werte ab und fungiert auf irgendeine Weise für diese Werte.</span><span class="sxs-lookup"><span data-stu-id="af476-130">The type then iterates its child objects through internal logic against some object tree structure, obtains the values, and acts on those values in some manner.</span></span>

- <span data-ttu-id="af476-131">Der Typ, der die angefügte Eigenschaft definiert, wird als untergeordnetes Element für verschiedene mögliche übergeordnete Elemente und Inhaltsmodelle verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="af476-131">The type that defines the attached property will be used as the child element for a variety of possible parent elements and content models.</span></span>

- <span data-ttu-id="af476-132">Der Typ, der die angefügte Eigenschaft definiert, stellt einen Dienst dar.</span><span class="sxs-lookup"><span data-stu-id="af476-132">The type that defines the attached property represents a service.</span></span> <span data-ttu-id="af476-133">Andere Typen legen Werte für die angefügte Eigenschaft fest.</span><span class="sxs-lookup"><span data-stu-id="af476-133">Other types set values for the attached property.</span></span> <span data-ttu-id="af476-134">Wenn das Element, das die Eigenschaft festlegt, im Kontext des Dienstes ausgewertet wird, werden über die interne Logik der Dienstklasse die angefügten Eigenschaftswerte abgerufen.</span><span class="sxs-lookup"><span data-stu-id="af476-134">Then, when the element that set the property is evaluated in the context of the service, the attached property values are obtained through internal logic of the service class.</span></span>

### <a name="an-example-of-a-parent-defined-attached-property"></a><span data-ttu-id="af476-135">Ein Beispiel für eine übergeordnete definierte angefügte Eigenschaft</span><span class="sxs-lookup"><span data-stu-id="af476-135">An Example of a Parent-Defined Attached Property</span></span>

<span data-ttu-id="af476-136">Das typische Szenario, in dem WPF eine angefügte Eigenschaft definiert, ist, wenn ein übergeordnetes Element eine Auflistung untergeordneter Elemente unterstützt und außerdem ein Verhalten implementiert, bei dem die Besonderheiten des Verhaltens für jedes untergeordnete Element einzeln gemeldet werden.</span><span class="sxs-lookup"><span data-stu-id="af476-136">The most typical scenario where WPF defines an attached property is when a parent element supports a child element collection, and also implements a behavior where the specifics of the behavior are reported individually for each child element.</span></span>

<span data-ttu-id="af476-137"><xref:System.Windows.Controls.DockPanel> die <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> angefügte Eigenschaft definiert, und <xref:System.Windows.Controls.DockPanel> auf Klassenebene Code als Teil der Renderinglogik (insbesondere <xref:System.Windows.Controls.DockPanel.MeasureOverride%2A> und <xref:System.Windows.Controls.DockPanel.ArrangeOverride%2A>).</span><span class="sxs-lookup"><span data-stu-id="af476-137"><xref:System.Windows.Controls.DockPanel> defines the <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> attached property, and <xref:System.Windows.Controls.DockPanel> has class-level code as part of its rendering logic (specifically, <xref:System.Windows.Controls.DockPanel.MeasureOverride%2A> and <xref:System.Windows.Controls.DockPanel.ArrangeOverride%2A>).</span></span> <span data-ttu-id="af476-138">Eine <xref:System.Windows.Controls.DockPanel> Instanz prüft immer, ob eines der unmittelbar untergeordneten Elemente einen Wert für <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType>festgelegt hat.</span><span class="sxs-lookup"><span data-stu-id="af476-138">A <xref:System.Windows.Controls.DockPanel> instance will always check to see whether any of its immediate child elements have set a value for <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="af476-139">Wenn dies der Fall ist, werden diese Werte zur Eingabe für die Renderinglogik, die auf das jeweilige untergeordnete Element angewendet wird.</span><span class="sxs-lookup"><span data-stu-id="af476-139">If so, those values become input for the rendering logic applied to that particular child element.</span></span> <span data-ttu-id="af476-140">In der <xref:System.Windows.Controls.DockPanel>-Instanzen werden jeweils ihre eigenen unmittelbaren untergeordneten Element Auflistungen behandelt, aber dieses Verhalten ist Implementierungs spezifisch, um zu erfahren, wie <xref:System.Windows.Controls.DockPanel> <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> Werte verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="af476-140">Nested <xref:System.Windows.Controls.DockPanel> instances each treat their own immediate child element collections, but that behavior is implementation-specific to how <xref:System.Windows.Controls.DockPanel> processes <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> values.</span></span> <span data-ttu-id="af476-141">Es ist theoretisch möglich, angefügte Eigenschaften zu besitzen, die Elemente über das unmittelbar übergeordnete Element hinaus beeinflussen.</span><span class="sxs-lookup"><span data-stu-id="af476-141">It is theoretically possible to have attached properties that influence elements beyond the immediate parent.</span></span> <span data-ttu-id="af476-142">Wenn die <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> angefügte-Eigenschaft für ein Element festgelegt ist, das über kein <xref:System.Windows.Controls.DockPanel> übergeordnetes Element verfügt, um darauf zu reagieren, wird kein Fehler oder keine Ausnahme ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="af476-142">If the <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> attached property is set on an element that has no <xref:System.Windows.Controls.DockPanel> parent element to act upon it, no error or exception is raised.</span></span> <span data-ttu-id="af476-143">Dies bedeutet einfach, dass ein globaler Eigenschafts Wert festgelegt wurde, aber es hat keine aktuelle <xref:System.Windows.Controls.DockPanel> übergeordnetes Element, das die Informationen verarbeiten könnte.</span><span class="sxs-lookup"><span data-stu-id="af476-143">This simply means that a global property value was set, but it has no current <xref:System.Windows.Controls.DockPanel> parent that could consume the information.</span></span>

## <span data-ttu-id="af476-144">Angefügte Eigenschaften im Code<a name="attached_properties_code"></a></span><span class="sxs-lookup"><span data-stu-id="af476-144">Attached Properties in Code <a name="attached_properties_code"></a></span></span>

<span data-ttu-id="af476-145">Angefügte Eigenschaften in WPF haben nicht die typischen CLR-Wrapper Methoden für den einfachen Get-/Set-Zugriff.</span><span class="sxs-lookup"><span data-stu-id="af476-145">Attached properties in WPF do not have the typical CLR "wrapper" methods for easy get/set access.</span></span> <span data-ttu-id="af476-146">Dies liegt daran, dass die angefügte Eigenschaft nicht notwendigerweise Teil des CLR-Namespace für Instanzen ist, in denen die Eigenschaft festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="af476-146">This is because the attached property is not necessarily part of the CLR namespace for instances where the property is set.</span></span> <span data-ttu-id="af476-147">Allerdings muss ein XAML-Prozessor in der Lage sein, diese Werte festzulegen, wenn XAML analysiert wird.</span><span class="sxs-lookup"><span data-stu-id="af476-147">However, a XAML processor must be able to set those values when XAML is parsed.</span></span> <span data-ttu-id="af476-148">Um eine effektive Verwendung angefügter Eigenschaften zu unterstützen, muss der Besitzertyp der angefügten Eigenschaft dedizierte Accessormethoden in der Form **Get_PropertyName_** und **Set_PropertyName_** implementieren.</span><span class="sxs-lookup"><span data-stu-id="af476-148">To support an effective attached property usage, the owner type of the attached property must implement dedicated accessor methods in the form **Get_PropertyName_** and **Set_PropertyName_**.</span></span> <span data-ttu-id="af476-149">Diese dedizierten Accessormethoden eignen sich auch zum Abrufen oder Festlegen der angefügten Eigenschaft im Code.</span><span class="sxs-lookup"><span data-stu-id="af476-149">These dedicated accessor methods are also useful to get or set the attached property in code.</span></span> <span data-ttu-id="af476-150">Im Hinblick auf Code ist eine angefügte Eigenschaft einem dahinter liegenden Feld ähnlich, das Methodenaccessoren anstelle von Eigenschaftenaccessoren besitzt, und das dahinter liegende Feld kann in jedem Objekt vorhanden sein, anstatt explizit definiert werden zu müssen.</span><span class="sxs-lookup"><span data-stu-id="af476-150">From a code perspective, an attached property is similar to a backing field that has method accessors instead of property accessors, and that backing field can exist on any object rather than needing to be specifically defined.</span></span>

<span data-ttu-id="af476-151">Das folgende Beispiel zeigt, wie Sie eine angefügte Eigenschaft im Code festlegen können.</span><span class="sxs-lookup"><span data-stu-id="af476-151">The following example shows how you can set an attached property in code.</span></span> <span data-ttu-id="af476-152">In diesem Beispiel ist `myCheckBox` eine Instanz der <xref:System.Windows.Controls.CheckBox>-Klasse.</span><span class="sxs-lookup"><span data-stu-id="af476-152">In this example, `myCheckBox` is an instance of the <xref:System.Windows.Controls.CheckBox> class.</span></span>

[!code-csharp[PropertiesOvwSupport#APCode](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page4.xaml.cs#apcode)]
[!code-vb[PropertiesOvwSupport#APCode](~/samples/snippets/visualbasic/VS_Snippets_Wpf/PropertiesOvwSupport/visualbasic/page4.xaml.vb#apcode)]

<span data-ttu-id="af476-153">Ähnlich wie beim XAML-Fall, wenn `myCheckBox` nicht bereits als untergeordnetes Element von `myDockPanel` durch die dritte Codezeile hinzugefügt worden wären, würde die vierte Codezeile keine Ausnahme auslöst, aber der Eigenschafts Wert interagiert nicht mit einem übergeordneten <xref:System.Windows.Controls.DockPanel> und führt daher Folgendes aus: Schweigen.</span><span class="sxs-lookup"><span data-stu-id="af476-153">Similar to the XAML case, if `myCheckBox` had not already been added as a child element of `myDockPanel` by the third line of code, the fourth line of code would not raise an exception, but the property value would not interact with a <xref:System.Windows.Controls.DockPanel> parent and thus would do nothing.</span></span> <span data-ttu-id="af476-154">Nur ein <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> Wert, der für ein untergeordnetes Element mit dem vorhanden sein eines übergeordneten Elements <xref:System.Windows.Controls.DockPanel> festgelegt wird, führt zu einem effektiven Verhalten in der gerenderten Anwendung.</span><span class="sxs-lookup"><span data-stu-id="af476-154">Only a <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> value set on a child element combined with the presence of a <xref:System.Windows.Controls.DockPanel> parent element will cause an effective behavior in the rendered application.</span></span> <span data-ttu-id="af476-155">(In diesem Fall könnten Sie die angefügte Eigenschaft festlegen und anschließend an die Struktur anfügen.</span><span class="sxs-lookup"><span data-stu-id="af476-155">(In this case, you could set the attached property, then attach to the tree.</span></span> <span data-ttu-id="af476-156">Oder Sie könnten die angefügte Eigenschaft an die Struktur anfügen und anschließend festlegen.</span><span class="sxs-lookup"><span data-stu-id="af476-156">Or you could attach to the tree then set the attached property.</span></span> <span data-ttu-id="af476-157">Jede Reihenfolge stellt das gleiche Ergebnis bereit.)</span><span class="sxs-lookup"><span data-stu-id="af476-157">Either action order provides the same result.)</span></span>

## <span data-ttu-id="af476-158">Metadaten der angefügten Eigenschaft<a name="attached_properties_metadata"></a></span><span class="sxs-lookup"><span data-stu-id="af476-158">Attached Property Metadata <a name="attached_properties_metadata"></a></span></span>

<span data-ttu-id="af476-159">Beim Registrieren der Eigenschaft wird <xref:System.Windows.FrameworkPropertyMetadata> festgelegt, um die Merkmale der Eigenschaft anzugeben, z. b. ob sich die Eigenschaft auf Rendering, Messung usw. auswirkt.</span><span class="sxs-lookup"><span data-stu-id="af476-159">When registering the property, <xref:System.Windows.FrameworkPropertyMetadata> is set to specify characteristics of the property, such as whether the property affects rendering, measurement, and so on.</span></span> <span data-ttu-id="af476-160">Metadaten für eine angefügte Eigenschaft unterscheiden sich im Allgemeinen nicht von denen für eine Abhängigkeitseigenschaft.</span><span class="sxs-lookup"><span data-stu-id="af476-160">Metadata for an attached property is generally no different than on a dependency property.</span></span> <span data-ttu-id="af476-161">Wenn Sie einen Standardwert in einer Überschreibung für die Metadaten von angefügten Eigenschaften angeben, wird dieser Wert der Standardwert der impliziten angefügten Eigenschaft in Instanzen der überschreibenden Klasse.</span><span class="sxs-lookup"><span data-stu-id="af476-161">If you specify a default value in an override to attached property metadata, that value becomes the default value of the implicit attached property on instances of the overriding class.</span></span> <span data-ttu-id="af476-162">Der Standardwert wird insbesondere gemeldet, wenn ein Prozess den Wert einer angefügten Eigenschaft über die `Get`-Methodenaccessoren für diese Eigenschaft abfragt, die eine Instanz der Klasse angibt, in dem Sie die Metadaten festgelegt haben, und wenn der Wert für diese angefügte Eigenschaft andernfalls nicht festgelegt war.</span><span class="sxs-lookup"><span data-stu-id="af476-162">Specifically, your default value is reported if some process queries for the value of an attached property through the `Get` method accessor for that property, specifying an instance of the class where you specified the metadata, and the value for that attached property was otherwise not set.</span></span>

<span data-ttu-id="af476-163">Wenn Sie die Vererbung von Eigenschaftswerten für eine Eigenschaft aktivieren möchten, sollten Sie die angefügten Eigenschaften anstelle von nicht angefügten Abhängigkeitseigenschaften verwenden.</span><span class="sxs-lookup"><span data-stu-id="af476-163">If you want to enable property value inheritance on a property, you should use attached properties rather than non-attached dependency properties.</span></span> <span data-ttu-id="af476-164">Weitere Informationen finden Sie unter [Vererbung von Eigenschaftswerten](property-value-inheritance.md).</span><span class="sxs-lookup"><span data-stu-id="af476-164">For details, see [Property Value Inheritance](property-value-inheritance.md).</span></span>

## <span data-ttu-id="af476-165">Benutzerdefinierte angefügte Eigenschaften<a name="custom"></a></span><span class="sxs-lookup"><span data-stu-id="af476-165">Custom Attached Properties <a name="custom"></a></span></span>

### <span data-ttu-id="af476-166">Wann sollte eine angefügte Eigenschaft erstellt werden?<a name="create_attached_properties"></a></span><span class="sxs-lookup"><span data-stu-id="af476-166">When to Create an Attached Property <a name="create_attached_properties"></a></span></span>

<span data-ttu-id="af476-167">Sie können eine angefügte Eigenschaft erstellen, wenn ein Mechanismus für Eigenschafteneinstellungen für andere Klassen als die definierende Klasse zur Verfügung stehen muss.</span><span class="sxs-lookup"><span data-stu-id="af476-167">You might create an attached property when there is a reason to have a property setting mechanism available for classes other than the defining class.</span></span> <span data-ttu-id="af476-168">Das gängigste Szenario hierfür ist Layout.</span><span class="sxs-lookup"><span data-stu-id="af476-168">The most common scenario for this is layout.</span></span> <span data-ttu-id="af476-169">Beispiele für vorhandene Layouteigenschaften sind <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType>, <xref:System.Windows.Controls.Panel.ZIndex%2A?displayProperty=nameWithType>und <xref:System.Windows.Controls.Canvas.Top%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="af476-169">Examples of existing layout properties are <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType>, <xref:System.Windows.Controls.Panel.ZIndex%2A?displayProperty=nameWithType>, and <xref:System.Windows.Controls.Canvas.Top%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="af476-170">Das hier aktivierte Szenario: Elemente, die als untergeordnete Elemente für das Layout steuernde Elemente vorhanden sind, können Layoutanforderungen einzeln an die übergeordneten Layoutelemente stellen, für jede Einstellung einen Eigenschaftswert, den das übergeordnete Element als angefügte Eigenschaft definiert.</span><span class="sxs-lookup"><span data-stu-id="af476-170">The scenario enabled here is that elements that exist as child elements to layout-controlling elements are able to express layout requirements to their layout parent elements individually, each setting a property value that the parent defined as an attached property.</span></span>

<span data-ttu-id="af476-171">Ein weiteres Szenario für die Verwendung einer angefügten Eigenschaft: Wenn Ihre Klasse einen Dienst darstellt und Sie möchten, dass Klassen den Dienst auf transparentere Weise integrieren können.</span><span class="sxs-lookup"><span data-stu-id="af476-171">Another scenario for using an attached property is when your class represents a service, and you want classes to be able to integrate the service more transparently.</span></span>

<span data-ttu-id="af476-172">Ein weiteres Szenario ist jedoch die Unterstützung des Visual Studio WPF-Designers, wie z. b. die Bearbeitung von **Eigenschaften** Fenstern.</span><span class="sxs-lookup"><span data-stu-id="af476-172">Yet another scenario is to receive Visual Studio WPF Designer support, such as **Properties** window editing.</span></span> <span data-ttu-id="af476-173">Weitere Informationen finden Sie unter [Übersicht über das Erstellen von Steuerelementen](../controls/control-authoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="af476-173">For more information, see [Control Authoring Overview](../controls/control-authoring-overview.md).</span></span>

<span data-ttu-id="af476-174">Wie bereits erwähnt, sollten Sie als eine angefügte Eigenschaft registrieren, wenn Sie die Vererbung von Eigenschaftswerten verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="af476-174">As mentioned before, you should register as an attached property if you want to use property value inheritance.</span></span>

### <span data-ttu-id="af476-175">Erstellen einer angefügten Eigenschaft<a name="how_do_i_create_attached_properties"></a></span><span class="sxs-lookup"><span data-stu-id="af476-175">How to Create an Attached Property <a name="how_do_i_create_attached_properties"></a></span></span>

<span data-ttu-id="af476-176">Wenn die Klasse die angefügte Eigenschaft ausschließlich für die Verwendung in anderen Typen definiert, muss die Klasse nicht von <xref:System.Windows.DependencyObject>abgeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="af476-176">If your class is defining the attached property strictly for use on other types, then the class does not have to derive from <xref:System.Windows.DependencyObject>.</span></span> <span data-ttu-id="af476-177">Sie müssen jedoch von <xref:System.Windows.DependencyObject> abgeleitet werden, wenn Sie dem WPF-Gesamtmodell folgen, wenn die angefügte Eigenschaft auch eine Abhängigkeits Eigenschaft ist.</span><span class="sxs-lookup"><span data-stu-id="af476-177">But you do need to derive from <xref:System.Windows.DependencyObject> if you follow the overall WPF model of having your attached property also be a dependency property.</span></span>

<span data-ttu-id="af476-178">Definieren Sie die angefügte Eigenschaft als Abhängigkeits Eigenschaft, indem Sie ein `public static readonly` Feld vom Typ <xref:System.Windows.DependencyProperty>deklarieren.</span><span class="sxs-lookup"><span data-stu-id="af476-178">Define your attached property as a dependency property by declaring a `public static readonly` field of type <xref:System.Windows.DependencyProperty>.</span></span> <span data-ttu-id="af476-179">Sie definieren dieses Feld, indem Sie den Rückgabewert der <xref:System.Windows.DependencyProperty.RegisterAttached%2A>-Methode verwenden.</span><span class="sxs-lookup"><span data-stu-id="af476-179">You define this field by using the return value of the <xref:System.Windows.DependencyProperty.RegisterAttached%2A> method.</span></span> <span data-ttu-id="af476-180">Der Feldname muss mit dem Namen der angefügten Eigenschaft, angefügt an die Zeichenfolge `Property`, dem festgelegten WPF-Muster für die Benennung der identifizierenden Felder im Vergleich zu den Eigenschaften, die Sie darstellen, entsprechen.</span><span class="sxs-lookup"><span data-stu-id="af476-180">The field name must match the attached property name, appended with the string `Property`, to follow the established WPF pattern of naming the identifying fields versus the properties that they represent.</span></span> <span data-ttu-id="af476-181">Der angefügte Eigenschaften Anbieter muss auch statische **Get_PropertyName_** und **Set_PropertyName_** Methoden als Accessoren für die angefügte Eigenschaft bereitstellen. Wenn dies nicht der Fall ist, kann das Eigenschaften System die angefügte Eigenschaft nicht verwenden.</span><span class="sxs-lookup"><span data-stu-id="af476-181">The attached property provider must also provide static **Get_PropertyName_** and **Set_PropertyName_** methods as accessors for the attached property; failing to do this will result in the property system being unable to use your attached property.</span></span>

> [!NOTE]
> <span data-ttu-id="af476-182">Wenn Sie den Get-Accessor der angefügten Eigenschaft weglassen, funktioniert die Datenbindung für die Eigenschaft nicht in Entwurfs Tools wie Visual Studio und Blend für Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="af476-182">If you omit the attached property's get accessor, data binding on the property will not work in design tools, such as Visual Studio and Blend for Visual Studio.</span></span>

#### <a name="the-get-accessor"></a><span data-ttu-id="af476-183">Der Get-Accessor</span><span class="sxs-lookup"><span data-stu-id="af476-183">The Get Accessor</span></span>

<span data-ttu-id="af476-184">Die Signatur für den **Get_PropertyName_** -Accessor muss wie folgt lauten:</span><span class="sxs-lookup"><span data-stu-id="af476-184">The signature for the **Get_PropertyName_** accessor must be:</span></span>

`public static object GetPropertyName(object target)`

- <span data-ttu-id="af476-185">Das `target`-Objekt kann als spezifischerer Typ in Ihrer Implementierung angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="af476-185">The `target` object can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="af476-186">Beispielsweise gibt die <xref:System.Windows.Controls.DockPanel.GetDock%2A?displayProperty=nameWithType>-Methode den-Parameter als <xref:System.Windows.UIElement>ein, da die angefügte-Eigenschaft nur für <xref:System.Windows.UIElement>-Instanzen festgelegt werden soll.</span><span class="sxs-lookup"><span data-stu-id="af476-186">For example, the <xref:System.Windows.Controls.DockPanel.GetDock%2A?displayProperty=nameWithType> method types the parameter as <xref:System.Windows.UIElement>, because the attached property is only intended to be set on <xref:System.Windows.UIElement> instances.</span></span>

- <span data-ttu-id="af476-187">Der Rückgabewert kann als spezifischerer Typ in Ihrer Implementierung angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="af476-187">The return value can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="af476-188">Beispielsweise gibt die <xref:System.Windows.Controls.DockPanel.GetDock%2A>-Methode Sie als <xref:System.Windows.Controls.Dock>ein, da der Wert nur auf diese Enumeration festgelegt werden kann.</span><span class="sxs-lookup"><span data-stu-id="af476-188">For example, the <xref:System.Windows.Controls.DockPanel.GetDock%2A> method types it as <xref:System.Windows.Controls.Dock>, because the value can only be set to that enumeration.</span></span>

#### <a name="the-set-accessor"></a><span data-ttu-id="af476-189">Der Set-Accessor</span><span class="sxs-lookup"><span data-stu-id="af476-189">The Set Accessor</span></span>

<span data-ttu-id="af476-190">Die Signatur für den **Set_PropertyName_** -Accessor muss wie folgt lauten:</span><span class="sxs-lookup"><span data-stu-id="af476-190">The signature for the **Set_PropertyName_** accessor must be:</span></span>

`public static void SetPropertyName(object target, object value)`

- <span data-ttu-id="af476-191">Das `target`-Objekt kann als spezifischerer Typ in Ihrer Implementierung angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="af476-191">The `target` object can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="af476-192">Beispielsweise gibt die <xref:System.Windows.Controls.DockPanel.SetDock%2A>-Methode Sie als <xref:System.Windows.UIElement>ein, da die angefügte-Eigenschaft nur für <xref:System.Windows.UIElement>-Instanzen festgelegt werden soll.</span><span class="sxs-lookup"><span data-stu-id="af476-192">For example, the <xref:System.Windows.Controls.DockPanel.SetDock%2A> method types it as <xref:System.Windows.UIElement>, because the attached property is only intended to be set on <xref:System.Windows.UIElement> instances.</span></span>

- <span data-ttu-id="af476-193">Das `value`-Objekt kann als spezifischerer Typ in Ihrer Implementierung angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="af476-193">The `value` object can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="af476-194">Beispielsweise gibt die <xref:System.Windows.Controls.DockPanel.SetDock%2A>-Methode Sie als <xref:System.Windows.Controls.Dock>ein, da der Wert nur auf diese Enumeration festgelegt werden kann.</span><span class="sxs-lookup"><span data-stu-id="af476-194">For example, the <xref:System.Windows.Controls.DockPanel.SetDock%2A> method types it as <xref:System.Windows.Controls.Dock>, because the value can only be set to that enumeration.</span></span> <span data-ttu-id="af476-195">Denken Sie daran, dass der Wert für diese Methode die Eingabe des XAML-Loaders ist, wenn sie Ihre angefügte Eigenschaft in einer Verwendung der angefügten Eigenschaft im Markup erkennt.</span><span class="sxs-lookup"><span data-stu-id="af476-195">Remember that the value for this method is the input coming from the XAML loader when it encounters your attached property in an attached property usage in markup.</span></span> <span data-ttu-id="af476-196">Diese Eingabe ist der Wert, der als XAML-Attributwert im Markup angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="af476-196">That input is the value specified as a XAML attribute value in markup.</span></span> <span data-ttu-id="af476-197">Aus diesem Grund muss die Typkonvertierung, das Wertserialisierungsprogramm oder die Unterstützung von Markuperweiterungen für den verwendeten Typ vorhanden sein, damit der entsprechende Typ aus dem Attributwert (der letztendlich nur eine Zeichenfolge ist) erstellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="af476-197">Therefore there must be type conversion, value serializer, or markup extension support for the type you use, such that the appropriate type can be created from the attribute value (which is ultimately just a string).</span></span>

<span data-ttu-id="af476-198">Das folgende Beispiel zeigt die Registrierung der Abhängigkeits Eigenschaft (mit der <xref:System.Windows.DependencyProperty.RegisterAttached%2A>-Methode) sowie die **Get_PropertyName_** -und **Set_PropertyName_** Accessoren.</span><span class="sxs-lookup"><span data-stu-id="af476-198">The following example shows the dependency property registration (using the <xref:System.Windows.DependencyProperty.RegisterAttached%2A> method), as well as the **Get_PropertyName_** and **Set_PropertyName_** accessors.</span></span> <span data-ttu-id="af476-199">Im Beispiel ist der Name der angefügten Eigenschaft `IsBubbleSource`.</span><span class="sxs-lookup"><span data-stu-id="af476-199">In the example, the attached property name is `IsBubbleSource`.</span></span> <span data-ttu-id="af476-200">Deshalb müssen die Accessoren `GetIsBubbleSource` und `SetIsBubbleSource` genannt werden.</span><span class="sxs-lookup"><span data-stu-id="af476-200">Therefore, the accessors must be named `GetIsBubbleSource` and `SetIsBubbleSource`.</span></span>

[!code-csharp[WPFAquariumSln#RegisterAttachedBubbler](~/samples/snippets/csharp/VS_Snippets_Wpf/WPFAquariumSln/CSharp/WPFAquariumObjects/Class1.cs#registerattachedbubbler)]
[!code-vb[WPFAquariumSln#RegisterAttachedBubbler](~/samples/snippets/visualbasic/VS_Snippets_Wpf/WPFAquariumSln/visualbasic/wpfaquariumobjects/class1.vb#registerattachedbubbler)]

#### <a name="attached-property-attributes"></a><span data-ttu-id="af476-201">Attribute von angefügten Eigenschaften</span><span class="sxs-lookup"><span data-stu-id="af476-201">Attached Property Attributes</span></span>

<span data-ttu-id="af476-202">WPF definiert mehrere .NET-Attribute, die für die Bereitstellung von Informationen zu angefügten Eigenschaften für reflektionsprozesse und für typische Benutzer von Reflektion und Eigenschafts Informationen wie Designern vorgesehen sind.</span><span class="sxs-lookup"><span data-stu-id="af476-202">WPF defines several .NET attributes that are intended to provide information about attached properties to reflection processes, and to typical users of reflection and property information such as designers.</span></span> <span data-ttu-id="af476-203">Da angefügte Eigenschaften einen uneingeschränkten Bereich haben, benötigen Entwickler eine Möglichkeit, Benutzer nicht durch eine globale Liste aller angefügten Eigenschaften zu überwältigen, die in einer bestimmten Implementierung von Technologie definiert sind, die XAML verwendet.</span><span class="sxs-lookup"><span data-stu-id="af476-203">Because attached properties have a type of unlimited scope, designers need a way to avoid overwhelming users with a global list of all the attached properties that are defined in a particular technology implementation that uses XAML.</span></span> <span data-ttu-id="af476-204">Die .NET-Attribute, die von WPF für angefügte Eigenschaften definiert werden, können verwendet werden, um die Situationen festzustellen, in denen eine angefügte Eigenschaft in einem Eigenschaften Fenster angezeigt werden soll.</span><span class="sxs-lookup"><span data-stu-id="af476-204">The .NET attributes that WPF defines for attached properties can be used to scope the situations where a given attached property should be shown in a properties window.</span></span> <span data-ttu-id="af476-205">Sie sollten diese Attribute auch auf Ihre eigenen benutzerdefinierten angefügten Eigenschaften anwenden.</span><span class="sxs-lookup"><span data-stu-id="af476-205">You might consider applying these attributes for your own custom attached properties also.</span></span> <span data-ttu-id="af476-206">Der Zweck und die Syntax der .NET-Attribute werden auf den entsprechenden Referenzseiten beschrieben:</span><span class="sxs-lookup"><span data-stu-id="af476-206">The purpose and syntax of the .NET attributes is described on the appropriate reference pages:</span></span>

- <xref:System.Windows.AttachedPropertyBrowsableAttribute>

- <xref:System.Windows.AttachedPropertyBrowsableForChildrenAttribute>

- <xref:System.Windows.AttachedPropertyBrowsableForTypeAttribute>

- <xref:System.Windows.AttachedPropertyBrowsableWhenAttributePresentAttribute>

## <span data-ttu-id="af476-207">Weitere Informationen zu angefügten Eigenschaften<a name="more"></a></span><span class="sxs-lookup"><span data-stu-id="af476-207">Learning More About Attached Properties <a name="more"></a></span></span>

- <span data-ttu-id="af476-208">Weitere Informationen zum Erstellen einer angefügten Eigenschaft finden Sie unter [Registrieren einer angefügten Eigenschaft](how-to-register-an-attached-property.md).</span><span class="sxs-lookup"><span data-stu-id="af476-208">For more information on creating an attached property, see [Register an Attached Property](how-to-register-an-attached-property.md).</span></span>

- <span data-ttu-id="af476-209">Weitergehende Verwendungsszenarios für Abhängigkeitseigenschaften und angefügte Eigenschaften finden Sie unter [Benutzerdefinierte Abhängigkeitseigenschaften](custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="af476-209">For more advanced usage scenarios for dependency properties and attached properties, see [Custom Dependency Properties](custom-dependency-properties.md).</span></span>

- <span data-ttu-id="af476-210">Sie können auch eine Eigenschaft als angefügte Eigenschaft und als Abhängigkeitseigenschaft registrieren, dann jedoch trotzdem „Wrapper“-Implementierungen offenlegen.</span><span class="sxs-lookup"><span data-stu-id="af476-210">You can also register a property as an attached property, and as a dependency property, but then still expose "wrapper" implementations.</span></span> <span data-ttu-id="af476-211">In diesem Fall kann die Eigenschaft entweder auf das Element festgelegt werden, oder auf ein beliebiges Element über die angefügte XAML-Eigenschaftssyntax.</span><span class="sxs-lookup"><span data-stu-id="af476-211">In this case, the property can be set either on that element, or on any element through the XAML attached property syntax.</span></span> <span data-ttu-id="af476-212">Ein Beispiel für eine Eigenschaft mit einem geeigneten Szenario für Standard-und angefügte Verwendungen ist <xref:System.Windows.FrameworkElement.FlowDirection%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="af476-212">An example of a property with an appropriate scenario for both standard and attached usages is <xref:System.Windows.FrameworkElement.FlowDirection%2A?displayProperty=nameWithType>.</span></span>

## <a name="see-also"></a><span data-ttu-id="af476-213">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="af476-213">See also</span></span>

- <xref:System.Windows.DependencyProperty>
- [<span data-ttu-id="af476-214">Übersicht über Abhängigkeitseigenschaften</span><span class="sxs-lookup"><span data-stu-id="af476-214">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="af476-215">Benutzerdefinierte Abhängigkeitseigenschaften</span><span class="sxs-lookup"><span data-stu-id="af476-215">Custom Dependency Properties</span></span>](custom-dependency-properties.md)
- [<span data-ttu-id="af476-216">Übersicht über XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="af476-216">XAML Overview (WPF)</span></span>](../../../desktop-wpf/fundamentals/xaml.md)
- [<span data-ttu-id="af476-217">Registrieren einer angefügten Eigenschaft</span><span class="sxs-lookup"><span data-stu-id="af476-217">Register an Attached Property</span></span>](how-to-register-an-attached-property.md)
