---
title: Initialisierung für Objektelemente außerhalb einer Objektstruktur
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- logical tree [WPF]
- visual tree [WPF]
- elements [WPF], initializing
- initializing elements [WPF]
ms.assetid: 7b8dfc9b-46ac-4ce8-b7bb-035734d688b7
ms.openlocfilehash: 219edcbdb09b4edbd9c5ec31e0def77cce6379bd
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/04/2018
ms.locfileid: "33545531"
---
# <a name="initialization-for-object-elements-not-in-an-object-tree"></a><span data-ttu-id="bb070-102">Initialisierung für Objektelemente außerhalb einer Objektstruktur</span><span class="sxs-lookup"><span data-stu-id="bb070-102">Initialization for Object Elements Not in an Object Tree</span></span>
<span data-ttu-id="bb070-103">Einige Aspekte der [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]-Initialisierung werden für Prozesse zurückgestellt, die sich in der Regel darauf verlassen, dass das Element entweder mit einer logischen Struktur oder einer visuellen Struktur verbunden wird.</span><span class="sxs-lookup"><span data-stu-id="bb070-103">Some aspects of [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] initialization are deferred to processes that typically rely on that element being connected to either the logical tree or visual tree.</span></span> <span data-ttu-id="bb070-104">Dieses Thema beschreibt die Schritte, die möglicherweise erforderlich sind, um ein Element zu initialisieren, das nicht mit einer dieser Strukturen verbunden ist.</span><span class="sxs-lookup"><span data-stu-id="bb070-104">This topic describes the steps that may be necessary in order to initialize an element that is not connected to either tree.</span></span>  
  
 
  
## <a name="elements-and-the-logical-tree"></a><span data-ttu-id="bb070-105">Elemente und die logische Struktur</span><span class="sxs-lookup"><span data-stu-id="bb070-105">Elements and the Logical Tree</span></span>  
 <span data-ttu-id="bb070-106">Beim Erstellen einer Instanz einer [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]-Klasse im Code sollten Sie bedenken, dass verschiedene Aspekte der Objektinitialisierung für eine [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]-Klasse absichtlich keinen Teil des Codes sind, der beim Aufrufen des Klassenkonstruktors ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="bb070-106">When you create an instance of a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] class in code, you should be aware that several aspects of object initialization for a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] class are deliberately not a part of the code that is executed when calling the class constructor.</span></span> <span data-ttu-id="bb070-107">Insbesondere für eine Steuerelementklasse ist der Großteil der visuellen Darstellung dieses Steuerelements nicht vom Konstruktor definiert.</span><span class="sxs-lookup"><span data-stu-id="bb070-107">Particularly for a control class, most of the visual representation of that control is not defined by the constructor.</span></span> <span data-ttu-id="bb070-108">Stattdessen wird die visuelle Darstellung durch die Vorlage des Steuerelements definiert.</span><span class="sxs-lookup"><span data-stu-id="bb070-108">Instead, the visual representation is defined by the control's template.</span></span> <span data-ttu-id="bb070-109">Die Vorlage stammt möglicherweise aus einer Vielzahl von Quellen, ganz oft wird die Vorlage jedoch aus Designstilen.</span><span class="sxs-lookup"><span data-stu-id="bb070-109">The template potentially comes from a variety of sources, but most often the template is obtained from theme styles.</span></span> <span data-ttu-id="bb070-110">Vorlagen sind eine effektive späte Bindung; die erforderliche Vorlage wird dem fraglichen Steuerelement nicht angefügt, solange das Steuerelement nicht für Layout bereit ist.</span><span class="sxs-lookup"><span data-stu-id="bb070-110">Templates are effectively late-binding; the necessary template is not attached to the control in question until the control is ready for layout.</span></span> <span data-ttu-id="bb070-111">Das Steuerelement ist so lange nicht für Layout bereit, bis es einer logischen Struktur angefügt wird, die eine Verbindung mit einer Renderingoberfläche auf der Stammebene eingeht.</span><span class="sxs-lookup"><span data-stu-id="bb070-111">And the control is not ready for layout until it is attached to a logical tree that connects to a rendering surface at the root.</span></span> <span data-ttu-id="bb070-112">Es ist das Rootebenenelement, dass das Rendering aller untergeordneten Elemente initiiert, so wie in der logischen Struktur definiert.</span><span class="sxs-lookup"><span data-stu-id="bb070-112">It is that root-level element that initiates the rendering of all of its child elements as defined in the logical tree.</span></span>  
  
 <span data-ttu-id="bb070-113">Die visuelle Struktur beteiligt sich auch an diesem Prozess.</span><span class="sxs-lookup"><span data-stu-id="bb070-113">The visual tree also participates in this process.</span></span> <span data-ttu-id="bb070-114">Elemente, die Teil der visuellen Struktur durch die Vorlagen sind, werden ebenfalls nicht vollständig instanziiert, bis sie verbunden sind.</span><span class="sxs-lookup"><span data-stu-id="bb070-114">Elements that are part of the visual tree through the templates are also not fully instantiated until connected.</span></span>  
  
 <span data-ttu-id="bb070-115">Die Folgen dieses Verhaltens sind, dass bestimmte Vorgänge, die auf den fertigen visuellen Merkmalen eines Elements basieren, zusätzliche Schritte erfordern.</span><span class="sxs-lookup"><span data-stu-id="bb070-115">The consequences of this behavior are that certain operations that rely on the completed visual characteristics of an element require additional steps.</span></span> <span data-ttu-id="bb070-116">Ein Beispiel ist, wenn Sie versuchen, visuelle Merkmale einer Klasse abzurufen, die erstellt aber noch nicht einer Struktur angefügt wurde.</span><span class="sxs-lookup"><span data-stu-id="bb070-116">An example is if you are attempting to get the visual characteristics of a class that was constructed but not yet attached to a tree.</span></span> <span data-ttu-id="bb070-117">Z. B. Wenn Sie aufrufen möchten <xref:System.Windows.Media.Imaging.RenderTargetBitmap.Render%2A> auf eine <xref:System.Windows.Media.Imaging.RenderTargetBitmap> und das visuelle Element übergeben ist ein Element, das keine Verbindung mit einer Struktur dieses Element ist nicht visuell abgeschlossen, bevor zusätzliche Schritte ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="bb070-117">For instance, if you want to call <xref:System.Windows.Media.Imaging.RenderTargetBitmap.Render%2A> on a <xref:System.Windows.Media.Imaging.RenderTargetBitmap> and the visual you are passing is an element not connected to a tree, that element is not visually complete until additional initialization steps are completed.</span></span>  
  
### <a name="using-begininit-and-endinit-to-initialize-the-element"></a><span data-ttu-id="bb070-118">Verwenden von BeginInit und EndInit zum Initialisieren des Elements</span><span class="sxs-lookup"><span data-stu-id="bb070-118">Using BeginInit and EndInit to Initialize the Element</span></span>  
 <span data-ttu-id="bb070-119">Verschiedene Klassen in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implementieren die <xref:System.ComponentModel.ISupportInitialize> Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="bb070-119">Various classes in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implement the <xref:System.ComponentModel.ISupportInitialize> interface.</span></span> <span data-ttu-id="bb070-120">Verwenden Sie die <xref:System.ComponentModel.ISupportInitialize.BeginInit%2A> und <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> Methoden der Schnittstelle, die einen Bereich im Code anzugeben, die die Schritte zum Initialisieren enthält (z. B. Festlegen der Eigenschaft, Rendering auswirken Werte).</span><span class="sxs-lookup"><span data-stu-id="bb070-120">You use the <xref:System.ComponentModel.ISupportInitialize.BeginInit%2A> and <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> methods of the interface to denote a region in your code that contains initialization steps (such as setting property values that affect rendering).</span></span> <span data-ttu-id="bb070-121">Nach dem <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> wird aufgerufen, in der Sequenz das Layoutsystem das Element zu verarbeiten und starten Sie die Suche nach einem impliziten Stil kann.</span><span class="sxs-lookup"><span data-stu-id="bb070-121">After <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> is called in the sequence, the layout system can process the element and start looking for an implicit style.</span></span>  
  
 <span data-ttu-id="bb070-122">Wenn das Element Sie Eigenschaften festlegen, wird eine <xref:System.Windows.FrameworkElement> oder <xref:System.Windows.FrameworkContentElement> Sie aufrufen können, die Klassenversionen abgeleitete Klasse <xref:System.Windows.FrameworkElement.BeginInit%2A> und <xref:System.Windows.FrameworkElement.EndInit%2A> anstelle der Umwandlung in <xref:System.ComponentModel.ISupportInitialize>.</span><span class="sxs-lookup"><span data-stu-id="bb070-122">If the element you are setting properties on is a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement> derived class, then you can call the class versions of <xref:System.Windows.FrameworkElement.BeginInit%2A> and <xref:System.Windows.FrameworkElement.EndInit%2A> rather than casting to <xref:System.ComponentModel.ISupportInitialize>.</span></span>  
  
### <a name="sample-code"></a><span data-ttu-id="bb070-123">Beispielcode</span><span class="sxs-lookup"><span data-stu-id="bb070-123">Sample Code</span></span>  
 <span data-ttu-id="bb070-124">Im folgende Beispiel wird Beispielcode für eine Konsolenanwendung, die Darstellung verwendet [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] und <xref:System.Windows.Markup.XamlReader.Load%28System.IO.Stream%29?displayProperty=nameWithType> von einer losen [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] zu veranschaulichen die korrekte Platzierung der Datei <xref:System.Windows.FrameworkElement.BeginInit%2A> und <xref:System.Windows.FrameworkElement.EndInit%2A> um andere [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] Aufrufe das Anpassen der Eigenschaften, die auf das Rendern auswirken.</span><span class="sxs-lookup"><span data-stu-id="bb070-124">The following example is sample code for a console application that uses rendering [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] and <xref:System.Windows.Markup.XamlReader.Load%28System.IO.Stream%29?displayProperty=nameWithType> of a loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file to illustrate the proper placement of <xref:System.Windows.FrameworkElement.BeginInit%2A> and <xref:System.Windows.FrameworkElement.EndInit%2A> around other [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] calls that adjust properties that affect rendering.</span></span>  
  
 <span data-ttu-id="bb070-125">Das Beispiel veranschaulicht nur die Hauptfunktion.</span><span class="sxs-lookup"><span data-stu-id="bb070-125">The example illustrates the main function only.</span></span> <span data-ttu-id="bb070-126">Die Funktionen `Rasterize` und `Save` (nicht dargestellt) sind Hilfsfunktionen, die die Verarbeitung und E/A erledigen.</span><span class="sxs-lookup"><span data-stu-id="bb070-126">The functions `Rasterize` and `Save` (not shown) are utility functions that take care of image processing and IO.</span></span>  
  
 [!code-csharp[InitializeElements#Main](../../../../samples/snippets/csharp/VS_Snippets_Wpf/InitializeElements/CSharp/initializeelements.cs#main)]
 [!code-vb[InitializeElements#Main](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/InitializeElements/VisualBasic/initializeelements.vb#main)]  
  
## <a name="see-also"></a><span data-ttu-id="bb070-127">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="bb070-127">See Also</span></span>  
 [<span data-ttu-id="bb070-128">Strukturen in WPF</span><span class="sxs-lookup"><span data-stu-id="bb070-128">Trees in WPF</span></span>](../../../../docs/framework/wpf/advanced/trees-in-wpf.md)  
 [<span data-ttu-id="bb070-129">Übersicht über das WPF-Grafikrendering</span><span class="sxs-lookup"><span data-stu-id="bb070-129">WPF Graphics Rendering Overview</span></span>](../../../../docs/framework/wpf/graphics-multimedia/wpf-graphics-rendering-overview.md)  
 [<span data-ttu-id="bb070-130">Übersicht über XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="bb070-130">XAML Overview (WPF)</span></span>](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md)
