---
title: Instanzspeicher
ms.date: 03/30/2017
ms.assetid: f2629668-0923-4987-b943-67477131c1e0
ms.openlocfilehash: 26e0c28fe3061306a00e75b0498ef0781b7013c6
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/15/2020
ms.locfileid: "90555795"
---
# <a name="instance-stores"></a><span data-ttu-id="b8698-102">Instanzspeicher</span><span class="sxs-lookup"><span data-stu-id="b8698-102">Instance Stores</span></span>
<span data-ttu-id="b8698-103">Ein Instanzspeicher ist ein logischer Container für Instanzen.</span><span class="sxs-lookup"><span data-stu-id="b8698-103">An instance store is a logical container of instances.</span></span> <span data-ttu-id="b8698-104">An diesem Ort werden die Instanzdaten und die Metadaten gespeichert.</span><span class="sxs-lookup"><span data-stu-id="b8698-104">It is the place where the instance data and metadata is stored.</span></span> <span data-ttu-id="b8698-105">Ein Instanzspeicher bedeutet keine dedizierte physische Speicherung.</span><span class="sxs-lookup"><span data-stu-id="b8698-105">An instance store does not imply dedicated physical storage.</span></span> <span data-ttu-id="b8698-106">Ein Instanzspeicher kann permanente Informationen in einer SQL Server-Datenbank oder nicht permanente Zustandsinformationen in einem Arbeitsspeicher enthalten.</span><span class="sxs-lookup"><span data-stu-id="b8698-106">An instance store could contain durable information in a SQL Server database or non-durable state information in a memory.</span></span> <span data-ttu-id="b8698-107">Im Lieferumfang von [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] ist der SQL-Workflowinstanzspeicher enthalten. Dabei handelt es sich um eine konkrete Implementierung eines Instanzspeichers, der Workflows das Beibehalten von Instanzdaten und Metadaten in einer SQL Server 2005- oder SQL Server 2008-Datenbank ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="b8698-107">The [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] ships with the SQL Workflow Instance Store, which is a concrete implementation of an instance store that allows workflows to persist instance data and metadata into a SQL Server 2005 or SQL Server 2008 database.</span></span> <span data-ttu-id="b8698-108">Außerdem bietet Windows Server AppFabric auch eine konkrete Implementierung eines Instanzspeichers.</span><span class="sxs-lookup"><span data-stu-id="b8698-108">In addition Windows Server App Fabric also provides a concrete implementation of an instance store.</span></span> <span data-ttu-id="b8698-109">Weitere Informationen finden Sie unter [Windows Server App Fabric-Instanzspeicher, Abfrage und Steuerelement Anbieter](/previous-versions/appfabric/ff383417(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="b8698-109">For more information, see [Windows Server App Fabric Instance Store, Query, and Control Providers](/previous-versions/appfabric/ff383417(v=azure.10)).</span></span>  
  
 <span data-ttu-id="b8698-110">Die Persistenz-API ist die Schnittstelle zwischen einem Host und einem Instanzspeicher, die dem Host das Senden von Befehlsanforderungen (z. B. <xref:System.Activities.DurableInstancing.LoadWorkflowCommand> und <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>) an den Instanzspeicher ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="b8698-110">The persistence API is the interface between a host and an instance store that allows the host to send command requests (for example, <xref:System.Activities.DurableInstancing.LoadWorkflowCommand> and <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>) to the instance store.</span></span> <span data-ttu-id="b8698-111">Die konkrete Implementierung dieser API wird als Persistenzanbieter bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="b8698-111">The concrete implementation of this API is called a persistence provider.</span></span> <span data-ttu-id="b8698-112">Der Persistenzanbieter empfängt Anforderungen von einem Host und ändert den Instanzspeicher.</span><span class="sxs-lookup"><span data-stu-id="b8698-112">The persistence provider receives requests from a host and modifies the instance store.</span></span>  
  
 <span data-ttu-id="b8698-113">Hosts und Instanzspeicher sind austauschbar, sodass ein Host mit vielen Instanzspeichern und ein Instanzspeicher auch mit vielen Hosts verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="b8698-113">Hosts and instance stores are pluggable so that a host can be used with many instance stores, and an instance store can be used with many hosts.</span></span> <span data-ttu-id="b8698-114">Ein Instanzspeicher ist normalerweise für die Verwendungsmuster eines bestimmten Hosts optimiert, obwohl für den Instanzspeicher und den Host möglicherweise voneinander unabhängige Lebenszyklen gelten.</span><span class="sxs-lookup"><span data-stu-id="b8698-114">An instance store is typically optimized for the usage patterns of a particular host, although the instance store and host may evolve on independent life cycles.</span></span> <span data-ttu-id="b8698-115">Beispielsweise sind **Workflow Service Host** und **SqlWorkflowInstanceStore** für eine gute Zusammenarbeit konzipiert.</span><span class="sxs-lookup"><span data-stu-id="b8698-115">For example, the **WorkflowServiceHost** and the **SqlWorkflowInstanceStore** are designed to work well together.</span></span> <span data-ttu-id="b8698-116">Sie können einen eigenen Instanzspeicher zum Speichern von Daten und Metadaten von Workflow Dienst Instanzen erstellen und diesen Instanzspeicher mit dem Workflow Service **Host**verwenden.</span><span class="sxs-lookup"><span data-stu-id="b8698-116">You can create your own instance store to persist data and metadata of workflow service instances and use that instance store with the **WorkflowServiceHost**.</span></span> <span data-ttu-id="b8698-117">Beispielsweise können Sie ein OracleWorkflowInstanceStore-Objekt erstellen, bei dem Workflows Informationen in eine Oracle-Datenbank beibehalten können, anstatt diese in einer SQL Server-Datenbank zu speichern.</span><span class="sxs-lookup"><span data-stu-id="b8698-117">For example, you can create an OracleWorkflowInstanceStore that lets workflows persist information into an Oracle database instead of saving them into a SQL Server database.</span></span>  
  
 <span data-ttu-id="b8698-118">Hosts werden häufig mit zusätzlicher Funktionalität erweitert, die die beibehaltenen Objekte ändert.</span><span class="sxs-lookup"><span data-stu-id="b8698-118">It is common for hosts to be extended with additional functionality that modifies the persisted objects.</span></span> <span data-ttu-id="b8698-119">Beispielsweise kann ein instanzpersistenzsystem einen Workflow Host, eine Erweiterung, die den Vorgang "Suspend" unterstützt, und einen SQL-Instanzspeicher aufweisen.</span><span class="sxs-lookup"><span data-stu-id="b8698-119">For example, an instance persistence system may have a workflow host, an extension that supports the "Suspend" operation, and an SQL instance store.</span></span>  <span data-ttu-id="b8698-120">Der Workflowhost kann einen Standardbefehl wie Speichern oder Laden senden, um einen Workflow aus einem Instanzspeicher zu speichern oder zu laden oder um einen Workflow in einem Instanzspeicher zu speichern.</span><span class="sxs-lookup"><span data-stu-id="b8698-120">The workflow host might send a standard command such as Save or Load to save or load a workflow from an instance store or to save a workflow into an instance store.</span></span> <span data-ttu-id="b8698-121">Die Suspend-Erweiterung kann den Befehlen zusätzliche Semantik zum Speichern und Laden von Workflowinstanzen hinzufügen, sodass eine angehaltene Workflowinstanz nicht geladen werden kann.</span><span class="sxs-lookup"><span data-stu-id="b8698-121">The suspend extension might add additional semantics to the commands for saving and loading workflow instances so that a suspended workflow instance cannot be loaded.</span></span> <span data-ttu-id="b8698-122">Der Persistenzanbieter für den SQL-Instanzspeicher versteht die Befehle zum Speichern und Laden von Workflowinstanzen und implementiert die Befehle durch das Aufrufen geeigneter gespeicherter Prozeduren, mit denen die Tabellen persistenter Objekte in einer SQL Server-Datenbank geändert werden.</span><span class="sxs-lookup"><span data-stu-id="b8698-122">The persistence provider for the SQL instance store understands the commands for saving and loading workflow instances, and implements the commands by calling appropriate stored procedures that change the tables of persistent objects in an SQL Server database.</span></span>  
  
 <span data-ttu-id="b8698-123">Ein Host fungiert als Instanzbesitzer innerhalb eines Instanzspeichers.</span><span class="sxs-lookup"><span data-stu-id="b8698-123">A host acts as an instance owner within an instance store.</span></span> <span data-ttu-id="b8698-124">Ein Host kann gleichzeitig als mehr als ein Instanzbesitzer und mit mehr als einem Instanzspeicher fungieren.</span><span class="sxs-lookup"><span data-stu-id="b8698-124">A host may act as more than one instance owner with more than one instance store at the same time.</span></span> <span data-ttu-id="b8698-125">Der Host stellt GUIDs für Instanzschlüssel bereit, die den Instanzen zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="b8698-125">The host provides GUIDs for instance keys associated with the instances.</span></span> <span data-ttu-id="b8698-126">Ein Instanzschlüssel ist ein eindeutiger Alias, der eine Instanz identifiziert.</span><span class="sxs-lookup"><span data-stu-id="b8698-126">An instance key is a unique alias that identifies an instance.</span></span> <span data-ttu-id="b8698-127">Das Persistenzsystem erstellt, aktualisiert und löscht Instanzbesitzerinformationen, während es die von Hosts angeforderten Befehle ausführt.</span><span class="sxs-lookup"><span data-stu-id="b8698-127">The persistence system creates, updates, and deletes instance owner information as it executes commands requested by hosts.</span></span>  
  
 <span data-ttu-id="b8698-128">Die folgende Liste enthält die wichtigen Schritte für die Interaktion des Hosts mit dem Instanzspeicher:</span><span class="sxs-lookup"><span data-stu-id="b8698-128">The following list contains the important steps involved in the host’s interaction with the instance store:</span></span>  
  
1. <span data-ttu-id="b8698-129">Abrufen eines **InstanceStore** von einem Persistenzanbieter.</span><span class="sxs-lookup"><span data-stu-id="b8698-129">Obtain an **InstanceStore** from a persistence provider.</span></span>  

2. <span data-ttu-id="b8698-130">Rufen Sie das Handle für eine-Instanz ab, indem Sie die- <xref:System.Runtime.DurableInstancing.InstanceStore.CreateInstanceHandle%2A> Methode für den **InstanceStore**aufrufen.</span><span class="sxs-lookup"><span data-stu-id="b8698-130">Obtain the handle to an instance by calling the <xref:System.Runtime.DurableInstancing.InstanceStore.CreateInstanceHandle%2A> method on the **InstanceStore**.</span></span>  
  
3. <span data-ttu-id="b8698-131">Rufen Sie Befehle für das Instanzhandle auf, indem Sie die- <xref:System.Runtime.DurableInstancing.InstanceStore.Execute%2A> Methode für den **InstanceStore**aufrufen.</span><span class="sxs-lookup"><span data-stu-id="b8698-131">Invoke commands against the instance handle by calling the <xref:System.Runtime.DurableInstancing.InstanceStore.Execute%2A> method on the **InstanceStore**.</span></span>  
  
4. <span data-ttu-id="b8698-132">Überprüfen <xref:System.Runtime.DurableInstancing.InstanceView> Sie die von **InstanceStore.Exeniedliche** zurückgegebene, um die Ergebnisse der Befehle zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="b8698-132">Examine the <xref:System.Runtime.DurableInstancing.InstanceView> returned by **InstanceStore.Execute** to determine the results of the commands.</span></span>
