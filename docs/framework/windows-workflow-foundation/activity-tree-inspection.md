---
title: Aktivitätsstrukturüberprüfung
ms.date: 03/30/2017
ms.assetid: 100d00e4-8c1d-4233-8fbb-dd443a01155d
ms.openlocfilehash: 692f36d993c3f9c27839122b388a24d0698a2b59
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/12/2020
ms.locfileid: "79183042"
---
# <a name="activity-tree-inspection"></a><span data-ttu-id="f2858-102">Aktivitätsstrukturüberprüfung</span><span class="sxs-lookup"><span data-stu-id="f2858-102">Activity Tree Inspection</span></span>
<span data-ttu-id="f2858-103">Die Aktivitätsstrukturüberprüfung wird von Workflowanwendungsautoren verwendet, um die von der Anwendung gehosteten Workflows zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="f2858-103">Activity tree inspection is used by workflow application authors to inspect the workflows hosted by the application.</span></span> <span data-ttu-id="f2858-104"><xref:System.Activities.WorkflowInspectionServices> ermöglicht die Suche nach bestimmten untergeordneten Aktivitäten in Workflows, die Auflistung einzelner Aktivitäten und ihrer Eigenschaften sowie die Zwischenspeicherung von Laufzeitmetadaten der Aktivitäten zu einem bestimmten Zeitpunkt.</span><span class="sxs-lookup"><span data-stu-id="f2858-104">By using <xref:System.Activities.WorkflowInspectionServices>, workflows can be searched for specific child activities, individual activities and their properties can be enumerated, and runtime metadata of the activities can be cached at a specific time.</span></span> <span data-ttu-id="f2858-105">Dieses Thema bietet eine Übersicht über <xref:System.Activities.WorkflowInspectionServices> und die Verwendung zur Überprüfung einer Aktivitätsstruktur.</span><span class="sxs-lookup"><span data-stu-id="f2858-105">This topic provides an overview of <xref:System.Activities.WorkflowInspectionServices> and how to use it to inspect an activity tree.</span></span>  
  
## <a name="using-workflowinspectionservices"></a><span data-ttu-id="f2858-106">Verwenden von WorkflowInspectionServices</span><span class="sxs-lookup"><span data-stu-id="f2858-106">Using WorkflowInspectionServices</span></span>  
 <span data-ttu-id="f2858-107">Die <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A>-Methode wird verwendet, um alle Aktivitäten in der angegebenen Aktivitätsstruktur aufzulisten.</span><span class="sxs-lookup"><span data-stu-id="f2858-107">The <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> method is used to enumerate all of the activities in the specified activity tree.</span></span> <span data-ttu-id="f2858-108"><xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> gibt ein aufzählbares Element zurück, das alle Aktivitäten in der Struktur umfasst, darunter untergeordnete Elemente, Delegathandler, variable Standardwerte und Argumentausdrücke.</span><span class="sxs-lookup"><span data-stu-id="f2858-108"><xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> returns an enumerable that touches all activities within the tree including children, delegate handlers, variable defaults, and argument expressions.</span></span> <span data-ttu-id="f2858-109">Im folgenden Beispiel wird eine Workflowdefinition mithilfe der Elemente <xref:System.Activities.Statements.Sequence>, <xref:System.Activities.Statements.While>, <xref:System.Activities.Statements.ForEach%601>, <xref:System.Activities.Statements.WriteLine> und Ausdrücken erstellt.</span><span class="sxs-lookup"><span data-stu-id="f2858-109">In the following example, a workflow definition is created by using a <xref:System.Activities.Statements.Sequence>, <xref:System.Activities.Statements.While>, <xref:System.Activities.Statements.ForEach%601>, <xref:System.Activities.Statements.WriteLine>, and expressions.</span></span> <span data-ttu-id="f2858-110">Nachdem die Workflowdefinition erstellt wurde, wird sie aufgerufen. Anschließend wird die `InspectActivity`-Methode aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="f2858-110">After the workflow definition is created, it is invoked and then the `InspectActivity` method is called.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#45](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#45)]  
  
 <span data-ttu-id="f2858-111">Zur Auflistung der Aktivitäten wird <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> für die Stammaktivität und dann erneut rekursiv für jede zurückgegebene Aktivität aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="f2858-111">To enumerate the activities, the <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> is called on the root activity, and again recursively on each returned activity.</span></span> <span data-ttu-id="f2858-112">Im folgenden Beispiel wird das <xref:System.Activities.Activity.DisplayName%2A>-Objekt von den einzelnen Aktivitäten und Ausdrücken in der Aktivitätsstruktur in die Konsole geschrieben.</span><span class="sxs-lookup"><span data-stu-id="f2858-112">In the following example, the <xref:System.Activities.Activity.DisplayName%2A> of each activity and expression in the activity tree is written to the console.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#46](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#46)]  
  
 <span data-ttu-id="f2858-113">Mit diesem Beispielcode wird die folgende Ausgabe erzeugt.</span><span class="sxs-lookup"><span data-stu-id="f2858-113">This sample code provides the following output.</span></span>  
  
 <span data-ttu-id="f2858-114">**List Item 1**</span><span class="sxs-lookup"><span data-stu-id="f2858-114">**List Item 1**</span></span>  
<span data-ttu-id="f2858-115">**Listenelement 2**
**Listenelement 3**
**Listenelement 4**
**Listenelement 5**
**Artikel, die der Sammlung hinzugefügt wurden.** 
 **Sequenzliterale** **\<<-Listenzeichenfolge>>**</span><span class="sxs-lookup"><span data-stu-id="f2858-115">**List Item 2**
**List Item 3**
**List Item 4**
**List Item 5**
**Items added to collection.**
**Sequence** **Literal<List\<String>>**</span></span>  
 <span data-ttu-id="f2858-116">**While**</span><span class="sxs-lookup"><span data-stu-id="f2858-116">**While**</span></span>  
 <span data-ttu-id="f2858-117">**AddToCollection-Zeichenfolge>\<**</span><span class="sxs-lookup"><span data-stu-id="f2858-117">**AddToCollection\<String>**</span></span>  
 <span data-ttu-id="f2858-118">**VariableValue<\<ICollection String>>**</span><span class="sxs-lookup"><span data-stu-id="f2858-118">**VariableValue<ICollection\<String>>**</span></span>  
 <span data-ttu-id="f2858-119">**LambdaValue-Zeichenfolge>\<**</span><span class="sxs-lookup"><span data-stu-id="f2858-119">**LambdaValue\<String>**</span></span>  
 <span data-ttu-id="f2858-120">**LocationReferenceValue<->>\<**</span><span class="sxs-lookup"><span data-stu-id="f2858-120">**LocationReferenceValue<List\<String>>**</span></span>  
 <span data-ttu-id="f2858-121">**LambdaValue\<boolesche>**</span><span class="sxs-lookup"><span data-stu-id="f2858-121">**LambdaValue\<Boolean>**</span></span>  
 <span data-ttu-id="f2858-122">**LocationReferenceValue<->>\<**</span><span class="sxs-lookup"><span data-stu-id="f2858-122">**LocationReferenceValue<List\<String>>**</span></span>  
 <span data-ttu-id="f2858-123">**ForEach\<String>**</span><span class="sxs-lookup"><span data-stu-id="f2858-123">**ForEach\<String>**</span></span>  
 <span data-ttu-id="f2858-124">**VariableValue<IEnumerable\<String>>**</span><span class="sxs-lookup"><span data-stu-id="f2858-124">**VariableValue<IEnumerable\<String>>**</span></span>  
 <span data-ttu-id="f2858-125">**WriteLine**</span><span class="sxs-lookup"><span data-stu-id="f2858-125">**WriteLine**</span></span>  
 <span data-ttu-id="f2858-126">**DelegateArgumentValue-Zeichenfolge>\<**</span><span class="sxs-lookup"><span data-stu-id="f2858-126">**DelegateArgumentValue\<String>**</span></span>  
 <span data-ttu-id="f2858-127">**Sequenz**</span><span class="sxs-lookup"><span data-stu-id="f2858-127">**Sequence**</span></span>  
 <span data-ttu-id="f2858-128">**WriteLine**</span><span class="sxs-lookup"><span data-stu-id="f2858-128">**WriteLine**</span></span>  
 <span data-ttu-id="f2858-129">**Literal\<String>** Um eine bestimmte Aktivität abzurufen, anstatt <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> alle Aktivitäten aufzuzählen, wird verwendet.</span><span class="sxs-lookup"><span data-stu-id="f2858-129">**Literal\<String>**  To retrieve a specific activity instead of enumerating all of the activities, <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> is used.</span></span> <span data-ttu-id="f2858-130">Sowohl mit <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> als auch mit <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> wird die Zwischenspeicherung von Metadaten ausgeführt, wenn `WorkflowInspectionServices.CacheMetadata` zuvor nicht aufgerufen wurde.</span><span class="sxs-lookup"><span data-stu-id="f2858-130">Both <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> and <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> perform metadata caching if `WorkflowInspectionServices.CacheMetadata` has not been previously called.</span></span> <span data-ttu-id="f2858-131">Wenn <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> aufgerufen wurde, basiert <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> auf den vorhandenen Metadaten.</span><span class="sxs-lookup"><span data-stu-id="f2858-131">If <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> has been called then <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> is based on the existing metadata.</span></span> <span data-ttu-id="f2858-132">Falls also seit dem letzten Aufruf von <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> Strukturänderungen vorgenommen wurden, kann <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> zu unerwarteten Ergebnissen führen.</span><span class="sxs-lookup"><span data-stu-id="f2858-132">Therefore, if tree changes have been made since the last call to <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A>, <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> might give unexpected results.</span></span> <span data-ttu-id="f2858-133">Wenn nach dem Aufruf <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A>Änderungen am Workflow vorgenommen wurden, können <xref:System.Activities.Validation.ActivityValidationServices> <xref:System.Activities.Validation.ActivityValidationServices.Validate%2A> Metadaten durch Aufrufen der Methode erneut zwischengespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="f2858-133">If changes have been made to the workflow after calling <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A>, metadata can be re-cached by calling the <xref:System.Activities.Validation.ActivityValidationServices> <xref:System.Activities.Validation.ActivityValidationServices.Validate%2A> method.</span></span> <span data-ttu-id="f2858-134">Das Zwischenspeichern von Metadaten wird im nächsten Abschnitt erläutert.</span><span class="sxs-lookup"><span data-stu-id="f2858-134">Caching metadata is discussed in the next section.</span></span>  
  
### <a name="caching-metadata"></a><span data-ttu-id="f2858-135">Zwischenspeichern von Metadaten</span><span class="sxs-lookup"><span data-stu-id="f2858-135">Caching Metadata</span></span>  
 <span data-ttu-id="f2858-136">Durch die Zwischenspeicherung der Metadaten für eine Aktivität wird eine Beschreibung der Argumente, Variablen, untergeordneten Aktivitäten und Aktivitätsdelegaten der Aktivität erstellt und validiert.</span><span class="sxs-lookup"><span data-stu-id="f2858-136">Caching the metadata for an activity builds and validates a description of the activity’s arguments, variables, child activities, and activity delegates.</span></span> <span data-ttu-id="f2858-137">Metadaten werden standardmäßig von der Laufzeit zwischengespeichert, wenn eine Aktivität zur Ausführung vorbereitet wird.</span><span class="sxs-lookup"><span data-stu-id="f2858-137">Metadata, by default, is cached by the runtime when an activity is prepared for execution.</span></span> <span data-ttu-id="f2858-138">Wenn ein Workflowhostautor die Metadaten für eine Aktivität oder eine Aktivitätsstruktur vorher zwischenspeichern möchte, um beispielsweise den gesamten Aufwand im Voraus zu erfassen, kann <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> verwendet werden, um die Metadaten zu dem gewünschten Zeitpunkt zwischenzuspeichern.</span><span class="sxs-lookup"><span data-stu-id="f2858-138">If a workflow host author wants to cache the metadata for an activity or activity tree before this, for example to take all of the cost upfront, then <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> can be used to cache the metadata at the desired time.</span></span>
