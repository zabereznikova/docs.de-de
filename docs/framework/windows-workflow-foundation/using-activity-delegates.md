---
title: Verwenden von Aktivitätsdelegaten
ms.date: 03/30/2017
ms.assetid: e33cf876-8979-440b-9b23-4a12d1139960
ms.openlocfilehash: 66a03187336475ed377fda032506cfa66d3daf58
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/26/2020
ms.locfileid: "96293298"
---
# <a name="using-activity-delegates"></a><span data-ttu-id="ac69c-102">Verwenden von Aktivitätsdelegaten</span><span class="sxs-lookup"><span data-stu-id="ac69c-102">Using Activity Delegates</span></span>

<span data-ttu-id="ac69c-103">Aktivitätsdelegaten ermöglichen es Aktivitätsautoren, Rückrufe mit bestimmten Signaturen verfügbar zu machen, für die Benutzer der Aktivität aktivitätsbasierte Handler bereitstellen können.</span><span class="sxs-lookup"><span data-stu-id="ac69c-103">Activity delegates enable activity authors to expose callbacks with specific signatures, for which users of the activity can provide activity-based handlers.</span></span> <span data-ttu-id="ac69c-104">Es sind zwei Typen von Aktivitätsdelegaten verfügbar: <xref:System.Activities.ActivityAction%601> wird verwendet, um Aktivitätsdelegaten zu definieren, die keinen Rückgabewert haben, und <xref:System.Activities.ActivityFunc%601> wird verwendet, um Aktivitätsdelegaten zu definieren, die einen Rückgabewert aufweisen.</span><span class="sxs-lookup"><span data-stu-id="ac69c-104">Two types of activity delegates are available: <xref:System.Activities.ActivityAction%601> is used to define activity delegates that do not have a return value, and <xref:System.Activities.ActivityFunc%601> is used to define activity delegates that do have a return value.</span></span>

<span data-ttu-id="ac69c-105">Aktivitätsdelegaten sind in Szenarien nützlich, in denen eine untergeordnete Aktivität auf die Verwendung einer bestimmten Signatur beschränkt werden muss.</span><span class="sxs-lookup"><span data-stu-id="ac69c-105">Activity delegates are useful in scenarios where a child activity must be constrained to having a certain signature.</span></span> <span data-ttu-id="ac69c-106">Eine <xref:System.Activities.Statements.While>-Aktivität kann z. B. einen beliebigen Typ von untergeordneter Aktivität ohne Einschränkungen enthalten. Der Text einer <xref:System.Activities.Statements.ForEach%601>-Aktivität ist jedoch ein <xref:System.Activities.ActivityAction%601>-Element, und die untergeordnete Aktivität, die letztlich von <xref:System.Activities.Statements.ForEach%601> ausgeführt wird, muss über ein <xref:System.Activities.InArgument%601>-Element verfügen, das den gleichen Typ wie die Member der Auflistung aufweist, die das <xref:System.Activities.Statements.ForEach%601>-Element auflistet.</span><span class="sxs-lookup"><span data-stu-id="ac69c-106">For example, a <xref:System.Activities.Statements.While> activity can contain any type of child activity with no constraints, but the body of a <xref:System.Activities.Statements.ForEach%601> activity is an <xref:System.Activities.ActivityAction%601>, and the child activity that is ultimately executed by <xref:System.Activities.Statements.ForEach%601> must have an <xref:System.Activities.InArgument%601> that is the same type of the members of the collection that the <xref:System.Activities.Statements.ForEach%601> enumerates.</span></span>

## <a name="using-activityaction"></a><span data-ttu-id="ac69c-107">Verwenden von ActivityAction</span><span class="sxs-lookup"><span data-stu-id="ac69c-107">Using ActivityAction</span></span>

<span data-ttu-id="ac69c-108">Mehrere [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)]-Aktivitäten verwenden Aktivitätsaktionen, z. B. die <xref:System.Activities.Statements.Catch>-Aktivität und die <xref:System.Activities.Statements.ForEach%601>-Aktivität.</span><span class="sxs-lookup"><span data-stu-id="ac69c-108">Several [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] activities use activity actions, such as the <xref:System.Activities.Statements.Catch> activity and the <xref:System.Activities.Statements.ForEach%601> activity.</span></span> <span data-ttu-id="ac69c-109">In jedem Fall stellt die Aktivitätsaktion einen Speicherort da, an dem der Workflowautor beim Verfassen eines Workflows mithilfe einer dieser Aktivitäten eine Aktivität angibt, um das gewünschte Verhalten bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="ac69c-109">In each case, the activity action represents a location where the workflow author specifies an activity to provide the desired behavior when composing a workflow using one of these activities.</span></span> <span data-ttu-id="ac69c-110">Im folgenden Beispiel wird eine <xref:System.Activities.Statements.ForEach%601>-Aktivität verwendet, um Text im Konsolenfenster anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="ac69c-110">In the following example, a <xref:System.Activities.Statements.ForEach%601> activity is used to display text to the console window.</span></span> <span data-ttu-id="ac69c-111">Der Text von <xref:System.Activities.Statements.ForEach%601> wird mit einer <xref:System.Activities.ActivityAction%601> angegeben, die dem Typ von <xref:System.Activities.Statements.ForEach%601>, einer Zeichenfolge, entspricht.</span><span class="sxs-lookup"><span data-stu-id="ac69c-111">The body of the <xref:System.Activities.Statements.ForEach%601> is specified by using an <xref:System.Activities.ActivityAction%601> that matches the type of the <xref:System.Activities.Statements.ForEach%601> which is string.</span></span> <span data-ttu-id="ac69c-112">Die im <xref:System.Activities.Statements.WriteLine> angegebene <xref:System.Activities.ActivityDelegate.Handler%2A>-Aktivität weist ein <xref:System.Activities.Statements.WriteLine.Text%2A>-Argument auf, das an die Zeichenfolgenwerte in der Auflistung gebunden ist, die die <xref:System.Activities.Statements.ForEach%601>-Aktivität durchläuft.</span><span class="sxs-lookup"><span data-stu-id="ac69c-112">The <xref:System.Activities.Statements.WriteLine> activity specified in the <xref:System.Activities.ActivityDelegate.Handler%2A> has its <xref:System.Activities.Statements.WriteLine.Text%2A> argument bound to the string values in the collection that the <xref:System.Activities.Statements.ForEach%601> activity iterates.</span></span>

[!code-csharp[CFX_ActivityExample#6](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#6)]

<span data-ttu-id="ac69c-113">Das actionArgument wird verwendet, um die einzelnen Elemente in der Auflistung in die WriteLine zu verschieben.</span><span class="sxs-lookup"><span data-stu-id="ac69c-113">The actionArgument is used to flow the individual items in the collection to the WriteLine.</span></span> <span data-ttu-id="ac69c-114">Wenn der Workflow aufgerufen wird, wird die folgende Ausgabe in der Konsole angezeigt.</span><span class="sxs-lookup"><span data-stu-id="ac69c-114">When the workflow is invoked, the following output is displayed to the console.</span></span>

```console
HelloWorld.
```

<span data-ttu-id="ac69c-115">In den Beispielen in diesem Thema wird die Syntax zur Objektinitialisierung verwendet.</span><span class="sxs-lookup"><span data-stu-id="ac69c-115">The examples in this topic use object initialization syntax.</span></span> <span data-ttu-id="ac69c-116">Die Objektinitialisierungssyntax kann eine nützliche Möglichkeit zum Erstellen von Workflowdefinitionen per Code darstellen, da diese eine hierarchische Ansicht der Aktivitäten im Workflow bietet und die Beziehung zwischen den Aktivitäten anzeigt.</span><span class="sxs-lookup"><span data-stu-id="ac69c-116">Object initialization syntax can be a useful way to create workflow definitions in code because it provides a hierarchical view of the activities in the workflow and shows the relationship between the activities.</span></span> <span data-ttu-id="ac69c-117">Die Verwendung der Objektinitialisierungssyntax ist keine Anforderung der programmgesteuerten Erstellung von Workflows.</span><span class="sxs-lookup"><span data-stu-id="ac69c-117">There is no requirement to use object initialization syntax when you programmatically create workflows.</span></span> <span data-ttu-id="ac69c-118">Das folgende Beispiel entspricht von der Funktion her dem vorherigen Beispiel.</span><span class="sxs-lookup"><span data-stu-id="ac69c-118">The following example is functionally equivalent to the previous example.</span></span>

[!code-csharp[CFX_ActivityExample#7](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#7)]

<span data-ttu-id="ac69c-119">Weitere Informationen zu Objektinitialisierern finden Sie unter Gewusst [wie: Initialisieren von Objekten ohne Aufruf eines Konstruktors (c#-Programmier Handbuch)](../../csharp/programming-guide/classes-and-structs/how-to-initialize-objects-by-using-an-object-initializer.md) und Gewusst [wie: Deklarieren eines Objekts mithilfe eines Objektinitialisierers (Visual Basic)](../../visual-basic/programming-guide/language-features/objects-and-classes/how-to-declare-an-object-by-using-an-object-initializer.md).</span><span class="sxs-lookup"><span data-stu-id="ac69c-119">For more information about object initializers, see [How to: Initialize Objects without Calling a Constructor (C# Programming Guide)](../../csharp/programming-guide/classes-and-structs/how-to-initialize-objects-by-using-an-object-initializer.md) and [How to: Declare an Object by Using an Object Initializer (Visual Basic)](../../visual-basic/programming-guide/language-features/objects-and-classes/how-to-declare-an-object-by-using-an-object-initializer.md).</span></span>

<span data-ttu-id="ac69c-120">Im folgenden Beispiel wird eine <xref:System.Activities.Statements.TryCatch>-Aktivität in einem Workflow verwendet.</span><span class="sxs-lookup"><span data-stu-id="ac69c-120">In the following example, a <xref:System.Activities.Statements.TryCatch> activity is used in a workflow.</span></span> <span data-ttu-id="ac69c-121">Eine <xref:System.ApplicationException> wird vom Workflow ausgelöst und wird von einer <xref:System.Activities.Statements.Catch%601>-Aktivität behandelt.</span><span class="sxs-lookup"><span data-stu-id="ac69c-121">An <xref:System.ApplicationException> is thrown by the workflow, and is handled by a <xref:System.Activities.Statements.Catch%601> activity.</span></span> <span data-ttu-id="ac69c-122">Der Handler für die Aktivitäts <xref:System.Activities.Statements.Catch%601> Aktion der Aktivität ist eine <xref:System.Activities.Statements.WriteLine> -Aktivität, und das Ausnahme Detail wird mithilfe von übertragen `ex` <xref:System.Activities.DelegateInArgument%601> .</span><span class="sxs-lookup"><span data-stu-id="ac69c-122">The handler for the <xref:System.Activities.Statements.Catch%601> activity's activity action is a <xref:System.Activities.Statements.WriteLine> activity, and the exception detail is flowed through to it using the `ex` <xref:System.Activities.DelegateInArgument%601>.</span></span>

[!code-csharp[CFX_WorkflowApplicationExample#33](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#33)]

<span data-ttu-id="ac69c-123">Verwenden Sie beim Erstellen einer benutzerdefinierten Aktivität, die ein <xref:System.Activities.ActivityAction%601>-Element definiert, ein <xref:System.Activities.Statements.InvokeAction%601>-Element, um das Aufrufen dieses <xref:System.Activities.ActivityAction%601>-Elements zu modellieren.</span><span class="sxs-lookup"><span data-stu-id="ac69c-123">When creating a custom activity that defines an <xref:System.Activities.ActivityAction%601>, use an <xref:System.Activities.Statements.InvokeAction%601> to model the invocation of that <xref:System.Activities.ActivityAction%601>.</span></span> <span data-ttu-id="ac69c-124">In diesem Beispiel wird eine benutzerdefinierte `WriteLineWithNotification`-Aktivität definiert.</span><span class="sxs-lookup"><span data-stu-id="ac69c-124">In this example, a custom `WriteLineWithNotification` activity is defined.</span></span> <span data-ttu-id="ac69c-125">Diese Aktivität besteht aus einem <xref:System.Activities.Statements.Sequence>-Element, das eine <xref:System.Activities.Statements.WriteLine>-Aktivität gefolgt von einem <xref:System.Activities.Statements.InvokeAction%601>-Element enthält. Dieses Element ruft ein <xref:System.Activities.ActivityAction%601>-Element auf, das ein Zeichenfolgenargument verwendet.</span><span class="sxs-lookup"><span data-stu-id="ac69c-125">This activity is composed of a <xref:System.Activities.Statements.Sequence> that contains a <xref:System.Activities.Statements.WriteLine> activity followed by an <xref:System.Activities.Statements.InvokeAction%601> that invokes an <xref:System.Activities.ActivityAction%601> that takes one string argument.</span></span>

[!code-csharp[CFX_ActivityExample#1](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#1)]

<span data-ttu-id="ac69c-126">Wenn mit der `WriteLineWithNotification`-Aktivität ein Workflow erstellt wird, gibt der Workflowautor die gewünschte benutzerdefinierte Logik in der <xref:System.Activities.ActivityDelegate.Handler%2A>-Eigenschaft der Aktivitätsaktion an.</span><span class="sxs-lookup"><span data-stu-id="ac69c-126">When a workflow is created by using the `WriteLineWithNotification` activity, the workflow author specifies the desired custom logic in the activity action’s <xref:System.Activities.ActivityDelegate.Handler%2A>.</span></span> <span data-ttu-id="ac69c-127">In diesem Beispiel wird ein Workflow mit der `WriteLineWithNotification`-Aktivität erstellt, und eine <xref:System.Activities.Statements.WriteLine>-Aktivität wird als <xref:System.Activities.ActivityDelegate.Handler%2A>-Eigenschaft verwendet.</span><span class="sxs-lookup"><span data-stu-id="ac69c-127">In this example, a workflow is created that use the `WriteLineWithNotification` activity, and a <xref:System.Activities.Statements.WriteLine> activity is used as the <xref:System.Activities.ActivityDelegate.Handler%2A>.</span></span>

[!code-csharp[CFX_ActivityExample#2](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#2)]

<span data-ttu-id="ac69c-128">Es gibt mehrere generische Versionen von <xref:System.Activities.Statements.InvokeAction%601> und <xref:System.Activities.ActivityAction%601> zum Übergeben von einem oder mehreren Argumenten.</span><span class="sxs-lookup"><span data-stu-id="ac69c-128">There are multiple generic versions of <xref:System.Activities.Statements.InvokeAction%601> and <xref:System.Activities.ActivityAction%601> provided for passing one or more arguments.</span></span>

## <a name="using-activityfunc"></a><span data-ttu-id="ac69c-129">Verwenden von ActivityFunc</span><span class="sxs-lookup"><span data-stu-id="ac69c-129">Using ActivityFunc</span></span>

<span data-ttu-id="ac69c-130"><xref:System.Activities.ActivityAction%601> ist nützlich, wenn es keinen Ergebniswert der Aktivität gibt, und <xref:System.Activities.ActivityFunc%601> wird verwendet, wenn ein Ergebniswert zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="ac69c-130"><xref:System.Activities.ActivityAction%601> is useful when there is no result value from the activity, and <xref:System.Activities.ActivityFunc%601> is used when a result value is returned.</span></span> <span data-ttu-id="ac69c-131">Verwenden Sie beim Erstellen einer benutzerdefinierten Aktivität, die ein <xref:System.Activities.ActivityFunc%601>-Element definiert, ein <xref:System.Activities.Expressions.InvokeFunc%601>-Element, um das Aufrufen dieses <xref:System.Activities.ActivityFunc%601>-Elements zu modellieren.</span><span class="sxs-lookup"><span data-stu-id="ac69c-131">When creating a custom activity that defines an <xref:System.Activities.ActivityFunc%601>, use an <xref:System.Activities.Expressions.InvokeFunc%601> to model the invocation of that <xref:System.Activities.ActivityFunc%601>.</span></span> <span data-ttu-id="ac69c-132">Im folgenden Beispiel wird eine `WriteFillerText` -Aktivität definiert.</span><span class="sxs-lookup"><span data-stu-id="ac69c-132">In the following example, a `WriteFillerText` activity is defined.</span></span> <span data-ttu-id="ac69c-133">Um den Füllzeichentext anzugeben, wird ein <xref:System.Activities.Expressions.InvokeFunc%601>-Element angegeben, das ein ganzzahliges Argument verwendet und über ein Zeichenfolgenergebnis verfügt.</span><span class="sxs-lookup"><span data-stu-id="ac69c-133">To supply the filler text, an <xref:System.Activities.Expressions.InvokeFunc%601> is specified that takes an integer argument and has a string result.</span></span> <span data-ttu-id="ac69c-134">Nachdem der Füllzeichentext abgerufen wurde, wird er mit einer <xref:System.Activities.Statements.WriteLine>-Aktivität auf der Konsole angezeigt.</span><span class="sxs-lookup"><span data-stu-id="ac69c-134">Once the filler text is retrieved, it is displayed to the console using a <xref:System.Activities.Statements.WriteLine> activity.</span></span>

[!code-csharp[CFX_ActivityExample#3](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#3)]

<span data-ttu-id="ac69c-135">Um den Text anzugeben, müssen Sie eine Aktivität verwenden, die ein `int`-Argument verwendet und über ein Zeichenfolgenergebnis verfügt.</span><span class="sxs-lookup"><span data-stu-id="ac69c-135">To supply the text, an activity must be used that takes one `int` argument and has a string result.</span></span> <span data-ttu-id="ac69c-136">In diesem Beispiel wird eine `TextGenerator`-Aktivität veranschaulicht, die diese Anforderungen erfüllt.</span><span class="sxs-lookup"><span data-stu-id="ac69c-136">This example shows a `TextGenerator` activity that meets these requirements.</span></span>

[!code-csharp[CFX_ActivityExample#4](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#4)]

<span data-ttu-id="ac69c-137">Um die `TextGenerator`-Aktivität mit der `WriteFillerText`-Aktivität zu verwenden, geben Sie diese als <xref:System.Activities.ActivityDelegate.Handler%2A>-Eigenschaft an.</span><span class="sxs-lookup"><span data-stu-id="ac69c-137">To use the `TextGenerator` activity with the `WriteFillerText` activity, specify it as the <xref:System.Activities.ActivityDelegate.Handler%2A>.</span></span>

[!code-csharp[CFX_ActivityExample#5](~/samples/snippets/csharp/VS_Snippets_CFX/CFX_ActivityExample/cs/Program.cs#5)]
