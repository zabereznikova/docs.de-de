---
title: Workflowsicherheit
ms.date: 03/30/2017
helpviewer_keywords:
- programming [WF], workflow security
ms.assetid: d712a566-f435-44c0-b8c0-49298e84b114
ms.openlocfilehash: 2979f8e50b7fc0d0fab419a89e708517fd271be8
ms.sourcegitcommit: 9bd8f213b50f0e1a73e03bd1e840c917fbd6d20a
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 10/26/2018
ms.locfileid: "50135115"
---
# <a name="workflow-security"></a><span data-ttu-id="32399-102">Workflowsicherheit</span><span class="sxs-lookup"><span data-stu-id="32399-102">Workflow Security</span></span>
<span data-ttu-id="32399-103">Windows Workflow Foundation (WF) ist in eine Reihe verschiedener Technologien, wie z. B. Microsoft SQL Server und Windows Communication Foundation (WCF) integriert.</span><span class="sxs-lookup"><span data-stu-id="32399-103">Windows Workflow Foundation (WF) is integrated with several different technologies, such as Microsoft SQL Server and Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="32399-104">Die Interaktion mit diesen Technologien kann zu Sicherheitsproblemen für den Workflow führen, falls diese nicht ordnungsgemäß durchgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="32399-104">Interacting with these technologies may introduce security issues into your workflow if done improperly.</span></span>

## <a name="persistence-security-concerns"></a><span data-ttu-id="32399-105">Sicherheitsaspekte der Persistenz</span><span class="sxs-lookup"><span data-stu-id="32399-105">Persistence Security Concerns</span></span>

1.  <span data-ttu-id="32399-106">Workflows, die eine <xref:System.Activities.Statements.Delay>-Aktivität und Persistenz verwenden, müssen von einem Dienst erneut aktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="32399-106">Workflows that use a <xref:System.Activities.Statements.Delay> activity and persistence need to be reactivated by a service.</span></span> <span data-ttu-id="32399-107">Windows AppFabric verwendet den Workflowverwaltungsdienst (WMS), um Workflows mit abgelaufenen Zeitgebern erneut zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="32399-107">Windows AppFabric uses the Workflow Management Service (WMS) to reactivate workflows with expired timers.</span></span> <span data-ttu-id="32399-108">WMS erstellt einen <xref:System.ServiceModel.WorkflowServiceHost> zum Hosten des erneut aktivierten Workflows.</span><span class="sxs-lookup"><span data-stu-id="32399-108">WMS creates a <xref:System.ServiceModel.WorkflowServiceHost> to host the reactivated workflow.</span></span> <span data-ttu-id="32399-109">Wenn der WMS-Dienst beendet wird, werden beibehaltene Workflows nicht erneut aktiviert, wenn deren Zeitgeber ablaufen.</span><span class="sxs-lookup"><span data-stu-id="32399-109">If the WMS service is stopped, persisted workflows will not be reactivated when their timers expire.</span></span>

2.  <span data-ttu-id="32399-110">Die permanente Instanziierung sollte vor dem Zugriff durch böswillige Entitäten außerhalb der Anwendungsdomäne geschützt werden.</span><span class="sxs-lookup"><span data-stu-id="32399-110">Access to durable instancing should be protected against malicious entities external to the application domain.</span></span> <span data-ttu-id="32399-111">Darüber hinaus sollten Entwickler sicherstellen, dass schädlicher Code nicht in derselben Anwendungsdomäne wie der Code für die permanente Instanziierung ausgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="32399-111">In addition, developers should ensure that malicious code can't be executed in the same application domain as the durable instancing code.</span></span>

3.  <span data-ttu-id="32399-112">Die permanente Instanziierung sollte nicht mit erweiterten Berechtigungen (Administrator) ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="32399-112">Durable instancing should not be run with elevated (Administrator) permissions.</span></span>

4.  <span data-ttu-id="32399-113">Die Daten, die außerhalb der Anwendungsdomäne verarbeitet werden, sollten geschützt werden.</span><span class="sxs-lookup"><span data-stu-id="32399-113">Data being processed outside the application domain should be protected.</span></span>

5.  <span data-ttu-id="32399-114">Anwendungen, die eine Sicherheitsisolation erfordern, sollten nicht dieselbe Instanz wie die Schemaabstraktion verwenden.</span><span class="sxs-lookup"><span data-stu-id="32399-114">Applications that require security isolation should not share the same instance of the schema abstraction.</span></span> <span data-ttu-id="32399-115">Derartige Anwendungen sollten verschiedene Speicheranbieter oder Speicheranbieter verwenden, die für die Verwendung unterschiedlicher Speicherinstanziierungen konfiguriert wurden.</span><span class="sxs-lookup"><span data-stu-id="32399-115">Such applications should use different store providers, or store providers configured to use different store instantiations.</span></span>

## <a name="sql-server-security-concerns"></a><span data-ttu-id="32399-116">SQL Server-Sicherheitsaspekte</span><span class="sxs-lookup"><span data-stu-id="32399-116">SQL Server Security Concerns</span></span>

-   <span data-ttu-id="32399-117">Wenn eine hohe Zahl an untergeordneten Aktivitäten, Speicherorten, Lesezeichen, Hosterweiterungen oder Bereichen verwendet wird oder wenn Lesezeichen mit sehr großen Nutzlasten verwendet werden, kann es zu einer Überlastung des Arbeitsspeichers kommen. Außerdem kann während des Persistenzvorgangs eine unangemessen hohe Menge an Datenbankspeicherplatz zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="32399-117">When large numbers of child activities, locations, bookmarks, host extensions, or scopes are used, or when bookmarks with very large payloads are used, memory can be exhausted, or undue amounts of database space can be allocated during persistence.</span></span> <span data-ttu-id="32399-118">Sie können dieses Risiko reduzieren, indem Sie die Sicherheit auf Objekt- und Datenbankebene verwenden.</span><span class="sxs-lookup"><span data-stu-id="32399-118">This can be mitigated by using object-level and database-level security.</span></span>

-   <span data-ttu-id="32399-119">Bei der Verwendung von <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> muss der Instanzspeicher gesichert werden.</span><span class="sxs-lookup"><span data-stu-id="32399-119">When using <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>, the instance store must be secured.</span></span> <span data-ttu-id="32399-120">Weitere Informationen finden Sie unter [bewährte Methoden für SQL Server](https://go.microsoft.com/fwlink/?LinkId=164972).</span><span class="sxs-lookup"><span data-stu-id="32399-120">For more information, see [SQL Server Best Practices](https://go.microsoft.com/fwlink/?LinkId=164972).</span></span>

-   <span data-ttu-id="32399-121">Vertrauliche Daten im Instanzspeicher sollten verschlüsselt werden.</span><span class="sxs-lookup"><span data-stu-id="32399-121">Sensitive data in the instance store should be encrypted.</span></span> <span data-ttu-id="32399-122">Weitere Informationen finden Sie unter [SQL-Sicherheitsverschlüsselung](https://go.microsoft.com/fwlink/?LinkId=164976).</span><span class="sxs-lookup"><span data-stu-id="32399-122">For more information, see [SQL Security Encryption](https://go.microsoft.com/fwlink/?LinkId=164976).</span></span>

-   <span data-ttu-id="32399-123">Da die Datenbank-Verbindungszeichenfolge häufig in einer Konfigurationsdatei enthalten ist, sollte Sicherheit auf Windows-Ebene (ACL) verwendet werden, um sicherzustellen, dass die Konfigurationsdatei (normalerweise "Web.Config") sicher ist und dass keine Anmelde- und Kennwortdaten in der Verbindungszeichenfolge enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="32399-123">Since the database connection string is often included in a configuration file, windows-level security (ACL) should be used to ensure that the configuration file (Web.Config usually) is secure, and that login and password information are not included in the connection string.</span></span> <span data-ttu-id="32399-124">Die Windows-Authentifizierung sollte stattdessen zwischen der Datenbank und dem Webserver verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="32399-124">Windows authentication should be used between the database and the web server instead.</span></span>

## <a name="considerations-for-workflowservicehost"></a><span data-ttu-id="32399-125">Überlegungen zu WorkflowServiceHost</span><span class="sxs-lookup"><span data-stu-id="32399-125">Considerations for WorkflowServiceHost</span></span>

-   <span data-ttu-id="32399-126">Windows Communication Foundation (WCF)-Endpunkte, die in Workflows verwendet, sollten geschützt werden.</span><span class="sxs-lookup"><span data-stu-id="32399-126">Windows Communication Foundation (WCF) endpoints used in workflows should be secured.</span></span> <span data-ttu-id="32399-127">Weitere Informationen finden Sie unter [Sicherheitsübersicht](https://go.microsoft.com/fwlink/?LinkID=164975).</span><span class="sxs-lookup"><span data-stu-id="32399-127">For more information, see [WCF Security Overview](https://go.microsoft.com/fwlink/?LinkID=164975).</span></span>

-   <span data-ttu-id="32399-128">Sie können die Autorisierung auf Hostebene mit <xref:System.ServiceModel.ServiceAuthorizationManager> implementieren.</span><span class="sxs-lookup"><span data-stu-id="32399-128">Host-level authorization can be implemented by using <xref:System.ServiceModel.ServiceAuthorizationManager>.</span></span> <span data-ttu-id="32399-129">Finden Sie unter [so wird's gemacht: Erstellen eines benutzerdefinierten Autorisierungs-Managers für einen Dienst](https://go.microsoft.com/fwlink/?LinkId=192228) Details.</span><span class="sxs-lookup"><span data-stu-id="32399-129">See [How To: Create a Custom Authorization Manager for a Service](https://go.microsoft.com/fwlink/?LinkId=192228) for details.</span></span>

-   <span data-ttu-id="32399-130">Der ServiceSecurityContext für die eingehende Nachricht ist über den Zugriff auf OperationContext auch im Workflow verfügbar.</span><span class="sxs-lookup"><span data-stu-id="32399-130">The ServiceSecurityContext for the incoming message is also available from within workflow by accessing OperationContext.</span></span>

## <a name="wf-security-pack-ctp"></a><span data-ttu-id="32399-131">WF-Sicherheitspaket CTP</span><span class="sxs-lookup"><span data-stu-id="32399-131">WF Security Pack CTP</span></span>
 <span data-ttu-id="32399-132">Das Microsoft WF-Sicherheitspaket CTP 1 ist die erste Community Technology Preview (CTP) Version von einer Gruppe von Aktivitäten und deren Implementierung auf Basis [Windows Workflow Foundation](https://msdn.microsoft.com/netframework/aa663328.aspx)in [.NET Framework 4](https://msdn.microsoft.com/netframework/default.aspx) (WF (4) und die [Windows Identity Foundation (WIF)](https://msdn.microsoft.com/security/aa570351.aspx).</span><span class="sxs-lookup"><span data-stu-id="32399-132">The Microsoft WF Security Pack CTP 1 is the first community technology preview (CTP) release of a set of activities and their implementation based on [Windows Workflow Foundation](https://msdn.microsoft.com/netframework/aa663328.aspx)in [.NET Framework 4](https://msdn.microsoft.com/netframework/default.aspx) (WF 4) and the [Windows Identity Foundation (WIF)](https://msdn.microsoft.com/security/aa570351.aspx).</span></span>  <span data-ttu-id="32399-133">Das Microsoft WF-Sicherheitspaket CTP 1 enthält beide Aktivitäten und deren Designer, die veranschaulichen, wie einfach verschiedene sicherheitsrelevante Szenarien mithilfe von Workflows aktiviert werden können, darunter:</span><span class="sxs-lookup"><span data-stu-id="32399-133">The Microsoft WF Security Pack CTP 1 contains both activities and their designers which illustrate how to easily enable various security-related scenarios using workflow, including:</span></span>

1.  <span data-ttu-id="32399-134">Wechseln zu einer Clientidentität im Workflow</span><span class="sxs-lookup"><span data-stu-id="32399-134">Impersonating a client identity in the workflow</span></span>

2.  <span data-ttu-id="32399-135">Workflowinterne Autorisierung, z. B. PrincipalPermission und Validierung von Ansprüchen</span><span class="sxs-lookup"><span data-stu-id="32399-135">In-workflow authorization, such as PrincipalPermission and validation of Claims</span></span>

3.  <span data-ttu-id="32399-136">Authentifiziertes Messaging mit im Workflow angegebenen ClientCredentials, z. B. Benutzername/Kennwort oder ein Token, das von einem Sicherheitstokendienst (STS) abgerufen wurde</span><span class="sxs-lookup"><span data-stu-id="32399-136">Authenticated messaging using ClientCredentials specified in the workflow, such as username/password or a token retrieved from a Security Token Service (STS)</span></span>

4.  <span data-ttu-id="32399-137">Übertragen eines Clientsicherheitstokens an einen Back-End-Dienst (anspruchsbasierte Delegierung) mithilfe von WS-Trust ActAs</span><span class="sxs-lookup"><span data-stu-id="32399-137">Flowing a client security token to a back-end service (claims-based delegation) using WS-Trust ActAs</span></span>

<span data-ttu-id="32399-138">Weitere Informationen und zum Herunterladen der WF-Sicherheitspaket CTP finden Sie unter: [WF-Sicherheitspaket CTP](https://wf.codeplex.com/releases/view/48114)</span><span class="sxs-lookup"><span data-stu-id="32399-138">For more information and to download the WF Security Pack CTP, see: [WF Security Pack CTP](https://wf.codeplex.com/releases/view/48114)</span></span>