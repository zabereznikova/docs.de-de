---
title: Verwenden von WorkflowInvoker und WorkflowApplication
description: Dieser Artikel beschreibt das Workflow Hosting mithilfe von WorkflowInvoker und WorkflowApplication in Windows Workflow Foundation.
ms.date: 03/30/2017
ms.assetid: cd0e583c-a3f9-4fa2-b247-c7b3368c48a7
ms.openlocfilehash: 1cc84afe002615c317309054179abd1af5800e9c
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/26/2020
ms.locfileid: "96254609"
---
# <a name="using-workflowinvoker-and-workflowapplication"></a><span data-ttu-id="9aabd-103">Verwenden von WorkflowInvoker und WorkflowApplication</span><span class="sxs-lookup"><span data-stu-id="9aabd-103">Using WorkflowInvoker and WorkflowApplication</span></span>

<span data-ttu-id="9aabd-104">Windows Workflow Foundation (WF) bietet mehrere Methoden zum Hosting von Workflows.</span><span class="sxs-lookup"><span data-stu-id="9aabd-104">Windows Workflow Foundation (WF) provides several methods of hosting workflows.</span></span> <span data-ttu-id="9aabd-105"><xref:System.Activities.WorkflowInvoker> stellt eine einfache Möglichkeit zum Aufrufen eines Workflows bereit, so als handelte es sich um einen Methodenaufruf, und kann nur für Workflows verwendet werden, die keine Persistenz verwenden.</span><span class="sxs-lookup"><span data-stu-id="9aabd-105"><xref:System.Activities.WorkflowInvoker> provides a simple way for invoking a workflow as if it were a method call and can be used only for workflows that do not use persistence.</span></span> <span data-ttu-id="9aabd-106"><xref:System.Activities.WorkflowApplication> bietet ein umfangreicheres Modell zum Ausführen von Workflows, die Benachrichtigungen über Lebenszyklusereignisse, Ausführungssteuerung, Wiederaufnahme von Lesezeichen und Persistenz enthalten.</span><span class="sxs-lookup"><span data-stu-id="9aabd-106"><xref:System.Activities.WorkflowApplication> provides a richer model for executing workflows that includes notification of lifecycle events, execution control, bookmark resumption, and persistence.</span></span> <span data-ttu-id="9aabd-107"><xref:System.ServiceModel.Activities.WorkflowServiceHost> umfasst die Unterstützung von Messagingaktivitäten und wird hauptsächlich in Verbindung mit Workflowdiensten verwendet.</span><span class="sxs-lookup"><span data-stu-id="9aabd-107"><xref:System.ServiceModel.Activities.WorkflowServiceHost> provides support for messaging activities and is primarily used with workflow services.</span></span> <span data-ttu-id="9aabd-108">In diesem Thema wird das Workflowhosting mit <xref:System.Activities.WorkflowInvoker> und <xref:System.Activities.WorkflowApplication> erläutert.</span><span class="sxs-lookup"><span data-stu-id="9aabd-108">This topic introduces you to workflow hosting with <xref:System.Activities.WorkflowInvoker> and <xref:System.Activities.WorkflowApplication>.</span></span> <span data-ttu-id="9aabd-109">Weitere Informationen zum Hosting von Workflows mit <xref:System.ServiceModel.Activities.WorkflowServiceHost> finden Sie unter Übersicht über [Workflow Dienste](../wcf/feature-details/workflow-services.md) und [Hosting-Workflow Dienste](../wcf/feature-details/hosting-workflow-services-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9aabd-109">For more information about hosting workflows with <xref:System.ServiceModel.Activities.WorkflowServiceHost>, see [Workflow Services](../wcf/feature-details/workflow-services.md) and [Hosting Workflow Services Overview](../wcf/feature-details/hosting-workflow-services-overview.md).</span></span>  
  
## <a name="using-workflowinvoker"></a><span data-ttu-id="9aabd-110">Verwenden von WorkflowInvoker</span><span class="sxs-lookup"><span data-stu-id="9aabd-110">Using WorkflowInvoker</span></span>  

 <span data-ttu-id="9aabd-111"><xref:System.Activities.WorkflowInvoker> bietet ein Modell zum Ausführen eines Workflows, als ob es sich dabei um einen Methodenaufruf handeln würde.</span><span class="sxs-lookup"><span data-stu-id="9aabd-111"><xref:System.Activities.WorkflowInvoker> provides a model for executing a workflow as if it were a method call.</span></span> <span data-ttu-id="9aabd-112">Um einen Workflow mit <xref:System.Activities.WorkflowInvoker> aufzurufen, rufen Sie die <xref:System.Activities.WorkflowInvoker.Invoke%2A>-Methode auf, und übergeben Sie die Workflowdefinition des Workflows, der aufgerufen werden soll.</span><span class="sxs-lookup"><span data-stu-id="9aabd-112">To invoke a workflow using <xref:System.Activities.WorkflowInvoker>, call the <xref:System.Activities.WorkflowInvoker.Invoke%2A> method and pass in the workflow definition of the workflow to invoke.</span></span> <span data-ttu-id="9aabd-113">In diesem Beispiel wird eine <xref:System.Activities.Statements.WriteLine>-Aktivität mit dem <xref:System.Activities.WorkflowInvoker>-Objekt aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="9aabd-113">In this example, a <xref:System.Activities.Statements.WriteLine> activity is invoked using <xref:System.Activities.WorkflowInvoker>.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#1](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#1)]  
  
 <span data-ttu-id="9aabd-114">Beim Aufruf eines Workflow mit dem <xref:System.Activities.WorkflowInvoker>-Objekt wird der Workflow für den aufrufenden Thread ausgeführt, und die <xref:System.Activities.WorkflowInvoker.Invoke%2A>-Methode wird blockiert, bis der Workflow abgeschlossen ist, einschließlich der eventuell anfallenden Leerlaufzeit.</span><span class="sxs-lookup"><span data-stu-id="9aabd-114">When a workflow is invoked using <xref:System.Activities.WorkflowInvoker>, the workflow executes on the calling thread and the <xref:System.Activities.WorkflowInvoker.Invoke%2A> method blocks until the workflow is complete, including any idle time.</span></span> <span data-ttu-id="9aabd-115">Um ein anderes Timeoutintervall für den Abschluss des Workflows zu konfigurieren, verwenden Sie eine der <xref:System.Activities.WorkflowInvoker.Invoke%2A>-Überladungen, die einen <xref:System.TimeSpan>-Parameter annehmen.</span><span class="sxs-lookup"><span data-stu-id="9aabd-115">To configure a time-out interval in which the workflow must complete, use one of the <xref:System.Activities.WorkflowInvoker.Invoke%2A> overloads that takes a <xref:System.TimeSpan> parameter.</span></span> <span data-ttu-id="9aabd-116">In diesem Beispiel wird ein Workflow mit zwei verschiedenen Timeoutintervallen zweimal aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="9aabd-116">In this example, a workflow is invoked twice with two different time-out intervals.</span></span> <span data-ttu-id="9aabd-117">Der erste Workflow wird abgeschlossen, der zweite jedoch nicht.</span><span class="sxs-lookup"><span data-stu-id="9aabd-117">The first workflow complets, but the second does not.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#50](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#50)]  
  
> [!NOTE]
> <span data-ttu-id="9aabd-118">Das <xref:System.TimeoutException>-Objekt wird nur ausgelöst, wenn das Timeoutintervall verstreicht und der Workflow während der Ausführung in den Leerlauf wechselt.</span><span class="sxs-lookup"><span data-stu-id="9aabd-118">The <xref:System.TimeoutException> is only thrown if the time-out interval elapses and the workflow becomes idle during execution.</span></span> <span data-ttu-id="9aabd-119">Ein Workflow, der erst nach dem angegebenen Timeoutintervall abgeschlossen wird, wird dennoch erfolgreich beendet, wenn der Workflow nicht in den Leerlauf wechselt.</span><span class="sxs-lookup"><span data-stu-id="9aabd-119">A workflow that takes longer than the specified time-out interval to complete completes successfully if the workflow does not become idle.</span></span>  
  
 <span data-ttu-id="9aabd-120"><xref:System.Activities.WorkflowInvoker> stellt auch asynchrone Versionen der Aufrufmethode bereit.</span><span class="sxs-lookup"><span data-stu-id="9aabd-120"><xref:System.Activities.WorkflowInvoker> also provides asynchronous versions of the invoke method.</span></span> <span data-ttu-id="9aabd-121">Weitere Informationen finden Sie unter <xref:System.Activities.WorkflowInvoker.InvokeAsync%2A> und <xref:System.Activities.WorkflowInvoker.BeginInvoke%2A>.</span><span class="sxs-lookup"><span data-stu-id="9aabd-121">For more information, see <xref:System.Activities.WorkflowInvoker.InvokeAsync%2A> and <xref:System.Activities.WorkflowInvoker.BeginInvoke%2A>.</span></span>  
  
### <a name="setting-input-arguments-of-a-workflow"></a><span data-ttu-id="9aabd-122">Festlegen der Eingabeargumente eines Workflows</span><span class="sxs-lookup"><span data-stu-id="9aabd-122">Setting Input Arguments of a Workflow</span></span>  

 <span data-ttu-id="9aabd-123">Daten können mit einem Wörterbuch von Eingabeparametern, die nach Argumentname sortiert sind und so den Eingabeargumenten des Workflows zugeordnet werden können, in einen Workflow übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="9aabd-123">Data can be passed into a workflow using a dictionary of input parameters, keyed by argument name, that map to the input arguments of the workflow.</span></span> <span data-ttu-id="9aabd-124">In diesem Beispiel wird ein <xref:System.Activities.Statements.WriteLine>-Objekt aufgerufen, und der Wert für das zugehörige <xref:System.Activities.Statements.WriteLine.Text%2A>-Argument wird mit dem Wörterbuch von Eingabeparametern angegeben.</span><span class="sxs-lookup"><span data-stu-id="9aabd-124">In this example, a <xref:System.Activities.Statements.WriteLine> is invoked and the value for its <xref:System.Activities.Statements.WriteLine.Text%2A> argument is specified using the dictionary of input parameters.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#3](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#3)]  
  
### <a name="retrieving-output-arguments-of-a-workflow"></a><span data-ttu-id="9aabd-125">Abrufen der Ausgabeargumente eines Workflows</span><span class="sxs-lookup"><span data-stu-id="9aabd-125">Retrieving Output Arguments of a Workflow</span></span>  

 <span data-ttu-id="9aabd-126">Die Ausgabeparameter eines Workflows können mit dem Ausgabewörterbuch abgerufen werden. Es wird über den Aufruf von <xref:System.Activities.WorkflowInvoker.Invoke%2A> zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="9aabd-126">The output parameters of a workflow can be obtained using the outputs dictionary that is returned from the call to <xref:System.Activities.WorkflowInvoker.Invoke%2A>.</span></span> <span data-ttu-id="9aabd-127">Im folgenden Beispiel wird ein Workflow aufgerufen, der aus einer einzelnen `Divide`-Aktivität besteht, die über zwei Eingabeargumente und zwei Ausgabeargumente verfügt.</span><span class="sxs-lookup"><span data-stu-id="9aabd-127">The following example invokes a workflow consisting of a single `Divide` activity that has two input arguments and two output arguments.</span></span> <span data-ttu-id="9aabd-128">Beim Aufrufen des Workflows wird das `arguments`-Wörterbuch übergeben, das die Werte für die einzelnen Eingabeargumente sortiert nach Argumentname enthält.</span><span class="sxs-lookup"><span data-stu-id="9aabd-128">When the workflow is invoked, the `arguments` dictionary is passed which contains the values for each input argument, keyed by argument name.</span></span> <span data-ttu-id="9aabd-129">Wenn der Aufruf von `Invoke` zurückgegeben wird, werden die einzelnen Ausgabeargumente nach Argumentname sortiert im `outputs`-Wörterbuch zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="9aabd-129">When the call to `Invoke` returns, each output argument is returned in the `outputs` dictionary, also keyed by argument name.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#120](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#120)]  
  
 [!code-csharp[CFX_WorkflowInvokerExample#20](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#20)]  
  
 <span data-ttu-id="9aabd-130">Wenn der Workflow von <xref:System.Activities.ActivityWithResult> abgeleitet wird, wie z. B. `CodeActivity<TResult>` oder `Activity<TResult>`, und Ausgabeargumente zusätzlich zum gut definierten <xref:System.Activities.Activity%601.Result%2A>-Ausgabeargument vorhanden sind, muss eine nicht generische Überladung von `Invoke` verwendet werden, um die zusätzlichen Argumente abzurufen.</span><span class="sxs-lookup"><span data-stu-id="9aabd-130">If the workflow derives from <xref:System.Activities.ActivityWithResult>, such as `CodeActivity<TResult>` or `Activity<TResult>`, and there are output arguments in addition to the well-defined <xref:System.Activities.Activity%601.Result%2A> output argument, a non-generic overload of `Invoke` must be used in order to retrieve the additional arguments.</span></span> <span data-ttu-id="9aabd-131">Hierzu muss die an `Invoke` übergebene Workflowdefinition den Typ <xref:System.Activities.Activity> aufweisen.</span><span class="sxs-lookup"><span data-stu-id="9aabd-131">To do this, the workflow definition passed into `Invoke` must be of type <xref:System.Activities.Activity>.</span></span> <span data-ttu-id="9aabd-132">In diesem Beispiel wird die `Divide`-Aktivität von `CodeActivity<int>` abgeleitet. Sie wird jedoch als <xref:System.Activities.Activity> deklariert, sodass eine nicht generische Überladung von `Invoke` verwendet wird, die ein Wörterbuch mit Argumenten anstelle eines einzelnen Rückgabewerts zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="9aabd-132">In this example the `Divide` activity derives from `CodeActivity<int>`, but is declared as <xref:System.Activities.Activity> so that a non-generic overload of `Invoke` is used which returns a dictionary of arguments instead of a single return value.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#121](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#121)]  
  
 [!code-csharp[CFX_WorkflowInvokerExample#21](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#21)]  
  
## <a name="using-workflowapplication"></a><span data-ttu-id="9aabd-133">Verwenden von WorkflowApplication</span><span class="sxs-lookup"><span data-stu-id="9aabd-133">Using WorkflowApplication</span></span>  

 <span data-ttu-id="9aabd-134"><xref:System.Activities.WorkflowApplication> stellt einen umfangreichen Satz von Funktionen für die Workflowinstanzverwaltung bereit.</span><span class="sxs-lookup"><span data-stu-id="9aabd-134"><xref:System.Activities.WorkflowApplication> provides a rich set of features for workflow instance management.</span></span> <span data-ttu-id="9aabd-135"><xref:System.Activities.WorkflowApplication> agiert als threadsicherer Proxy des tatsächlichen <xref:System.Activities.Hosting.WorkflowInstance>-Objekts, der die Laufzeit kapselt und Methoden bereitstellt, mit denen Workflowinstanzen erstellt und geladen werden und Lebenszyklusereignisse angehalten, fortgesetzt oder beendet werden bzw. Benachrichtigungen dazu erfolgen können.</span><span class="sxs-lookup"><span data-stu-id="9aabd-135"><xref:System.Activities.WorkflowApplication> acts as a thread safe proxy to the actual  <xref:System.Activities.Hosting.WorkflowInstance>, which encapsulates the runtime, and provides methods for creating and loading workflow instances, pausing and resuming, terminating, and notification of lifecycle events.</span></span> <span data-ttu-id="9aabd-136">Zum Ausführen eines Workflows mit <xref:System.Activities.WorkflowApplication> erstellen Sie das <xref:System.Activities.WorkflowApplication>-Objekt, abonnieren gewünschte Lebenszyklusereignisse, starten den Workflow und warten dann auf die Beendigung.</span><span class="sxs-lookup"><span data-stu-id="9aabd-136">To run a workflow using <xref:System.Activities.WorkflowApplication> you create the <xref:System.Activities.WorkflowApplication>, subscribe to any desired lifecycle events, start the workflow, and then wait for it to finish.</span></span> <span data-ttu-id="9aabd-137">In diesem Beispiel wird eine Workflowdefinition erstellt, die aus einer <xref:System.Activities.Statements.WriteLine>-Aktivität besteht, und es wird eine <xref:System.Activities.WorkflowApplication> unter Verwendung der angegebenen Workflowdefinition erstellt.</span><span class="sxs-lookup"><span data-stu-id="9aabd-137">In this example, a workflow definition that consists of a <xref:System.Activities.Statements.WriteLine> activity is created and a <xref:System.Activities.WorkflowApplication> is created using the specified workflow definition.</span></span> <span data-ttu-id="9aabd-138"><xref:System.Activities.WorkflowApplication.Completed%2A> wird so behandelt, dass der Host bei Abschluss des Workflows benachrichtigt wird, der Workflow mit einem Aufruf von <xref:System.Activities.WorkflowApplication.Run%2A> beginnt und der Host auf den Abschluss des Workflows wartet.</span><span class="sxs-lookup"><span data-stu-id="9aabd-138"><xref:System.Activities.WorkflowApplication.Completed%2A> is handled so the host is notified when the workflow completes, the workflow is started with a call to <xref:System.Activities.WorkflowApplication.Run%2A>, and then the host waits for the workflow to complete.</span></span> <span data-ttu-id="9aabd-139">Nach Abschluss des Workflows wird das <xref:System.Threading.AutoResetEvent>-Objekt festgelegt, und die Hostanwendung kann die Ausführung fortsetzen, wie im folgenden Beispiel gezeigt.</span><span class="sxs-lookup"><span data-stu-id="9aabd-139">When the workflow completes, the <xref:System.Threading.AutoResetEvent> is set and the host application can resume execution, as shown in the following example.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#31](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#31)]  
  
### <a name="workflowapplication-lifecycle-events"></a><span data-ttu-id="9aabd-140">WorkflowApplication-Lebenszyklusereignisse</span><span class="sxs-lookup"><span data-stu-id="9aabd-140">WorkflowApplication Lifecycle Events</span></span>  

 <span data-ttu-id="9aabd-141">Zusätzlich zum Fall <xref:System.Activities.WorkflowApplication.Completed%2A> können Hostautoren benachrichtigt werden, wenn ein Workflow entladen wird (<xref:System.Activities.WorkflowApplication.Unloaded%2A>), abgebrochen wurde (<xref:System.Activities.WorkflowApplication.Aborted%2A>), in den Leerlauf wechselt (<xref:System.Activities.WorkflowApplication.Idle%2A> und <xref:System.Activities.WorkflowApplication.PersistableIdle%2A>) oder eine nicht behandelte Ausnahme auftritt (<xref:System.Activities.WorkflowApplication.OnUnhandledException%2A>).</span><span class="sxs-lookup"><span data-stu-id="9aabd-141">In addition to <xref:System.Activities.WorkflowApplication.Completed%2A>, host authors can be notified when a workflow is unloaded (<xref:System.Activities.WorkflowApplication.Unloaded%2A>), aborted (<xref:System.Activities.WorkflowApplication.Aborted%2A>), becomes idle (<xref:System.Activities.WorkflowApplication.Idle%2A> and <xref:System.Activities.WorkflowApplication.PersistableIdle%2A>), or an unhandled exception occurs (<xref:System.Activities.WorkflowApplication.OnUnhandledException%2A>).</span></span> <span data-ttu-id="9aabd-142">Workflowanwendungsentwickler können diese Benachrichtigungen behandeln und entsprechend reagieren, wie im folgenden Beispiel gezeigt.</span><span class="sxs-lookup"><span data-stu-id="9aabd-142">Workflow application developers can handle these notifications and take appropriate action, as shown in the following example.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#32](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#32)]  
  
### <a name="setting-input-arguments-of-a-workflow"></a><span data-ttu-id="9aabd-143">Festlegen der Eingabeargumente eines Workflows</span><span class="sxs-lookup"><span data-stu-id="9aabd-143">Setting Input Arguments of a Workflow</span></span>  

 <span data-ttu-id="9aabd-144">Daten können beim Start eines Workflows mithilfe eines Wörterbuchs mit Parametern in den Workflow übergeben werden. Diese Vorgehensweise ähnelt dem Übergeben von Daten bei der Verwendung des <xref:System.Activities.WorkflowInvoker>-Objekts.</span><span class="sxs-lookup"><span data-stu-id="9aabd-144">Data can be passed into a workflow as it is started using a dictionary of parameters, similar to the way data is passed in when using <xref:System.Activities.WorkflowInvoker>.</span></span> <span data-ttu-id="9aabd-145">Jedes Element im Wörterbuch ist einem Eingabeargument des angegebenen Workflows zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="9aabd-145">Each item in the dictionary maps to an input argument of the specified workflow.</span></span> <span data-ttu-id="9aabd-146">In diesem Beispiel wird ein Workflow aufgerufen, der aus einer <xref:System.Activities.Statements.WriteLine>-Aktivität besteht, und das zugehörige <xref:System.Activities.Statements.WriteLine.Text%2A>-Argument wird mit dem Wörterbuch von Eingabeparametern angegeben.</span><span class="sxs-lookup"><span data-stu-id="9aabd-146">In this example, a workflow that consists of a <xref:System.Activities.Statements.WriteLine> activity is invoked and its <xref:System.Activities.Statements.WriteLine.Text%2A> argument is specified using the dictionary of input parameters.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#30](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#30)]  
  
### <a name="retrieving-output-arguments-of-a-workflow"></a><span data-ttu-id="9aabd-147">Abrufen der Ausgabeargumente eines Workflows</span><span class="sxs-lookup"><span data-stu-id="9aabd-147">Retrieving Output Arguments of a Workflow</span></span>  

 <span data-ttu-id="9aabd-148">Wenn ein Workflow abgeschlossen wird, können alle Ausgabeargumente in den <xref:System.Activities.WorkflowApplication.Completed%2A>-Handler abgerufen werden, indem auf das <xref:System.Activities.WorkflowApplicationCompletedEventArgs.Outputs%2A?displayProperty=nameWithType>-Wörterbuch zugegriffen wird.</span><span class="sxs-lookup"><span data-stu-id="9aabd-148">When a workflow completes, any output arguments can be retrieved in the <xref:System.Activities.WorkflowApplication.Completed%2A> handler by accessing the <xref:System.Activities.WorkflowApplicationCompletedEventArgs.Outputs%2A?displayProperty=nameWithType> dictionary.</span></span> <span data-ttu-id="9aabd-149">Im folgenden Beispiel wird ein Workflow mit <xref:System.Activities.WorkflowApplication> gehostet.</span><span class="sxs-lookup"><span data-stu-id="9aabd-149">The following example hosts a workflow using <xref:System.Activities.WorkflowApplication>.</span></span> <span data-ttu-id="9aabd-150">Eine- <xref:System.Activities.WorkflowApplication> Instanz wird mithilfe einer Workflow Definition erstellt, die aus einer einzelnen- `DiceRoll` Aktivität besteht.</span><span class="sxs-lookup"><span data-stu-id="9aabd-150">A <xref:System.Activities.WorkflowApplication> instance is constructed using a workflow definition consisting of a single `DiceRoll` activity.</span></span> <span data-ttu-id="9aabd-151">Die `DiceRoll`-Aktivität verfügt über zwei Ausgabeargumente, die die Ergebnisse des Würfelvorgangs darstellen.</span><span class="sxs-lookup"><span data-stu-id="9aabd-151">The `DiceRoll` activity has two output arguments that represent the results of the dice roll operation.</span></span> <span data-ttu-id="9aabd-152">Wenn der Workflow abgeschlossen ist, werden die Ausgaben im <xref:System.Activities.WorkflowApplication.Completed%2A>-Handler abgerufen.</span><span class="sxs-lookup"><span data-stu-id="9aabd-152">When the workflow completes, the outputs are retrieved in the <xref:System.Activities.WorkflowApplication.Completed%2A> handler.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#130](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#130)]  
  
 [!code-csharp[CFX_WorkflowApplicationExample#21](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#21)]  
  
> [!NOTE]
> <span data-ttu-id="9aabd-153">Das <xref:System.Activities.WorkflowApplication>-Objekt und das <xref:System.Activities.WorkflowInvoker>-Objekt akzeptieren ein Wörterbuch mit Eingabeargumenten und geben ein Wörterbuch mit `out`-Argumenten zurück.</span><span class="sxs-lookup"><span data-stu-id="9aabd-153"><xref:System.Activities.WorkflowApplication> and <xref:System.Activities.WorkflowInvoker> take a dictionary of input arguments and return a dictionary of `out` arguments.</span></span> <span data-ttu-id="9aabd-154">Diese Wörterbuchparameter, Eigenschaften und Rückgabewerte haben den Typ `IDictionary<string, object>`.</span><span class="sxs-lookup"><span data-stu-id="9aabd-154">These dictionary parameters, properties, and return values are of type `IDictionary<string, object>`.</span></span> <span data-ttu-id="9aabd-155">Die tatsächliche Instanz der Wörterbuchklasse, die übergeben wird, kann jede Klasse sein, die `IDictionary<string, object>` implementiert.</span><span class="sxs-lookup"><span data-stu-id="9aabd-155">The actual instance of the dictionary class that is passed in can be any class that implements `IDictionary<string, object>`.</span></span> <span data-ttu-id="9aabd-156">In diesen Beispielen wird `Dictionary<string, object>` verwendet.</span><span class="sxs-lookup"><span data-stu-id="9aabd-156">In these examples, `Dictionary<string, object>` is used.</span></span> <span data-ttu-id="9aabd-157">Weitere Informationen zu Wörterbüchern finden Sie unter <xref:System.Collections.Generic.IDictionary%602> und <xref:System.Collections.Generic.Dictionary%602> .</span><span class="sxs-lookup"><span data-stu-id="9aabd-157">For more information about dictionaries, see <xref:System.Collections.Generic.IDictionary%602> and <xref:System.Collections.Generic.Dictionary%602>.</span></span>  
  
### <a name="passing-data-into-a-running-workflow-using-bookmarks"></a><span data-ttu-id="9aabd-158">Übergeben von Daten in einen ausgeführten Workflow mithilfe von Lesezeichen</span><span class="sxs-lookup"><span data-stu-id="9aabd-158">Passing Data into a Running Workflow Using Bookmarks</span></span>  

 <span data-ttu-id="9aabd-159">Lesezeichen stellen den Mechanismus dar, mit dem eine Aktivität passiv abwarten kann, bis sie wieder aufgenommen wird. Sie sind außerdem ein Mechanismus für das Übergeben von Daten in eine ausgeführte Workflowinstanz.</span><span class="sxs-lookup"><span data-stu-id="9aabd-159">Bookmarks are the mechanism by which an activity can passively wait to be resumed and are a mechanism for passing data into a running workflow instance.</span></span> <span data-ttu-id="9aabd-160">Wenn eine Aktivität auf Daten wartet, kann sie ein <xref:System.Activities.Bookmark>-Objekt erstellen und eine Rückrufmethode registrieren, die aufgerufen werden soll, wenn das <xref:System.Activities.Bookmark>-Objekt wieder aufgenommen wird, wie im folgenden Beispiel gezeigt.</span><span class="sxs-lookup"><span data-stu-id="9aabd-160">If an activity is waiting for data, it can create a <xref:System.Activities.Bookmark> and register a callback method to be called when the <xref:System.Activities.Bookmark> is resumed, as shown in the following example.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#15](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#15)]  
  
 <span data-ttu-id="9aabd-161">Bei der Ausführung erstellt die `ReadLine`-Aktivität ein <xref:System.Activities.Bookmark>-Objekt, registriert einen Rückruf und wartet dann darauf, dass das <xref:System.Activities.Bookmark>-Objekt wieder aufgenommen wird.</span><span class="sxs-lookup"><span data-stu-id="9aabd-161">When executed, the `ReadLine` activity creates a <xref:System.Activities.Bookmark>, registers a callback, and then waits for the <xref:System.Activities.Bookmark> to be resumed.</span></span> <span data-ttu-id="9aabd-162">Bei der Wiederaufnahme weist die `ReadLine`-Aktivität die Daten zu, die mit dem <xref:System.Activities.Bookmark>-Objekt an das <xref:System.Activities.Activity%601.Result%2A>-Argument übergeben wurden.</span><span class="sxs-lookup"><span data-stu-id="9aabd-162">When it is resumed, the `ReadLine` activity assigns the data that was passed with the <xref:System.Activities.Bookmark> to its <xref:System.Activities.Activity%601.Result%2A> argument.</span></span> <span data-ttu-id="9aabd-163">In diesem Beispiel wird ein Workflow erstellt, der mit der `ReadLine`-Aktivität den Namen des Benutzers erfasst und im Konsolenfenster anzeigt.</span><span class="sxs-lookup"><span data-stu-id="9aabd-163">In this example, a workflow is created that uses the `ReadLine` activity to gather the user’s name and display it to the console window.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#22](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#22)]  
  
 <span data-ttu-id="9aabd-164">Wenn die `ReadLine`-Aktivität ausgeführt wird, erstellt sie ein <xref:System.Activities.Bookmark>-Objekt mit dem Namen `UserName` und wartet dann darauf, dass das Lesezeichen wieder aufgenommen wird.</span><span class="sxs-lookup"><span data-stu-id="9aabd-164">When the `ReadLine` activity is executed, it creates a <xref:System.Activities.Bookmark> named `UserName` and then waits for the bookmark to be resumed.</span></span> <span data-ttu-id="9aabd-165">Der Host sammelt die gewünschten Daten und nimmt das <xref:System.Activities.Bookmark>-Objekt dann wieder auf.</span><span class="sxs-lookup"><span data-stu-id="9aabd-165">The host collects the desired data and then resumes the <xref:System.Activities.Bookmark>.</span></span> <span data-ttu-id="9aabd-166">Der Workflow wird fortgesetzt, zeigt den Namen an und wird dann abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="9aabd-166">The workflow resumes, displays the name, and then completes.</span></span>  
  
 <span data-ttu-id="9aabd-167">Die Hostanwendung kann den Workflow überprüfen, um zu bestimmen, ob aktive Lesezeichen vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="9aabd-167">The host application can inspect the workflow to determine if there are any active bookmarks.</span></span> <span data-ttu-id="9aabd-168">Hierfür werden die <xref:System.Activities.WorkflowApplication.GetBookmarks%2A>-Methode einer <xref:System.Activities.WorkflowApplication>-Instanz aufgerufen oder die <xref:System.Activities.WorkflowApplicationIdleEventArgs> im <xref:System.Activities.WorkflowApplication.Idle%2A>-Handler überprüft.</span><span class="sxs-lookup"><span data-stu-id="9aabd-168">It can do this by calling the <xref:System.Activities.WorkflowApplication.GetBookmarks%2A> method of a <xref:System.Activities.WorkflowApplication> instance, or by inspecting the <xref:System.Activities.WorkflowApplicationIdleEventArgs> in the <xref:System.Activities.WorkflowApplication.Idle%2A> handler.</span></span>  
  
 <span data-ttu-id="9aabd-169">Das folgende Codebeispiel ähnelt dem vorherigen Beispiel, bis auf die Tatsache, dass die aktiven Lesezeichen aufgelistet werden, bevor das Lesezeichen wieder aufgenommen wird.</span><span class="sxs-lookup"><span data-stu-id="9aabd-169">The following code example is like the previous example except that the active bookmarks are enumerated before the bookmark is resumed.</span></span> <span data-ttu-id="9aabd-170">Der Workflow wird gestartet, und sobald das <xref:System.Activities.Bookmark> erstellt wurde und der Workflow in den Leerlauf übergeht, wird <xref:System.Activities.WorkflowApplication.GetBookmarks%2A> aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="9aabd-170">The workflow is started, and once the <xref:System.Activities.Bookmark> is created and the workflow goes idle, <xref:System.Activities.WorkflowApplication.GetBookmarks%2A> is called.</span></span> <span data-ttu-id="9aabd-171">Wenn der Workflow abgeschlossen ist, wird die folgende Ausgabe in der Konsole angezeigt.</span><span class="sxs-lookup"><span data-stu-id="9aabd-171">When the workflow is completed, the following output is displayed to the console.</span></span>  
  
 <span data-ttu-id="9aabd-172">**Wie heißen Sie?**</span><span class="sxs-lookup"><span data-stu-id="9aabd-172">**What is your name?**</span></span>  
<span data-ttu-id="9aabd-173">**BookmarkName: username-Besitzer Display Name: read-line** 
 **Steve** 
 **Hallo, Steve**</span><span class="sxs-lookup"><span data-stu-id="9aabd-173">**BookmarkName: UserName - OwnerDisplayName: ReadLine**
**Steve**
**Hello, Steve**</span></span>

[!code-csharp[CFX_WorkflowApplicationExample#14](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#14)]  
  
 <span data-ttu-id="9aabd-174">Im folgenden Codebeispiel werden die in den <xref:System.Activities.WorkflowApplicationIdleEventArgs>-Handler einer <xref:System.Activities.WorkflowApplication.Idle%2A>-Instanz übergebenen <xref:System.Activities.WorkflowApplication> überprüft.</span><span class="sxs-lookup"><span data-stu-id="9aabd-174">The following code example inspects the <xref:System.Activities.WorkflowApplicationIdleEventArgs> passed into the <xref:System.Activities.WorkflowApplication.Idle%2A> handler of a <xref:System.Activities.WorkflowApplication> instance.</span></span> <span data-ttu-id="9aabd-175">In diesem Beispiel geht der Workflow in den Leerlauf über und verfügt über ein <xref:System.Activities.Bookmark> mit dem Namen `EnterGuess`, das sich im Besitz einer Aktivität mit dem Namen `ReadInt` befindet.</span><span class="sxs-lookup"><span data-stu-id="9aabd-175">In this example the workflow going idle has one <xref:System.Activities.Bookmark> with a name of `EnterGuess`, owned by an activity named `ReadInt`.</span></span> <span data-ttu-id="9aabd-176">Dieses Codebeispiel basiert auf der Vorgehens [Weise: Ausführen eines Workflows](how-to-run-a-workflow.md), der Teil des [Tutorials "Getting Started](getting-started-tutorial.md)" ist.</span><span class="sxs-lookup"><span data-stu-id="9aabd-176">This code example is based off of [How to: Run a Workflow](how-to-run-a-workflow.md), which is part of the [Getting Started Tutorial](getting-started-tutorial.md).</span></span> <span data-ttu-id="9aabd-177">Wenn der <xref:System.Activities.WorkflowApplication.Idle%2A>-Handler in diesem Schritt geändert wird, um den Code aus diesem Beispiel zu enthalten, wird die folgende Ausgabe angezeigt.</span><span class="sxs-lookup"><span data-stu-id="9aabd-177">If the <xref:System.Activities.WorkflowApplication.Idle%2A> handler in that step is modified to contain the code from this example, the following output is displayed.</span></span>  
  
 <span data-ttu-id="9aabd-178">**BookmarkName: EnterGuess - OwnerDisplayName: ReadInt**</span><span class="sxs-lookup"><span data-stu-id="9aabd-178">**BookmarkName: EnterGuess - OwnerDisplayName: ReadInt**</span></span>

 [!code-csharp[CFX_WorkflowApplicationExample#2](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#2)]  
  
## <a name="summary"></a><span data-ttu-id="9aabd-179">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="9aabd-179">Summary</span></span>  

 <span data-ttu-id="9aabd-180"><xref:System.Activities.WorkflowInvoker> bietet eine einfache Möglichkeit für das Aufrufen von Workflows. Es stellt auch Methoden zum Übergeben von Daten zu Beginn eines Workflows und für das Extrahieren von Daten aus einem abgeschlossenen Workflow bereit, bietet jedoch keine komplexeren Szenarien, in denen <xref:System.Activities.WorkflowApplication> verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="9aabd-180"><xref:System.Activities.WorkflowInvoker> provides a lightweight way to invoke workflows, and although it provides methods for passing data in at the start of a workflow and extracting data from a completed workflow, it does not provide for more complex scenarios which is where <xref:System.Activities.WorkflowApplication> can be used.</span></span>
