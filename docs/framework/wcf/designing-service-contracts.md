---
title: Entwerfen von Dienstverträgen
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- service contracts [WCF]
ms.assetid: 8e89cbb9-ac84-4f0d-85ef-0eb6be0022fd
ms.openlocfilehash: 37723011d69e8ea2ead3f7a30a30898dede054cb
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/12/2020
ms.locfileid: "79176681"
---
# <a name="designing-service-contracts"></a><span data-ttu-id="8c6c0-102">Entwerfen von Dienstverträgen</span><span class="sxs-lookup"><span data-stu-id="8c6c0-102">Designing Service Contracts</span></span>
<span data-ttu-id="8c6c0-103">In diesem Thema wird erläutert, was Dienstverträge sind, wie sie definiert werden, welche Vorgänge verfügbar sind (und die Implikationen des zugrunde liegenden Meldungsaustauschs), welche Datentypen verwendet werden sowie andere Aspekte, die Sie beim Entwerfen von Vorgängen unterstützen, die den Anforderungen Ihres Szenarios gerecht werden.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-103">This topic describes what service contracts are, how they are defined, what operations are available (and the implications for the underlying message exchanges), what data types are used, and other issues that help you design operations that satisfy the requirements of your scenario.</span></span>  
  
## <a name="creating-a-service-contract"></a><span data-ttu-id="8c6c0-104">Erstellen eines Dienstvertrags</span><span class="sxs-lookup"><span data-stu-id="8c6c0-104">Creating a Service Contract</span></span>  
 <span data-ttu-id="8c6c0-105">Dienste machen eine Reihe von Vorgängen verfügbar.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-105">Services expose a number of operations.</span></span> <span data-ttu-id="8c6c0-106">Definieren Sie in Windows Communication Foundation (WCF)-Anwendungen die Vorgänge, indem Sie eine Methode erstellen und mit dem <xref:System.ServiceModel.OperationContractAttribute> Attribut markieren.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-106">In Windows Communication Foundation (WCF) applications, define the operations by creating a method and marking it with the <xref:System.ServiceModel.OperationContractAttribute> attribute.</span></span> <span data-ttu-id="8c6c0-107">Zum Erstellen eines Dienstvertrags gruppieren Sie dann die Vorgänge, indem Sie sie in einer Schnittstelle deklarieren, die mit dem <xref:System.ServiceModel.ServiceContractAttribute>-Attribut markiert wurde, oder indem Sie sie in einer Klasse definieren, die mit dem gleichen Attribut markiert wurde.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-107">Then, to create a service contract, group together your operations, either by declaring them within an interface marked with the <xref:System.ServiceModel.ServiceContractAttribute> attribute, or by defining them in a class marked with the same attribute.</span></span> <span data-ttu-id="8c6c0-108">(Ein einfaches Beispiel finden Sie unter [Gewusst wie: Definieren eines Servicevertrags](how-to-define-a-wcf-service-contract.md).)</span><span class="sxs-lookup"><span data-stu-id="8c6c0-108">(For a basic example, see [How to: Define a Service Contract](how-to-define-a-wcf-service-contract.md).)</span></span>  
  
 <span data-ttu-id="8c6c0-109">Alle Methoden, die <xref:System.ServiceModel.OperationContractAttribute> kein Attribut haben, sind keine Dienstvorgänge und werden nicht von WCF-Diensten verfügbar gemacht.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-109">Any methods that do not have a <xref:System.ServiceModel.OperationContractAttribute> attribute are not service operations and are not exposed by WCF services.</span></span>  
  
 <span data-ttu-id="8c6c0-110">In diesem Thema werden die folgenden Entscheidungspunkte beschrieben, wenn ein Dienstvertrag entworfen wird:</span><span class="sxs-lookup"><span data-stu-id="8c6c0-110">This topic describes the following decision points when designing a service contract:</span></span>  
  
- <span data-ttu-id="8c6c0-111">Ob Klassen oder Schnittstellen verwendet werden sollen</span><span class="sxs-lookup"><span data-stu-id="8c6c0-111">Whether to use classes or interfaces.</span></span>  
  
- <span data-ttu-id="8c6c0-112">Wie die Datentypen angegeben werden, die Sie austauschen möchten</span><span class="sxs-lookup"><span data-stu-id="8c6c0-112">How to specify the data types you want to exchange.</span></span>  
  
- <span data-ttu-id="8c6c0-113">Die Typen von Austauschmustern, die Sie verwenden können</span><span class="sxs-lookup"><span data-stu-id="8c6c0-113">The types of exchange patterns you can use.</span></span>  
  
- <span data-ttu-id="8c6c0-114">Ob Sie einen expliziten Sicherheitsanforderungen-Teil des Vertrags erstellen können</span><span class="sxs-lookup"><span data-stu-id="8c6c0-114">Whether you can make explicit security requirements part of the contract.</span></span>  
  
- <span data-ttu-id="8c6c0-115">Die Einschränkungen für Vorgangseingaben und -ausgaben</span><span class="sxs-lookup"><span data-stu-id="8c6c0-115">The restrictions for operation inputs and outputs.</span></span>  
  
## <a name="classes-or-interfaces"></a><span data-ttu-id="8c6c0-116">Klassen oder Schnittstellen</span><span class="sxs-lookup"><span data-stu-id="8c6c0-116">Classes or Interfaces</span></span>  
 <span data-ttu-id="8c6c0-117">Sowohl Klassen als auch Schnittstellen stellen eine Gruppierung von Funktionen dar, und daher können beide verwendet werden, um einen WCF-Dienstvertrag zu definieren.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-117">Both classes and interfaces represent a grouping of functionality and, therefore, both can be used to define a WCF service contract.</span></span> <span data-ttu-id="8c6c0-118">Es wird allerdings empfohlen, Schnittstellen zu verwenden, da sie Dienstverträge direkt modellieren.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-118">However, it is recommended that you use interfaces because they directly model service contracts.</span></span> <span data-ttu-id="8c6c0-119">Ohne Implementierung definieren Schnittstellen lediglich eine Gruppierung von Methoden mit bestimmten Signaturen.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-119">Without an implementation, interfaces do no more than define a grouping of methods with certain signatures.</span></span> <span data-ttu-id="8c6c0-120">Implementieren Sie eine Dienstvertragsschnittstelle, und Sie haben einen WCF-Dienst implementiert.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-120">Implement a service contract interface and you have implemented a WCF service.</span></span>  
  
 <span data-ttu-id="8c6c0-121">Dienstvertragsschnittstellen bieten dieselben Vorteile wie verwaltete Schnittstellen:</span><span class="sxs-lookup"><span data-stu-id="8c6c0-121">All the benefits of managed interfaces apply to service contract interfaces:</span></span>  
  
- <span data-ttu-id="8c6c0-122">Dienstvertragsschnittstellen können jede Anzahl anderer Dienstvertragsschnittstellen erweitern.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-122">Service contract interfaces can extend any number of other service contract interfaces.</span></span>  
  
- <span data-ttu-id="8c6c0-123">Eine einzelne Klasse kann jede Anzahl von Dienstverträgen implementieren, indem sie diese Dienstvertragsschnittstelle implementiert.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-123">A single class can implement any number of service contracts by implementing those service contract interfaces.</span></span>  
  
- <span data-ttu-id="8c6c0-124">Sie können die Implementierung eines Dienstvertrags bearbeiten, indem Sie die Schnittstellenimplementierung ändern, während der Dienstvertrag unverändert bleibt.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-124">You can modify the implementation of a service contract by changing the interface implementation, while the service contract remains the same.</span></span>  
  
- <span data-ttu-id="8c6c0-125">Sie können verschiedene Versionen eines Diensts erstellen, indem Sie die alte und die neue Schnittstelle implementieren.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-125">You can version your service by implementing the old interface and the new one.</span></span> <span data-ttu-id="8c6c0-126">Alte Clients stellen eine Verbindung mit der ursprünglichen Version her, während neuere Clients eine Verbindung mit der neuen Version herstellen können.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-126">Old clients connect to the original version, while newer clients can connect to the newer version.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="8c6c0-127">Bei der Vererbung von anderen Dienstvertragsschnittstellen können Sie Vorgangseigenschaften, wie z. B. den Name und den Namespace, nicht außer Kraft setzen.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-127">When inheriting from other service contract interfaces, you cannot override operation properties, such as the name or namespace.</span></span> <span data-ttu-id="8c6c0-128">Wenn Sie dies dennoch versuchen, erstellen Sie im aktuellen Dienstvertrag einen neuen Vorgang.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-128">If you attempt to do so, you create a new operation in the current service contract.</span></span>  
  
 <span data-ttu-id="8c6c0-129">Ein Beispiel für die Verwendung einer Schnittstelle zum Erstellen eines Servicevertrags finden Sie unter [Gewusst wie: Erstellen eines Dienstes mit einer Vertragsschnittstelle](./feature-details/how-to-create-a-service-with-a-contract-interface.md).</span><span class="sxs-lookup"><span data-stu-id="8c6c0-129">For an example of using an interface to create a service contract, see [How to: Create a Service with a Contract Interface](./feature-details/how-to-create-a-service-with-a-contract-interface.md).</span></span>  
  
 <span data-ttu-id="8c6c0-130">Sie können allerdings eine Klasse verwenden, um einen Dienstvertrag zu definieren und gleichzeitig zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-130">You can, however, use a class to define a service contract and implement that contract at the same time.</span></span> <span data-ttu-id="8c6c0-131">Der Vorteil des Erstellens Ihrer Dienste durch direktes Anwenden von <xref:System.ServiceModel.ServiceContractAttribute> und <xref:System.ServiceModel.OperationContractAttribute> auf die Klasse und die Methoden der Klasse liegen in der Geschwindigkeit und der Einfachheit.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-131">The advantage of creating your services by applying <xref:System.ServiceModel.ServiceContractAttribute> and <xref:System.ServiceModel.OperationContractAttribute> directly to the class and the methods on the class, respectively, is speed and simplicity.</span></span> <span data-ttu-id="8c6c0-132">Die Nachteile liegen darin begründet, dass verwaltete Klassen keine mehrfache Vererbung unterstützen. Als Ergebnis kann immer nur ein Dienstvertrag gleichzeitig implementiert werden.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-132">The disadvantages are that managed classes do not support multiple inheritance, and as a result they can only implement one service contract at a time.</span></span> <span data-ttu-id="8c6c0-133">Außerdem ändern alle Modifikationen der Klasse oder Methode den öffentlichen Vertrag für diesen Dienst, der unveränderte Clients daran hindern kann, Ihren Dienst zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-133">In addition, any modification to the class or method signatures modifies the public contract for that service, which can prevent unmodified clients from using your service.</span></span> <span data-ttu-id="8c6c0-134">Weitere Informationen finden Sie unter [Implementieren von Serviceverträgen](implementing-service-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="8c6c0-134">For more information, see [Implementing Service Contracts](implementing-service-contracts.md).</span></span>  
  
 <span data-ttu-id="8c6c0-135">Ein Beispiel, das eine Klasse zum Erstellen eines Servicevertrags verwendet und gleichzeitig implementiert, finden Sie unter [Gewusst wie: Erstellen eines Dienstes mit einer Vertragsklasse](./feature-details/how-to-create-a-wcf-contract-with-a-class.md).</span><span class="sxs-lookup"><span data-stu-id="8c6c0-135">For an example that uses a class to create a service contract and implements it at the same time, see [How to: Create a Service with a Contract Class](./feature-details/how-to-create-a-wcf-contract-with-a-class.md).</span></span>  
  
 <span data-ttu-id="8c6c0-136">An diesem Punkt sollten Sie den Unterschied zwischen dem Definieren des Dienstvertrags mithilfe einer Schnittstelle und mithilfe einer Klasse kennen.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-136">At this point, you should understand the difference between defining your service contract by using an interface and by using a class.</span></span> <span data-ttu-id="8c6c0-137">Der nächste Schritt besteht darin, zu entscheiden, welche Daten zwischen einem Dienst und seinen Clients hin- und herübergeben werden können.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-137">The next step is deciding what data can be passed back and forth between a service and its clients.</span></span>  
  
## <a name="parameters-and-return-values"></a><span data-ttu-id="8c6c0-138">Parameter und Rückgabewerte</span><span class="sxs-lookup"><span data-stu-id="8c6c0-138">Parameters and Return Values</span></span>  
 <span data-ttu-id="8c6c0-139">Jeder Vorgang verfügt über einen Rückgabewert und einen Parameter, auch wenn diese `void` sind.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-139">Each operation has a return value and a parameter, even if these are `void`.</span></span> <span data-ttu-id="8c6c0-140">Im Gegensatz zu einer lokalen Methode, in der Sie Verweise auf Objekte von einem Objekt zu einem anderen übergeben können, werden bei Dienstvorgängen keine Verweise auf Objekte übergeben.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-140">However, unlike a local method, in which you can pass references to objects from one object to another, service operations do not pass references to objects.</span></span> <span data-ttu-id="8c6c0-141">Stattdessen werden Kopien der Objekte übergeben.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-141">Instead, they pass copies of the objects.</span></span>  
  
 <span data-ttu-id="8c6c0-142">Das ist wichtig, da jeder in einem Parameter oder einem Rückgabewert verwendete Typ serialisiert werden muss. Das bedeutet, dass es möglich sein muss, ein Objekt dieses Typs in einen Datenstrom und einen Datenstrom in ein Objekt umzuwandeln.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-142">This is significant because each type used in a parameter or return value must be serializable; that is, it must be possible to convert an object of that type into a stream of bytes and from a stream of bytes into an object.</span></span>  
  
 <span data-ttu-id="8c6c0-143">Primitive Typen sind standardmäßig, wie viele Typen in .NET Framework, serialisierbar.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-143">Primitive types are serializable by default, as are many types in the .NET Framework.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="8c6c0-144">Der Wert der Parameternamen in der Vorgangssignatur ist Teil des Vertrags, und die Groß- und Kleinschreibung wird beachtet.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-144">The value of the parameter names in the operation signature are part of the contract and are case sensitive.</span></span> <span data-ttu-id="8c6c0-145">Wenn Sie denselben Parameternamen lokal verwenden, aber den Namen in den veröffentlichten Metadaten ändern möchten, finden Sie entsprechende Informationen unter <xref:System.ServiceModel.MessageParameterAttribute?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-145">If you want to use the same parameter name locally but modify the name in the published metadata, see the <xref:System.ServiceModel.MessageParameterAttribute?displayProperty=nameWithType>.</span></span>  
  
#### <a name="data-contracts"></a><span data-ttu-id="8c6c0-146">Datenverträge</span><span class="sxs-lookup"><span data-stu-id="8c6c0-146">Data Contracts</span></span>  
 <span data-ttu-id="8c6c0-147">Serviceorientierte Anwendungen wie Windows Communication Foundation (WCF)-Anwendungen sind so konzipiert, dass sie mit einer möglichst großen Anzahl von Clientanwendungen sowohl auf Microsoft- als auch auf Nicht-Microsoft-Plattformen zusammenarbeiten.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-147">Service-oriented applications like Windows Communication Foundation (WCF) applications are designed to interoperate with the widest possible number of client applications on both Microsoft and non-Microsoft platforms.</span></span> <span data-ttu-id="8c6c0-148">Für die höchstmögliche Interoperabilität sollten Sie Ihre Typen mit dem <xref:System.Runtime.Serialization.DataContractAttribute>- und dem <xref:System.Runtime.Serialization.DataMemberAttribute>-Attribut markieren, um einen Datenvertrag zu erstellen, der dem Teil des Dienstvertrags entspricht, der die Daten beschreibt, die durch die Dienstvorgänge ausgetauscht werden.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-148">For the widest possible interoperability, it is recommended that you mark your types with the <xref:System.Runtime.Serialization.DataContractAttribute> and <xref:System.Runtime.Serialization.DataMemberAttribute> attributes to create a data contract, which is the portion of the service contract that describes the data that your service operations exchange.</span></span>  
  
 <span data-ttu-id="8c6c0-149">Datenverträge sind Abonnementverträge: Es werden keine Typen- oder Datenmitglieder serialisiert, es sei denn, Sie wenden das Datenvertragsattribut ausdrücklich an.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-149">Data contracts are opt-in style contracts: No type or data member is serialized unless you explicitly apply the data contract attribute.</span></span> <span data-ttu-id="8c6c0-150">Datenverträge stehen nicht mit dem Zugriffsumfang des verwalteten Codes in Verbindung: Private Datenmitglieder können serialisiert und für den öffentlichen Zugriff an einen beliebigen Ort gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-150">Data contracts are unrelated to the access scope of the managed code: Private data members can be serialized and sent elsewhere to be accessed publicly.</span></span> <span data-ttu-id="8c6c0-151">(Ein grundlegendes Beispiel für einen Datenvertrag finden Sie unter [Gewusst wie: Erstellen eines Basisdatenvertrags für eine Klasse oder Struktur](./feature-details/how-to-create-a-basic-data-contract-for-a-class-or-structure.md).) WCF verarbeitet die Definition der zugrunde liegenden SOAP-Meldungen, die die Funktionalität des Vorgangs sowie die Serialisierung Ihrer Datentypen in und aus dem Nachrichtentext ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-151">(For a basic example of a data contract, see [How to: Create a Basic Data Contract for a Class or Structure](./feature-details/how-to-create-a-basic-data-contract-for-a-class-or-structure.md).) WCF handles the definition of the underlying SOAP messages that enable the operation's functionality as well as the serialization of your data types into and out of the body of the messages.</span></span> <span data-ttu-id="8c6c0-152">Solange Ihre Datentypen serialisierbar sind, müssen Sie sich beim Erstellen von Vorgängen keine Gedanken über die zugrunde liegende Meldungsaustauschinfrastruktur machen.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-152">As long as your data types are serializable, you do not need to think about the underlying message exchange infrastructure when designing your operations.</span></span>  
  
 <span data-ttu-id="8c6c0-153">Obwohl die typische WCF-Anwendung die <xref:System.Runtime.Serialization.DataContractAttribute> und <xref:System.Runtime.Serialization.DataMemberAttribute> Attribute verwendet, um Datenverträge für Vorgänge zu erstellen, können Sie andere Serialisierungsmechanismen verwenden.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-153">Although the typical WCF application uses the <xref:System.Runtime.Serialization.DataContractAttribute> and <xref:System.Runtime.Serialization.DataMemberAttribute> attributes to create data contracts for operations, you can use other serialization mechanisms.</span></span> <span data-ttu-id="8c6c0-154">Die standardmäßigen <xref:System.Runtime.Serialization.ISerializable>, <xref:System.SerializableAttribute> und <xref:System.Xml.Serialization.IXmlSerializable>-Mechanismen können alle zum Serialisieren Ihrer Datentypen in den zugrunde liegenden SOAP-Meldungen verwendet werden, durch die sie von einer Anwendung zu einer anderen transportiert werden.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-154">The standard <xref:System.Runtime.Serialization.ISerializable>, <xref:System.SerializableAttribute> and <xref:System.Xml.Serialization.IXmlSerializable> mechanisms all work to handle the serialization of your data types into the underlying SOAP messages that carry them from one application to another.</span></span> <span data-ttu-id="8c6c0-155">Sie können weitere Serialisierungsstrategien anwenden, wenn die Datentypen spezielle Unterstützung benötigen.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-155">You can employ more serialization strategies if your data types require special support.</span></span> <span data-ttu-id="8c6c0-156">Weitere Informationen zu den Möglichkeiten für die Serialisierung von Datentypen in WCF-Anwendungen finden Sie unter [Angeben der Datenübertragung in Serviceverträgen](./feature-details/specifying-data-transfer-in-service-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="8c6c0-156">For more information about the choices for serialization of data types in WCF applications, see [Specifying Data Transfer in Service Contracts](./feature-details/specifying-data-transfer-in-service-contracts.md).</span></span>  
  
#### <a name="mapping-parameters-and-return-values-to-message-exchanges"></a><span data-ttu-id="8c6c0-157">Zuordnen von Parametern und Rückgabewerten zu Nachrichtenaustauschvorgängen</span><span class="sxs-lookup"><span data-stu-id="8c6c0-157">Mapping Parameters and Return Values to Message Exchanges</span></span>  
 <span data-ttu-id="8c6c0-158">Dienstvorgänge werden von einem zugrunde liegenden Austausch von SOAP-Meldungen unterstützt, die Anwendungsdaten hin- und herübertragen, zusätzlich zu den Daten, die die Anwendung benötigt, um bestimmte standardmäßige Sicherheits-, Transaktions- und Sitzungsfunktionen zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-158">Service operations are supported by an underlying exchange of SOAP messages that transfer application data back and forth, in addition to the data required by the application to support certain standard security, transaction, and session-related features.</span></span> <span data-ttu-id="8c6c0-159">Da dies der Fall ist, diktiert die Signatur eines Dienstvorgangs ein bestimmtes zugrunde liegendes *Nachrichtenaustauschmuster* (MEP), das die Datenübertragung und die Features unterstützen kann, die ein Vorgang erfordert.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-159">Because this is the case, the signature of a service operation dictates a certain underlying *message exchange pattern* (MEP) that can support the data transfer and the features an operation requires.</span></span> <span data-ttu-id="8c6c0-160">Sie können drei Muster im WCF-Programmiermodell angeben: Anforderungs-/Antwort-, einweg- und Duplex-Nachrichtenmuster.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-160">You can specify three patterns in the WCF programming model: request/reply, one-way, and duplex message patterns.</span></span>  
  
##### <a name="requestreply"></a><span data-ttu-id="8c6c0-161">Anforderung/Antwort</span><span class="sxs-lookup"><span data-stu-id="8c6c0-161">Request/Reply</span></span>  
 <span data-ttu-id="8c6c0-162">Anforderung/Antwort ist ein Muster, in dem ein Anforderungssender (eine Clientanwendung) eine Antwort empfängt, mit der die Anfrage kombiniert wird.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-162">A request/reply pattern is one in which a request sender (a client application) receives a reply with which the request is correlated.</span></span> <span data-ttu-id="8c6c0-163">Dabei handelt es sich um das standardmäßige Meldungsaustauschmuster, da es einen Vorgang unterstützt, in dem mindestens ein Parameter an den Vorgang übergeben und ein Rückgabewert zurück an den Aufrufer übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-163">This is the default MEP because it supports an operation in which one or more parameters are passed to the operation and a return value is passed back to the caller.</span></span> <span data-ttu-id="8c6c0-164">Das folgende C#-Codebeispiel zeigt einen einfachen Dienstvorgang, der eine Zeichenfolge als Parameter akzeptiert und eine Zeichenfolge zurückgibt:</span><span class="sxs-lookup"><span data-stu-id="8c6c0-164">For example, the following C# code example shows a basic service operation that takes one string and returns a string.</span></span>  
  
```csharp  
[OperationContractAttribute]  
string Hello(string greeting);  
```  
  
 <span data-ttu-id="8c6c0-165">Im Folgenden sehen Sie den entsprechenden Visual Basic-Code:</span><span class="sxs-lookup"><span data-stu-id="8c6c0-165">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<OperationContractAttribute()>  
Function Hello (ByVal greeting As String) As String  
```  
  
 <span data-ttu-id="8c6c0-166">Diese Vorgangssignatur schreibt die Form des zugrunde liegenden Meldungsaustauschs vor.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-166">This operation signature dictates the form of underlying message exchange.</span></span> <span data-ttu-id="8c6c0-167">Wenn keine Korrelation vorhanden war, kann WCF nicht bestimmen, für welchen Vorgang der Rückgabewert vorgesehen ist.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-167">If no correlation existed, WCF cannot determine for which operation the return value is intended.</span></span>  
  
 <span data-ttu-id="8c6c0-168">Beachten Sie, dass, sofern Sie kein anderes `void` zugrunde`Nothing` liegendes Nachrichtenmuster angeben, sogar Dienstvorgänge, die zurückgegeben werden (in Visual Basic), den Austausch von Ansaglichs-/Antwortnachrichten sind.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-168">Note that unless you specify a different underlying message pattern, even service operations that return `void` (`Nothing` in Visual Basic) are request/reply message exchanges.</span></span> <span data-ttu-id="8c6c0-169">Als Ergebnis für Ihren Vorgang folgt daraus, dass der Client, falls er den Vorgang nicht asynchron aufruft, die Verarbeitung anhält, bis die Antwortmeldung empfangen wird, auch wenn diese Meldung normalerweise leer ist.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-169">The result for your operation is that unless a client invokes the operation asynchronously, the client stops processing until the return message is received, even though that message is empty in the normal case.</span></span> <span data-ttu-id="8c6c0-170">Das folgende C#-Codebeispiel zeigt einen Vorgang, der erst zurückgegeben wird, wenn der Client als Antwort eine leere Meldung empfangen hat:</span><span class="sxs-lookup"><span data-stu-id="8c6c0-170">The following C# code example shows an operation that does not return until the client has received an empty message in response.</span></span>  
  
```csharp  
[OperationContractAttribute]  
void Hello(string greeting);  
```  
  
 <span data-ttu-id="8c6c0-171">Im Folgenden sehen Sie den entsprechenden Visual Basic-Code:</span><span class="sxs-lookup"><span data-stu-id="8c6c0-171">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<OperationContractAttribute()>  
Sub Hello (ByVal greeting As String)  
```  
  
 <span data-ttu-id="8c6c0-172">Das vorherige Beispiel kann die Clientleistung und die Antwortzeit verschlechtern, wenn der Vorgang lange Zeit dauert. Anforderungs-/Antwort-Vorgänge haben aber selbst dann Vorteile, wenn sie `void` zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-172">The preceding example can slow client performance and responsiveness if the operation takes a long time to perform, but there are advantages to request/reply operations even when they return `void`.</span></span> <span data-ttu-id="8c6c0-173">Der offensichtlichste Vorteil besteht darin, dass SOAP-Fehler in der Antwortnachricht zurückgegeben werden können, die anzeigen, dass in der Kommunikation oder Verarbeitung dienstbedingte Fehlerbedingungen eingetreten sind.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-173">The most obvious one is that SOAP faults can be returned in the response message, which indicates that some service-related error condition has occurred, whether in communication or processing.</span></span> <span data-ttu-id="8c6c0-174">SOAP-Fehler, die in einem Dienstvertrag angegeben werden, werden der Clientanwendung als <xref:System.ServiceModel.FaultException%601>-Objekte übergeben, wobei der Typparameter dem im Dienstvertrag angegebenen Typ entspricht.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-174">SOAP faults that are specified in a service contract are passed to the client application as a <xref:System.ServiceModel.FaultException%601> object, where the type parameter is the type specified in the service contract.</span></span> <span data-ttu-id="8c6c0-175">Dies erleichtert die Benachrichtigung von Clients über Fehlerbedingungen in WCF-Diensten.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-175">This makes notifying clients about error conditions in WCF services easy.</span></span> <span data-ttu-id="8c6c0-176">Weitere Informationen zu Ausnahmen, SOAP-Fehlern und Fehlerbehandlung finden Sie unter [Angeben und Behandeln von Fehlern in Verträgen und Diensten](specifying-and-handling-faults-in-contracts-and-services.md).</span><span class="sxs-lookup"><span data-stu-id="8c6c0-176">For more information about exceptions, SOAP faults, and error handling, see [Specifying and Handling Faults in Contracts and Services](specifying-and-handling-faults-in-contracts-and-services.md).</span></span> <span data-ttu-id="8c6c0-177">Ein Beispiel für einen Anforderungs-/Antwortdienst und -client finden Sie unter [Gewusst wie: Erstellen eines Anforderungs-Antwort-Vertrags](./feature-details/how-to-create-a-request-reply-contract.md).</span><span class="sxs-lookup"><span data-stu-id="8c6c0-177">To see an example of a request/reply service and client, see [How to: Create a Request-Reply Contract](./feature-details/how-to-create-a-request-reply-contract.md).</span></span> <span data-ttu-id="8c6c0-178">Weitere Informationen zu Problemen mit dem Anforderungsantwortmuster finden Sie unter [Request-Reply Services](./feature-details/request-reply-services.md).</span><span class="sxs-lookup"><span data-stu-id="8c6c0-178">For more information about issues with the request-reply pattern, see [Request-Reply Services](./feature-details/request-reply-services.md).</span></span>  
  
##### <a name="one-way"></a><span data-ttu-id="8c6c0-179">Unidirektional</span><span class="sxs-lookup"><span data-stu-id="8c6c0-179">One-way</span></span>  
 <span data-ttu-id="8c6c0-180">Wenn der Client einer WCF-Dienstanwendung nicht warten soll, bis der Vorgang abgeschlossen ist, und keine SOAP-Fehler verarbeitet, kann der Vorgang ein einseitiges Nachrichtenmuster angeben.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-180">If the client of a WCF service application should not wait for the operation to complete and does not process SOAP faults, the operation can specify a one-way message pattern.</span></span> <span data-ttu-id="8c6c0-181">Ein einseitiger Vorgang ist ein Vorgang, bei dem ein Client einen Vorgang aufruft und die Verarbeitung fortsetzt, nachdem WCF die Nachricht in das Netzwerk deschreibe.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-181">A one-way operation is one in which a client invokes an operation and continues processing after WCF writes the message to the network.</span></span> <span data-ttu-id="8c6c0-182">Normalerweise bedeutet dies, dass der Client die Ausführung fast unverzüglich fortsetzt, sofern die in der ausgehenden Nachricht enthaltene Datenmenge nicht übermäßig groß ist (und sofern beim Senden der Daten kein Fehler auftritt).</span><span class="sxs-lookup"><span data-stu-id="8c6c0-182">Typically this means that unless the data being sent in the outbound message is extremely large the client continues running almost immediately (unless there is an error sending the data).</span></span> <span data-ttu-id="8c6c0-183">Dieser Typ des Nachrichtenaustauschmusters unterstützt ereignisähnliches Verhalten gegenüber einem Client zu einer Dienstanwendung.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-183">This type of message exchange pattern supports event-like behavior from a client to a service application.</span></span>  
  
 <span data-ttu-id="8c6c0-184">Ein Meldungsaustausch, in dem eine Meldung gesendet und keine empfangen wird, kann keinen Dienstvorgang unterstützen, der einen anderen Rückgabewert als `void` angibt. In diesem Fall wird eine <xref:System.InvalidOperationException>-Ausnahme ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-184">A message exchange in which one message is sent and none are received cannot support a service operation that specifies a return value other than `void`; in this case an <xref:System.InvalidOperationException> exception is thrown.</span></span>  
  
 <span data-ttu-id="8c6c0-185">Eine fehlende Rückgabemeldung bedeutet außerdem, dass keine SOAP-Fehler zurückgegeben werden können, um Fehler bei Bearbeitung und Kommunikation anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-185">No return message also means that there can be no SOAP fault returned to indicate any errors in processing or communication.</span></span> <span data-ttu-id="8c6c0-186">(Kommunizieren von Fehlerinformationen bei unidirektionalen Vorgängen erfordert ein Duplex-Meldungsaustauschmuster.)</span><span class="sxs-lookup"><span data-stu-id="8c6c0-186">(Communicating error information when operations are one-way operations requires a duplex message exchange pattern.)</span></span>  
  
 <span data-ttu-id="8c6c0-187">Um einen unidirektionalen Meldungsaustausch für einen Vorgang anzugeben, der `void` zurückgibt, legen Sie die <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A>-Eigenschaft auf `true` fest, wie im folgenden C#-Codebeispiel gezeigt:</span><span class="sxs-lookup"><span data-stu-id="8c6c0-187">To specify a one-way message exchange for an operation that returns `void`, set the <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> property to `true`, as in the following C# code example.</span></span>  
  
```csharp  
[OperationContractAttribute(IsOneWay=true)]  
void Hello(string greeting);  
```  
  
 <span data-ttu-id="8c6c0-188">Im Folgenden sehen Sie den entsprechenden Visual Basic-Code:</span><span class="sxs-lookup"><span data-stu-id="8c6c0-188">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<OperationContractAttribute(IsOneWay := True)>  
Sub Hello (ByVal greeting As String)  
```  
  
 <span data-ttu-id="8c6c0-189">Diese Methode ist mit dem vorherigen Anforderungs-/Antwortbeispiel identisch, aber das Festlegen der <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A>-Eigenschaft auf `true` bedeutet, dass der Dienstvorgang, obwohl die Methode identisch ist, keine Rückgabemeldung sendet und Clients unverzüglich zurückgegeben werden, sobald die ausgehende Meldung der Kanalebene übergeben wurde.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-189">This method is identical to the preceding request/reply example, but setting the <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> property to `true` means that although the method is identical, the service operation does not send a return message and clients return immediately once the outbound message has been handed to the channel layer.</span></span> <span data-ttu-id="8c6c0-190">Ein Beispiel finden Sie unter [Gewusst wie: Erstellen eines einwegigen Vertrags](./feature-details/how-to-create-a-one-way-contract.md).</span><span class="sxs-lookup"><span data-stu-id="8c6c0-190">For an example, see [How to: Create a One-Way Contract](./feature-details/how-to-create-a-one-way-contract.md).</span></span> <span data-ttu-id="8c6c0-191">Weitere Informationen zum einwegwegreichen Muster finden Sie unter [One-Way Services](./feature-details/one-way-services.md).</span><span class="sxs-lookup"><span data-stu-id="8c6c0-191">For more information about the one-way pattern, see [One-Way Services](./feature-details/one-way-services.md).</span></span>  
  
##### <a name="duplex"></a><span data-ttu-id="8c6c0-192">Duplex</span><span class="sxs-lookup"><span data-stu-id="8c6c0-192">Duplex</span></span>  
 <span data-ttu-id="8c6c0-193">Ein Duplexmuster wird durch die Fähigkeit des Diensts und des Clients zum unabhängigen Senden von Nachrichten untereinander charakterisiert, wenn unidirektionale oder Anforderungs-/Antwortmeldungen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-193">A duplex pattern is characterized by the ability of both the service and the client to send messages to each other independently whether using one-way or request/reply messaging.</span></span> <span data-ttu-id="8c6c0-194">Diese Form einer bidirektionalen Kommunikation ist für Dienste nützlich, die direkt mit dem Client kommunizieren müssen, oder zum Bereitstellen einer asynchronen Erfahrung auf beiden Seiten eines Nachrichtenaustauschs, einschließlich ereignisähnlichen Verhaltens.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-194">This form of two-way communication is useful for services that must communicate directly to the client or for providing an asynchronous experience to either side of a message exchange, including event-like behavior.</span></span>  
  
 <span data-ttu-id="8c6c0-195">Das Duplexmuster ist aufgrund der zusätzlichen Mechanismen für die Kommunikation mit dem Client etwas komplexer als das Anforderungs-/Antwortmuster und das unidirektionale Muster.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-195">The duplex pattern is slightly more complex than the request/reply or one-way patterns because of the additional mechanism for communicating with the client.</span></span>  
  
 <span data-ttu-id="8c6c0-196">Für einen Duplexvertrag müssen Sie auch einen Rückrufvertrag entwerfen und den Typ dieses Rückrufvertrags der <xref:System.ServiceModel.ServiceContractAttribute.CallbackContract%2A>-Eigenschaft des <xref:System.ServiceModel.ServiceContractAttribute>-Attributs zuweisen, das den Dienstvertrag markiert.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-196">To design a duplex contract, you must also design a callback contract and assign the type of that callback contract to the <xref:System.ServiceModel.ServiceContractAttribute.CallbackContract%2A> property of the <xref:System.ServiceModel.ServiceContractAttribute> attribute that marks your service contract.</span></span>  
  
 <span data-ttu-id="8c6c0-197">Zum Implementieren eines Duplexmusters müssen Sie eine zweite Schnittstelle erstellen, die die Methodendeklarierungen enthält, die auf dem Client aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-197">To implement a duplex pattern, you must create a second interface that contains the method declarations that are called on the client.</span></span>  
  
 <span data-ttu-id="8c6c0-198">Ein Beispiel für das Erstellen eines Dienstes und eines Clients, der auf diesen Dienst zugreift, finden Sie unter [Gewusst wie: Erstellen eines Duplexvertrags](./feature-details/how-to-create-a-duplex-contract.md) und [Gewusst wie: Zugreifen auf Dienste mit einem Duplexvertrag](./feature-details/how-to-access-services-with-a-duplex-contract.md).</span><span class="sxs-lookup"><span data-stu-id="8c6c0-198">For an example of creating a service, and a client that accesses that service, see [How to: Create a Duplex Contract](./feature-details/how-to-create-a-duplex-contract.md) and [How to: Access Services with a Duplex Contract](./feature-details/how-to-access-services-with-a-duplex-contract.md).</span></span> <span data-ttu-id="8c6c0-199">Eine Arbeitsprobe finden Sie unter [Duplex](./samples/duplex.md).</span><span class="sxs-lookup"><span data-stu-id="8c6c0-199">For a working sample, see [Duplex](./samples/duplex.md).</span></span> <span data-ttu-id="8c6c0-200">Weitere Informationen zu Problemen mit Duplexverträgen finden Sie unter [Duplexdienste](./feature-details/duplex-services.md).</span><span class="sxs-lookup"><span data-stu-id="8c6c0-200">For more information about issues using duplex contracts, see [Duplex Services](./feature-details/duplex-services.md).</span></span>  
  
> [!CAUTION]
> <span data-ttu-id="8c6c0-201">Wenn ein Dienst eine Duplexmeldung empfängt, überprüft er das `ReplyTo`-Element in dieser eingehenden Meldung, um zu bestimmen, wohin die Antwort gesendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-201">When a service receives a duplex message, it looks at the `ReplyTo` element in that incoming message to determine where to send the reply.</span></span> <span data-ttu-id="8c6c0-202">Wenn der zum Empfangen der Meldung verwendete Kanal nicht gesichert ist, kann ein nicht vertrauenswürdiger Client eine bösartige Meldung mit dem `ReplyTo`-Element eines Zielcomputers senden, was zu einem Denial Of Service (DOS) auf diesem Zielcomputer führt.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-202">If the channel that is used to receive the message is not secured, then an untrusted client could send a malicious message with a target machine's `ReplyTo`, leading to a denial of service (DOS) of that target machine.</span></span>  
  
##### <a name="out-and-ref-parameters"></a><span data-ttu-id="8c6c0-203">Out-Parameter und Ref-Parameter</span><span class="sxs-lookup"><span data-stu-id="8c6c0-203">Out and Ref Parameters</span></span>  
 <span data-ttu-id="8c6c0-204">In den meisten Fällen `in` können`ByVal` Sie Parameter `out` (in Visual Basic) und `ref` Parameter (in`ByRef` Visual Basic) verwenden.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-204">In most cases, you can use `in` parameters (`ByVal` in Visual Basic) and `out` and `ref` parameters (`ByRef` in Visual Basic).</span></span> <span data-ttu-id="8c6c0-205">Da die `out`- und `ref`-Parameter anzeigen, dass Daten aus einem Vorgang zurückgegeben werden, gibt eine Vorgangssignatur wie die folgende an, dass ein Anforderungs-/Antwortvorgang erforderlich ist, obwohl die Vorgangssignatur `void` zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-205">Because both `out` and `ref` parameters indicate that data is returned from an operation, an operation signature such as the following specifies that a request/reply operation is required even though the operation signature returns `void`.</span></span>  
  
```csharp  
[ServiceContractAttribute]  
public interface IMyContract  
{  
  [OperationContractAttribute]  
  public void PopulateData(ref CustomDataType data);  
}  
```  
  
 <span data-ttu-id="8c6c0-206">Im Folgenden sehen Sie den entsprechenden Visual Basic-Code:</span><span class="sxs-lookup"><span data-stu-id="8c6c0-206">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<ServiceContractAttribute()> _  
Public Interface IMyContract  
  <OperationContractAttribute()> _  
  Public Sub PopulateData(ByRef data As CustomDataType)  
End Interface  
```  
  
 <span data-ttu-id="8c6c0-207">Die einzigen Ausnahmen sind jene Fälle, in denen die Signatur über eine besondere Struktur verfügt.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-207">The only exceptions are those cases in which your signature has a particular structure.</span></span> <span data-ttu-id="8c6c0-208">Sie können beispielsweise die <xref:System.ServiceModel.NetMsmqBinding>-Bindung nur dann zum Kommunizieren mit Clients verwenden, wenn die zum Deklarieren eines Vorgangs verwendete Methode `void` zurückgibt. Es dürfen keine Ausgabewerte vorliegen, weder ein Rückgabewert noch ein `ref`-Parameter oder ein `out`-Parameter.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-208">For example, you can use the <xref:System.ServiceModel.NetMsmqBinding> binding to communicate with clients only if the method used to declare an operation returns `void`; there can be no output value, whether it is a return value, `ref`, or `out` parameter.</span></span>  
  
 <span data-ttu-id="8c6c0-209">Außerdem ist bei der Verwendung der `out`- und `ref`-Parameter erforderlich, dass der Vorgang über eine zugrunde liegende Antwortmeldung verfügt, um das geänderte Objekt zurückzugeben.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-209">In addition, using `out` or `ref` parameters requires that the operation have an underlying response message to carry back the modified object.</span></span> <span data-ttu-id="8c6c0-210">Wenn es sich bei dem Vorgang um einen unidirektionalen Vorgang handelt, wird zur Laufzeit eine Ausnahme des Typs <xref:System.InvalidOperationException> ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-210">If your operation is a one-way operation, an <xref:System.InvalidOperationException> exception is thrown at runtime.</span></span>  
  
### <a name="specify-message-protection-level-on-the-contract"></a><span data-ttu-id="8c6c0-211">Angeben einer Meldungsschutzebene für den Vertrag</span><span class="sxs-lookup"><span data-stu-id="8c6c0-211">Specify Message Protection Level on the Contract</span></span>  
 <span data-ttu-id="8c6c0-212">Wenn Sie den Vertrag entwerfen, müssen Sie sich außerdem für eine Meldungsschutzebene für Dienste entscheiden, die den Vertrag implementieren.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-212">When designing your contract, you must also decide the message protection level of services that implement your contract.</span></span> <span data-ttu-id="8c6c0-213">Dies ist nur notwendig, wenn Meldungssicherheit auf die Bindung im Endpunkt des Vertrags angewendet wird.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-213">This is necessary only if message security is applied to the binding in the contract's endpoint.</span></span> <span data-ttu-id="8c6c0-214">Wenn die Sicherheit für die Bindung deaktivert wurde (wenn also die vom System bereitgestellte Bindung den <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType> auf den Wert <xref:System.ServiceModel.SecurityMode.None?displayProperty=nameWithType> festlegt), müssen Sie sich nicht für eine Meldungsschutzebene für den Vertrag entscheiden.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-214">If the binding has security turned off (that is, if the system-provided binding sets the <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType> to the value <xref:System.ServiceModel.SecurityMode.None?displayProperty=nameWithType>) then you do not have to decide on the message protection level for the contract.</span></span> <span data-ttu-id="8c6c0-215">In den meisten Fällen bieten vom System bereitgestellte Bindungen mit angewendeter Sicherheit auf Nachrichtenebenen eine ausreichende Schutzebene, sodass Sie sich nicht bei jedem Vorgang oder jeder Nachricht Gedanken um die Schutzebene machen müssen.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-215">In most cases, system-provided bindings with message-level security applied provide a sufficient protection level and you do not have to consider the protection level for each operation or for each message.</span></span>  
  
 <span data-ttu-id="8c6c0-216">Die Schutzebene ist ein Wert, der angibt, ob die Meldungen (oder Meldungsteile), die einen Dienst unterstützen, signiert, signiert und verschlüsselt oder ohne Signaturen und Verschlüsselung gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-216">The protection level is a value that specifies whether the messages (or message parts) that support a service are signed, signed and encrypted, or sent without signatures or encryption.</span></span> <span data-ttu-id="8c6c0-217">Die Schutzebene kann in unterschiedlichem Umfang festgelegt werden: auf Dienstebene, für einen bestimmten Vorgang, für eine Meldung innerhalb dieses Vorgangs oder für einen Meldungsteil.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-217">The protection level can be set at various scopes: At the service level, for a particular operation, for a message within that operation, or a message part.</span></span> <span data-ttu-id="8c6c0-218">Auf einen Bereich festgelegte Werte werden zum Standardwert für kleinere Bereiche, außer wenn diese explizit außer Kraft gesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-218">Values set at one scope become the default value for smaller scopes unless explicitly overridden.</span></span> <span data-ttu-id="8c6c0-219">Wenn eine Bindungskonfiguration die erforderliche Mindestschutzebene für den Vertrag nicht bereitstellen kann, wird eine Ausnahme ausgegeben.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-219">If a binding configuration cannot provide the required minimum protection level for the contract, an exception is thrown.</span></span> <span data-ttu-id="8c6c0-220">Wenn für den Vertrag keine Schutzebenenwerte explizit festgelegt sind, steuert die Bindungskonfiguration die Schutzebene für alle Meldungen, sofern die Bindung über Meldungssicherheit verfügt.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-220">And when no protection level values are explicitly set on the contract, the binding configuration controls the protection level for all messages if the binding has message security.</span></span> <span data-ttu-id="8c6c0-221">Dies ist das Standardverhalten.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-221">This is the default behavior.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="8c6c0-222">Die Entscheidung über das explizite Festlegen verschiedener Umfänge eines Vertrags auf weniger als die vollständige Schutzebene von <xref:System.Net.Security.ProtectionLevel.EncryptAndSign?displayProperty=nameWithType> ist normalerweise eine Entscheidung, die die Leistung verbessert, während die Sicherheit reduziert wird.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-222">Deciding whether to explicitly set various scopes of a contract to less than the full protection level of <xref:System.Net.Security.ProtectionLevel.EncryptAndSign?displayProperty=nameWithType> is generally a decision that trades some degree of security for increased performance.</span></span> <span data-ttu-id="8c6c0-223">In diesen Fällen hängen Ihre Entscheidungen von den Vorgängen und dem Wert der ausgetauschten Daten ab.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-223">In these cases, your decisions must revolve around your operations and the value of the data they exchange.</span></span> <span data-ttu-id="8c6c0-224">Weitere Informationen finden Sie unter [Sichern von Diensten](securing-services.md).</span><span class="sxs-lookup"><span data-stu-id="8c6c0-224">For more information, see [Securing Services](securing-services.md).</span></span>  
  
 <span data-ttu-id="8c6c0-225">Im folgenden Codebeispiel wird weder die <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A>- noch die <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A>-Eigenschaft für den Vertrag festgelegt.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-225">For example, the following code example does not set either the <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A> or the <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> property on the contract.</span></span>  
  
```csharp  
[ServiceContract]  
public interface ISampleService  
{  
  [OperationContractAttribute]  
  public string GetString();  
  
  [OperationContractAttribute]  
  public int GetInt();
}  
```  
  
 <span data-ttu-id="8c6c0-226">Im Folgenden sehen Sie den entsprechenden Visual Basic-Code:</span><span class="sxs-lookup"><span data-stu-id="8c6c0-226">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<ServiceContractAttribute()> _  
Public Interface ISampleService  
  
  <OperationContractAttribute()> _  
  Public Function GetString()As String  
  
  <OperationContractAttribute()> _  
  Public Function GetData() As Integer  
  
End Interface  
```  
  
 <span data-ttu-id="8c6c0-227">Beim Interagieren mit einer `ISampleService`-Implementierung in einem Endpunkt mit einer standardmäßigen <xref:System.ServiceModel.WSHttpBinding> (der standardmäßige <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType> ist <xref:System.ServiceModel.SecurityMode.Message>) werden alle Meldungen verschlüsselt und signiert, da es sich dabei um die Standardschutzebene handelt.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-227">When interacting with an `ISampleService` implementation in an endpoint with a default <xref:System.ServiceModel.WSHttpBinding> (the default <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType>, which is <xref:System.ServiceModel.SecurityMode.Message>), all messages are encrypted and signed because this is the default protection level.</span></span> <span data-ttu-id="8c6c0-228">Wenn jedoch ein `ISampleService`-Dienst mit einer standardmäßigen <xref:System.ServiceModel.BasicHttpBinding> verwendet wird (der standardmäßige <xref:System.ServiceModel.SecurityMode> ist <xref:System.ServiceModel.SecurityMode.None>), werden alle Nachrichten als Text gesendet, da es keine Sicherheit für diese Bindung gibt und somit die Schutzebene ignoriert wird (die Nachrichten werden also weder verschlüsselt noch signiert).</span><span class="sxs-lookup"><span data-stu-id="8c6c0-228">However, when an `ISampleService` service is used with a default <xref:System.ServiceModel.BasicHttpBinding> (the default <xref:System.ServiceModel.SecurityMode>, which is <xref:System.ServiceModel.SecurityMode.None>), all messages are sent as text because there is no security for this binding and so the protection level is ignored (that is, the messages are neither encrypted nor signed).</span></span> <span data-ttu-id="8c6c0-229">Würde der <xref:System.ServiceModel.SecurityMode> in <xref:System.ServiceModel.SecurityMode.Message> geändert, würden die Nachrichten verschlüsselt und signiert (da es sich in diesem Fall um die Standardschutzebene der Bindung handeln würde).</span><span class="sxs-lookup"><span data-stu-id="8c6c0-229">If the <xref:System.ServiceModel.SecurityMode> was changed to <xref:System.ServiceModel.SecurityMode.Message>, then these messages would be encrypted and signed (because that would now be the binding's default protection level).</span></span>  
  
 <span data-ttu-id="8c6c0-230">Wenn Sie die Schutzanforderungen für den Vertrag explizit angeben oder anpassen möchten, legen Sie die <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A>-Eigenschaft (oder die `ProtectionLevel`-Eigenschaften im kleineren Umfang) auf die für den Dienstvertrag erforderliche Ebene fest.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-230">If you want to explicitly specify or adjust the protection requirements for your contract, set the <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A> property (or any of the `ProtectionLevel` properties at a smaller scope) to the level your service contract requires.</span></span> <span data-ttu-id="8c6c0-231">In diesem Fall ist bei der Verwendung einer expliziten Einstellung erforderlich, dass die Bindung diese Einstellung mindestens für den verwendeten Umfang unterstützt.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-231">In this case, using an explicit setting requires the binding to support that setting at a minimum for the scope used.</span></span> <span data-ttu-id="8c6c0-232">Im folgenden Codebeispiel wird ein <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A>-Wert explizit für den `GetGuid`-Vorgang angegeben.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-232">For example, the following code example specifies one <xref:System.ServiceModel.OperationContractAttribute.ProtectionLevel%2A> value explicitly, for the `GetGuid` operation.</span></span>  
  
```csharp  
[ServiceContract]  
public interface IExplicitProtectionLevelSampleService  
{  
  [OperationContractAttribute]  
  public string GetString();  
  
  [OperationContractAttribute(ProtectionLevel=ProtectionLevel.None)]  
  public int GetInt();
  [OperationContractAttribute(ProtectionLevel=ProtectionLevel.EncryptAndSign)]  
  public int GetGuid();
}  
```  
  
 <span data-ttu-id="8c6c0-233">Im Folgenden sehen Sie den entsprechenden Visual Basic-Code:</span><span class="sxs-lookup"><span data-stu-id="8c6c0-233">The following is the equivalent Visual Basic code.</span></span>  
  
```vb  
<ServiceContract()> _
Public Interface IExplicitProtectionLevelSampleService
    <OperationContract()> _
    Public Function GetString() As String
    End Function
  
    <OperationContract(ProtectionLevel := ProtectionLevel.None)> _
    Public Function GetInt() As Integer
    End Function
  
    <OperationContractAttribute(ProtectionLevel := ProtectionLevel.EncryptAndSign)> _
    Public Function GetGuid() As Integer
    End Function
  
End Interface  
```  
  
 <span data-ttu-id="8c6c0-234">Ein Dienst, der diesen `IExplicitProtectionLevelSampleService`-Vertrag implementiert und über einen Endpunkt verfügt, der die standardmäßige <xref:System.ServiceModel.WSHttpBinding> (der standardmäßige <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType> ist <xref:System.ServiceModel.SecurityMode.Message>) verwendet, hat das folgende Verhalten:</span><span class="sxs-lookup"><span data-stu-id="8c6c0-234">A service that implements this `IExplicitProtectionLevelSampleService` contract and has an endpoint that uses the default <xref:System.ServiceModel.WSHttpBinding> (the default <xref:System.ServiceModel.SecurityMode?displayProperty=nameWithType>, which is <xref:System.ServiceModel.SecurityMode.Message>) has the following behavior:</span></span>  
  
- <span data-ttu-id="8c6c0-235">Die `GetString`-Vorgangsmeldungen werden verschlüsselt und signiert.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-235">The `GetString` operation messages are encrypted and signed.</span></span>  
  
- <span data-ttu-id="8c6c0-236">Die `GetInt`-Vorgangsmeldungen werden als unverschlüsselter und unsignierter Text gesendet.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-236">The `GetInt` operation messages are sent as unencrypted and unsigned (that is, plain) text.</span></span>  
  
- <span data-ttu-id="8c6c0-237">Der `GetGuid`-Vorgang <xref:System.Guid?displayProperty=nameWithType> wird in einer Nachricht zurückgegeben, die verschlüsselt und signiert wird.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-237">The `GetGuid` operation <xref:System.Guid?displayProperty=nameWithType> is returned in a message that is encrypted and signed.</span></span>  
  
 <span data-ttu-id="8c6c0-238">Weitere Informationen zu Schutzebenen und deren Verwendung finden Sie unter Verstehen der [Schutzebene](understanding-protection-level.md).</span><span class="sxs-lookup"><span data-stu-id="8c6c0-238">For more information about protection levels and how to use them, see [Understanding Protection Level](understanding-protection-level.md).</span></span> <span data-ttu-id="8c6c0-239">Weitere Informationen zur Sicherheit finden Sie unter [Sichern von Diensten](securing-services.md).</span><span class="sxs-lookup"><span data-stu-id="8c6c0-239">For more information about security, see [Securing Services](securing-services.md).</span></span>  
  
##### <a name="other-operation-signature-requirements"></a><span data-ttu-id="8c6c0-240">Andere Vorgangssignaturanforderungen</span><span class="sxs-lookup"><span data-stu-id="8c6c0-240">Other Operation Signature Requirements</span></span>  
 <span data-ttu-id="8c6c0-241">Einige Anwendungsfunktionen erfordern eine besondere Art von Vorgangssignatur.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-241">Some application features require a particular kind of operation signature.</span></span> <span data-ttu-id="8c6c0-242">Die <xref:System.ServiceModel.NetMsmqBinding>-Bindung unterstützt beispielsweise permanente Dienste und Clients, in denen eine Anwendung während der Kommunikation neu gestartet und ohne Meldungsverlust genau dort fortgesetzt werden kann, wo sie angehalten wurde.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-242">For example, the <xref:System.ServiceModel.NetMsmqBinding> binding supports durable services and clients, in which an application can restart in the middle of communication and pick up where it left off without missing any messages.</span></span> <span data-ttu-id="8c6c0-243">(Weitere Informationen finden Sie unter [Warteschlangen in WCF](./feature-details/queues-in-wcf.md).) Dauerhafte Vorgänge dürfen jedoch `in` nur einen Parameter annehmen und keinen Rückgabewert aufweisen.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-243">(For more information, see [Queues in WCF](./feature-details/queues-in-wcf.md).) However, durable operations must take only one `in` parameter and have no return value.</span></span>  
  
 <span data-ttu-id="8c6c0-244">Ein anderes Beispiel ist die Verwendung von <xref:System.IO.Stream>-Typen in Vorgängen.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-244">Another example is the use of <xref:System.IO.Stream> types in operations.</span></span> <span data-ttu-id="8c6c0-245">Da der <xref:System.IO.Stream>-Parameter den gesamten Textinhalt einschließt, muss es sich bei einer Ein- oder Ausgabe mit den Parametern `ref`, `out` oder einem Rückgabewert vom Typ <xref:System.IO.Stream> um die einzigen im Vorgang angegebenen Ein- und Ausgaben handeln.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-245">Because the <xref:System.IO.Stream> parameter includes the entire message body, if an input or an output (that is, `ref` parameter, `out` parameter, or return value) is of type <xref:System.IO.Stream>, then it must be the only input or output specified in your operation.</span></span> <span data-ttu-id="8c6c0-246">Außerdem muss es sich bei dem Parameter oder dem Rückgabetyp um <xref:System.IO.Stream>, <xref:System.ServiceModel.Channels.Message?displayProperty=nameWithType> oder <xref:System.Xml.Serialization.IXmlSerializable?displayProperty=nameWithType> handeln.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-246">In addition, the parameter or return type must be either <xref:System.IO.Stream>, <xref:System.ServiceModel.Channels.Message?displayProperty=nameWithType>, or <xref:System.Xml.Serialization.IXmlSerializable?displayProperty=nameWithType>.</span></span> <span data-ttu-id="8c6c0-247">Weitere Informationen zu Streams finden Sie unter [Große Daten und Streaming](./feature-details/large-data-and-streaming.md).</span><span class="sxs-lookup"><span data-stu-id="8c6c0-247">For more information about streams, see [Large Data and Streaming](./feature-details/large-data-and-streaming.md).</span></span>  
  
##### <a name="names-namespaces-and-obfuscation"></a><span data-ttu-id="8c6c0-248">Namen, Namespaces und Obfuskation</span><span class="sxs-lookup"><span data-stu-id="8c6c0-248">Names, Namespaces, and Obfuscation</span></span>  
 <span data-ttu-id="8c6c0-249">Die Namen und Namespaces der .NET-Typen in der Definition von Verträgen und Vorgängen sind wichtig, wenn Verträge in WSDL konvertiert und wenn Vertragsnachrichten erstellt und gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-249">The names and namespaces of the .NET types in the definition of contracts and operations are significant when contracts are converted into WSDL and when contract messages are created and sent.</span></span> <span data-ttu-id="8c6c0-250">Aus diesem Grund sollten Namen und Namespaces von Verträgen unbedingt explizit mithilfe der `Name`- und der `Namespace`-Eigenschaft aller unterstützenden Vertragsattribute (wie <xref:System.ServiceModel.ServiceContractAttribute>, <xref:System.ServiceModel.OperationContractAttribute>, <xref:System.Runtime.Serialization.DataContractAttribute>, <xref:System.Runtime.Serialization.DataMemberAttribute> und anderer Vertragsattribute) festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-250">Therefore, it is strongly recommended that service contract names and namespaces are explicitly set using the `Name` and `Namespace` properties of all supporting contract attributes such as the <xref:System.ServiceModel.ServiceContractAttribute>, <xref:System.ServiceModel.OperationContractAttribute>, <xref:System.Runtime.Serialization.DataContractAttribute>,  <xref:System.Runtime.Serialization.DataMemberAttribute>, and other contract attributes.</span></span>  
  
 <span data-ttu-id="8c6c0-251">Sind die Namen und Namespaces nicht explizit festgelegt, verändert die Verwendung der IL-Obfuskation für die Assembly die Namen und Namespaces des Vertragstyps. Dadurch ergeben sich Änderungen beim WSDL- und Übertragungsaustausch, wodurch üblicherweise Fehler auftreten.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-251">One result of this is that if the names and namespaces are not explicitly set, the use of IL obfuscation on the assembly alters the contract type names and namespaces and results in modified WSDL and wire exchanges that typically fail.</span></span> <span data-ttu-id="8c6c0-252">Wenn Sie die Vertragsnamen und -Namespaces nicht explizit festlegen, aber dennoch die Obfuskation verwenden möchten, unterbinden Sie Änderungen an den Namen und Namespaces des Vertragstyps mithilfe des <xref:System.Reflection.ObfuscationAttribute>-Attributs und des <xref:System.Reflection.ObfuscateAssemblyAttribute>-Attributs.</span><span class="sxs-lookup"><span data-stu-id="8c6c0-252">If you do not set the contract names and namespaces explicitly but do intend to use obfuscation, use the <xref:System.Reflection.ObfuscationAttribute> and <xref:System.Reflection.ObfuscateAssemblyAttribute> attributes to prevent the modification of the contract type names and namespaces.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8c6c0-253">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="8c6c0-253">See also</span></span>

- [<span data-ttu-id="8c6c0-254">Vorgehensweise: Erstellen eines Anforderung-Antwort-Vertrags</span><span class="sxs-lookup"><span data-stu-id="8c6c0-254">How to: Create a Request-Reply Contract</span></span>](./feature-details/how-to-create-a-request-reply-contract.md)
- [<span data-ttu-id="8c6c0-255">Vorgehensweise: Erstellen eines unidirektionalen Vertrags</span><span class="sxs-lookup"><span data-stu-id="8c6c0-255">How to: Create a One-Way Contract</span></span>](./feature-details/how-to-create-a-one-way-contract.md)
- [<span data-ttu-id="8c6c0-256">Vorgehensweise: Erstellen eines Duplexvertrags</span><span class="sxs-lookup"><span data-stu-id="8c6c0-256">How to: Create a Duplex Contract</span></span>](./feature-details/how-to-create-a-duplex-contract.md)
- [<span data-ttu-id="8c6c0-257">Specifying Data Transfer in Service Contracts</span><span class="sxs-lookup"><span data-stu-id="8c6c0-257">Specifying Data Transfer in Service Contracts</span></span>](./feature-details/specifying-data-transfer-in-service-contracts.md)
- [<span data-ttu-id="8c6c0-258">Angeben und Behandeln von Fehlern in Verträgen und Diensten</span><span class="sxs-lookup"><span data-stu-id="8c6c0-258">Specifying and Handling Faults in Contracts and Services</span></span>](specifying-and-handling-faults-in-contracts-and-services.md)
- [<span data-ttu-id="8c6c0-259">Verwenden von Sitzungen</span><span class="sxs-lookup"><span data-stu-id="8c6c0-259">Using Sessions</span></span>](using-sessions.md)
- [<span data-ttu-id="8c6c0-260">Synchrone und asynchrone Vorgänge</span><span class="sxs-lookup"><span data-stu-id="8c6c0-260">Synchronous and Asynchronous Operations</span></span>](synchronous-and-asynchronous-operations.md)
- [<span data-ttu-id="8c6c0-261">Zuverlässige Dienstleistungen</span><span class="sxs-lookup"><span data-stu-id="8c6c0-261">Reliable Services</span></span>](reliable-services.md)
- [<span data-ttu-id="8c6c0-262">Dienste und Transaktionen</span><span class="sxs-lookup"><span data-stu-id="8c6c0-262">Services and Transactions</span></span>](services-and-transactions.md)
