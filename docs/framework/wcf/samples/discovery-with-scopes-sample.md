---
title: Beispiel für Suche mit Bereichen
ms.date: 03/30/2017
ms.assetid: 6a37a754-6b8c-4ebe-bdf2-d4f0520271d5
ms.openlocfilehash: 8ba5618f472fc8a6e1751776060f99103a67a073
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 01/24/2020
ms.locfileid: "76728750"
---
# <a name="discovery-with-scopes-sample"></a><span data-ttu-id="4c208-102">Beispiel für Suche mit Bereichen</span><span class="sxs-lookup"><span data-stu-id="4c208-102">Discovery with Scopes Sample</span></span>

<span data-ttu-id="4c208-103">In diesem Beispiel wird veranschaulicht, wie Bereiche verwendet werden, um erkennbare Endpunkte zu kategorisieren, und wie <xref:System.ServiceModel.Discovery.DiscoveryClient> verwendet wird, um eine asynchrone Suche nach Endpunkten durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="4c208-103">This sample shows how to use scopes to categorize discoverable endpoints as well how to use <xref:System.ServiceModel.Discovery.DiscoveryClient> to perform an asynchronous search for endpoints.</span></span> <span data-ttu-id="4c208-104">In Bezug auf den Dienst wird in diesem Beispiel veranschaulicht, wie die Suche für jeden Endpunkt angepasst wird, indem ein Endpunktsuchverhalten hinzugefügt und damit ein Bereich zum Endpunkt hinzugefügt sowie die Ermittelbarkeit des Endpunkts gesteuert wird.</span><span class="sxs-lookup"><span data-stu-id="4c208-104">On the service, this sample shows how to customize discovery for each endpoint by adding an endpoint discovery behavior and using it to add a scope to the endpoint as well as controlling the endpoint’s discoverability.</span></span> <span data-ttu-id="4c208-105">In Bezug auf den Client wird in diesem Beispiel beschrieben, wie Clients einen <xref:System.ServiceModel.Discovery.DiscoveryClient> erstellen und die Suchparameter optimieren können, um Bereiche einzuschließen, indem Bereiche zu <xref:System.ServiceModel.Discovery.FindCriteria> hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="4c208-105">On the client, the sample goes over how clients can create a <xref:System.ServiceModel.Discovery.DiscoveryClient> and fine tune search parameters to include scopes by adding scopes to the <xref:System.ServiceModel.Discovery.FindCriteria>.</span></span> <span data-ttu-id="4c208-106">In diesem Beispiel wird auch gezeigt, wie Clients Antworten durch Hinzufügen eines Beendigungskriteriums einschränken können.</span><span class="sxs-lookup"><span data-stu-id="4c208-106">This sample also shows how clients can restrict responses by adding a termination criterion.</span></span>

## <a name="service-features"></a><span data-ttu-id="4c208-107">Dienstfunktionen</span><span class="sxs-lookup"><span data-stu-id="4c208-107">Service Features</span></span>

<span data-ttu-id="4c208-108">In diesem Projekt wird gezeigt, wie zwei Dienstendpunkte zu einem <xref:System.ServiceModel.ServiceHost> hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="4c208-108">This project shows two service endpoints being added to a <xref:System.ServiceModel.ServiceHost>.</span></span> <span data-ttu-id="4c208-109">Jedem Endpunkt ist ein <xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior> zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="4c208-109">Each endpoint has a <xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior> associated with it.</span></span> <span data-ttu-id="4c208-110">Dieses Verhalten wird verwendet, um URI-Bereiche für beide Endpunkte hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="4c208-110">This behavior is used to add URI scopes for both endpoints.</span></span> <span data-ttu-id="4c208-111">Bereiche werden zur Unterscheidung der einzelnen Endpunkte verwendet, damit die Clients die Suche optimieren können.</span><span class="sxs-lookup"><span data-stu-id="4c208-111">Scopes are used to distinguish each of these endpoints so that the clients can fine tune the search.</span></span> <span data-ttu-id="4c208-112">Für den zweiten Endpunkt kann die Ermittelbarkeit deaktiviert werden, indem die <xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior.Enabled%2A>-Eigenschaft auf `false` festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="4c208-112">For the second endpoint, the discoverability can be disabled by setting the <xref:System.ServiceModel.Discovery.EndpointDiscoveryBehavior.Enabled%2A> property to `false`.</span></span> <span data-ttu-id="4c208-113">Dadurch wird sichergestellt, dass die diesem Endpunkt zugeordneten Suchmetadaten nicht als Teil der Suchnachrichten gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="4c208-113">This ensures that the discovery metadata associated with this endpoint is not sent as part of any discovery messages.</span></span>

## <a name="client-features"></a><span data-ttu-id="4c208-114">Clientfunktionen</span><span class="sxs-lookup"><span data-stu-id="4c208-114">Client Features</span></span>

<span data-ttu-id="4c208-115">Die `FindCalculatorServiceAddress()`-Methode veranschaulicht die Verwendung von einem <xref:System.ServiceModel.Discovery.DiscoveryClient> und die Übergabe von <xref:System.ServiceModel.Discovery.FindCriteria> mit zwei Einschränkungen.</span><span class="sxs-lookup"><span data-stu-id="4c208-115">The `FindCalculatorServiceAddress()` method shows how to use a <xref:System.ServiceModel.Discovery.DiscoveryClient> and pass in a <xref:System.ServiceModel.Discovery.FindCriteria> with two restrictions.</span></span> <span data-ttu-id="4c208-116">Den Kriterien wird ein Bereich hinzugefügt, und die <xref:System.ServiceModel.Discovery.FindCriteria.MaxResults%2A>-Eigenschaft wird auf 1 festgelegt.</span><span class="sxs-lookup"><span data-stu-id="4c208-116">A scope is added to the criteria and the <xref:System.ServiceModel.Discovery.FindCriteria.MaxResults%2A> property is set to 1.</span></span> <span data-ttu-id="4c208-117">Der Bereich beschränkt die Ergebnisse auf die Dienste, die den gleichen Bereich veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="4c208-117">The scope limits the results to only the services that publish the same scope.</span></span> <span data-ttu-id="4c208-118">Durch Festlegen von <xref:System.ServiceModel.Discovery.FindCriteria.MaxResults%2A> auf 1 werden die Antworten, auf die der <xref:System.ServiceModel.Discovery.DiscoveryClient> wartet, auf maximal einen Endpunkt beschränkt.</span><span class="sxs-lookup"><span data-stu-id="4c208-118">Setting <xref:System.ServiceModel.Discovery.FindCriteria.MaxResults%2A> to 1 limits the responses the <xref:System.ServiceModel.Discovery.DiscoveryClient> waits for to, at most, 1 endpoint.</span></span> <span data-ttu-id="4c208-119">Der <xref:System.ServiceModel.Discovery.DiscoveryClient.Find%2A>-Aufruf ist ein synchroner Vorgang, der den Thread blockiert, bis ein Timeout überschritten bzw. ein Endpunkt gefunden wird.</span><span class="sxs-lookup"><span data-stu-id="4c208-119">The <xref:System.ServiceModel.Discovery.DiscoveryClient.Find%2A> call is a synchronous operation that blocks the thread until a timeout is reached or one endpoint is found.</span></span>

### <a name="to-use-this-sample"></a><span data-ttu-id="4c208-120">So verwenden Sie dieses Beispiel</span><span class="sxs-lookup"><span data-stu-id="4c208-120">To use this sample</span></span>

1. <span data-ttu-id="4c208-121">In diesem Beispiel werden HTTP-Endpunkte verwendet. Zur Ausführung des Beispiels müssen die richtigen URL-ACLs hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="4c208-121">This sample uses HTTP endpoints and to run this sample, proper URL ACLs must be added.</span></span> <span data-ttu-id="4c208-122">Weitere Informationen finden Sie unter [Konfigurieren von http und HTTPS](../feature-details/configuring-http-and-https.md).</span><span class="sxs-lookup"><span data-stu-id="4c208-122">For more information, see [Configuring HTTP and HTTPS](../feature-details/configuring-http-and-https.md).</span></span> <span data-ttu-id="4c208-123">Durch die Ausführung des folgenden Befehls mit erweiterten Berechtigungen werden die entsprechenden ACLs hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="4c208-123">Executing the following command at an elevated privilege should add the appropriate ACLs.</span></span> <span data-ttu-id="4c208-124">Es empfiehlt sich, die folgenden Argumente durch die Domäne und den Benutzernamen zu ersetzen, wenn der Befehl nicht funktioniert: `netsh http add urlacl url=http://+:8000/ user=%DOMAIN%\%UserName%`</span><span class="sxs-lookup"><span data-stu-id="4c208-124">You may want to substitute your Domain and Username for the following arguments if the command does not work as is: `netsh http add urlacl url=http://+:8000/ user=%DOMAIN%\%UserName%`</span></span>

2. <span data-ttu-id="4c208-125">Erstellen Sie die Projektmappe.</span><span class="sxs-lookup"><span data-stu-id="4c208-125">Build the solution.</span></span>

3. <span data-ttu-id="4c208-126">Führen Sie die ausführbare Dienstdatei aus dem Buildverzeichnis aus.</span><span class="sxs-lookup"><span data-stu-id="4c208-126">Run the service executable from the build directory.</span></span>

4. <span data-ttu-id="4c208-127">Führen Sie die ausführbare Clientanwendung aus.</span><span class="sxs-lookup"><span data-stu-id="4c208-127">Run the client executable.</span></span> <span data-ttu-id="4c208-128">Beachten Sie, dass der Client in der Lage ist, den Dienst zu finden.</span><span class="sxs-lookup"><span data-stu-id="4c208-128">Note that the client is able to locate the service.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="4c208-129">Die Beispiele sind möglicherweise bereits auf dem Computer installiert.</span><span class="sxs-lookup"><span data-stu-id="4c208-129">The samples may already be installed on your machine.</span></span> <span data-ttu-id="4c208-130">Suchen Sie nach dem folgenden Verzeichnis (Standardverzeichnis), bevor Sie fortfahren.</span><span class="sxs-lookup"><span data-stu-id="4c208-130">Check for the following (default) directory before continuing.</span></span>
>
> `<InstallDrive>:\WF_WCF_Samples`
>
> <span data-ttu-id="4c208-131">Wenn dieses Verzeichnis nicht vorhanden ist, wechseln Sie zu [Windows Communication Foundation (WCF) und Windows Workflow Foundation (WF)-Beispiele für .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=21459) , um alle Windows Communication Foundation (WCF) und [!INCLUDE[wf1](../../../../includes/wf1-md.md)] Beispiele herunterzuladen.</span><span class="sxs-lookup"><span data-stu-id="4c208-131">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=21459) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="4c208-132">Dieses Beispiel befindet sich im folgenden Verzeichnis.</span><span class="sxs-lookup"><span data-stu-id="4c208-132">This sample is located in the following directory.</span></span>
>
> `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\Discovery\DiscoveryWithScopes`
