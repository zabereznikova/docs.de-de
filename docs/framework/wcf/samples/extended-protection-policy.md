---
title: Erweiterte Schutzrichtlinie
ms.date: 03/30/2017
ms.assetid: e2616a10-317e-4c34-8023-0c015a80a82f
ms.openlocfilehash: b513eafecf9b5eaee49b5bc318b3f4bad71213a2
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/26/2020
ms.locfileid: "96281923"
---
# <a name="extended-protection-policy"></a><span data-ttu-id="e6e32-102">Erweiterte Schutzrichtlinie</span><span class="sxs-lookup"><span data-stu-id="e6e32-102">Extended Protection Policy</span></span>

<span data-ttu-id="e6e32-103">Der erweiterte Schutz ist eine Sicherheitsinitiative zum Schutz vor Man-In-The-Middle-Angriffen (MITM-Angriff, Janusangriff).</span><span class="sxs-lookup"><span data-stu-id="e6e32-103">Extended Protection is a security initiative for protecting against man-in-the-middle (MITM) attacks.</span></span> <span data-ttu-id="e6e32-104">Ein MITM-Angriff ist eine Sicherheitsbedrohung, bei der ein MITM die Anmeldeinformationen eines Clients an einen Server weiterleitet.</span><span class="sxs-lookup"><span data-stu-id="e6e32-104">A MITM attack is a security threat in which a MITM takes a client’s credentials and forwards it to a server.</span></span>  
  
## <a name="demonstrates"></a><span data-ttu-id="e6e32-105">Zeigt</span><span class="sxs-lookup"><span data-stu-id="e6e32-105">Demonstrates</span></span>  

 <span data-ttu-id="e6e32-106">Erweiterter Schutz</span><span class="sxs-lookup"><span data-stu-id="e6e32-106">Extended protection</span></span>  
  
## <a name="discussion"></a><span data-ttu-id="e6e32-107">Diskussion</span><span class="sxs-lookup"><span data-stu-id="e6e32-107">Discussion</span></span>  

 <span data-ttu-id="e6e32-108">Wenn sich Anwendungen über Kerberos, Digest oder NTLM mit HTTPS authentifizieren, wird zunächst ein Transport Level Security (TLS)-Kanal eingerichtet. Die Authentifizierung erfolgt dann über den sicheren Kanal.</span><span class="sxs-lookup"><span data-stu-id="e6e32-108">When applications authenticate using Kerberos, Digest or NTLM using HTTPS, a Transport Level Security (TLS) channel is first established and then authentication takes place using the secure channel.</span></span> <span data-ttu-id="e6e32-109">Zwischen dem von SSL und dem bei der Authentifizierung erstellten Sitzungsschlüssel besteht jedoch keine Bindung.</span><span class="sxs-lookup"><span data-stu-id="e6e32-109">However, there is no binding between the session key generated by SSL and the session key generated during authentication.</span></span> <span data-ttu-id="e6e32-110">Jeder MITM kann sich zwischen den Client und den Server schalten und anfangen, die Anforderungen vom Client weiterzuleiten, auch wenn der Transportkanal selbst sicher ist. Der Server selbst kann nicht feststellen, ob der sichere Kanal vom Client oder von einem MITM eingerichtet wurde.</span><span class="sxs-lookup"><span data-stu-id="e6e32-110">Any MITM can establish itself between the client and the server and start forwarding the requests from the client, even when the transport channel itself is secure, because the server has no way of knowing whether the secure channel has been established from the client or a MITM.</span></span> <span data-ttu-id="e6e32-111">Die Lösung bei einem Szenario dieser Art besteht darin, den äußeren TLS-Kanal mit dem inneren Authentifizierungskanal auf eine Weise zu binden, die es dem Server ermöglicht, festzustellen, ob es einen MITM gibt.</span><span class="sxs-lookup"><span data-stu-id="e6e32-111">The solution in this scenario is to bind the outer TLS channel with the inner authentication channel such that the server can detect if there is a MITM.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="e6e32-112">Dieses Beispiel funktioniert nur, wenn es unter IIS gehostet wird und nicht unter Cassini – Visual Studio Development Server, da hier keine HTTPS-Unterstützung gegeben ist.</span><span class="sxs-lookup"><span data-stu-id="e6e32-112">This sample only works when hosted on IIS and cannot work on Cassini – Visual Studio Development Server because Cassini does not support HTTPS.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="e6e32-113">Diese Funktion ist aktuell nur unter Windows 7 verfügbar.</span><span class="sxs-lookup"><span data-stu-id="e6e32-113">This feature is currently only available on Windows 7.</span></span> <span data-ttu-id="e6e32-114">Die folgenden Schritte gelten für Windows 7.</span><span class="sxs-lookup"><span data-stu-id="e6e32-114">The following steps are specific to Windows 7.</span></span>  
  
#### <a name="to-set-up-build-and-run-the-sample"></a><span data-ttu-id="e6e32-115">So können Sie das Beispiel einrichten, erstellen und ausführen</span><span class="sxs-lookup"><span data-stu-id="e6e32-115">To set up, build, and run the sample</span></span>  
  
1. <span data-ttu-id="e6e32-116">Installieren **Sie** Internetinformationsdienste über die **Systemsteuerung**, "Software" und " **Windows-Funktionen**".</span><span class="sxs-lookup"><span data-stu-id="e6e32-116">Install Internet Information Services from **Control Panel**, **Add/Remove Programs**, **Windows Features**.</span></span>  
  
2. <span data-ttu-id="e6e32-117">Installieren Sie die **Windows-Authentifizierung** in **Windows-Features**, **Internetinformationsdienste**, **World Wide Web-Diensten**, **Sicherheit** und **Windows-Authentifizierung**.</span><span class="sxs-lookup"><span data-stu-id="e6e32-117">Install **Windows Authentication** in **Windows Features**, **Internet Information Services**, **World Wide Web Services**, **Security**, and **Windows Authentication**.</span></span>  
  
3. <span data-ttu-id="e6e32-118">Installieren Sie **Windows Communication Foundation http-Aktivierung** in **Windows-Features**, **Microsoft .NET Framework 3.5.1** und **Windows Communication Foundation http-Aktivierung**.</span><span class="sxs-lookup"><span data-stu-id="e6e32-118">Install **Windows Communication Foundation HTTP Activation** in **Windows Features**, **Microsoft .NET Framework 3.5.1**, and **Windows Communication Foundation HTTP Activation**.</span></span>  
  
4. <span data-ttu-id="e6e32-119">In diesem Beispiel muss der Client eine Verbindung über einen sicheren Kanal zum Server herstellen. Dazu muss ein Serverzertifikat vorliegen, das im IIS (Internet Information Services)-Manager installiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="e6e32-119">This sample requires the client to establish a secure channel with the server, so it requires the presence of a server certificate which can be installed from Internet Information Services (IIS) Manager.</span></span>  
  
    1. <span data-ttu-id="e6e32-120">Öffnen Sie IIS-Manager.</span><span class="sxs-lookup"><span data-stu-id="e6e32-120">Open IIS Manager.</span></span> <span data-ttu-id="e6e32-121">Öffnen Sie **Server Zertifikate**, die auf der Registerkarte **Funktions Ansicht** angezeigt werden, wenn der Stamm Knoten (Computername) ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="e6e32-121">Open **Server certificates**, which appears in the **Feature View** tab when the root node (machine name) is selected.</span></span>  
  
    2. <span data-ttu-id="e6e32-122">Erstellen Sie zum Testen dieses Beispiels ein selbstsigniertes Zertifikat.</span><span class="sxs-lookup"><span data-stu-id="e6e32-122">For the purpose of testing this sample, create a self-signed certificate.</span></span> <span data-ttu-id="e6e32-123">Wenn Sie von Internet Explorer keine Meldung hinsichtlich der fehlenden Sicherheit des Zertifikats erhalten möchten, installieren Sie das Zertifikat im entsprechenden Autoritätsspeicher für vertrauenswürdige Zertifikate.</span><span class="sxs-lookup"><span data-stu-id="e6e32-123">If you do not want Internet Explorer to prompt you about the certificate not being secure, install the certificate in the Trusted Certificate Root authority store.</span></span>  
  
5. <span data-ttu-id="e6e32-124">Öffnen Sie den **Aktions** Bereich für die Standard Website.</span><span class="sxs-lookup"><span data-stu-id="e6e32-124">Open the **Actions** pane for the default Web site.</span></span> <span data-ttu-id="e6e32-125">Klicken Sie auf **Website bearbeiten** und dann auf **Bindungen**.</span><span class="sxs-lookup"><span data-stu-id="e6e32-125">Click **Edit Site**, **Bindings**.</span></span> <span data-ttu-id="e6e32-126">Fügen Sie HTTPS als Typ hinzu, wenn nicht bereits vorhanden ist, und geben Sie die Portnummer 443 an.</span><span class="sxs-lookup"><span data-stu-id="e6e32-126">Add HTTPS as a type if not already present, with port number 443.</span></span> <span data-ttu-id="e6e32-127">Weisen Sie das im vorangehenden Schritt erstellte SSL-Zertifikat zu.</span><span class="sxs-lookup"><span data-stu-id="e6e32-127">Assign the SSL certificate created in the preceding step.</span></span>  
  
6. <span data-ttu-id="e6e32-128">Erstellen Sie den Dienst.</span><span class="sxs-lookup"><span data-stu-id="e6e32-128">Build the service.</span></span> <span data-ttu-id="e6e32-129">Hierdurch wird ein virtuelles Verzeichnis in IIS erstellt. Die DLL-, SVC- und CONFIG-Dateien, die dafür erforderlich sind, dass der Dienst über das Web gehostet wird, werden kopiert.</span><span class="sxs-lookup"><span data-stu-id="e6e32-129">This creates a virtual directory in IIS, and copies the .dll, .svc and .config files as required for the service to be Web hosted.</span></span>  
  
7. <span data-ttu-id="e6e32-130">Öffnen Sie IIS-Manager.</span><span class="sxs-lookup"><span data-stu-id="e6e32-130">Open IIS Manager.</span></span> <span data-ttu-id="e6e32-131">Klicken Sie mit der rechten Maustaste auf das virtuelle Verzeichnis (**ExtendedProtection**), das im vorherigen Schritt erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="e6e32-131">Right-click the virtual directory (**ExtendedProtection**), which was created in the preceding step.</span></span> <span data-ttu-id="e6e32-132">Wählen Sie **in Anwendung konvertieren** aus.</span><span class="sxs-lookup"><span data-stu-id="e6e32-132">Select **Convert to Application**.</span></span>  
  
8. <span data-ttu-id="e6e32-133">Öffnen Sie das **Authentifizierungs** Modul für dieses virtuelle Verzeichnis im IIS-Manager, und aktivieren Sie die **Windows-Authentifizierung**.</span><span class="sxs-lookup"><span data-stu-id="e6e32-133">Open the **Authentication** module in IIS Manager for this virtual directory and enable **Windows Authentication**.</span></span>  
  
9. <span data-ttu-id="e6e32-134">Öffnen Sie **Erweiterte Einstellungen** unter **Windows-Authentifizierung** für dieses virtuelle Verzeichnis, und legen Sie es auf **erforderlich** fest.</span><span class="sxs-lookup"><span data-stu-id="e6e32-134">Open **Advanced Settings** under **Windows Authentication** for this virtual directory and set it to **Required**.</span></span>  
  
10. <span data-ttu-id="e6e32-135">Sie können den Dienst testen, indem Sie die HTTPS-URL in einem Browserfenster öffnen. (Geben Sie einen vollqualifizierten Domänennamen an.)</span><span class="sxs-lookup"><span data-stu-id="e6e32-135">You can test the service by accessing the HTTPS URL from a browser window (Provide a fully-qualified domain name).</span></span> <span data-ttu-id="e6e32-136">Möchten Sie von einem Remotecomputer aus auf die URL zugreifen, konfigurieren Sie die Firewall entsprechend, damit ein- und ausgehende HTTP- und HTTPS-Verbindungen hergestellt werden können.</span><span class="sxs-lookup"><span data-stu-id="e6e32-136">If you want to access this URL from a remote machine, make sure that the firewall is opened for all incoming HTTP and HTTPS connections.</span></span>  
  
11. <span data-ttu-id="e6e32-137">Öffnen Sie die Clientkonfigurationsdatei, und geben Sie einen vollqualifizierten Domänennamen für das Client- oder Endpunktadressattribut das, mit dem der `<<full_machine_name>>` ersetzt wird.</span><span class="sxs-lookup"><span data-stu-id="e6e32-137">Open the client configuration file and provide a fully-qualified domain name for the client or endpoint address attribute that replaces `<<full_machine_name>>`.</span></span>  
  
12. <span data-ttu-id="e6e32-138">Führen Sie den Client aus.</span><span class="sxs-lookup"><span data-stu-id="e6e32-138">Run the client.</span></span> <span data-ttu-id="e6e32-139">Der Client kommuniziert mit dem Dienst, der einen sicheren Kanal einrichtet und den erweiterten Schutz verwendet.</span><span class="sxs-lookup"><span data-stu-id="e6e32-139">The client communicates with the service, which establishes a secure channel and uses extended protection.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="e6e32-140">Die Beispiele sind möglicherweise bereits auf dem Computer installiert.</span><span class="sxs-lookup"><span data-stu-id="e6e32-140">The samples may already be installed on your machine.</span></span> <span data-ttu-id="e6e32-141">Suchen Sie nach dem folgenden Verzeichnis (Standardverzeichnis), bevor Sie fortfahren.</span><span class="sxs-lookup"><span data-stu-id="e6e32-141">Check for the following (default) directory before continuing.</span></span>  
>
> `<InstallDrive>:\WF_WCF_Samples`  
>
> <span data-ttu-id="e6e32-142">Wenn dieses Verzeichnis nicht vorhanden ist, wechseln Sie zu [Windows Communication Foundation (WCF) und Windows Workflow Foundation (WF)-Beispiele für .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=21459) , um alle Windows Communication Foundation (WCF) und Beispiele herunterzuladen [!INCLUDE[wf1](../../../../includes/wf1-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="e6e32-142">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=21459) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="e6e32-143">Dieses Beispiel befindet sich im folgenden Verzeichnis.</span><span class="sxs-lookup"><span data-stu-id="e6e32-143">This sample is located in the following directory.</span></span>  
>
> `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\Services\Security\ExtendedProtection`
