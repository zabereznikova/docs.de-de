---
title: Sicherheitsüberlegungen für Metadaten
ms.date: 03/30/2017
ms.assetid: e78ef8ab-4f63-4656-ab93-b1deab2666d5
author: BrucePerlerMS
manager: mbaldwin
ms.openlocfilehash: b8028b27e721e19a5fc01887e4095218d0e14436
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/04/2018
ms.locfileid: "33498542"
---
# <a name="security-considerations-with-metadata"></a><span data-ttu-id="ea990-102">Sicherheitsüberlegungen für Metadaten</span><span class="sxs-lookup"><span data-stu-id="ea990-102">Security Considerations with Metadata</span></span>
<span data-ttu-id="ea990-103">Wenn Sie die Metadaten-Features in Windows Communication Foundation (WCF) verwenden, sollten Sie die Sicherheitsaspekte bei der Veröffentlichung, abrufen und Verwenden von Dienstmetadaten.</span><span class="sxs-lookup"><span data-stu-id="ea990-103">When using the metadata features in Windows Communication Foundation (WCF), consider the security implications of publishing, retrieving, and using service metadata.</span></span>  
  
## <a name="when-to-publish-metadata"></a><span data-ttu-id="ea990-104">Veröffentlichen von Metadaten</span><span class="sxs-lookup"><span data-stu-id="ea990-104">When to Publish Metadata</span></span>  
 <span data-ttu-id="ea990-105">Standardmäßig veröffentlichen WCF-Diensten keine Metadaten an.</span><span class="sxs-lookup"><span data-stu-id="ea990-105">WCF services do not publish metadata by default.</span></span> <span data-ttu-id="ea990-106">Zum Veröffentlichen von Metadaten für einen WCF-Dienst müssen Sie ausdrücklich Veröffentlichen von Metadaten durch Hinzufügen von metadatenendpunkten zu Ihrem Dienst aktivieren (siehe [Veröffentlichungsmetadaten](../../../../docs/framework/wcf/feature-details/publishing-metadata.md)).</span><span class="sxs-lookup"><span data-stu-id="ea990-106">To publish metadata for a WCF service you must explicitly enable metadata publishing by adding metadata endpoints to your service (see [Publishing Metadata](../../../../docs/framework/wcf/feature-details/publishing-metadata.md)).</span></span> <span data-ttu-id="ea990-107">Wird das Veröffentlichen von Metadaten nicht aktiviert, bietet der Dienst eine geringere Angriffsfläche, und auch das Risiko der ungewollten Preisgabe von Informationen ist geringer.</span><span class="sxs-lookup"><span data-stu-id="ea990-107">Leaving metadata publishing disabled reduces the attack surface for your service and lowers the risk of unintentional information disclosure.</span></span> <span data-ttu-id="ea990-108">Metadaten müssen nicht von allen Diensten veröffentlicht werden.</span><span class="sxs-lookup"><span data-stu-id="ea990-108">Not all services must publish metadata.</span></span> <span data-ttu-id="ea990-109">Wenn keine Metadaten veröffentlicht werden müssen, können Sie die Funktion auch deaktiviert lassen.</span><span class="sxs-lookup"><span data-stu-id="ea990-109">If you do not have to publish metadata, consider leaving it turned off.</span></span> <span data-ttu-id="ea990-110">Beachten Sie, dass Sie weiterhin Metadaten und den Client direkt aus Ihrem Dienstassemblys mit generieren können die [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span><span class="sxs-lookup"><span data-stu-id="ea990-110">Note that you can still generate metadata and client code directly from your service assemblies using the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span> <span data-ttu-id="ea990-111">Weitere Informationen zur Verwendung von Svcutil.exe zum Exportieren von Metadaten finden Sie unter [wie: Verwenden von Svcutil.exe zum Exportieren von Metadaten aus den kompilierten Dienstcode](../../../../docs/framework/wcf/feature-details/how-to-use-svcutil-exe-to-export-metadata-from-compiled-service-code.md).</span><span class="sxs-lookup"><span data-stu-id="ea990-111">For more information about using Svcutil.exe to export metadata, see [How to: Use Svcutil.exe to Export Metadata from Compiled Service Code](../../../../docs/framework/wcf/feature-details/how-to-use-svcutil-exe-to-export-metadata-from-compiled-service-code.md).</span></span>  
  
## <a name="publishing-metadata-using-a-secure-binding"></a><span data-ttu-id="ea990-112">Veröffentlichen von Metadaten unter Verwendung einer sicheren Bindung</span><span class="sxs-lookup"><span data-stu-id="ea990-112">Publishing Metadata Using a Secure Binding</span></span>  
 <span data-ttu-id="ea990-113">Die Metadaten-Bindungen, die WCF bietet einen nicht sicher sind, und sie zulassen anonymen Zugriff auf die Metadaten.</span><span class="sxs-lookup"><span data-stu-id="ea990-113">The default metadata bindings that WCF provides are not secure and they allow anonymous access to the metadata.</span></span> <span data-ttu-id="ea990-114">Die Metadaten des Diensts, die ein WCF-Dienst veröffentlicht enthält eine ausführliche Beschreibung des Diensts und kann absichtlich oder unabsichtlich vertrauliche Informationen enthalten.</span><span class="sxs-lookup"><span data-stu-id="ea990-114">The service metadata that a WCF service publishes contains a detailed description about the service and may intentionally or unintentionally contain sensitive information.</span></span> <span data-ttu-id="ea990-115">So können in den Dienstmetadaten beispielsweise Informationen zu Infrastrukturvorgängen enthalten sein, die nicht für eine Veröffentlichung bestimmt sind.</span><span class="sxs-lookup"><span data-stu-id="ea990-115">For example, service metadata may contain information about infrastructure operations that was not intended to be broadcast publicly.</span></span> <span data-ttu-id="ea990-116">Mithilfe einer sicheren Bindung für den Metadatenendpunkt können die Dienstmetadaten vor nicht autorisiertem Zugriff geschützt werden.</span><span class="sxs-lookup"><span data-stu-id="ea990-116">To protect service metadata from unauthorized access, you can use a secure binding for your metadata endpoint.</span></span> <span data-ttu-id="ea990-117">Metadatenendpunkte reagieren auf HTTP/GET-Anforderungen, von denen Secure Sockets Layer (SSL) zum Sichern der Metadaten verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="ea990-117">Metadata endpoints respond to HTTP/GET requests that can use Secure Sockets Layer (SSL) to secure the metadata.</span></span> <span data-ttu-id="ea990-118">Weitere Informationen finden Sie unter [wie: sichere Metadatenendpunkte](../../../../docs/framework/wcf/feature-details/how-to-secure-metadata-endpoints.md).</span><span class="sxs-lookup"><span data-stu-id="ea990-118">For more information, see [How to: Secure Metadata Endpoints](../../../../docs/framework/wcf/feature-details/how-to-secure-metadata-endpoints.md).</span></span>  
  
 <span data-ttu-id="ea990-119">Das Sichern der Metadatenendpunkte hat zudem den Vorteil, dass Dienstmetadaten auf sichere Weise und ohne Manipulations- oder Spoofinggefahr abgerufen werden können.</span><span class="sxs-lookup"><span data-stu-id="ea990-119">Securing your metadata endpoints also provides a way for requesters to securely retrieve service metadata without the risk of tampering or spoofing.</span></span>  
  
## <a name="using-only-trusted-metadata"></a><span data-ttu-id="ea990-120">Ausschließliches Verwenden vertrauenswürdiger Metadaten</span><span class="sxs-lookup"><span data-stu-id="ea990-120">Using Only Trusted Metadata</span></span>  
 <span data-ttu-id="ea990-121">Mithilfe von Dienstmetadaten lassen sich automatisch die zum Aufrufen des Diensts erforderlichen Laufzeitkomponenten konstruieren.</span><span class="sxs-lookup"><span data-stu-id="ea990-121">You can use service metadata to automatically construct the run-time components required to call the service.</span></span> <span data-ttu-id="ea990-122">Die Metadaten können auch zur Entwurfszeit verwendet werden, um eine Clientanwendung zu entwickeln, oder zur Laufzeit, um die vom Client zum Aufrufen des Diensts verwendete Bindung dynamisch zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="ea990-122">You can also use metadata at design time to develop a client application or at runtime to dynamically update the binding a client uses to call a service.</span></span>  
  
 <span data-ttu-id="ea990-123">Werden die Dienstmetadaten auf unsichere Weise abgerufen, können die Daten manipuliert oder gespooft werden.</span><span class="sxs-lookup"><span data-stu-id="ea990-123">Service metadata can be tampered with or spoofed when retrieved in an insecure manner.</span></span> <span data-ttu-id="ea990-124">Manipulierte Metadaten können eine Umleitung des Clients zu Malware, fehlerhafte Sicherheitseinstellungen oder bösartige XML-Strukturen beinhalten.</span><span class="sxs-lookup"><span data-stu-id="ea990-124">Tampered metadata can redirect your client to a malicious service, contain compromised security settings, or contain malicious XML structures.</span></span> <span data-ttu-id="ea990-125">Metadatendokumente können groß sein und werden häufig im Dateisystem gespeichert.</span><span class="sxs-lookup"><span data-stu-id="ea990-125">Metadata documents can be large and are frequently saved to the file system.</span></span> <span data-ttu-id="ea990-126">Verwenden Sie zum Schutz vor Manipulation und Spoofing beim Anfordern von Dienstmetadaten eine sichere Bindung (sofern vorhanden).</span><span class="sxs-lookup"><span data-stu-id="ea990-126">To protect against tampering and spoofing, use a secure binding to request service metadata when one is available.</span></span>  
  
## <a name="using-safe-techniques-for-processing-metadata"></a><span data-ttu-id="ea990-127">Verwenden sicherer Techniken zum Verarbeiten von Metadaten</span><span class="sxs-lookup"><span data-stu-id="ea990-127">Using Safe Techniques for Processing Metadata</span></span>  
 <span data-ttu-id="ea990-128">Dienstmetadaten werden häufig von einem Dienst über ein Netzwerk abgerufen. Hierzu werden standardisierte Protokolle wie WS-MetadataExchange (MEX) verwendet.</span><span class="sxs-lookup"><span data-stu-id="ea990-128">Service metadata is frequently retrieved from a service over a network using standardized protocols such as WS-MetadataExchange (MEX).</span></span> <span data-ttu-id="ea990-129">Viele Metadatenformate enthalten Verweismechanismen, um auf weitere Metadaten zu verweisen.</span><span class="sxs-lookup"><span data-stu-id="ea990-129">Many metadata formats include referencing mechanisms for pointing to additional metadata.</span></span> <span data-ttu-id="ea990-130">Verweise in WSDL (Web Services Description Language)-, XML-Schema- und MEX-Dokumenten werden vom <xref:System.ServiceModel.Description.MetadataExchangeClient>-Typ automatisch verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="ea990-130">The <xref:System.ServiceModel.Description.MetadataExchangeClient> type automatically processes references for you in Web Services Description Language (WSDL) documents, XML Schema, and MEX documents.</span></span> <span data-ttu-id="ea990-131">Die Größe des aus den abgerufenen Metadaten erstellten <xref:System.ServiceModel.Description.MetadataSet>-Objekts verhält sich direkt proportional zum <xref:System.ServiceModel.Description.MetadataExchangeClient.MaximumResolvedReferences%2A>-Wert für die verwendete <xref:System.ServiceModel.Description.MetadataExchangeClient>-Instanz sowie zum `MaxReceivedMessageSize`-Wert für die von dieser <xref:System.ServiceModel.Description.MetadataExchangeClient>-Instanz verwendeten Bindung.</span><span class="sxs-lookup"><span data-stu-id="ea990-131">The size of the <xref:System.ServiceModel.Description.MetadataSet> object created from the retrieved metadata is directly proportional to the <xref:System.ServiceModel.Description.MetadataExchangeClient.MaximumResolvedReferences%2A> value for the <xref:System.ServiceModel.Description.MetadataExchangeClient> instance that is used and the `MaxReceivedMessageSize` value for the binding being used by that <xref:System.ServiceModel.Description.MetadataExchangeClient> instance.</span></span> <span data-ttu-id="ea990-132">Legen Sie geeignete Werte für diese Kontingente fest.</span><span class="sxs-lookup"><span data-stu-id="ea990-132">Set these quotas to appropriate values as dictated by your scenario.</span></span>  
  
 <span data-ttu-id="ea990-133">In WCF wird Dienstmetadaten als XML verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="ea990-133">In WCF, service metadata is processed as XML.</span></span> <span data-ttu-id="ea990-134">Beim Verarbeiten von XML-Dokumenten schützen sich die Anwendungen selbst vor bösartigen XML-Strukturen.</span><span class="sxs-lookup"><span data-stu-id="ea990-134">When processing XML documents, applications should protect themselves against malicious XML structures.</span></span> <span data-ttu-id="ea990-135">Verwenden der `XmlDictionaryReader` mit geeigneten Kontingenten, beim Verarbeiten von XML, und legen Sie außerdem die <xref:System.Xml.XmlTextReader.DtdProcessing%2A> Eigenschaft `Prohibit`.</span><span class="sxs-lookup"><span data-stu-id="ea990-135">Use the `XmlDictionaryReader` with appropriate quotas when processing XML and also set the <xref:System.Xml.XmlTextReader.DtdProcessing%2A> property to `Prohibit`.</span></span>  
  
 <span data-ttu-id="ea990-136">Das Metadatensystem in WCF ist erweiterbar und Erweiterungen für endpunktverweismetadaten, die in der Anwendungskonfigurationsdatei registriert werden können (siehe [Erweitern des Metadatensystems](../../../../docs/framework/wcf/extending/extending-the-metadata-system.md)).</span><span class="sxs-lookup"><span data-stu-id="ea990-136">The metadata system in WCF is extensible and metadata extensions can be registered in your application configuration file (see [Extending the Metadata System](../../../../docs/framework/wcf/extending/extending-the-metadata-system.md)).</span></span> <span data-ttu-id="ea990-137">Von Metadatenerweiterungen kann beliebiger Code ausgeführt werden, weshalb die Anwendungskonfigurationsdatei mithilfe geeigneter Zugriffssteuerungslisten (Access Control Lists, ACLs) geschützt werden muss und ausschließlich vertrauenswürdige Implementierungen von Metadatenerweiterungen registriert werden dürfen.</span><span class="sxs-lookup"><span data-stu-id="ea990-137">Metadata extensions can run arbitrary code, so you should protect your application configuration file with appropriate access control lists (ACLs) and register only trusted metadata extension implementations.</span></span>  
  
## <a name="validating-generated-clients"></a><span data-ttu-id="ea990-138">Überprüfen von generierten Clients</span><span class="sxs-lookup"><span data-stu-id="ea990-138">Validating Generated Clients</span></span>  
 <span data-ttu-id="ea990-139">Überprüfen Sie beim Generieren von Clientcode aus Metadaten, die von einer nicht vertrauenswürdigen Quelle abgerufen wurden, den generierten Clientcode, und stellen Sie sicher, dass der generierte Client mit den Sicherheitsrichtlinien der Clientanwendungen konform ist.</span><span class="sxs-lookup"><span data-stu-id="ea990-139">When generating client code from metadata retrieved from a source that is not trusted, validate the generated client code to ensure that the generated client conforms to your client applications security policies.</span></span> <span data-ttu-id="ea990-140">Die Validierung der Einstellungen für die Clientbindung kann entweder mit einem Validierungsverhalten oder durch eine Sichtprüfung des generierten Codes erfolgen.</span><span class="sxs-lookup"><span data-stu-id="ea990-140">You can use a validating behavior to check settings on your client binding or visually inspect code generated by tools.</span></span> <span data-ttu-id="ea990-141">Ein Beispiel dafür, wie einen Client implementiert, das Verhalten überprüft, finden Sie unter [Clientvalidierung](../../../../docs/framework/wcf/samples/client-validation.md).</span><span class="sxs-lookup"><span data-stu-id="ea990-141">For an example of how to implement a client that validates behaviors, see [Client Validation](../../../../docs/framework/wcf/samples/client-validation.md).</span></span>  
  
## <a name="protecting-application-configuration-files"></a><span data-ttu-id="ea990-142">Schützen von Anwendungskonfigurationsdateien</span><span class="sxs-lookup"><span data-stu-id="ea990-142">Protecting Application Configuration Files</span></span>  
 <span data-ttu-id="ea990-143">Mithilfe der Anwendungskonfigurationsdatei eines Diensts kann gesteuert werden, ob und auf welche Weise Metadaten veröffentlicht werden.</span><span class="sxs-lookup"><span data-stu-id="ea990-143">A service's application configuration file may control how and if metadata is published.</span></span> <span data-ttu-id="ea990-144">Es empfiehlt sich, die Anwendungskonfigurationsdatei mit geeigneten Zugriffssteuerungslisten (Access Control Lists, ACLs) zu schützen, um so den Schutz vor Einstellungsänderungen durch einen möglichen Angreifer sicherzustellen.</span><span class="sxs-lookup"><span data-stu-id="ea990-144">It is a good idea to protect the application configuration file with appropriate access control lists (ACLs) to ensure an attacker cannot modify such settings.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ea990-145">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="ea990-145">See Also</span></span>  
 [<span data-ttu-id="ea990-146">Vorgehensweise: Sichere Metadatenendpunkte</span><span class="sxs-lookup"><span data-stu-id="ea990-146">How to: Secure Metadata Endpoints</span></span>](../../../../docs/framework/wcf/feature-details/how-to-secure-metadata-endpoints.md)  
 [<span data-ttu-id="ea990-147">Sicherheit</span><span class="sxs-lookup"><span data-stu-id="ea990-147">Security</span></span>](../../../../docs/framework/wcf/feature-details/security.md)
