---
title: ServiceModel-Transaktionsattribute
ms.date: 03/30/2017
helpviewer_keywords:
- transactions [WCF], ServiceModel attributes
ms.assetid: 1e0d2436-6ae5-439b-9765-a448d6f60000
ms.openlocfilehash: 79d97eee328d816281348b5b15cf779e1ee65893
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/04/2018
ms.locfileid: "33500830"
---
# <a name="servicemodel-transaction-attributes"></a><span data-ttu-id="de7e9-102">ServiceModel-Transaktionsattribute</span><span class="sxs-lookup"><span data-stu-id="de7e9-102">ServiceModel Transaction Attributes</span></span>
<span data-ttu-id="de7e9-103">Windows Communication Foundation (WCF) bietet Eigenschaften für drei Standard- <xref:System.ServiceModel> Attribute, die Ihnen ermöglichen, die das Verhalten von Transaktionen für einen WCF-Dienst zu konfigurieren:</span><span class="sxs-lookup"><span data-stu-id="de7e9-103">Windows Communication Foundation (WCF) provides properties on three standard <xref:System.ServiceModel> attributes that enable you to configure the behavior of transactions for a WCF service:</span></span>  
  
-   <xref:System.ServiceModel.TransactionFlowAttribute>  
  
-   <xref:System.ServiceModel.ServiceBehaviorAttribute>  
  
-   <xref:System.ServiceModel.OperationBehaviorAttribute>  
  
## <a name="transactionflowattribute"></a><span data-ttu-id="de7e9-104">TransactionFlowAttribute</span><span class="sxs-lookup"><span data-stu-id="de7e9-104">TransactionFlowAttribute</span></span>  
 <span data-ttu-id="de7e9-105">Das <xref:System.ServiceModel.TransactionFlowAttribute>-Attribut legt die Bereitschaft eines Vorgangs in einem Dienstvertrag fest, die vom Client eingehenden Transaktionen anzunehmen.</span><span class="sxs-lookup"><span data-stu-id="de7e9-105">The <xref:System.ServiceModel.TransactionFlowAttribute> attribute specifies the willingness of an operation in a service contract to accept incoming transactions from a client.</span></span> <span data-ttu-id="de7e9-106">Das Attribut bietet diese Kontrolle über das folgende Attribut: Transaktionen verwenden die <xref:System.ServiceModel.TransactionFlowOption>-Enumeration, um festzulegen, ob eine eingehende Transaktion <xref:System.ServiceModel.TransactionFlowOption.Mandatory>, <xref:System.ServiceModel.TransactionFlowOption.Allowed> oder <xref:System.ServiceModel.TransactionFlowOption.NotAllowed>ist.</span><span class="sxs-lookup"><span data-stu-id="de7e9-106">The attribute provides this control with the following property: Transactions use the <xref:System.ServiceModel.TransactionFlowOption> enumeration to specify whether an incoming transaction is <xref:System.ServiceModel.TransactionFlowOption.Mandatory>, <xref:System.ServiceModel.TransactionFlowOption.Allowed>, or <xref:System.ServiceModel.TransactionFlowOption.NotAllowed>.</span></span>  
  
 <span data-ttu-id="de7e9-107">Dies ist das einzige Attribut, das Dienstvorgänge zu externen Interaktionen mit einem Client verknüpft.</span><span class="sxs-lookup"><span data-stu-id="de7e9-107">This is the only attribute that relates service operations to external interactions with a client.</span></span> <span data-ttu-id="de7e9-108">Die in den folgenden Abschnitten beschriebenen Attribute beziehen sich auf die Verwendung von Transaktionen innerhalb der Ausführung des Vorgangs.</span><span class="sxs-lookup"><span data-stu-id="de7e9-108">The attributes described in the following sections relate to the use of transactions within the execution of the operation.</span></span>  
  
## <a name="servicebehaviorattribute"></a><span data-ttu-id="de7e9-109">ServiceBehaviorAttribute</span><span class="sxs-lookup"><span data-stu-id="de7e9-109">ServiceBehaviorAttribute</span></span>  
 <span data-ttu-id="de7e9-110">Das <xref:System.ServiceModel.ServiceBehaviorAttribute>-Attribut legt das interne Ausführungsverhalten einer Dienstvertragimplementierung fest.</span><span class="sxs-lookup"><span data-stu-id="de7e9-110">The <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute specifies the internal execution behavior of a service contract implementation.</span></span> <span data-ttu-id="de7e9-111">Zu den transaktionsspezifischen Eigenschaften dieses Attributs gehören:</span><span class="sxs-lookup"><span data-stu-id="de7e9-111">Transaction-specific properties of this attribute include:</span></span>  
  
-   <span data-ttu-id="de7e9-112"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A> gibt an, ob eine nicht abgeschlossene Transaktion beim Schließen der Sitzung abgeschlossen wird.</span><span class="sxs-lookup"><span data-stu-id="de7e9-112"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A> specifies whether to complete an uncompleted transaction when the session closes.</span></span> <span data-ttu-id="de7e9-113">Der Standardwert für diese Eigenschaft ist `false`.</span><span class="sxs-lookup"><span data-stu-id="de7e9-113">The default value for this property is `false`.</span></span> <span data-ttu-id="de7e9-114">Ist diese Eigenschaft `true` und wurde die eingehende Sitzung ordnungsgemäß beendet, anstatt aufgrund eines Netzwerk- oder Clientfehlers geschlossen zu werden, werden alle nicht abgeschlossenen Transaktionen erfolgreich abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="de7e9-114">If this property is `true`, and the incoming session was gracefully shut down instead of closing due to network or client faults, any uncompleted transaction is successfully completed.</span></span> <span data-ttu-id="de7e9-115">Ist diese Eigenschaft `false` oder wurde die Sitzung nicht ordnungsgemäß beendet, wird für alle nicht abgeschlossenen Transaktionen beim Schließen der Sitzung ein Rollback ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="de7e9-115">Otherwise, if this property is `false` or if the session was not gracefully closed, any uncompleted transaction is rolled back when the session closes.</span></span> <span data-ttu-id="de7e9-116">Wenn diese Eigenschaft `true` ist, muss der eingehende Kanal sitzungsbasiert sein.</span><span class="sxs-lookup"><span data-stu-id="de7e9-116">If this property is `true`, the incoming channel must be session-based.</span></span>  
  
-   <span data-ttu-id="de7e9-117"><xref:System.ServiceModel.ServiceBehaviorAttribute.ReleaseServiceInstanceOnTransactionComplete%2A> legt fest, ob die zugrunde liegende Dienstinstanz beim Abschluss einer Transaktion freigegeben wird.</span><span class="sxs-lookup"><span data-stu-id="de7e9-117"><xref:System.ServiceModel.ServiceBehaviorAttribute.ReleaseServiceInstanceOnTransactionComplete%2A> specifies whether the underlying service instance is released when a transaction completes.</span></span> <span data-ttu-id="de7e9-118">Der Standardwert für diese Eigenschaft ist `true`.</span><span class="sxs-lookup"><span data-stu-id="de7e9-118">The default value for this property is `true`.</span></span> <span data-ttu-id="de7e9-119">Die nächste eingehende Nachricht verursacht die Erstellung einer neuen zugrunde liegenden Instanz, wobei der Pro-Transaktionsstatus, über den die vorherige Instanz möglicherweise verfügte, verworfen wird.</span><span class="sxs-lookup"><span data-stu-id="de7e9-119">The next inbound message causes a new underlying instance to be created, discarding any per-transaction state that the previous instance might have held.</span></span> <span data-ttu-id="de7e9-120">Die Freigabe einer Dienstinstanz ist eine interne Aktion, die der Dienst durchführt, und hat keinen Einfluss auf bestehende Verbindungen oder Sitzungen, die von Clients möglicherweise aufgebaut wurden.</span><span class="sxs-lookup"><span data-stu-id="de7e9-120">Releasing a service instance is an internal action the service takes and has no impact on any existing connections or sessions that clients might have established.</span></span> <span data-ttu-id="de7e9-121">Diese Funktionalität entspricht der JIT-Aktivierungsfunktion (Just-in-Time), die COM+ bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="de7e9-121">This functionality is equivalent to the just-in-time activation feature COM+ provides.</span></span> <span data-ttu-id="de7e9-122">Wenn die Eigenschaft `true` ist, muss <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> gleich <xref:System.ServiceModel.ConcurrencyMode.Single> sein.</span><span class="sxs-lookup"><span data-stu-id="de7e9-122">If the property is `true`, <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> must be equal to <xref:System.ServiceModel.ConcurrencyMode.Single>.</span></span> <span data-ttu-id="de7e9-123">Andernfalls löst der Dienst während des Starts eine ungültige Konfigurationsvalidierungsausnahme aus.</span><span class="sxs-lookup"><span data-stu-id="de7e9-123">Otherwise, the service throws an invalid configuration validation exception during startup.</span></span>  
  
-   <span data-ttu-id="de7e9-124"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionIsolationLevel%2A> legt die Isolationsebene fest, die für Transaktionen innerhalb eines Diensts verwendet wird. Diese Eigenschaft nimmt einen der <xref:System.Transactions.IsolationLevel>-Werte an.</span><span class="sxs-lookup"><span data-stu-id="de7e9-124"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionIsolationLevel%2A> specifies the isolation level to use for transactions within the service; this property takes one of the <xref:System.Transactions.IsolationLevel> values.</span></span> <span data-ttu-id="de7e9-125">Ist die Isolationsebeneneigenschaft etwas anderes als <xref:System.Transactions.IsolationLevel.Unspecified>, muss die Isolationsebene einer eingehenden Transaktion der Einstellung dieser lokalen Eigenschaft entsprechen.</span><span class="sxs-lookup"><span data-stu-id="de7e9-125">If the local isolation level property is anything other than <xref:System.Transactions.IsolationLevel.Unspecified>, the isolation level of an incoming transaction must match the setting of this local property.</span></span> <span data-ttu-id="de7e9-126">Andernfalls wird die eingehende Transaktion abgelehnt, und ein Fehler wird an den Client zurückgesendet.</span><span class="sxs-lookup"><span data-stu-id="de7e9-126">Otherwise, the incoming transaction is rejected, and a fault is sent back to the client.</span></span> <span data-ttu-id="de7e9-127">Wenn <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A>`true` ist und keine Transaktion übergeben wird, bestimmt diese Eigenschaft den für die lokal erstellte Transaktion zu verwendenden <xref:System.Transactions.IsolationLevel>-Wert.</span><span class="sxs-lookup"><span data-stu-id="de7e9-127">If <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> is `true`, and no transaction is flowed, this property determines the <xref:System.Transactions.IsolationLevel> value to use for the locally created transaction.</span></span> <span data-ttu-id="de7e9-128">Wenn <xref:System.Transactions.IsolationLevel> festgelegt ist, um <xref:System.Transactions.IsolationLevel.Unspecified>, <xref:System.Transactions.IsolationLevel> <xref:System.Transactions.IsolationLevel.Serializable> verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="de7e9-128">If <xref:System.Transactions.IsolationLevel> is set to <xref:System.Transactions.IsolationLevel.Unspecified>, <xref:System.Transactions.IsolationLevel><xref:System.Transactions.IsolationLevel.Serializable> is used.</span></span>  
  
-   <span data-ttu-id="de7e9-129"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> legt den Zeitraum fest, innerhalb dessen eine neue, am Dienst erstellte Transaktion abgeschlossen sein muss.</span><span class="sxs-lookup"><span data-stu-id="de7e9-129"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> specifies the time period within which a new transaction created at the service must complete.</span></span> <span data-ttu-id="de7e9-130">Ist dieser Zeitpunkt erreicht und wurde die Transaktion nicht abgeschlossen, wird sie abgebrochen.</span><span class="sxs-lookup"><span data-stu-id="de7e9-130">If this time is reached and the transaction has not been completed, it will abort.</span></span> <span data-ttu-id="de7e9-131">Die <xref:System.TimeSpan> wird als <xref:System.Transactions.TransactionScope>-Timeout für alle Vorgänge verwendet, bei denen <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> auf `true` gesetzt ist und für die eine neue Transaktion erstellt worden war.</span><span class="sxs-lookup"><span data-stu-id="de7e9-131">The <xref:System.TimeSpan> is used as the <xref:System.Transactions.TransactionScope> time-out for any operations that have <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> set to `true` and for which a new transaction was created.</span></span> <span data-ttu-id="de7e9-132">Der Timeout ist die maximal zulässige Dauer von der Erstellung einer Transaktion bis zum Abschluss der Phase 1 im Zweiphasen-Commitprotokoll.</span><span class="sxs-lookup"><span data-stu-id="de7e9-132">The time-out is the maximum allowed duration from the creation of the transaction to the completion of phase 1 in the two-phase commit protocol.</span></span> <span data-ttu-id="de7e9-133">Der verwendete Timeout ist immer der niedrigere Wert der <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A>-Eigenschaft und der `transactionTimeout`-Konfigurationseinstellung.</span><span class="sxs-lookup"><span data-stu-id="de7e9-133">The time-out value used is always the lower value between the <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> property and the `transactionTimeout` configuration setting.</span></span>  
  
## <a name="operationbehaviorattribute"></a><span data-ttu-id="de7e9-134">OperationBehaviorAttribute</span><span class="sxs-lookup"><span data-stu-id="de7e9-134">OperationBehaviorAttribute</span></span>  
 <span data-ttu-id="de7e9-135">Das <xref:System.ServiceModel.OperationBehaviorAttribute>-Attribut legt die Verhaltensweisen der Methoden in der Dienstimplementierung fest.</span><span class="sxs-lookup"><span data-stu-id="de7e9-135">The <xref:System.ServiceModel.OperationBehaviorAttribute> attribute specifies the behaviors of the methods in the service implementation.</span></span> <span data-ttu-id="de7e9-136">Sie können es verwenden, um das spezifische Ausführungsverhalten des Vorgangs anzugeben.</span><span class="sxs-lookup"><span data-stu-id="de7e9-136">You can use it to indicate the operation's specific execution behavior.</span></span> <span data-ttu-id="de7e9-137">Eigenschaften dieses Attributs wirken sich nicht auf die Web Service Description Language (WSDL) Beschreibung des Dienstvertrags und sind lediglich um Elemente des WCF-Programmiermodells, die allgemeine Funktionen zu ermöglichen, dass die Entwickler andernfalls selbst implementieren müssen.</span><span class="sxs-lookup"><span data-stu-id="de7e9-137">Properties of this attribute do not affect the Web Service Description Language (WSDL) description of the service contract, and are purely elements of the WCF programming model that enable common features that developers otherwise have to implement themselves.</span></span>  
  
 <span data-ttu-id="de7e9-138">Dieses Attribut verfügt über die folgenden transaktionsspezifischen Eigenschaften:</span><span class="sxs-lookup"><span data-stu-id="de7e9-138">This attribute has the following transaction-specific properties:</span></span>  
  
-   <span data-ttu-id="de7e9-139"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> gibt an, ob eine Methode innerhalb eines aktiven Transaktionsbereichs ausgeführt werden muss.</span><span class="sxs-lookup"><span data-stu-id="de7e9-139"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> specifies whether a method must execute within an active transaction scope.</span></span> <span data-ttu-id="de7e9-140">Die Standardeinstellung ist `false`.</span><span class="sxs-lookup"><span data-stu-id="de7e9-140">The default is `false`.</span></span> <span data-ttu-id="de7e9-141">Ist das <xref:System.ServiceModel.OperationBehaviorAttribute>-Attribut für eine Methode nicht eingerichtet, wird darüber hinaus angegeben, dass die Methode in einer Transaktion nicht ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="de7e9-141">If the <xref:System.ServiceModel.OperationBehaviorAttribute> attribute is not set for a method, it also implies that the method will not execute in a transaction.</span></span> <span data-ttu-id="de7e9-142">Wird für einen Vorgang kein Transaktionsumfang benötigt, sind alle im Nachrichtenheader vorhandenen Transaktionen nicht aktiviert und bleiben ein Element der <xref:System.ServiceModel.OperationContext.IncomingMessageProperties%2A> des <xref:System.ServiceModel.OperationContext>.</span><span class="sxs-lookup"><span data-stu-id="de7e9-142">If a transaction scope is not required for an operation, any transaction that is present within the message header is not activated and remains as an element of the <xref:System.ServiceModel.OperationContext.IncomingMessageProperties%2A> of the <xref:System.ServiceModel.OperationContext>.</span></span> <span data-ttu-id="de7e9-143">Ist für einen Vorgang ein Transaktionsumfang erforderlich, leitet sich die Quelle für die Transaktion folgendermaßen ab:</span><span class="sxs-lookup"><span data-stu-id="de7e9-143">If a transaction scope is required for an operation, the source for the transaction is derived from one of the following:</span></span>  
  
    -   <span data-ttu-id="de7e9-144">Wenn eine Transaktion von einem Client übergeben wird, wird die Methode unter einem Transaktionsumfang ausgeführt, der mithilfe der verteilten Transaktion erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="de7e9-144">If a transaction is flowed from the client, the method is executed under a transaction scope created using that distributed transaction.</span></span>  
  
    -   <span data-ttu-id="de7e9-145">Bei einer in der Warteschlange befindlichen Transaktion wird die Transaktion verwendet, die zum Entfernen der Nachricht aus der Warteschlange zum Einsatz kommt.</span><span class="sxs-lookup"><span data-stu-id="de7e9-145">With a queued transport, the transaction used to dequeue the message is used.</span></span> <span data-ttu-id="de7e9-146">Beachten Sie, dass es sich bei der verwendeten Transaktion nicht um eine übertragene Transaktion handelt, da diese nicht vom Originalabsender der Nachricht bereitgestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="de7e9-146">Note that the transaction used is not a flowed transaction, in that it was not provided by the original sender of the message.</span></span>  
  
    -   <span data-ttu-id="de7e9-147">Ein benutzerdefinierter Transport kann durch die Verwendung der `TransportTransactionProperty` eine Transaktion bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="de7e9-147">A custom transport can provide a transaction through the use of the `TransportTransactionProperty`.</span></span>  
  
    -   <span data-ttu-id="de7e9-148">Wenn keiner der oben aufgeführten Posten eine externe Quelle für eine Transaktion bereitstellt, wird eine neue <xref:System.Transactions.Transaction>-Instanz direkt vor dem Aufruf der Methode erstellt.</span><span class="sxs-lookup"><span data-stu-id="de7e9-148">If none of the above provides an external source for a transaction, a new <xref:System.Transactions.Transaction> instance is created immediately prior to calling the method.</span></span>  
  
-   <span data-ttu-id="de7e9-149"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionAutoComplete%2A> legt fest, ob die Transaktion, in der die Methode ausgeführt wird, automatisch abgeschlossen wird, wenn keine Ausnahmefehler ausgelöst werden.</span><span class="sxs-lookup"><span data-stu-id="de7e9-149"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionAutoComplete%2A> specifies whether the transaction in which the method executes is automatically completed if no unhandled exceptions are thrown.</span></span> <span data-ttu-id="de7e9-150">Ist diese Eigenschaft `true`, kennzeichnet die aufrufende Infrastruktur die Transaktion automatisch als "abgeschlossen", wenn die Benutzermethode zurückgegeben wird, ohne dass eine Ausnahme ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="de7e9-150">If this property is `true`, the calling infrastructure automatically marks the transaction as "completed" if the user method returns without throwing an exception.</span></span> <span data-ttu-id="de7e9-151">Ist diese Eigenschaft `false`, wird die Transaktion an die Instanz angehängt und nur als "abgeschlossen" gekennzeichnet, wenn der Client eine nachfolgende Methode aufruft, die mit dieser Eigenschaft auf `true` gekennzeichnet ist, oder wenn eine nachfolgende Methode explizit <xref:System.ServiceModel.OperationContext.SetTransactionComplete%2A> aufruft.</span><span class="sxs-lookup"><span data-stu-id="de7e9-151">If this property is `false`, the transaction is attached to the instance, and is only marked as "completed" if the client calls a subsequent method that is marked with this property equal to `true`, or if a subsequent method explicitly calls <xref:System.ServiceModel.OperationContext.SetTransactionComplete%2A>.</span></span> <span data-ttu-id="de7e9-152">Wird keiner der genannten Posten durchgeführt, wird die Transaktion nie abgeschlossen und die darin befindliche Arbeit wird nicht ausgeführt, es sei denn die <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A>-Eigenschaft ist auf `true` gesetzt.</span><span class="sxs-lookup"><span data-stu-id="de7e9-152">Failure to perform either of these results in the transaction never being "completed," and the contained work is not committed, unless the <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A> property is set to `true`.</span></span> <span data-ttu-id="de7e9-153">Ist diese Eigenschaft auf `true` gesetzt, müssen Sie einen Kanal mit einer Sitzung verwenden und der <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> muss auf <xref:System.ServiceModel.InstanceContextMode.PerSession> gesetzt sein.</span><span class="sxs-lookup"><span data-stu-id="de7e9-153">If this property is set to `true`, you must use a channel with a session, and the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> must be set to <xref:System.ServiceModel.InstanceContextMode.PerSession>.</span></span>
