---
title: HTTP-Transportsicherheit
ms.date: 03/30/2017
ms.assetid: d3439262-c58e-4d30-9f2b-a160170582bb
ms.openlocfilehash: 1af9913ac977b0e1c112ca818a04842af9f1307c
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/26/2020
ms.locfileid: "96280558"
---
# <a name="http-transport-security"></a><span data-ttu-id="011a9-102">HTTP-Transportsicherheit</span><span class="sxs-lookup"><span data-stu-id="011a9-102">HTTP Transport Security</span></span>

<span data-ttu-id="011a9-103">Bei der Verwendung von HTTP zum Transport wird die Sicherheit durch eine Secure Sockets Layer (SSL)-Implementierung bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="011a9-103">When using HTTP as the transport, security is provided by a Secure Sockets Layer (SSL) implementation.</span></span> <span data-ttu-id="011a9-104">SSL wird im Internet häufig verwendet, um einen Dienst gegenüber einem Client zu authentifizieren und anschließend Vertraulichkeit (Verschlüsselung) für den Kanal bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="011a9-104">SSL is widely used on the Internet to authenticate a service to a client, and then to provide confidentiality (encryption) to the channel.</span></span> <span data-ttu-id="011a9-105">In diesem Thema wird erläutert, wie SSL funktioniert und wie es in Windows Communication Foundation (WCF) implementiert wird.</span><span class="sxs-lookup"><span data-stu-id="011a9-105">This topic explains how SSL works and how it is implemented in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="basic-ssl"></a><span data-ttu-id="011a9-106">Standard-SSL</span><span class="sxs-lookup"><span data-stu-id="011a9-106">Basic SSL</span></span>  

 <span data-ttu-id="011a9-107">Die Funktionsweise von SSL lässt sich am besten durch ein typisches Szenario erläutern, in diesem Fall die Website einer Bank.</span><span class="sxs-lookup"><span data-stu-id="011a9-107">How SSL works is best explained through a typical scenario, in this case, a bank's Web site.</span></span> <span data-ttu-id="011a9-108">Die Website ermöglicht einem Kunden die Anmeldung mit Benutzernamen und Kennwort.</span><span class="sxs-lookup"><span data-stu-id="011a9-108">The site allows a customer to log on with a user name and password.</span></span> <span data-ttu-id="011a9-109">Nach der Authentifizierung kann der Benutzer Transaktionen ausführen, z. B. den Kontostand anzeigen, Rechnungen begleichen und Geld auf ein anderes Konto überweisen.</span><span class="sxs-lookup"><span data-stu-id="011a9-109">After being authenticated, the user can perform transactions, such as view account balances, pay bills, and move money from one account to another.</span></span>  
  
 <span data-ttu-id="011a9-110">Wenn ein Benutzer zum ersten Mal die Website besucht, startet der SSL-Mechanismus eine Reihe von Aushandlungen, die als *Handshake* bezeichnet werden, mit dem Client des Benutzers (in diesem Fall Internet Explorer).</span><span class="sxs-lookup"><span data-stu-id="011a9-110">When a user first visits the site, the SSL mechanism begins a series of negotiations, called a *handshake*, with the user's client (in this case, Internet Explorer).</span></span> <span data-ttu-id="011a9-111">SSL authentifiziert zuerst die Website der Bank für den Kunden.</span><span class="sxs-lookup"><span data-stu-id="011a9-111">SSL first authenticates the bank site to the customer.</span></span> <span data-ttu-id="011a9-112">Dies ist ein wichtiger Schritt, da die Kunden zuerst wissen müssen, ob sie tatsächlich mit der Website kommunizieren und nicht auf einer vorgetäuschte Site ihren Benutzernamen und das Kennwort eingeben sollen.</span><span class="sxs-lookup"><span data-stu-id="011a9-112">This is an essential step because customers must first know that they are communicating with the actual site, and not a spoof that tries to lure them into typing in their user name and password.</span></span> <span data-ttu-id="011a9-113">SSL führt diese Authentifizierung mit einem von einer vertrauenswürdigen Stelle, z. B. VeriSign, bereitgestellten SSL-Zertifikat durch.</span><span class="sxs-lookup"><span data-stu-id="011a9-113">SSL does this authentication by using an SSL certificate provided by a trusted authority, such as VeriSign.</span></span> <span data-ttu-id="011a9-114">Die Logik ist wie folgt: VeriSign verbürgt sich für die Identität der Bank-Website.</span><span class="sxs-lookup"><span data-stu-id="011a9-114">The logic goes like this: VeriSign vouches for the identity of the bank site.</span></span> <span data-ttu-id="011a9-115">Da Internet Explorer VeriSign vertraut, ist die Site vertrauenswürdig.</span><span class="sxs-lookup"><span data-stu-id="011a9-115">Because Internet Explorer trusts VeriSign, the site is trusted.</span></span> <span data-ttu-id="011a9-116">Wenn Sie Informationen zu VeriSign erhalten möchten, klicken Sie auf das VeriSign-Logo.</span><span class="sxs-lookup"><span data-stu-id="011a9-116">If you want to check with VeriSign, you can do so as well by clicking on the VeriSign logo.</span></span> <span data-ttu-id="011a9-117">Es wird eine Echtheitserklärung mit Ablaufdatum und Adressat der Ausstellung (die Bank-Website) angezeigt.</span><span class="sxs-lookup"><span data-stu-id="011a9-117">That presents a statement of authenticity with its expiration date and who it is issued to (the bank site).</span></span>  
  
 <span data-ttu-id="011a9-118">Zum Initiieren einer sicheren Sitzung sendet der Client das Äquivalent eines "Hallo" an den Server, zusammen mit einer Liste kryptografischer Algorithmen zum Signieren, Generieren von Hashs sowie zum Verschlüsseln und Entschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="011a9-118">To initiate a secure session, the client sends the equivalent of a "hello" to the server along with a list of cryptographic algorithms it can use to sign, generate hashes, and encrypt and decrypt with.</span></span> <span data-ttu-id="011a9-119">Als Antwort sendet die Site eine Bestätigung und ihre Wahl einer der Algorithmensammlungen zurück.</span><span class="sxs-lookup"><span data-stu-id="011a9-119">In response, the site sends back an acknowledgment and its choice of one of the algorithms suites.</span></span> <span data-ttu-id="011a9-120">Während dieses ersten Handshakes senden und empfangen beide Seiten Nonces.</span><span class="sxs-lookup"><span data-stu-id="011a9-120">During this initial handshake, both parties send and receive nonces.</span></span> <span data-ttu-id="011a9-121">Ein *Nonce* ist ein zufällig generiertes Datenelement, das in Kombination mit dem öffentlichen Schlüssel der Site zum Erstellen eines Hashs verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="011a9-121">A *nonce* is a randomly generated piece of data that is used, in combination with the site's public key, to create a hash.</span></span> <span data-ttu-id="011a9-122">Ein *Hash* ist eine neue Zahl, die aus den beiden Zahlen abgeleitet ist, indem ein Standard Algorithmus, wie z. b. SHA1, verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="011a9-122">A *hash* is a new number that is derived from the two numbers using a standard algorithm, such as SHA1.</span></span> <span data-ttu-id="011a9-123">(Der Client und der Standort tauschen auch Nachrichten aus, um den zu verwendenden Hash Algorithmus zu akzeptieren.) Der Hash ist eindeutig und wird nur für die Sitzung zwischen dem Client und dem Standort zum Verschlüsseln und Entschlüsseln von Nachrichten verwendet.</span><span class="sxs-lookup"><span data-stu-id="011a9-123">(The client and the site also exchange messages to agree which hash algorithm to use.) The hash is unique and is used only for the session between the client and the site to encrypt and decrypt messages.</span></span> <span data-ttu-id="011a9-124">Sowohl der Client als auch die Site verfügen über die ursprüngliche Nonce und den öffentlichen Schlüssel des Zertifikats, sodass beide Seiten den gleichen Hash generieren können.</span><span class="sxs-lookup"><span data-stu-id="011a9-124">Both client and service have the original nonce and the certificate's public key, so both sides can generate the same hash.</span></span> <span data-ttu-id="011a9-125">Deshalb prüft der Client den vom Dienst gesendeten Hash durch (a) Verwenden des vereinbarten Algorithmus zum Berechnen des Hashs auf Basis der Daten und durch (b) Vergleichen des Hashs mit dem vom Dienst gesendeten Hash. Stimmen die beiden überein, ist sichergestellt, dass der Hash nicht manipuliert wurde.</span><span class="sxs-lookup"><span data-stu-id="011a9-125">Therefore, the client validates the hash sent by the service by (a) using the agreed upon algorithm to calculate the hash from the data, and (b) comparing it to the hash sent by the service; if the two match, then the client has assurance that the hash has not been tampered with.</span></span> <span data-ttu-id="011a9-126">Der Client kann dann diesen Hash als Schlüssel zum Verschlüsseln einer Nachricht verwenden, die noch einen weiteren neuen Hash enthält.</span><span class="sxs-lookup"><span data-stu-id="011a9-126">The client can then use this hash as a key to encrypt a message that contains yet another new hash.</span></span> <span data-ttu-id="011a9-127">Der Dienst kann die Nachricht mit dem Hash entschlüsseln und diesen vorletzten Hash wiederherstellen.</span><span class="sxs-lookup"><span data-stu-id="011a9-127">The service can decrypt the message using the hash, and recover this second-to-final hash.</span></span> <span data-ttu-id="011a9-128">Die gesammelten Informationen (Nonces, öffentlicher Schlüssel und andere Daten) sind jetzt beiden Seiten bekannt, und ein letzter Hash (oder Hauptschlüssel) kann erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="011a9-128">The accumulated information (nonces, public key, and other data) is now known to both sides, and a final hash (or master key) can be created.</span></span> <span data-ttu-id="011a9-129">Dieser letzte Schlüssel wird verschlüsselt mit dem vorletzten Hash gesendet.</span><span class="sxs-lookup"><span data-stu-id="011a9-129">This final key is sent encrypted using the next-to-last hash.</span></span> <span data-ttu-id="011a9-130">Der Hauptschlüssel wird dann verwendet, um Nachrichten für den Rest der Sitzung zu verschlüsseln und zu entschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="011a9-130">The master key is then used to encrypt and decrypt messages for the rest of the session.</span></span> <span data-ttu-id="011a9-131">Da sowohl der Client als auch der Dienst denselben Schlüssel verwenden, wird dies auch als *Sitzungsschlüssel* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="011a9-131">Because both client and service use the same key, this is also called a *session key*.</span></span>  
  
 <span data-ttu-id="011a9-132">Der Sitzungsschlüssel wird auch als symmetrischer Schlüssel oder "gemeinsamer geheimer Schlüssel" gekennzeichnet.</span><span class="sxs-lookup"><span data-stu-id="011a9-132">The session key is also characterized as a symmetric key, or a "shared secret."</span></span> <span data-ttu-id="011a9-133">Ein symmetrischer Schlüssel ist wichtig, das er die von beiden Seiten für die Transaktion erforderliche Berechnung reduziert.</span><span class="sxs-lookup"><span data-stu-id="011a9-133">Having a symmetric key is important because it reduces the computation required by both sides of the transaction.</span></span> <span data-ttu-id="011a9-134">Wenn jede Nachricht einen neuen Austausch von Nonces und Hashs erfordern würde, würde sich die Leistung verschlechtern.</span><span class="sxs-lookup"><span data-stu-id="011a9-134">If every message demanded a new exchange of nonces and hashes, performance would deteriorate.</span></span> <span data-ttu-id="011a9-135">Daher ist das wichtigste Ziel von SSL die Verwendung eines symmetrischen Schlüssels, der die freie Übertragung von Nachrichten zwischen den beiden Seiten mit höherer Sicherheit und Effizienz ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="011a9-135">Therefore, the ultimate goal of SSL is to use a symmetric key that allows messages to flow freely between the two sides with a greater degree of security and efficiency.</span></span>  
  
 <span data-ttu-id="011a9-136">Die vorangehende Beschreibung ist eine vereinfachte Version des Ablaufs, da die Protokolle je nach Website variieren können.</span><span class="sxs-lookup"><span data-stu-id="011a9-136">The previous description is a simplified version of what happens, because the protocol may vary from site to site.</span></span> <span data-ttu-id="011a9-137">Es ist auch möglich, dass sowohl der Client als auch die Site Nonces generieren, die während des Handshakes algorithmisch kombiniert werden, um mehr Komplexität und demzufolge Schutz für den Datenaustausch zu erreichen.</span><span class="sxs-lookup"><span data-stu-id="011a9-137">It is also possible that both the client and the site both generate nonces that are algorithmically combined during the handshake to add more complexity, and therefore protection, to the process of exchanging data.</span></span>  
  
### <a name="certificates-and-public-key-infrastructure"></a><span data-ttu-id="011a9-138">Zertifikate und Public Key-Infrastruktur</span><span class="sxs-lookup"><span data-stu-id="011a9-138">Certificates and Public Key Infrastructure</span></span>  

 <span data-ttu-id="011a9-139">Während des Handshakes sendet der Dienst auch sein SSL-Zertifikat an den Client.</span><span class="sxs-lookup"><span data-stu-id="011a9-139">During the handshake, the service also sends its SSL certificate to the client.</span></span> <span data-ttu-id="011a9-140">Das Zertifikat enthält Informationen wie Ablaufdatum, ausstellende Stelle und URI (Uniform Resource Identifier) der Website.</span><span class="sxs-lookup"><span data-stu-id="011a9-140">The certificate contains information, such as its expiration date, issuing authority, and the site's Uniform Resource Identifier (URI).</span></span> <span data-ttu-id="011a9-141">Der Client vergleicht, ob der URI mit dem ursprünglich kontaktierten URI übereinstimmt, und überprüft auch das Datum und die ausstellende Stelle.</span><span class="sxs-lookup"><span data-stu-id="011a9-141">The client compares the URI to the URI it had originally contacted to ensure a match, and also checks the date and issuing authority.</span></span>  
  
 <span data-ttu-id="011a9-142">Jedes Zertifikat verfügt über zwei Schlüssel, einen privaten Schlüssel und einen öffentlichen Schlüssel. beide werden als *Exchange-Schlüsselpaar* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="011a9-142">Every certificate has two keys, a private key and a public key, and the two are known as an *exchange key pair*.</span></span> <span data-ttu-id="011a9-143">Kurz gesagt ist der private Schlüssel nur dem Besitzer des Zertifikats bekannt, während der öffentliche Schlüssel aus dem Zertifikat gelesen werden kann.</span><span class="sxs-lookup"><span data-stu-id="011a9-143">In brief, the private key is known only to the owner of the certificate while the public key is readable from the certificate.</span></span> <span data-ttu-id="011a9-144">Jeder der beiden Schlüssel kann zum Verschlüsseln oder Entschlüsseln eines Hashwerts, Hashs oder anderen Schlüssels verwendet werden, jedoch nur als umgekehrte Vorgänge.</span><span class="sxs-lookup"><span data-stu-id="011a9-144">Either key can be used to encrypt or decrypt a digest, hash, or other key, but only as contrary operations.</span></span> <span data-ttu-id="011a9-145">Wenn z. B. der Client mit dem öffentlichen Schlüssel verschlüsselt, kann nur die Site die Nachricht mit dem privaten Schlüssel entschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="011a9-145">For example, if the client encrypts with the public key, only the site can decrypt the message using the private key.</span></span> <span data-ttu-id="011a9-146">Analog kann der Client mit dem öffentlichen Schlüssel entschlüsseln, wenn die Site mit dem privaten Schlüssel verschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="011a9-146">Similarly, if the site encrypts with the private key, the client can decrypt with the public key.</span></span> <span data-ttu-id="011a9-147">Dies gibt dem Client die Gewissheit, dass die Nachrichten nur mit dem Besitzer des privaten Schlüssels ausgetauscht werden, da nur mit dem privaten Schlüssel verschlüsselte Nachrichten mit dem öffentlichen Schlüssel entschlüsselt werden können.</span><span class="sxs-lookup"><span data-stu-id="011a9-147">This provides assurance to the client that the messages are being exchanged only with the possessor of the private key because only messages encrypted with the private key can be decrypted with the public key.</span></span> <span data-ttu-id="011a9-148">Für die Site wird sichergestellt, dass sie Nachrichten mit einem Client austauscht, der mit dem öffentlichen Schlüssel verschlüsselt hat.</span><span class="sxs-lookup"><span data-stu-id="011a9-148">The site is assured that it is exchanging messages with a client that has encrypted using the public key.</span></span> <span data-ttu-id="011a9-149">Dieser Austausch ist jedoch nur für einen ersten Handshake sicher, daher wird mehr für das Erstellen des tatsächlichen symmetrischen Schlüssels getan.</span><span class="sxs-lookup"><span data-stu-id="011a9-149">This exchange is secure only for an initial handshake, however, which is why much more is done to create the actual symmetric key.</span></span> <span data-ttu-id="011a9-150">Alle Kommunikationen hängen trotzdem davon ab, dass der Dienst über ein gültiges SSL-Zertifikat verfügt.</span><span class="sxs-lookup"><span data-stu-id="011a9-150">Nevertheless, all communications depend on the service having a valid SSL certificate.</span></span>  
  
## <a name="implementing-ssl-with-wcf"></a><span data-ttu-id="011a9-151">Implementieren von SSL mit WCF</span><span class="sxs-lookup"><span data-stu-id="011a9-151">Implementing SSL with WCF</span></span>  

 <span data-ttu-id="011a9-152">HTTP-Transportsicherheit (oder SSL) wird extern für WCF bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="011a9-152">HTTP transport security (or SSL) is provided externally to WCF.</span></span> <span data-ttu-id="011a9-153">Sie können SSL auf zwei Wegen implementieren; der entscheidende Faktor ist, wie die Anwendung gehostet wird:</span><span class="sxs-lookup"><span data-stu-id="011a9-153">You can implement SSL in one of two ways; the deciding factor is how your application is hosted:</span></span>  
  
- <span data-ttu-id="011a9-154">Wenn Sie Internetinformationsdienste (IIS) als WCF-Host verwenden, verwenden Sie die IIS-Infrastruktur zum Einrichten eines SSL-Diensts.</span><span class="sxs-lookup"><span data-stu-id="011a9-154">If you are using Internet Information Services (IIS) as your WCF host, use the IIS infrastructure to set up an SSL service.</span></span>  
  
- <span data-ttu-id="011a9-155">Wenn Sie eine selbstgeh ostete WCF-Anwendung erstellen, können Sie mithilfe des HttpCfg.exe Tools ein SSL-Zertifikat an die Adresse binden.</span><span class="sxs-lookup"><span data-stu-id="011a9-155">If you are creating a self-hosted WCF application, you can bind an SSL certificate to the address using the HttpCfg.exe tool.</span></span>  
  
### <a name="using-iis-for-transport-security"></a><span data-ttu-id="011a9-156">Verwenden von IIS für Transportsicherheit</span><span class="sxs-lookup"><span data-stu-id="011a9-156">Using IIS for Transport Security</span></span>  
  
#### <a name="iis-70"></a><span data-ttu-id="011a9-157">IIS 7.0</span><span class="sxs-lookup"><span data-stu-id="011a9-157">IIS 7.0</span></span>  

 <span data-ttu-id="011a9-158">Informationen zum Einrichten von IIS 7,0 als sicheren Host (mit SSL) finden Sie unter [Konfigurieren von Secure Sockets Layer in IIS 7,0](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc771438(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="011a9-158">To set up IIS 7.0 as a secure host (using SSL), see [Configuring Secure Sockets Layer in IIS 7.0](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc771438(v=ws.10)).</span></span>  
  
<span data-ttu-id="011a9-159">Informationen zum Konfigurieren von Zertifikaten für die Verwendung mit IIS 7,0 finden Sie unter [Konfigurieren von Server Zertifikaten in IIS 7,0](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc732230(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="011a9-159">To configure certificates for use with IIS 7.0, see [Configuring Server Certificates in IIS 7.0](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc732230(v=ws.10)).</span></span>  
  
#### <a name="iis-60"></a><span data-ttu-id="011a9-160">IIS 6.0</span><span class="sxs-lookup"><span data-stu-id="011a9-160">IIS 6.0</span></span>  

 <span data-ttu-id="011a9-161">Informationen zum Einrichten von IIS 6,0 als sicheren Host (mit SSL) finden Sie unter [Konfigurieren von Secure Sockets Layer](/previous-versions/windows/it-pro/windows-server-2003/cc736992(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="011a9-161">To set up IIS 6.0 as a secure host (using SSL), see [Configuring Secure Sockets Layer](/previous-versions/windows/it-pro/windows-server-2003/cc736992(v=ws.10)).</span></span>  
  
 <span data-ttu-id="011a9-162">Informationen zum Konfigurieren von Zertifikaten für die Verwendung mit IIS 6,0 finden Sie unter [Certificates_IIS_SP1_Ops](/previous-versions/windows/it-pro/windows-server-2003/cc757474(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="011a9-162">To configure certificates for use with IIS 6.0, see [Certificates_IIS_SP1_Ops](/previous-versions/windows/it-pro/windows-server-2003/cc757474(v=ws.10)).</span></span>  
  
### <a name="using-httpcfg-for-ssl"></a><span data-ttu-id="011a9-163">Verwenden von HttpCfg für SSL</span><span class="sxs-lookup"><span data-stu-id="011a9-163">Using HttpCfg for SSL</span></span>  

 <span data-ttu-id="011a9-164">Wenn Sie eine selbstgeh ostete WCF-Anwendung erstellen, verwenden Sie das [HttpCfg.exe](/windows/win32/http/httpcfg-exe) -Tool.</span><span class="sxs-lookup"><span data-stu-id="011a9-164">If you're creating a self-hosted WCF application, use the [HttpCfg.exe](/windows/win32/http/httpcfg-exe) tool.</span></span>
  
 <span data-ttu-id="011a9-165">Weitere Informationen zur Verwendung des HttpCfg.exe Tools zum Einrichten eines Ports mit einem X. 509-Zertifikat finden Sie unter Vorgehens [Weise: Konfigurieren eines Ports mit einem SSL-Zertifikat](how-to-configure-a-port-with-an-ssl-certificate.md).</span><span class="sxs-lookup"><span data-stu-id="011a9-165">For more information about using the HttpCfg.exe tool to set up a port with an X.509 certificate, see [How to: Configure a Port with an SSL Certificate](how-to-configure-a-port-with-an-ssl-certificate.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="011a9-166">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="011a9-166">See also</span></span>

- [<span data-ttu-id="011a9-167">Transport Sicherheit</span><span class="sxs-lookup"><span data-stu-id="011a9-167">Transport Security</span></span>](transport-security.md)
- [<span data-ttu-id="011a9-168">Nachrichtensicherheit</span><span class="sxs-lookup"><span data-stu-id="011a9-168">Message Security</span></span>](message-security-in-wcf.md)
