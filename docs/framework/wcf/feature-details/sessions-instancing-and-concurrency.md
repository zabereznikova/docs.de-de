---
title: Sitzungen, Instanziierung und Parallelität
ms.date: 03/30/2017
ms.assetid: 50797a3b-7678-44ed-8138-49ac1602f35b
ms.openlocfilehash: a7466d819e15f3bfe8def2d9407dcf2c6e0c7346
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/12/2020
ms.locfileid: "79184442"
---
# <a name="sessions-instancing-and-concurrency"></a><span data-ttu-id="6b502-102">Sitzungen, Instanziierung und Parallelität</span><span class="sxs-lookup"><span data-stu-id="6b502-102">Sessions, Instancing, and Concurrency</span></span>
<span data-ttu-id="6b502-103">Eine *Sitzung* ist die Korrelation (d. h. die Beziehung) aller zwischen zwei Endpunkten gesendeter Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="6b502-103">A *session* is a correlation of all messages sent between two endpoints.</span></span> <span data-ttu-id="6b502-104">*Instanziierung* bezieht sich auf die Steuerung der Lebensdauer von benutzerdefinierten Dienstobjekten und den zugehörigen <xref:System.ServiceModel.InstanceContext> -Objekten.</span><span class="sxs-lookup"><span data-stu-id="6b502-104">*Instancing* refers to controlling the lifetime of user-defined service objects and their related <xref:System.ServiceModel.InstanceContext> objects.</span></span> <span data-ttu-id="6b502-105">*Parallelität* bezeichnet die Kontrolle der Anzahl von Threads, die gleichzeitig in einem <xref:System.ServiceModel.InstanceContext> ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="6b502-105">*Concurrency* is the term given to the control of the number of threads executing in an <xref:System.ServiceModel.InstanceContext> at the same time.</span></span>  
  
 <span data-ttu-id="6b502-106">In diesem Thema werden diese Einstellungen, ihre Verwendung und die Interaktion zwischen den Einstellungen beschrieben.</span><span class="sxs-lookup"><span data-stu-id="6b502-106">This topic describes these settings, how to use them, and the various interactions between them.</span></span>  
  
## <a name="sessions"></a><span data-ttu-id="6b502-107">Sitzungen</span><span class="sxs-lookup"><span data-stu-id="6b502-107">Sessions</span></span>  
 <span data-ttu-id="6b502-108">Wenn die <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> -Eigenschaft durch einen Dienstvertrag auf <xref:System.ServiceModel.SessionMode.Required?displayProperty=nameWithType>festgelegt wird, bedeutet dies, dass alle Aufrufe (das heißt der zugrunde liegende Nachrichtenaustausch, durch den die Aufrufe unterstützt werden) Teil derselben Konversation sein müssen.</span><span class="sxs-lookup"><span data-stu-id="6b502-108">When a service contract sets the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.SessionMode.Required?displayProperty=nameWithType>, that contract is saying that all calls (that is, the underlying message exchanges that support the calls) must be part of the same conversation.</span></span> <span data-ttu-id="6b502-109">Falls in einem Vertrag angegeben wird, dass Sitzungen zwar erlaubt, aber nicht erforderlich sind, können Clients eine Verbindung herstellen und eine Sitzung aufbauen oder auch nicht.</span><span class="sxs-lookup"><span data-stu-id="6b502-109">If a contract specifies that it allows sessions but does not require one, clients can connect and either establish a session or not.</span></span> <span data-ttu-id="6b502-110">Wird eine Sitzung beendet und eine Nachricht über diesen sitzungsbasierten Kanal gesendet, wird eine Ausnahme ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="6b502-110">If the session ends and a message is sent over the same session-based channel an exception is thrown.</span></span>  
  
 <span data-ttu-id="6b502-111">WCF-Sitzungen weisen die folgenden konzeptionellen Hauptmerkmale auf:</span><span class="sxs-lookup"><span data-stu-id="6b502-111">WCF sessions have the following main conceptual features:</span></span>  
  
- <span data-ttu-id="6b502-112">Sie werden explizit von der aufrufenden Anwendung initiiert und beendet.</span><span class="sxs-lookup"><span data-stu-id="6b502-112">They are explicitly initiated and terminated by the calling application.</span></span>  
  
- <span data-ttu-id="6b502-113">Die während einer Sitzung gesendeten Nachrichten werden in der Reihenfolge verarbeitet, in der sie empfangen wurden.</span><span class="sxs-lookup"><span data-stu-id="6b502-113">Messages delivered during a session are processed in the order in which they are received.</span></span>  
  
- <span data-ttu-id="6b502-114">Durch Sitzungen wird eine Gruppe von Nachrichten zu einer Konversation zusammengefasst.</span><span class="sxs-lookup"><span data-stu-id="6b502-114">Sessions correlate a group of messages into a conversation.</span></span> <span data-ttu-id="6b502-115">Diese Korrelation ist jedoch abstrakt.</span><span class="sxs-lookup"><span data-stu-id="6b502-115">The meaning of that correlation is an abstraction.</span></span> <span data-ttu-id="6b502-116">So werden zum Beispiel bei einem sitzungsbasierten Kanal Nachrichten auf Grundlage einer gemeinsamen Netzwerkverbindung zueinander in Beziehung gesetzt, bei einem anderen Kanal geschieht dies wiederum auf Grundlage eines gemeinsamen Tags im Nachrichtentext.</span><span class="sxs-lookup"><span data-stu-id="6b502-116">For instance, one session-based channel may correlate messages based on a shared network connection while another session-based channel may correlate messages based on a shared tag in the message body.</span></span> <span data-ttu-id="6b502-117">Die Funktionen, die von der Sitzung abgeleitet werden können, sind abhängig von der Art der Korrelation.</span><span class="sxs-lookup"><span data-stu-id="6b502-117">The features that can be derived from the session depend on the nature of the correlation.</span></span>  
  
- <span data-ttu-id="6b502-118">Einer WCF-Sitzung ist kein allgemeiner Datenspeicher zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="6b502-118">There is no general data store associated with a WCF session.</span></span>  
  
 <span data-ttu-id="6b502-119">Wenn Sie mit <xref:System.Web.SessionState.HttpSessionState?displayProperty=nameWithType> der Klasse in ASP.NET Anwendungen und der darin zur Verfügung gestellten Funktionalität vertraut sind, können Sie die folgenden Unterschiede zwischen dieser Art von Sitzungssitzungen und WCF-Sitzungen feststellen:</span><span class="sxs-lookup"><span data-stu-id="6b502-119">If you are familiar with the <xref:System.Web.SessionState.HttpSessionState?displayProperty=nameWithType> class in ASP.NET applications and the functionality it provides, you might notice the following differences between that kind of session and WCF sessions:</span></span>  
  
- <span data-ttu-id="6b502-120">ASP.NET Sitzungen werden immer vom Server initiiert.</span><span class="sxs-lookup"><span data-stu-id="6b502-120">ASP.NET sessions are always server-initiated.</span></span>  
  
- <span data-ttu-id="6b502-121">ASP.NET Sitzungen sind implizit ungeordnet.</span><span class="sxs-lookup"><span data-stu-id="6b502-121">ASP.NET sessions are implicitly unordered.</span></span>  
  
- <span data-ttu-id="6b502-122">ASP.NET Sitzungen bieten einen allgemeinen Datenspeichermechanismus für alle Anforderungen.</span><span class="sxs-lookup"><span data-stu-id="6b502-122">ASP.NET sessions provide a general data storage mechanism across requests.</span></span>  
  
 <span data-ttu-id="6b502-123">Client- und Dienstanwendungen interagieren auf unterschiedliche Weise mit Sitzungen.</span><span class="sxs-lookup"><span data-stu-id="6b502-123">Client applications and service applications interact with sessions in different ways.</span></span> <span data-ttu-id="6b502-124">Clientanwendungen initiieren Sitzungen und empfangen und verarbeiten dann die innerhalb der Sitzung gesendeten Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="6b502-124">Client applications initiate sessions and then receive and process the messages sent within the session.</span></span> <span data-ttu-id="6b502-125">Dienstanwendungen können Sitzungen als Erweiterungspunkt verwenden, um zusätzliches Verhalten hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="6b502-125">Service applications can use sessions as an extensibility point to add additional behavior.</span></span> <span data-ttu-id="6b502-126">Dies geschieht durch direkte Nutzung von <xref:System.ServiceModel.InstanceContext> oder durch Implementierung eines benutzerspezifischen Instanzenkontextanbieters.</span><span class="sxs-lookup"><span data-stu-id="6b502-126">This is done by working directly with the <xref:System.ServiceModel.InstanceContext> or implementing a custom instance context provider.</span></span>  
  
## <a name="instancing"></a><span data-ttu-id="6b502-127">Instanziierung</span><span class="sxs-lookup"><span data-stu-id="6b502-127">Instancing</span></span>  
 <span data-ttu-id="6b502-128">Durch das Instanziierungsverhalten (das über die <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> -Eigenschaft festgelegt wird) lässt sich steuern, wie der <xref:System.ServiceModel.InstanceContext> als Antwort auf eingehende Nachrichten erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="6b502-128">The instancing behavior (set by using the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property) controls how the <xref:System.ServiceModel.InstanceContext> is created in response to incoming messages.</span></span> <span data-ttu-id="6b502-129">Standardmäßig ist jeder <xref:System.ServiceModel.InstanceContext> einem benutzerdefinierten Dienstobjekt zugeordnet. Dies bedeutet, dass (im Normalfall) auch die Instanziierung benutzerdefinierter Dienstobjekte über die <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> -Eigenschaft gesteuert wird.</span><span class="sxs-lookup"><span data-stu-id="6b502-129">By default, each <xref:System.ServiceModel.InstanceContext> is associated with one user-defined service object, so (in the default case) setting the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> property also controls the instancing of user-defined service objects.</span></span> <span data-ttu-id="6b502-130">Die <xref:System.ServiceModel.InstanceContextMode> -Enumeration definiert die Instanziierungsmodi.</span><span class="sxs-lookup"><span data-stu-id="6b502-130">The <xref:System.ServiceModel.InstanceContextMode> enumeration defines the instancing modes.</span></span>  
  
 <span data-ttu-id="6b502-131">Es stehen die folgenden Instanziierungsmodi zur Verfügung:</span><span class="sxs-lookup"><span data-stu-id="6b502-131">The following instancing modes are available:</span></span>  
  
- <span data-ttu-id="6b502-132"><xref:System.ServiceModel.InstanceContextMode.PerCall>: Für jede Clientanforderung wird ein neuer <xref:System.ServiceModel.InstanceContext> (und damit auch ein neues Dienstobjekt) erstellt.</span><span class="sxs-lookup"><span data-stu-id="6b502-132"><xref:System.ServiceModel.InstanceContextMode.PerCall>: A new <xref:System.ServiceModel.InstanceContext> (and therefore service object) is created for each client request.</span></span>  
  
- <span data-ttu-id="6b502-133"><xref:System.ServiceModel.InstanceContextMode.PerSession>: Für jede neue Clientsitzung wird ein neuer <xref:System.ServiceModel.InstanceContext> (und damit auch ein neues Dienstobjekt) erstellt und für die Lebensdauer dieser Sitzung aufrechterhalten, wofür eine Bindung erforderlich ist, die Sitzungen unterstützt.</span><span class="sxs-lookup"><span data-stu-id="6b502-133"><xref:System.ServiceModel.InstanceContextMode.PerSession>: A new <xref:System.ServiceModel.InstanceContext> (and therefore service object) is created for each new client session and maintained for the lifetime of that session (this requires a binding that supports sessions).</span></span>  
  
- <span data-ttu-id="6b502-134"><xref:System.ServiceModel.InstanceContextMode.Single>: Alle Clientanforderungen werden während der Lebensdauer der Anwendung von einem <xref:System.ServiceModel.InstanceContext> (und damit einem Dienstobjekt) verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="6b502-134"><xref:System.ServiceModel.InstanceContextMode.Single>: A single <xref:System.ServiceModel.InstanceContext> (and therefore service object) handles all client requests for the lifetime of the application.</span></span>  
  
 <span data-ttu-id="6b502-135">Das folgende Codebeispiel zeigt den Standard- <xref:System.ServiceModel.InstanceContextMode> -Wert ( <xref:System.ServiceModel.InstanceContextMode.PerSession> ), der explizit für eine Dienstklasse festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="6b502-135">The following code example shows the default <xref:System.ServiceModel.InstanceContextMode> value, <xref:System.ServiceModel.InstanceContextMode.PerSession> being explicitly set on a service class.</span></span>  
  
```csharp  
[ServiceBehavior(InstanceContextMode=InstanceContextMode.PerSession)]
public class CalculatorService : ICalculatorInstance
{
    ...  
}  
```  
  
 <span data-ttu-id="6b502-136">Durch die <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> -Eigenschaft wird gesteuert, wie oft der <xref:System.ServiceModel.InstanceContext> freigegeben wird. Die <xref:System.ServiceModel.OperationBehaviorAttribute.ReleaseInstanceMode%2A?displayProperty=nameWithType> -Eigenschaft und die <xref:System.ServiceModel.ServiceBehaviorAttribute.ReleaseServiceInstanceOnTransactionComplete%2A?displayProperty=nameWithType> -Eigenschaft bestimmen dagegen, wann das Dienstobjekt freigegeben wird.</span><span class="sxs-lookup"><span data-stu-id="6b502-136">And while the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property controls how often the <xref:System.ServiceModel.InstanceContext> is released, the <xref:System.ServiceModel.OperationBehaviorAttribute.ReleaseInstanceMode%2A?displayProperty=nameWithType> and <xref:System.ServiceModel.ServiceBehaviorAttribute.ReleaseServiceInstanceOnTransactionComplete%2A?displayProperty=nameWithType> properties control when the service object is released.</span></span>  
  
### <a name="well-known-singleton-services"></a><span data-ttu-id="6b502-137">Bekannte Singleton-Dienste</span><span class="sxs-lookup"><span data-stu-id="6b502-137">Well-Known Singleton Services</span></span>  
 <span data-ttu-id="6b502-138">Gelegentlich ist eine Variante für einzelne Instanzendienstobjekte nützlich: Sie können selbst ein Dienstobjekt und den Diensthost, der dieses Objekt verwendet, erstellen.</span><span class="sxs-lookup"><span data-stu-id="6b502-138">One variation on single instance service objects is sometimes useful: you can create a service object yourself and create the service host using that object.</span></span> <span data-ttu-id="6b502-139">Hierfür müssen Sie auch die <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> -Eigenschaft auf <xref:System.ServiceModel.InstanceContextMode.Single> festlegen, damit keine Ausnahme ausgelöst wird, sobald der Diensthost geöffnet wird.</span><span class="sxs-lookup"><span data-stu-id="6b502-139">To do so, you must also set the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.InstanceContextMode.Single> or an exception is thrown when the service host is opened.</span></span>  
  
 <span data-ttu-id="6b502-140">Verwenden Sie zum Erstellen eines solchen Diensts den <xref:System.ServiceModel.ServiceHost.%23ctor%28System.Object%2CSystem.Uri%5B%5D%29?displayProperty=nameWithType> -Konstruktor.</span><span class="sxs-lookup"><span data-stu-id="6b502-140">Use the <xref:System.ServiceModel.ServiceHost.%23ctor%28System.Object%2CSystem.Uri%5B%5D%29?displayProperty=nameWithType> constructor to create such a service.</span></span> <span data-ttu-id="6b502-141">Dieser stellt eine Alternative zur Implementierung eines benutzerdefinierten <xref:System.ServiceModel.Dispatcher.IInstanceContextInitializer?displayProperty=nameWithType> dar, wenn Sie eine bestimmte Objektinstanz für einen Singleton-Dienst bereitstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="6b502-141">It provides an alternative to implementing a custom <xref:System.ServiceModel.Dispatcher.IInstanceContextInitializer?displayProperty=nameWithType> when you wish to provide a specific object instance for use by a singleton service.</span></span> <span data-ttu-id="6b502-142">Sie können diese Überladung verwenden, wenn der Dienstimplementierungstyp schwer zu konstruieren ist (z. B. wenn kein parameterloser öffentlicher Konstruktor implementiert wird).</span><span class="sxs-lookup"><span data-stu-id="6b502-142">You can use this overload when your service implementation type is difficult to construct (for example, if it does not implement a parameterless public constructor).</span></span>  
  
 <span data-ttu-id="6b502-143">Beachten Sie, dass einige Features, die sich auf das Instancing-Verhalten von Windows Communication Foundation (WCF) beziehen, unterschiedlich funktionieren, wenn diesem Konstruktor ein Objekt bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="6b502-143">Note that when an object is provided to this constructor, some features related to the Windows Communication Foundation (WCF) instancing behavior work differently.</span></span> <span data-ttu-id="6b502-144">So zeigt zum Beispiel der Aufruf von <xref:System.ServiceModel.InstanceContext.ReleaseServiceInstance%2A?displayProperty=nameWithType> keine Wirkung, wenn eine Singleton-Objektinstanz bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="6b502-144">For example, calling <xref:System.ServiceModel.InstanceContext.ReleaseServiceInstance%2A?displayProperty=nameWithType> has no effect when a singleton object instance is provided.</span></span> <span data-ttu-id="6b502-145">Dementsprechend werden auch alle anderen Instanzfreigabemechanismen ignoriert.</span><span class="sxs-lookup"><span data-stu-id="6b502-145">Similarly, any other instance-release mechanism is ignored.</span></span> <span data-ttu-id="6b502-146">Der <xref:System.ServiceModel.ServiceHost> verhält sich immer so, als ob die <xref:System.ServiceModel.OperationBehaviorAttribute.ReleaseInstanceMode%2A?displayProperty=nameWithType> -Eigenschaft für alle Vorgänge auf <xref:System.ServiceModel.ReleaseInstanceMode.None?displayProperty=nameWithType> festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="6b502-146">The <xref:System.ServiceModel.ServiceHost> always behaves as if the <xref:System.ServiceModel.OperationBehaviorAttribute.ReleaseInstanceMode%2A?displayProperty=nameWithType> property is set to <xref:System.ServiceModel.ReleaseInstanceMode.None?displayProperty=nameWithType> for all operations.</span></span>  
  
### <a name="sharing-instancecontext-objects"></a><span data-ttu-id="6b502-147">Freigeben von InstanceContext-Objekten</span><span class="sxs-lookup"><span data-stu-id="6b502-147">Sharing InstanceContext Objects</span></span>  
 <span data-ttu-id="6b502-148">Sie können auch steuern, welcher sitzungsbasierte Kanal oder Aufruf dem <xref:System.ServiceModel.InstanceContext> -Objekt zugeordnet wird, indem Sie diese Zuordnung selbst vornehmen.</span><span class="sxs-lookup"><span data-stu-id="6b502-148">You can also control which sessionful channel or call is associated with which <xref:System.ServiceModel.InstanceContext> object by performing that association yourself.</span></span>  
  
## <a name="concurrency"></a><span data-ttu-id="6b502-149">Parallelität</span><span class="sxs-lookup"><span data-stu-id="6b502-149">Concurrency</span></span>  
 <span data-ttu-id="6b502-150">Bei der Parallelität handelt es sich um die Steuerung der Anzahl von Threads, die gleichzeitig in einem <xref:System.ServiceModel.InstanceContext> aktiv sind.</span><span class="sxs-lookup"><span data-stu-id="6b502-150">Concurrency is the control of the number of threads active in an <xref:System.ServiceModel.InstanceContext> at any one time.</span></span> <span data-ttu-id="6b502-151">Sie können diese Anzahl über <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A?displayProperty=nameWithType> in Verbindung mit der <xref:System.ServiceModel.ConcurrencyMode> -Enumeration bestimmen.</span><span class="sxs-lookup"><span data-stu-id="6b502-151">This is controlled by using the <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A?displayProperty=nameWithType> with the <xref:System.ServiceModel.ConcurrencyMode> enumeration.</span></span>  
  
 <span data-ttu-id="6b502-152">Es stehen die folgenden drei Parallelitätsmodi zur Verfügung:</span><span class="sxs-lookup"><span data-stu-id="6b502-152">The following three concurrency modes are available:</span></span>  
  
- <span data-ttu-id="6b502-153"><xref:System.ServiceModel.ConcurrencyMode.Single>: Jeder Instanzkontext darf höchstens über jeweils einen Thread verfügen, der im Instanzkontext Nachrichten verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="6b502-153"><xref:System.ServiceModel.ConcurrencyMode.Single>: Each instance context is allowed to have a maximum of one thread processing messages in the instance context at a time.</span></span> <span data-ttu-id="6b502-154">Falls weitere Threads diesen Instanzkontext verwenden möchten, werden sie so lange blockiert, bis der ursprüngliche Thread den Instanzkontext verlässt.</span><span class="sxs-lookup"><span data-stu-id="6b502-154">Other threads wishing to use the same instance context must block until the original thread exits the instance context.</span></span>  
  
- <span data-ttu-id="6b502-155"><xref:System.ServiceModel.ConcurrencyMode.Multiple>: Jede Dienstinstanz kann über mehrere Threads verfügen, die Nachrichten gleichzeitig verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="6b502-155"><xref:System.ServiceModel.ConcurrencyMode.Multiple>: Each service instance can have multiple threads processing messages concurrently.</span></span> <span data-ttu-id="6b502-156">Für diesen Parallelitätsmodus muss die Dienstimplementierung threadsicher sein.</span><span class="sxs-lookup"><span data-stu-id="6b502-156">The service implementation must be thread-safe to use this concurrency mode.</span></span>  
  
- <span data-ttu-id="6b502-157"><xref:System.ServiceModel.ConcurrencyMode.Reentrant>: Jede Dienstinstanz verarbeitet jeweils nur eine Nachricht, akzeptiert jedoch eintrittsinvariante Aufrufe.</span><span class="sxs-lookup"><span data-stu-id="6b502-157"><xref:System.ServiceModel.ConcurrencyMode.Reentrant>: Each service instance processes one message at a time, but accepts re-entrant operation calls.</span></span> <span data-ttu-id="6b502-158">Der Dienst akzeptiert diese Aufrufe nur, wenn er über ein WCF-Clientobjekt ausruft.</span><span class="sxs-lookup"><span data-stu-id="6b502-158">The service only accepts these calls when it is calling out through a WCF client object.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="6b502-159">Das Schreiben von Code, bei dem problemlos mehr als ein Thread verwendet wird, kann sich als sehr schwierig erweisen.</span><span class="sxs-lookup"><span data-stu-id="6b502-159">Understanding and developing code that safely uses more than one thread can be difficult to write successfully.</span></span> <span data-ttu-id="6b502-160">Stellen Sie sicher, dass Ihr Dienst ordnungsgemäß mit den Modi <xref:System.ServiceModel.ConcurrencyMode.Multiple> bzw. <xref:System.ServiceModel.ConcurrencyMode.Reentrant> arbeiten kann, bevor Sie diese Werte verwenden.</span><span class="sxs-lookup"><span data-stu-id="6b502-160">Before using <xref:System.ServiceModel.ConcurrencyMode.Multiple> or <xref:System.ServiceModel.ConcurrencyMode.Reentrant> values, ensure that your service is properly designed for these modes.</span></span> <span data-ttu-id="6b502-161">Weitere Informationen finden Sie unter <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A>.</span><span class="sxs-lookup"><span data-stu-id="6b502-161">For more information, see <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A>.</span></span>  
  
 <span data-ttu-id="6b502-162">Die Parallelität steht mit dem Instanziierungsmodus in Beziehung.</span><span class="sxs-lookup"><span data-stu-id="6b502-162">The use of concurrency is related to the instancing mode.</span></span> <span data-ttu-id="6b502-163">Beim <xref:System.ServiceModel.InstanceContextMode.PerCall> Instancing ist Parallelität nicht relevant, da jede <xref:System.ServiceModel.InstanceContext> Nachricht von einem neuen verarbeitet wird <xref:System.ServiceModel.InstanceContext>und daher nie mehr als ein Thread im aktiv ist.</span><span class="sxs-lookup"><span data-stu-id="6b502-163">In <xref:System.ServiceModel.InstanceContextMode.PerCall> instancing, concurrency is not relevant, because each message is processed by a new <xref:System.ServiceModel.InstanceContext> and, therefore, never more than one thread is active in the <xref:System.ServiceModel.InstanceContext>.</span></span>  
  
 <span data-ttu-id="6b502-164">Das folgende Codebeispiel zeigt, wie die <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> -Eigenschaft auf den Wert <xref:System.ServiceModel.ConcurrencyMode.Multiple>festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="6b502-164">The following code example demonstrates setting the <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> property to <xref:System.ServiceModel.ConcurrencyMode.Multiple>.</span></span>  
  
```csharp
[ServiceBehavior(ConcurrencyMode=ConcurrencyMode.Multiple, InstanceContextMode = InstanceContextMode.Single)]
public class CalculatorService : ICalculatorConcurrency
{
    ...  
}  
```  
  
## <a name="sessions-interact-with-instancecontext-settings"></a><span data-ttu-id="6b502-165">Interaktion von Sitzungen und InstanceContext-Einstellungen</span><span class="sxs-lookup"><span data-stu-id="6b502-165">Sessions Interact with InstanceContext Settings</span></span>  
 <span data-ttu-id="6b502-166">Sitzungen und der <xref:System.ServiceModel.InstanceContext> interagieren je nach Kombination des Werts der <xref:System.ServiceModel.SessionMode> -Enumeration in einem Vertrag und der <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> -Eigenschaft der Dienstimplementierung, durch die die Zuordnung zwischen Kanälen und bestimmten Dienstobjekten gesteuert wird.</span><span class="sxs-lookup"><span data-stu-id="6b502-166">Sessions and <xref:System.ServiceModel.InstanceContext> interact depending upon the combination of the value of the <xref:System.ServiceModel.SessionMode> enumeration in a contract and the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property on the service implementation, which controls the association between channels and specific service objects.</span></span>  
  
 <span data-ttu-id="6b502-167">Die folgende Tabelle enthält eine Übersicht über die Ergebnisse eines eingehenden Kanals, der Sitzungen je nach Kombination der Werte für die <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> -Eigenschaft und die <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> -Eigenschaft eines Diensts unterstützt oder nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="6b502-167">The following table shows the result of an incoming channel either supporting sessions or not supporting sessions given a service's combination of the values of the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> property and the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property.</span></span>  
  
|<span data-ttu-id="6b502-168">InstanceContextMode-Wert</span><span class="sxs-lookup"><span data-stu-id="6b502-168">InstanceContextMode value</span></span>|<xref:System.ServiceModel.SessionMode.Required>|<xref:System.ServiceModel.SessionMode.Allowed>|<xref:System.ServiceModel.SessionMode.NotAllowed>|  
|-------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------|  
|<span data-ttu-id="6b502-169">PerCall</span><span class="sxs-lookup"><span data-stu-id="6b502-169">PerCall</span></span>|<span data-ttu-id="6b502-170">- Verhalten mit sessionful Kanal: Eine Sitzung und <xref:System.ServiceModel.InstanceContext> für jeden Anruf.</span><span class="sxs-lookup"><span data-stu-id="6b502-170">-   Behavior with sessionful channel: A session and <xref:System.ServiceModel.InstanceContext> for each call.</span></span><br /><span data-ttu-id="6b502-171">- Verhalten mit sitzungslosem Kanal: Eine Ausnahme wird ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="6b502-171">-   Behavior with sessionless channel: An exception is thrown.</span></span>|<span data-ttu-id="6b502-172">- Verhalten mit sessionful Kanal: Eine Sitzung und <xref:System.ServiceModel.InstanceContext> für jeden Anruf.</span><span class="sxs-lookup"><span data-stu-id="6b502-172">-   Behavior with sessionful channel: A session and <xref:System.ServiceModel.InstanceContext> for each call.</span></span><br /><span data-ttu-id="6b502-173">- Verhalten mit sitzungslosem Kanal: Ein <xref:System.ServiceModel.InstanceContext> für jeden Anruf.</span><span class="sxs-lookup"><span data-stu-id="6b502-173">-   Behavior with sessionless channel: An <xref:System.ServiceModel.InstanceContext> for each call.</span></span>|<span data-ttu-id="6b502-174">- Verhalten mit sessionful Channel: Eine Ausnahme wird ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="6b502-174">-   Behavior with sessionful channel: An exception is thrown.</span></span><br /><span data-ttu-id="6b502-175">- Verhalten mit sitzungslosem Kanal: Ein <xref:System.ServiceModel.InstanceContext> für jeden Anruf.</span><span class="sxs-lookup"><span data-stu-id="6b502-175">-   Behavior with sessionless channel: An <xref:System.ServiceModel.InstanceContext> for each call.</span></span>|  
|<span data-ttu-id="6b502-176">PerSession</span><span class="sxs-lookup"><span data-stu-id="6b502-176">PerSession</span></span>|<span data-ttu-id="6b502-177">- Verhalten mit Sessionful Channel: Eine Sitzung und <xref:System.ServiceModel.InstanceContext> für jeden Kanal.</span><span class="sxs-lookup"><span data-stu-id="6b502-177">-   Behavior with sessionful channel: A session and <xref:System.ServiceModel.InstanceContext> for each channel.</span></span><br /><span data-ttu-id="6b502-178">- Verhalten mit sitzungslosem Kanal: Eine Ausnahme wird ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="6b502-178">-   Behavior with sessionless channel: An exception is thrown.</span></span>|<span data-ttu-id="6b502-179">- Verhalten mit Sessionful Channel: Eine Sitzung und <xref:System.ServiceModel.InstanceContext> für jeden Kanal.</span><span class="sxs-lookup"><span data-stu-id="6b502-179">-   Behavior with sessionful channel: A session and <xref:System.ServiceModel.InstanceContext> for each channel.</span></span><br /><span data-ttu-id="6b502-180">- Verhalten mit sitzungslosem Kanal: Ein <xref:System.ServiceModel.InstanceContext> für jeden Anruf.</span><span class="sxs-lookup"><span data-stu-id="6b502-180">-   Behavior with sessionless channel: An <xref:System.ServiceModel.InstanceContext> for each call.</span></span>|<span data-ttu-id="6b502-181">- Verhalten mit sessionful Channel: Eine Ausnahme wird ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="6b502-181">-   Behavior with sessionful channel: An exception is thrown.</span></span><br /><span data-ttu-id="6b502-182">- Verhalten mit sitzungslosem Kanal: Ein <xref:System.ServiceModel.InstanceContext> für jeden Anruf.</span><span class="sxs-lookup"><span data-stu-id="6b502-182">-   Behavior with sessionless channel: An <xref:System.ServiceModel.InstanceContext> for each call.</span></span>|  
|<span data-ttu-id="6b502-183">Single</span><span class="sxs-lookup"><span data-stu-id="6b502-183">Single</span></span>|<span data-ttu-id="6b502-184">- Verhalten mit sessionful Channel: <xref:System.ServiceModel.InstanceContext> Eine Sitzung und eine für alle Anrufe.</span><span class="sxs-lookup"><span data-stu-id="6b502-184">-   Behavior with sessionful channel: A session and one <xref:System.ServiceModel.InstanceContext> for all calls.</span></span><br /><span data-ttu-id="6b502-185">- Verhalten mit sitzungslosem Kanal: Eine Ausnahme wird ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="6b502-185">-   Behavior with sessionless channel: An exception is thrown.</span></span>|<span data-ttu-id="6b502-186">- Verhalten mit sessionful Channel: Eine Sitzung und <xref:System.ServiceModel.InstanceContext> für das erstellte oder benutzerdefinierte Singleton.</span><span class="sxs-lookup"><span data-stu-id="6b502-186">-   Behavior with sessionful channel: A session and <xref:System.ServiceModel.InstanceContext> for the created or user-specified singleton.</span></span><br /><span data-ttu-id="6b502-187">- Verhalten mit sitzungslosem Kanal: Ein <xref:System.ServiceModel.InstanceContext> für das erstellte oder benutzerdefinierte Singleton.</span><span class="sxs-lookup"><span data-stu-id="6b502-187">-   Behavior with sessionless channel: An <xref:System.ServiceModel.InstanceContext> for the created or user-specified singleton.</span></span>|<span data-ttu-id="6b502-188">- Verhalten mit sessionful Channel: Eine Ausnahme wird ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="6b502-188">-   Behavior with sessionful channel: An exception is thrown.</span></span><br /><span data-ttu-id="6b502-189">- Verhalten mit sitzungslosem Kanal: Ein <xref:System.ServiceModel.InstanceContext> für jeden erstellten Singleton oder für das benutzerdefinierte Singleton.</span><span class="sxs-lookup"><span data-stu-id="6b502-189">-   Behavior with sessionless channel: An <xref:System.ServiceModel.InstanceContext> for each created singleton or for the user-specified singleton.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="6b502-190">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="6b502-190">See also</span></span>

- [<span data-ttu-id="6b502-191">Verwenden von Sitzungen</span><span class="sxs-lookup"><span data-stu-id="6b502-191">Using Sessions</span></span>](../../../../docs/framework/wcf/using-sessions.md)
- [<span data-ttu-id="6b502-192">Vorgehensweise: Erstellen eines Diensts, der Sitzungen erfordert</span><span class="sxs-lookup"><span data-stu-id="6b502-192">How to: Create a Service That Requires Sessions</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-service-that-requires-sessions.md)
- [<span data-ttu-id="6b502-193">Gewusst wie: Steuern der Dienstinstanzierung</span><span class="sxs-lookup"><span data-stu-id="6b502-193">How to: Control Service Instancing</span></span>](../../../../docs/framework/wcf/feature-details/how-to-control-service-instancing.md)
- [<span data-ttu-id="6b502-194">Parallelität</span><span class="sxs-lookup"><span data-stu-id="6b502-194">Concurrency</span></span>](../../../../docs/framework/wcf/samples/concurrency.md)
- [<span data-ttu-id="6b502-195">Instanziierung</span><span class="sxs-lookup"><span data-stu-id="6b502-195">Instancing</span></span>](../../../../docs/framework/wcf/samples/instancing.md)
- [<span data-ttu-id="6b502-196">Sitzung</span><span class="sxs-lookup"><span data-stu-id="6b502-196">Session</span></span>](../../../../docs/framework/wcf/samples/session.md)
