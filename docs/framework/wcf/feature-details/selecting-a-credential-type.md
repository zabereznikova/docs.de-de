---
title: Wählen eines Typs von Anmeldeinformationen
description: Erfahren Sie mehr über Anmelde Informationen, wie Sie in WCF verwendet werden, und wie Sie die richtigen Anmelde Informationen für Ihre Anwendung auswählen, um eine beanspruchte Identität oder Funktionen einzurichten.
ms.date: 03/30/2017
ms.assetid: bf707063-3f30-4304-ab53-0e63413728a8
ms.openlocfilehash: 7a8a6880e5fc3982bb7f470c34a77c771c26effd
ms.sourcegitcommit: 358a28048f36a8dca39a9fe6e6ac1f1913acadd5
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/23/2020
ms.locfileid: "85244919"
---
# <a name="selecting-a-credential-type"></a><span data-ttu-id="3e9e7-103">Wählen eines Typs von Anmeldeinformationen</span><span class="sxs-lookup"><span data-stu-id="3e9e7-103">Selecting a Credential Type</span></span>
<span data-ttu-id="3e9e7-104">*Anmelde* Informationen sind die Daten Windows Communication Foundation (WCF) verwendet, um entweder eine beanspruchte Identität oder Funktionen einzurichten.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-104">*Credentials* are the data Windows Communication Foundation (WCF) uses to establish either a claimed identity or capabilities.</span></span> <span data-ttu-id="3e9e7-105">Ein Ausweis ist beispielsweise ein mit Anmeldeinformationen vergleichbares Dokument, das ein Staat ausgibt, damit seine Bürger ihre Staatsbürgerschaft nachweisen können.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-105">For example, a passport is a credential a government issues to prove citizenship in a country or region.</span></span> <span data-ttu-id="3e9e7-106">In WCF können Anmelde Informationen viele Formulare annehmen, z. b. Benutzernamen Token und X. 509-Zertifikate.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-106">In WCF, credentials can take many forms, such as user name tokens and X.509 certificates.</span></span> <span data-ttu-id="3e9e7-107">In diesem Thema werden Anmelde Informationen, ihre Verwendung in WCF und die Auswahl der richtigen Anmelde Informationen für Ihre Anwendung erläutert.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-107">This topic discusses credentials, how they are used in WCF, and how to select the right credential for your application.</span></span>  
  
 <span data-ttu-id="3e9e7-108">In vielen Ländern und Regionen ist ein Führerschein ein Beispiel für einen Identitätsnachweis.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-108">In many countries and regions, a driver’s license is an example of a credential.</span></span> <span data-ttu-id="3e9e7-109">Ein Führerschein enthält Daten, die die Identität und erworbene Berechtigungen einer Person nachweisen.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-109">A license contains data that represents a person's identity and capabilities.</span></span> <span data-ttu-id="3e9e7-110">Der rechtmäßige Besitz wird mithilfe eines Bilds des Inhabers nachgewiesen.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-110">It contains proof of possession in the form of the possessor's picture.</span></span> <span data-ttu-id="3e9e7-111">Ein Führerschein oder Ausweis wird von einer vertrauenswürdigen Stelle ausgegeben, in der Regel von einer dafür zuständigen Behörde.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-111">The license is issued by a trusted authority, usually a governmental department of licensing.</span></span> <span data-ttu-id="3e9e7-112">Der Führerschein wird eingeschweißt und enthält ggf. ein Hologramm, wodurch sichergestellt wird, dass er nicht manipuliert oder gefälscht wurde.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-112">The license is sealed, and can contain a hologram, showing that it has not been tampered with or counterfeited.</span></span>  
  
 <span data-ttu-id="3e9e7-113">Das Vorlegen eines Identitätsnachweises umfasst das Angeben der Daten und den Nachweis, dass sich die Daten rechtmäßig im Besitz des Inhabers befinden.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-113">Presenting a credential involves presenting both the data and proof of possession of the data.</span></span> <span data-ttu-id="3e9e7-114">WCF unterstützt eine Vielzahl von Anmelde Informationstypen auf Transport-und Nachrichten Sicherheitsebene.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-114">WCF supports a variety of credential types at both the transport and message security levels.</span></span> <span data-ttu-id="3e9e7-115">Nehmen wir beispielsweise an, dass zwei Arten von Anmelde Informationen in WCF unterstützt werden: Benutzername und (X. 509) Zertifikat Anmelde Informationen.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-115">For example, consider two types of credentials supported in WCF: user name and (X.509) certificate credentials.</span></span>  
  
 <span data-ttu-id="3e9e7-116">Beim Benutzernamenteil der Anmeldeinformationen stellt der Benutzername die beanspruchte Identität und das Kennwort den Nachweis des rechtmäßigen Besitzes dar.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-116">For the user name credential, the user name represents the claimed identity and the password provides proof of possession.</span></span> <span data-ttu-id="3e9e7-117">Die vertrauenswürdige Stelle ist in diesem Fall das System, das den Benutzernamen und das Kennwort überprüft.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-117">The trusted authority in this case is the system that validates the user name and password.</span></span>  
  
 <span data-ttu-id="3e9e7-118">Mit einem X. 509-Zertifikat Anmelde Informationen können der Antragsteller Name, der alternative Antragsteller Name oder bestimmte Felder innerhalb des Zertifikats als Identitäts Ansprüche verwendet werden, während andere Felder, wie z. b. das `Valid From` -Feld und das-Feld `Valid To` , die Gültigkeit des Zertifikats angeben.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-118">With an X.509 certificate credential, the subject name, subject alternative name or specific fields within the certificate can be used as claims of identity, while other fields, such as the `Valid From` and `Valid To` fields, specify the validity of the certificate.</span></span>  
  
## <a name="transport-credential-types"></a><span data-ttu-id="3e9e7-119">Transportieren von Anmeldeinformationen-Typen</span><span class="sxs-lookup"><span data-stu-id="3e9e7-119">Transport Credential Types</span></span>  
 <span data-ttu-id="3e9e7-120">Die folgende Tabelle zeigt die möglichen Typen von Clientanmeldeinformationen, die von einer Bindung im Transportsicherheitsmodus verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-120">The following table shows the possible types of client credentials that can be used by a binding in transport security mode.</span></span> <span data-ttu-id="3e9e7-121">Legen Sie die `ClientCredentialType`-Eigenschaft beim Erstellen eines Dienstes auf einen dieser Werte fest, um den Typ der Anmeldeinformationen anzugeben, den der Client zum Kommunizieren mit Ihrem Dienst bereitstellen muss.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-121">When creating a service, set the `ClientCredentialType` property to one of these values to specify the type of credential that the client must supply to communicate with your service.</span></span> <span data-ttu-id="3e9e7-122">Sie können die Typen entweder im Code oder in Konfigurationsdateien festlegen.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-122">You can set the types in either code or configuration files.</span></span>  
  
|<span data-ttu-id="3e9e7-123">Einstellung</span><span class="sxs-lookup"><span data-stu-id="3e9e7-123">Setting</span></span>|<span data-ttu-id="3e9e7-124">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="3e9e7-124">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="3e9e7-125">Keine</span><span class="sxs-lookup"><span data-stu-id="3e9e7-125">None</span></span>|<span data-ttu-id="3e9e7-126">Gibt an, dass der Client keine Anmeldeinformationen präsentieren muss.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-126">Specifies that the client does not need to present any credential.</span></span> <span data-ttu-id="3e9e7-127">Dies führt zur Verwendung eines anonymen Clients.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-127">This translates to an anonymous client.</span></span>|  
|<span data-ttu-id="3e9e7-128">Basic</span><span class="sxs-lookup"><span data-stu-id="3e9e7-128">Basic</span></span>|<span data-ttu-id="3e9e7-129">Gibt die Standardauthentifizierung für den Client an.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-129">Specifies basic authentication for the client.</span></span> <span data-ttu-id="3e9e7-130">Weitere Informationen finden Sie unter RFC2617 –[http Authentication: Basic and Digest Authentication](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span><span class="sxs-lookup"><span data-stu-id="3e9e7-130">For additional information, see RFC2617—[HTTP Authentication: Basic and Digest Authentication](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span></span>|  
|<span data-ttu-id="3e9e7-131">Digest</span><span class="sxs-lookup"><span data-stu-id="3e9e7-131">Digest</span></span>|<span data-ttu-id="3e9e7-132">Gibt die Hashwertauthentifizierung für den Client an.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-132">Specifies digest authentication for the client.</span></span> <span data-ttu-id="3e9e7-133">Weitere Informationen finden Sie unter RFC2617 –[http Authentication: Basic and Digest Authentication](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span><span class="sxs-lookup"><span data-stu-id="3e9e7-133">For additional information, see RFC2617—[HTTP Authentication: Basic and Digest Authentication](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span></span>|  
|<span data-ttu-id="3e9e7-134">Ntlm</span><span class="sxs-lookup"><span data-stu-id="3e9e7-134">Ntlm</span></span>|<span data-ttu-id="3e9e7-135">Gibt die NT-LAN-Managerauthentifizierung (NTLM) an.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-135">Specifies NT LAN Manager (NTLM) authentication.</span></span> <span data-ttu-id="3e9e7-136">Wird verwendet, wenn Sie aus bestimmten Gründen keine Kerberos-Authentifizierung verwenden können.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-136">This is used when you cannot use Kerberos authentication for some reason.</span></span> <span data-ttu-id="3e9e7-137">Sie können die Verwendung auch als Fall Back deaktivieren, indem Sie die- <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> Eigenschaft auf festlegen `false` . Dies bewirkt, dass WCF bei Verwendung von NTLM einen Best-Effort-Vorgang auslöst, um eine Ausnahme auszulösen.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-137">You can also disable its use as a fallback by setting the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false`, which causes WCF to make a best-effort to throw an exception if NTLM is used.</span></span> <span data-ttu-id="3e9e7-138">Durch das Festlegen dieser Eigenschaft auf `false` wird unter Umständen nicht verhindert, dass NTLM-Anmeldeinformationen über die Verbindung gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-138">Note that setting this property to `false` may not prevent NTLM credentials from being sent over the wire.</span></span>|  
|<span data-ttu-id="3e9e7-139">Windows</span><span class="sxs-lookup"><span data-stu-id="3e9e7-139">Windows</span></span>|<span data-ttu-id="3e9e7-140">Gibt die Windows-Authentifizierung an.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-140">Specifies Windows authentication.</span></span> <span data-ttu-id="3e9e7-141">Um für eine Windows-Domäne nur das Kerberos-Protokoll anzugeben, legen Sie die <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A>-Eigenschaft auf `false` fest (die Standardeinstellung ist `true`).</span><span class="sxs-lookup"><span data-stu-id="3e9e7-141">To specify only the Kerberos protocol on a Windows domain, set the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false` (the default is `true`).</span></span>|  
|<span data-ttu-id="3e9e7-142">Zertifikat</span><span class="sxs-lookup"><span data-stu-id="3e9e7-142">Certificate</span></span>|<span data-ttu-id="3e9e7-143">Führt die Clientauthentifizierung mit einem X.509-Zertifikat aus.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-143">Performs client authentication using an X.509 certificate.</span></span>|  
|<span data-ttu-id="3e9e7-144">Kennwort</span><span class="sxs-lookup"><span data-stu-id="3e9e7-144">Password</span></span>|<span data-ttu-id="3e9e7-145">Benutzer müssen einen Benutzernamen und ein Kennwort angeben.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-145">User must supply a user name and password.</span></span> <span data-ttu-id="3e9e7-146">Überprüfen Sie das Benutzername/Kennwort-Paar mithilfe der Windows-Authentifizierung oder einer anderen benutzerdefinierten Lösung.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-146">Validate the user name/password pair using Windows authentication or another custom solution.</span></span>|  
  
### <a name="message-client-credential-types"></a><span data-ttu-id="3e9e7-147">Typen von Nachrichtenclient-Anmeldeinformationen</span><span class="sxs-lookup"><span data-stu-id="3e9e7-147">Message Client Credential Types</span></span>  
 <span data-ttu-id="3e9e7-148">Die folgende Tabelle zeigt die möglichen Typen von Anmeldeinformationen, die Sie beim Erstellen einer Anwendung verwenden können, die die Nachrichtensicherheit nutzt.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-148">The following table shows the possible credential types that you can use when creating an application that uses message security.</span></span> <span data-ttu-id="3e9e7-149">Sie können diese Werte entweder im Code oder in Konfigurationsdateien festlegen.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-149">You can use these values in either code or configuration files.</span></span>  
  
|<span data-ttu-id="3e9e7-150">Einstellung</span><span class="sxs-lookup"><span data-stu-id="3e9e7-150">Setting</span></span>|<span data-ttu-id="3e9e7-151">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="3e9e7-151">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="3e9e7-152">Keine</span><span class="sxs-lookup"><span data-stu-id="3e9e7-152">None</span></span>|<span data-ttu-id="3e9e7-153">Gibt an, dass der Client keine Anmeldeinformationen bereitstellen muss.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-153">Specifies that the client does not need to present a credential.</span></span> <span data-ttu-id="3e9e7-154">Dies führt zur Verwendung eines anonymen Clients.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-154">This translates to an anonymous client.</span></span>|  
|<span data-ttu-id="3e9e7-155">Windows</span><span class="sxs-lookup"><span data-stu-id="3e9e7-155">Windows</span></span>|<span data-ttu-id="3e9e7-156">Ermöglicht unter dem mit Windows-Anmeldeinformationen eingerichteten Sicherheitskontext den Austausch von SOAP-Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-156">Allows SOAP message exchanges to occur under the security context established with a Windows credential.</span></span>|  
|<span data-ttu-id="3e9e7-157">Username</span><span class="sxs-lookup"><span data-stu-id="3e9e7-157">Username</span></span>|<span data-ttu-id="3e9e7-158">Ermöglicht es dem Dienst zu fordern, dass sich der Client per Benutzername authentifiziert.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-158">Allows the service to require that the client be authenticated with a user name credential.</span></span> <span data-ttu-id="3e9e7-159">Beachten Sie, dass WCF Kryptografievorgänge mit Benutzernamen nicht zulässt, wie z. b. das Erzeugen einer Signatur oder das Verschlüsseln von Daten.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-159">Note that WCF does not allow any cryptographic operations with user names, such as generating a signature or encrypting data.</span></span> <span data-ttu-id="3e9e7-160">WCF stellt sicher, dass der Transport geschützt ist, wenn Benutzernamen-Anmelde Informationen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-160">WCF ensures that the transport is secured when using user name credentials.</span></span>|  
|<span data-ttu-id="3e9e7-161">Zertifikat</span><span class="sxs-lookup"><span data-stu-id="3e9e7-161">Certificate</span></span>|<span data-ttu-id="3e9e7-162">Ermöglicht es dem Dienst zu fordern, dass der Client mithilfe eines X.509-Zertifikats authentifiziert wird.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-162">Allows the service to require that the client be authenticated using an X.509 certificate.</span></span>|  
|<span data-ttu-id="3e9e7-163">Ausgestelltes Token (Issued Token)</span><span class="sxs-lookup"><span data-stu-id="3e9e7-163">Issued Token</span></span>|<span data-ttu-id="3e9e7-164">Ein benutzerdefinierter nach einer Sicherheitsrichtlinie konfigurierter Tokentyp.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-164">A custom token type configured according to a security policy.</span></span> <span data-ttu-id="3e9e7-165">Der Standardtokentyp ist SAML (Security Assertions Markup Language).</span><span class="sxs-lookup"><span data-stu-id="3e9e7-165">The default token type is Security Assertions Markup Language (SAML).</span></span> <span data-ttu-id="3e9e7-166">Das Token wird von einem sicheren Tokendienst ausgegeben.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-166">The token is issued by a secure token service.</span></span> <span data-ttu-id="3e9e7-167">Weitere Informationen finden Sie unter Verbund [-und ausgestellte Token](federation-and-issued-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="3e9e7-167">For more information, see [Federation and Issued Tokens](federation-and-issued-tokens.md).</span></span>|  
  
### <a name="negotiation-model-of-service-credentials"></a><span data-ttu-id="3e9e7-168">Aushandlungsmodell von Dienstanmeldeinformationen</span><span class="sxs-lookup"><span data-stu-id="3e9e7-168">Negotiation Model of Service Credentials</span></span>  
 <span data-ttu-id="3e9e7-169">*Aushandlung* ist das Einrichten der Vertrauensstellung zwischen einem Client und einem Dienst durch Austauschen von Anmelde Informationen.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-169">*Negotiation* is the process of establishing trust between a client and a service by exchanging credentials.</span></span> <span data-ttu-id="3e9e7-170">Der Prozess wird iterativ zwischen dem Client und dem Dienst durchgeführt, damit jeweils nur die Informationen offengelegt werden, die für den nächsten Schritt des Aushandlungsprozesses erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-170">The process is performed iteratively between the client and the service, so as to disclose only the information necessary for the next step in the negotiation process.</span></span> <span data-ttu-id="3e9e7-171">In der Praxis ist das Endergebnis die Zustellung der Anmeldeinformationen eines Dienstes an den Client, damit diese bei nachfolgenden Vorgängen verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-171">In practice, the end result is the delivery of a service's credential to the client to be used in subsequent operations.</span></span>  
  
 <span data-ttu-id="3e9e7-172">Mit einer Ausnahme werden standardmäßig die vom System bereitgestellten Bindungen in WCF die Dienst Anmelde Informationen automatisch aushandeln, wenn die Sicherheit auf Nachrichten Ebene verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-172">With one exception, by default the system-provided bindings in WCF negotiate the service credential automatically when using message-level security.</span></span> <span data-ttu-id="3e9e7-173">(Die Ausnahme ist die <xref:System.ServiceModel.BasicHttpBinding> , die die Sicherheit nicht standardmäßig aktiviert.) Um dieses Verhalten zu deaktivieren, finden Sie weitere Informationen unter den <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> Eigenschaften und.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-173">(The exception is the <xref:System.ServiceModel.BasicHttpBinding>, which does not enable security by default.) To disable this behavior, see the <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> and <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> properties.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="3e9e7-174">Wenn SSL-Sicherheit mit .NET Framework 3,5 und höher verwendet wird, verwendet ein WCF-Client sowohl die zwischen Zertifikate im Zertifikat Speicher als auch die zwischen Zertifikate, die während der SSL-Aushandlung empfangen werden, um die Überprüfung der Zertifikat Kette für das Dienst Zertifikat durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-174">When SSL security is used with .NET Framework 3.5 and later, a WCF client uses both the intermediate certificates in its certificate store and the intermediate certificates received during SSL negotiation to perform certificate chain validation on the service's certificate.</span></span> <span data-ttu-id="3e9e7-175">Bei .NET Framework 3.0 werden nur die im lokalen Zertifikatspeicher installierten Zwischenzertifikate verwendet.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-175">.NET Framework 3.0 only uses the intermediate certificates installed in the local certificate store.</span></span>  
  
#### <a name="out-of-band-negotiation"></a><span data-ttu-id="3e9e7-176">Out-of-Band-Aushandlung</span><span class="sxs-lookup"><span data-stu-id="3e9e7-176">Out-of-Band Negotiation</span></span>  
 <span data-ttu-id="3e9e7-177">Wenn die automatische Aushandlung deaktiviert ist, müssen die Dienstanmeldeinformationen auf dem Client bereitgestellt werden, bevor Nachrichten an den Dienst gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-177">If automatic negotiation is disabled, the service credential must be provisioned at the client prior to sending any messages to the service.</span></span> <span data-ttu-id="3e9e7-178">Dies wird auch als out- *of-Band-* Bereitstellung bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-178">This is also known as an *out-of-band* provisioning.</span></span> <span data-ttu-id="3e9e7-179">Wenn es sich beim angegebenen Typ der Anmeldeinformationen um ein Zertifikat handelt und die automatische Aushandlung deaktiviert ist, muss sich der Client an den Besitzer des Dienstes wenden, um das Zertifikat zu erhalten und auf dem Computer zu installieren, auf dem die Clientanwendung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-179">For example, if the specified credential type is a certificate, and automatic negotiation is disabled, the client must contact the service owner to receive and install the certificate on the computer running the client application.</span></span> <span data-ttu-id="3e9e7-180">Sie können dies zum Beispiel nutzen, wenn Sie genau steuern möchten, welche Clients in einem Business-to-Business-Szenario auf einen Dienst zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-180">This can be done, for example, when you want to strictly control which clients can access a service in a business-to-business scenario.</span></span> <span data-ttu-id="3e9e7-181">Diese Out-of-Band-Aushandlung kann per e-Mail erfolgen, und das X. 509-Zertifikat wird im Windows-Zertifikat Speicher mithilfe eines Tools wie dem MMC-Zertifikat-Snap-in (Microsoft Management Console) gespeichert.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-181">This out-of-band-negotiation can be done in email, and the X.509 certificate is stored in Windows certificate store, using a tool such as the Microsoft Management Console (MMC) Certificates snap-in.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="3e9e7-182">Die <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A>-Eigenschaft wird verwendet, um den Dienst mit einem Zertifikat bereitzustellen, das per Out-of-Band-Aushandlung beschafft wurde.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-182">The <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property is used to provide the service with a certificate that was attained through out-of-band negotiation.</span></span> <span data-ttu-id="3e9e7-183">Dies ist erforderlich, wenn Sie die <xref:System.ServiceModel.BasicHttpBinding>-Klasse verwenden, da die Bindung keine automatisierte Aushandlung zulässt.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-183">This is necessary when using the <xref:System.ServiceModel.BasicHttpBinding> class because the binding does not allow automated negotiation.</span></span> <span data-ttu-id="3e9e7-184">Die Eigenschaft wird auch in einem nicht korrelierten Duplexszenario verwendet.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-184">The property is also used in an uncorrelated duplex scenario.</span></span> <span data-ttu-id="3e9e7-185">Dies ist ein Szenario, bei dem ein Server eine Nachricht an den Client sendet, ohne dass der Client zuerst eine Anforderung an den Server senden muss.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-185">This is a scenario where a server sends a message to the client without requiring the client to send a request to the server first.</span></span> <span data-ttu-id="3e9e7-186">Da der Server nicht über eine Anforderung des Clients verfügt, muss er das Zertifikat des Clients verwenden, um die Nachricht an den Client zu verschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-186">Because the server does not have a request from the client, it must use the client's certificate to encrypt the message to the client.</span></span>  
  
## <a name="setting-credential-values"></a><span data-ttu-id="3e9e7-187">Festlegen der Werte von Anmeldeinformationen</span><span class="sxs-lookup"><span data-stu-id="3e9e7-187">Setting Credential Values</span></span>  
 <span data-ttu-id="3e9e7-188">Nachdem Sie einen Sicherheitsmodus ausgewählt haben, müssen Sie die eigentlichen Anmeldeinformationen angeben.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-188">Once you select a security mode, you must specify the actual credentials.</span></span> <span data-ttu-id="3e9e7-189">Wenn der Typ der Anmeldeinformationen zum Beispiel auf "Zertifikat" festgelegt ist, müssen Sie dem Dienst bzw. dem Client spezielle Anmeldeinformationen (wie ein spezifisches X.509-Zertifikat) zuordnen.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-189">For example, if the credential type is set to "certificate," then you must associate a specific credential (such as a specific X.509 certificate) with the service or client.</span></span>  
  
 <span data-ttu-id="3e9e7-190">Die Methode zum Festlegen des Werts der Anmeldeinformationen unterscheidet sich in Abhängigkeit davon leicht, ob Sie einen Dienst oder einen Client programmieren.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-190">Depending on whether you are programming a service or a client, the method for setting the credential value differs slightly.</span></span>  
  
### <a name="setting-service-credentials"></a><span data-ttu-id="3e9e7-191">Festlegen von Dienstanmeldeinformationen</span><span class="sxs-lookup"><span data-stu-id="3e9e7-191">Setting Service Credentials</span></span>  
 <span data-ttu-id="3e9e7-192">Wenn Sie den Transportmodus verwenden und HTTP als Transportart nutzen, müssen Sie entweder Internetinformationsdienste (IIS) verwenden oder den Anschluss mit einem Zertifikat konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-192">If you are using transport mode, and you are using HTTP as the transport, you must use either Internet Information Services (IIS) or configure the port with a certificate.</span></span> <span data-ttu-id="3e9e7-193">Weitere Informationen finden Sie unter [Übersicht über die Transportsicherheit](transport-security-overview.md) und [HTTP-Transportsicherheit](http-transport-security.md).</span><span class="sxs-lookup"><span data-stu-id="3e9e7-193">For more information, see [Transport Security Overview](transport-security-overview.md) and [HTTP Transport Security](http-transport-security.md).</span></span>  
  
 <span data-ttu-id="3e9e7-194">Um einen Dienst im Code mit Anmeldeinformationen auszustatten, erstellen Sie eine Instanz der <xref:System.ServiceModel.ServiceHost>-Klasse und geben die geeigneten Anmeldeinformationen an, indem Sie die <xref:System.ServiceModel.Description.ServiceCredentials>-Klasse verwenden, auf die mithilfe der <xref:System.ServiceModel.ServiceHostBase.Credentials%2A>-Eigenschaft zugegriffen wird.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-194">To provision a service with credentials in code, create an instance of the <xref:System.ServiceModel.ServiceHost> class and specify the appropriate credential using the <xref:System.ServiceModel.Description.ServiceCredentials> class, accessed through the <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> property.</span></span>  
  
#### <a name="setting-a-certificate"></a><span data-ttu-id="3e9e7-195">Festlegen eines Zertifikats</span><span class="sxs-lookup"><span data-stu-id="3e9e7-195">Setting a Certificate</span></span>  
 <span data-ttu-id="3e9e7-196">Um einen Dienst mit einem X.509-Zertifikat auszustatten, das zur Authentifizierung des Dienstes für Clients genutzt wird, verwenden Sie die <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A>-Methode der <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential>-Klasse.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-196">To provision a service with an X.509 certificate to be used to authenticate the service to clients, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential> class.</span></span>  
  
 <span data-ttu-id="3e9e7-197">Um einen Dienst mit einem Clientzertifikat bereitzustellen, verwenden Sie die <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A>-Methode der <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential>-Klasse.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-197">To provision a service with a client certificate, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential> class.</span></span>  
  
#### <a name="setting-windows-credentials"></a><span data-ttu-id="3e9e7-198">Festlegen der Windows-Anmeldeinformationen</span><span class="sxs-lookup"><span data-stu-id="3e9e7-198">Setting Windows Credentials</span></span>  
 <span data-ttu-id="3e9e7-199">Wenn der Client einen gültigen Benutzernamen und ein Kennwort angibt, werden diese Anmeldeinformationen zum Authentifizieren des Clients verwendet.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-199">If the client specifies a valid user name and password, that credential is used to authenticate the client.</span></span> <span data-ttu-id="3e9e7-200">Andernfalls werden die Anmeldeinformationen des momentan angemeldeten Benutzers verwendet.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-200">Otherwise, the current logged-on user's credentials are used.</span></span>  
  
### <a name="setting-client-credentials"></a><span data-ttu-id="3e9e7-201">Festlegen von Clientanmeldeinformationen</span><span class="sxs-lookup"><span data-stu-id="3e9e7-201">Setting Client Credentials</span></span>  
 <span data-ttu-id="3e9e7-202">In WCF verwenden Client Anwendungen einen WCF-Client, um eine Verbindung mit Diensten herzustellen.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-202">In WCF, client applications use a WCF client to connect to services.</span></span> <span data-ttu-id="3e9e7-203">Jeder Client ist von der <xref:System.ServiceModel.ClientBase%601>-Klasse abgeleitet, und die <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A>-Eigenschaft auf dem Client ermöglicht die Angabe verschiedener Werte für Clientanmeldeinformationen.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-203">Every client derives from the <xref:System.ServiceModel.ClientBase%601> class, and the <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property on the client allows the specification of various values of client credentials.</span></span>  
  
#### <a name="setting-a-certificate"></a><span data-ttu-id="3e9e7-204">Festlegen eines Zertifikats</span><span class="sxs-lookup"><span data-stu-id="3e9e7-204">Setting a Certificate</span></span>  
 <span data-ttu-id="3e9e7-205">Um einen Dienst mit einem X.509-Zertifikat auszustatten, das zum Authentifizieren des Clients für einen Dienst genutzt wird, verwenden Sie die <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A>-Methode der <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential>-Klasse.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-205">To provision a service with an X.509 certificate that is used to authenticate the client to a service, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential> class.</span></span>  
  
## <a name="how-client-credentials-are-used-to-authenticate-a-client-to-the-service"></a><span data-ttu-id="3e9e7-206">Verwenden von Clientanmeldeinformationen zum Authentifizieren eines Clients für einen Dienst</span><span class="sxs-lookup"><span data-stu-id="3e9e7-206">How Client Credentials Are Used to Authenticate a Client to the Service</span></span>  
 <span data-ttu-id="3e9e7-207">Sie stellen Clientanmeldeinformationen, die für die Kommunikation mit einem Dienst erforderlich sind, bereit, indem Sie entweder die <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A>-Eigenschaft oder die <xref:System.ServiceModel.ChannelFactory.Credentials%2A>-Eigenschaft verwenden.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-207">Client credential information required to communicate with a service is provided using either the <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property or the <xref:System.ServiceModel.ChannelFactory.Credentials%2A> property.</span></span> <span data-ttu-id="3e9e7-208">Der Sicherheitskanal verwendet diese Informationen, um den Client für den Dienst zu authentifizieren.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-208">The security channel uses this information to authenticate the client to the service.</span></span> <span data-ttu-id="3e9e7-209">Die Authentifizierung erfolgt in einem von zwei Modi:</span><span class="sxs-lookup"><span data-stu-id="3e9e7-209">Authentication is accomplished through one of two modes:</span></span>  
  
- <span data-ttu-id="3e9e7-210">Die Client Anmelde Informationen werden einmalig verwendet, bevor die erste Nachricht gesendet wird, wobei die WCF-Client Instanz verwendet wird, um einen Sicherheitskontext einzurichten.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-210">The client credentials are used once before the first message is sent, using the WCF client instance to establish a security context.</span></span> <span data-ttu-id="3e9e7-211">Alle Anwendungsnachrichten werden dann über den Sicherheitskontext geschützt.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-211">All application messages are then secured through the security context.</span></span>  
  
- <span data-ttu-id="3e9e7-212">Die Clientanmeldeinformationen werden verwendet, um alle Anwendungsnachrichten zu authentifizieren, die an den Dienst gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-212">The client credentials are used to authenticate every application message sent to the service.</span></span> <span data-ttu-id="3e9e7-213">In diesem Fall wird zwischen dem Client und dem Dienst kein Kontext eingerichtet.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-213">In this case, no context is established between the client and the service.</span></span>  
  
### <a name="established-identities-cannot-be-changed"></a><span data-ttu-id="3e9e7-214">Eingerichtete Identitäten können nicht geändert werden</span><span class="sxs-lookup"><span data-stu-id="3e9e7-214">Established Identities Cannot Be Changed</span></span>  
 <span data-ttu-id="3e9e7-215">Wenn die erste Methode verwendet wird, wird der eingerichtete Kontext dauerhaft der Clientidentität zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-215">When the first method is used, the established context is permanently associated with the client identity.</span></span> <span data-ttu-id="3e9e7-216">Dies bedeutet, dass die dem Client zugeordnete Identität nicht geändert werden kann, nachdem der Sicherheitskontext eingerichtet wurde.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-216">That is, once the security context has been established, the identity associated with the client cannot be changed.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="3e9e7-217">Wenn die Identität nicht gewechselt werden kann (also wenn das Einrichten eines Sicherheitskontexts aktiviert ist (Standardeinstellung)), kann ein bestimmtes Verhalten auftreten.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-217">There is a situation to be aware of when the identity cannot be switched (that is, when establish security context is on, the default behavior).</span></span> <span data-ttu-id="3e9e7-218">Wenn Sie einen Dienst erstellen, der mit einem zweiten Dienst kommuniziert, kann die Identität, die zum Öffnen des WCF-Clients für den zweiten Dienst verwendet wird, nicht geändert werden.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-218">If you create a service that communicates with a second service, the identity used to open the WCF client to the second service cannot be changed.</span></span> <span data-ttu-id="3e9e7-219">Dies wird zu einem Problem, wenn mehrere Clients den ersten Dienst verwenden dürfen und der Dienst die Identität der Clients annimmt, wenn er auf den anderen Dienst zugreift.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-219">This becomes a problem if multiple clients are allowed to use the first service and the service impersonates the clients when accessing the second service.</span></span> <span data-ttu-id="3e9e7-220">Wenn der Dienst denselben Client für alle Aufrufer wiederverwendet, erfolgen alle Aufrufe des anderen Dienstes unter der Identität des ersten Aufrufers, der zum Öffnen des Clients für den anderen Dienst verwendet wurde.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-220">If the service reuses the same client for all callers, all calls to the second service are done under the identity of the first caller that was used to open the client to the second service.</span></span> <span data-ttu-id="3e9e7-221">Anders ausgedrückt: Der Dienst verwendet die Identität des ersten Clients für alle Clients, um mit dem anderen Dienst zu kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-221">In other words, the service uses the identity of the first client for all its clients to communicate with the second service.</span></span> <span data-ttu-id="3e9e7-222">Dies kann zur Erweiterung von Berechtigungen führen.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-222">This can lead to the elevation of privilege.</span></span> <span data-ttu-id="3e9e7-223">Wenn dies nicht das für den Dienst erwünschte Verhalten darstellt, müssen Sie jeden Aufrufer verfolgen und für jeden Aufrufer einen neuen Client für den anderen Dienst erstellen. Außerdem müssen Sie sicherstellen, dass der Dienst nur den richtigen Client für den jeweiligen Aufrufer verwendet, um mit dem zweiten Dienst zu kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="3e9e7-223">If this is not the desired behavior of your service, you must track each caller and create a new client to the second service for every distinct caller, and ensure that the service uses only the right client for the right caller to communicate with the second service.</span></span>  
  
 <span data-ttu-id="3e9e7-224">Weitere Informationen zu Anmelde Informationen und sicheren Sitzungen finden Sie unter [Sicherheitsüberlegungen für sichere Sitzungen](security-considerations-for-secure-sessions.md).</span><span class="sxs-lookup"><span data-stu-id="3e9e7-224">For more information about credentials and secure sessions, see [Security Considerations for Secure Sessions](security-considerations-for-secure-sessions.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3e9e7-225">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="3e9e7-225">See also</span></span>

- <xref:System.ServiceModel.ClientBase%601?displayProperty=nameWithType>
- <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Description.ClientCredentials.ClientCertificate%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.BasicHttpMessageSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.HttpTransportSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverHttp.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverMsmq.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverTcp.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.TcpTransportSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A?displayProperty=nameWithType>
- [<span data-ttu-id="3e9e7-226">Sicherheitskonzepte</span><span class="sxs-lookup"><span data-stu-id="3e9e7-226">Security Concepts</span></span>](security-concepts.md)
- [<span data-ttu-id="3e9e7-227">Sichern von Diensten und Clients</span><span class="sxs-lookup"><span data-stu-id="3e9e7-227">Securing Services and Clients</span></span>](securing-services-and-clients.md)
- [<span data-ttu-id="3e9e7-228">Programmieren der WCF-Sicherheit</span><span class="sxs-lookup"><span data-stu-id="3e9e7-228">Programming WCF Security</span></span>](programming-wcf-security.md)
- [<span data-ttu-id="3e9e7-229">HTTP-Transportsicherheit</span><span class="sxs-lookup"><span data-stu-id="3e9e7-229">HTTP Transport Security</span></span>](http-transport-security.md)
