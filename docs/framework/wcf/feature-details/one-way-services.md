---
title: Unidirektionale Dienste
ms.date: 03/30/2017
helpviewer_keywords:
- Windows Communication Foundation [WCF], one-way service contracts
- WCF [WCF], one-way service contracts
- service contracts [WCF], defining one-way
ms.assetid: 19053a36-4492-45a3-bfe6-0365ee0205a3
ms.openlocfilehash: c4b69d68c52e9f199348544e5838babc9f4d8c2c
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/26/2020
ms.locfileid: "96248083"
---
# <a name="one-way-services"></a><span data-ttu-id="00e18-102">Unidirektionale Dienste</span><span class="sxs-lookup"><span data-stu-id="00e18-102">One-Way Services</span></span>

<span data-ttu-id="00e18-103">Das Standardverhalten eines Dienstvorgangs ist das Anforderung-Antwort-Muster.</span><span class="sxs-lookup"><span data-stu-id="00e18-103">The default behavior of a service operation is the request-reply pattern.</span></span> <span data-ttu-id="00e18-104">Bei einem Anforderung-Antwort-Muster wartet der Client auch dann auf die Antwortnachricht, wenn der Dienstvorgang im Code als `void`-Methode dargestellt wird.</span><span class="sxs-lookup"><span data-stu-id="00e18-104">In a request-reply pattern, the client waits for the reply message, even if the service operation is represented in code as a `void` method.</span></span> <span data-ttu-id="00e18-105">Mit einem unidirektionalen Vorgang wird nur eine Nachricht gesendet.</span><span class="sxs-lookup"><span data-stu-id="00e18-105">With a one-way operation, only one message is transmitted.</span></span> <span data-ttu-id="00e18-106">Der Empfänger sendet keine Antwortnachricht, und vom Absender wird keine erwartet.</span><span class="sxs-lookup"><span data-stu-id="00e18-106">The receiver does not send a reply message, nor does the sender expect one.</span></span>  
  
 <span data-ttu-id="00e18-107">Verwenden Sie das unidirektionale Entwurfsmuster:</span><span class="sxs-lookup"><span data-stu-id="00e18-107">Use the one-way design pattern:</span></span>  
  
- <span data-ttu-id="00e18-108">Wenn der Client Vorgänge aufrufen muss und vom Ergebnis des Vorgangs auf Vorgangsebene nicht betroffen ist.</span><span class="sxs-lookup"><span data-stu-id="00e18-108">When the client must call operations and is not affected by the result of the operation at the operation level.</span></span>  
  
- <span data-ttu-id="00e18-109">Wenn die <xref:System.ServiceModel.NetMsmqBinding>-Klasse oder die <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>-Klasse verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="00e18-109">When using the <xref:System.ServiceModel.NetMsmqBinding> or the <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> class.</span></span> <span data-ttu-id="00e18-110">(Weitere Informationen zu diesem Szenario finden Sie unter [Warteschlangen in WCF](queues-in-wcf.md).)</span><span class="sxs-lookup"><span data-stu-id="00e18-110">(For more information about this scenario, see [Queues in WCF](queues-in-wcf.md).)</span></span>  
  
 <span data-ttu-id="00e18-111">Bei einem unidirektionalen Vorgang gibt es keine Antwortnachricht, über die Fehlerinformationen zurück an den Client übertragen werden.</span><span class="sxs-lookup"><span data-stu-id="00e18-111">When an operation is one-way, there is no response message to carry error information back to the client.</span></span> <span data-ttu-id="00e18-112">Sie können Fehlerbedingungen mit den Funktionen der zugrunde liegenden Bindung, z.&#160;B. zuverlässige Sitzungen, ermitteln oder durch den Entwurf eines Duplexdienstvertrags, der zwei unidirektionale Vorgänge verwendet: einen unidirektionalen Vertrag vom Client zum Dienst zum Aufrufen von Dienstvorgängen sowie einen anderen unidirektionalen Vertrag zwischen dem Dienst und dem Client, damit der Dienst über einen vom Client implementierten Rückruf Fehler an den Client zurücksenden kann.</span><span class="sxs-lookup"><span data-stu-id="00e18-112">You can detect error conditions by using features of the underlying binding, such as reliable sessions, or by designing a duplex service contract that uses two one-way operations—a one-way contract from the client to the service to call service operation and another one-way contract between the service and the client so that the service can send back faults to the client using a callback that the client implements.</span></span>  
  
 <span data-ttu-id="00e18-113">Wenn Sie einen unidirektionalen Dienstvertrag erstellen möchten, wenden Sie die <xref:System.ServiceModel.OperationContractAttribute>-Klasse auf alle Vorgänge an, und legen Sie die <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A>-Eigenschaft auf `true` fest, wie im folgenden Beispielcode dargestellt.</span><span class="sxs-lookup"><span data-stu-id="00e18-113">To create a one-way service contract, define your service contract, apply the <xref:System.ServiceModel.OperationContractAttribute> class to each operation, and set the <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> property to `true`, as shown in the following sample code.</span></span>  
  
```csharp
[ServiceContract(Namespace="http://Microsoft.ServiceModel.Samples")]  
public interface IOneWayCalculator  
{  
    [OperationContract(IsOneWay=true)]  
    void Add(double n1, double n2);  
    [OperationContract(IsOneWay = true)]  
    void Subtract(double n1, double n2);  
    [OperationContract(IsOneWay = true)]  
    void Multiply(double n1, double n2);  
    [OperationContract(IsOneWay = true)]  
    void Divide(double n1, double n2);  
}  
```  
  
 <span data-ttu-id="00e18-114">Ein umfassendes Beispiel finden [Sie im unidirektionalen Beispiel.](../samples/one-way.md)</span><span class="sxs-lookup"><span data-stu-id="00e18-114">For a complete example, see the [One-Way](../samples/one-way.md) sample.</span></span>  
  
## <a name="clients-blocking-with-one-way-operations"></a><span data-ttu-id="00e18-115">Clients, die mit unidirektionalen Vorgängen blockieren</span><span class="sxs-lookup"><span data-stu-id="00e18-115">Clients Blocking with One-Way Operations</span></span>  

 <span data-ttu-id="00e18-116">Beachten Sie, dass einige unidirektionale Anwendungen beim Schreiben der ausgehenden Daten in die Netzwerkverbindung zurückgeben, dass die Implementierung einer Bindung oder eines Dienstanbieter in verschiedenen Szenarien dazu führen kann, dass ein WCF-Client mit unidirektionalen Vorgängen blockiert wird.</span><span class="sxs-lookup"><span data-stu-id="00e18-116">It is important to realize that while some one-way applications return as soon as the outbound data is written to the network connection, in several scenarios the implementation of a binding or of a service can cause a WCF client to block using one-way operations.</span></span> <span data-ttu-id="00e18-117">In WCF-Client Anwendungen wird das WCF-Client Objekt erst zurückgegeben, wenn die ausgehenden Daten an die Netzwerkverbindung geschrieben wurden.</span><span class="sxs-lookup"><span data-stu-id="00e18-117">In WCF client applications, the WCF client object does not return until the outbound data has been written to the network connection.</span></span> <span data-ttu-id="00e18-118">Dies gilt für alle Nachrichtenaustauschmuster, einschließlich unidirektionaler Vorgänge. Dies bedeutet, dass jedes Problem, das beim Schreiben der Daten an den Transport auftritt, verhindert, dass der Client zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="00e18-118">This is true for all message exchange patterns, including one-way operations; this means that any problem writing the data to the transport prevents the client from returning.</span></span> <span data-ttu-id="00e18-119">Je nach dem aufgetretenen Problem könnte das Ergebnis eine Ausnahme sein oder eine Verzögerung beim Senden der Nachrichten an den Dienst.</span><span class="sxs-lookup"><span data-stu-id="00e18-119">Depending upon the problem, the result could be an exception or a delay in sending messages to the service.</span></span>  
  
 <span data-ttu-id="00e18-120">Wenn der Transport z.&#160;B. den Endpunkt nicht finden kann, wird eine <xref:System.ServiceModel.EndpointNotFoundException?displayProperty=nameWithType>-Ausnahme ohne große Verzögerung ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="00e18-120">For example, if the transport cannot find the endpoint, a <xref:System.ServiceModel.EndpointNotFoundException?displayProperty=nameWithType> exception is thrown without much delay.</span></span> <span data-ttu-id="00e18-121">Es kann jedoch auch vorkommen, dass der Dienst die Daten aus irgendeinem Grund nicht aus der Verbindung lesen kann. Dadurch wird verhindert, dass der Clienttransport-Sendevorgang zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="00e18-121">However, it is also possible that the service is unable to read the data off the wire for some reason, which prevents the client transport send operation from returning.</span></span> <span data-ttu-id="00e18-122">In diesen Fällen wird beim Überschreiten des <xref:System.ServiceModel.Channels.Binding.SendTimeout%2A?displayProperty=nameWithType>-Zeitraums der Clienttransportbindung eine <xref:System.TimeoutException?displayProperty=nameWithType> ausgelöst, jedoch nicht, bis der Timeoutzeitraum überschritten wurde.</span><span class="sxs-lookup"><span data-stu-id="00e18-122">In these cases, if the <xref:System.ServiceModel.Channels.Binding.SendTimeout%2A?displayProperty=nameWithType> period on the client transport binding is exceeded, a <xref:System.TimeoutException?displayProperty=nameWithType> is thrown—but not until the timeout period has been exceeded.</span></span> <span data-ttu-id="00e18-123">Es ist auch möglich, an einen Dienst so viele Nachrichten zu senden, dass diese nach einem bestimmten Punkt nicht vom Dienst verarbeitet werden können.</span><span class="sxs-lookup"><span data-stu-id="00e18-123">It is also possible to fire so many messages at a service that the service cannot process them past a certain point.</span></span> <span data-ttu-id="00e18-124">In diesem Fall blockiert der unidirektionale Client so lange, bis der Dienst die Nachrichten verarbeiten kann oder bis eine Ausnahme ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="00e18-124">In this case, too, the one-way client blocks until the service can process the messages or until an exception is thrown.</span></span>  
  
 <span data-ttu-id="00e18-125">Eine andere Möglichkeit ist die Situation, in der die <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A?displayProperty=nameWithType>-Diensteigenschaft auf <xref:System.ServiceModel.ConcurrencyMode.Single> festgelegt ist und die Bindung Sitzungen verwendet.</span><span class="sxs-lookup"><span data-stu-id="00e18-125">Another variation is the situation in which the service <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A?displayProperty=nameWithType> property is set to <xref:System.ServiceModel.ConcurrencyMode.Single> and the binding uses sessions.</span></span> <span data-ttu-id="00e18-126">In diesem Fall erzwingt der Verteiler die Sortierung der eingehenden Nachrichten (eine Anforderung für Sitzungen), wodurch verhindert wird, dass die nachfolgenden Nachrichten aus dem Netzwerk gelesen werden, bis der Dienst die vorausgehende Nachricht für diese Sitzung verarbeitet hat.</span><span class="sxs-lookup"><span data-stu-id="00e18-126">In this case, the dispatcher enforces ordering on the incoming messages (a requirement of sessions), which prevents subsequent messages from being read off the network until the service has processed the preceding message for that session.</span></span> <span data-ttu-id="00e18-127">Der Client blockiert wiederum, aber ob eine Ausnahme stattfindet, richtet sich danach, ob die wartenden Daten vor den Timeouteinstellungen auf dem Client verarbeitet werden können.</span><span class="sxs-lookup"><span data-stu-id="00e18-127">Again, the client blocks, but whether an exception occurs depends upon whether the service is able to process the waiting data prior to the timeout settings on the client.</span></span>  
  
 <span data-ttu-id="00e18-128">Sie können dieses Problem verringern, indem Sie einen Puffer zwischen dem Clientobjekt und dem Sendevorgang des Clienttransports einfügen.</span><span class="sxs-lookup"><span data-stu-id="00e18-128">You can mitigate some of this problem by inserting a buffer between the client object and the client transport's send operation.</span></span> <span data-ttu-id="00e18-129">Wenn Sie z.&#160;B. asynchrone Anrufe oder eine Nachrichtenwarteschlange im Speicher verwenden, wird das Clientobjekt schnell zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="00e18-129">For example, using asynchronous calls or using an in-memory message queue can enable the client object to return quickly.</span></span> <span data-ttu-id="00e18-130">Beide Methoden erhöhen eventuell die Funktionalität, aber die Größe des Threadpools und der Nachrichtenwarteschlange erzwingen Beschränkungen.</span><span class="sxs-lookup"><span data-stu-id="00e18-130">Both approaches may increase functionality, but the size of the thread pool and the message queue still enforce limits.</span></span>  
  
 <span data-ttu-id="00e18-131">Es wird stattdessen empfohlen, die verschiedenen Steuerelemente des Diensts sowie des Clients zu prüfen, um eine optimale Konfiguration auf beiden Seiten zu gewährleisten.</span><span class="sxs-lookup"><span data-stu-id="00e18-131">It is recommended, instead, that you examine the various controls on the service as well as on the client, and then test your application scenarios to determine the best configuration on either side.</span></span> <span data-ttu-id="00e18-132">Wenn z.&#160;B. die Verwendung von Sitzungen die Verarbeitung von Nachrichten in Ihrem Dienst blockiert, können Sie die <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType>-Eigenschaft auf <xref:System.ServiceModel.InstanceContextMode.PerCall> festlegen, damit die Nachrichten von einer anderen Dienstinstanz verarbeitet werden können. Außerdem können Sie den <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> auf <xref:System.ServiceModel.ConcurrencyMode.Multiple> festlegen, um das Senden von Nachrichten von mehr als einem Thread gleichzeitig zu erlauben.</span><span class="sxs-lookup"><span data-stu-id="00e18-132">For example, if the use of sessions is blocking the processing of messages on your service, you can set the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.InstanceContextMode.PerCall> so that each message can be processed by a different service instance, and set the <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> to <xref:System.ServiceModel.ConcurrencyMode.Multiple> in order to allow more than one thread to dispatch messages at a time.</span></span> <span data-ttu-id="00e18-133">Eine andere Methode besteht darin, die Lesekontingente des Diensts und der Clientbindungen zu erhöhen.</span><span class="sxs-lookup"><span data-stu-id="00e18-133">Another approach is to increase the read quotas of the service and client bindings.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="00e18-134">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="00e18-134">See also</span></span>

- [<span data-ttu-id="00e18-135">Unidirektional</span><span class="sxs-lookup"><span data-stu-id="00e18-135">One-Way</span></span>](../samples/one-way.md)
