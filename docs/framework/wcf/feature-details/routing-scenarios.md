---
title: Routingszenarien
ms.date: 03/30/2017
helpviewer_keywords:
- routing [WCF], scenarios
ms.assetid: ec22f308-665a-413e-9f94-7267cb665dab
ms.openlocfilehash: b84cd4ba49e9deaf4ffc0e901716efc56059d60f
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/26/2020
ms.locfileid: "96288526"
---
# <a name="routing-scenarios"></a><span data-ttu-id="ac0a7-102">Routingszenarien</span><span class="sxs-lookup"><span data-stu-id="ac0a7-102">Routing Scenarios</span></span>

<span data-ttu-id="ac0a7-103">Der Routingdienst lässt sich zwar stark anpassen, aber es kann aufwändig sein, beim Erstellen einer völlig neuen Konfiguration eine effiziente Routinglogik zu entwerfen.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-103">While the Routing Service is highly customizable, it can be a challenge to design efficient routing logic when creating a new configuration from scratch.</span></span>  <span data-ttu-id="ac0a7-104">Es gibt jedoch einige allgemeine Szenarios, auf denen die meisten Routingdienstkonfigurationen basieren.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-104">However, there are several common scenarios that most Routing Service configurations follow.</span></span> <span data-ttu-id="ac0a7-105">Auch wenn diese Szenarios ggf. nicht genau mit Ihrer jeweiligen Konfiguration übereinstimmen, trägt es zum Verständnis des Routingdiensts bei, wenn Sie wissen, wie dieser in bestimmten Szenarios konfiguriert werden kann.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-105">While these scenarios may not apply directly to your specific configuration, understanding how the Routing Service can be configured to handle these scenarios will aid you in understanding the Routing Service.</span></span>  
  
## <a name="common-scenarios"></a><span data-ttu-id="ac0a7-106">Häufige Szenarios</span><span class="sxs-lookup"><span data-stu-id="ac0a7-106">Common Scenarios</span></span>  

 <span data-ttu-id="ac0a7-107">Die grundlegendste Verwendung des Routingdiensts ist die Aggregation mehrerer Zielendpunkte zum Reduzieren der Anzahl von Endpunkten, die für die Clientanwendungen verfügbar gemacht werden, und die anschließende Verwendung von Nachrichtenfiltern zum Weiterleiten der einzelnen Nachrichten an das richtige Ziel.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-107">The most basic use of the Routing Service is to aggregate multiple destination endpoints to reduce the number of endpoints exposed to the client applications, and then use message filters to route each message to the correct destination.</span></span> <span data-ttu-id="ac0a7-108">Nachrichten können basierend auf logischen oder physischen Verarbeitungsanforderungen (z. B. ein Nachrichtentyp, der von einem bestimmten Dienst verarbeitet werden muss) oder basierend auf beliebigen Geschäftsanforderungen (z. B. Bereitstellung der Verarbeitung von Nachrichten über eine bestimmte Quelle) verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-108">Messages may be routed based on logical or physical processing requirements, such as a message type that must be processed by a specific service, or based on arbitrary business needs such as providing priority processing of messages from a specific source.</span></span> <span data-ttu-id="ac0a7-109">In der nachstehenden Tabelle sind einige allgemeine Szenarios und die Umstände aufgeführt, unter denen diese auftreten:</span><span class="sxs-lookup"><span data-stu-id="ac0a7-109">The following table lists some of the common scenarios and when they are encountered:</span></span>  
  
|<span data-ttu-id="ac0a7-110">Szenario</span><span class="sxs-lookup"><span data-stu-id="ac0a7-110">Scenario</span></span>|<span data-ttu-id="ac0a7-111">Wenn folgende Bedingungen vorliegen</span><span class="sxs-lookup"><span data-stu-id="ac0a7-111">Use when</span></span>|  
|--------------|--------------|  
|<span data-ttu-id="ac0a7-112">Dienstversionsverwaltung</span><span class="sxs-lookup"><span data-stu-id="ac0a7-112">Service versioning</span></span>|<span data-ttu-id="ac0a7-113">Sie müssen mehrere Versionen eines Diensts unterstützen oder in Zukunft ggf. einen aktualisierten Dienst bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-113">You need to support multiple versions of a service or may deploy an updated service in the future</span></span>|  
|<span data-ttu-id="ac0a7-114">Dienstdatenpartitionierung</span><span class="sxs-lookup"><span data-stu-id="ac0a7-114">Service data partitioning</span></span>|<span data-ttu-id="ac0a7-115">Sie müssen einen Dienst über mehrere Hosts hinweg partitionieren.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-115">You must partition a service across multiple hosts</span></span>|  
|<span data-ttu-id="ac0a7-116">Dynamisches Update</span><span class="sxs-lookup"><span data-stu-id="ac0a7-116">Dynamic update</span></span>|<span data-ttu-id="ac0a7-117">Sie müssen die Routinglogik zur Laufzeit aufgrund von sich ändernden Dienstbereitstellungen dynamisch neu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-117">You must dynamically reconfigure routing logic at runtime to handle changing service deployments</span></span>|  
|<span data-ttu-id="ac0a7-118">Multicast</span><span class="sxs-lookup"><span data-stu-id="ac0a7-118">Multicast</span></span>|<span data-ttu-id="ac0a7-119">Sie müssen eine Nachricht an mehrere Endpunkte senden.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-119">You must send one message to multiple endpoints</span></span>|  
|<span data-ttu-id="ac0a7-120">Protokollüberbrückung</span><span class="sxs-lookup"><span data-stu-id="ac0a7-120">Protocol bridging</span></span>|<span data-ttu-id="ac0a7-121">Sie empfangen Nachrichten über ein Transportprotokoll, und der Zielendpunkt verwendet ein anderes Protokoll.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-121">You receive messages over one transport protocol, and the destination endpoint uses a different protocol</span></span>|  
|<span data-ttu-id="ac0a7-122">Fehlerbehandlung</span><span class="sxs-lookup"><span data-stu-id="ac0a7-122">Error Handling</span></span>|<span data-ttu-id="ac0a7-123">Sie müssen für die Widerstandsfähigkeit gegen Netzwerkausfälle und Kommunikationsfehler sorgen.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-123">You need to provide resilience to network outages and communication failures</span></span>|  
  
> [!NOTE]
> <span data-ttu-id="ac0a7-124">Viele der beschriebenen Szenarios gelten nur für bestimmte Geschäftsanforderungen oder Verarbeitungsanforderungen, aber die Planung der Unterstützung dynamischer Updates und die Verwendung der Fehlerbehandlung zählen zu den bewährten Vorgehensweise. Sie können damit die Routinglogik zur Laufzeit und die Wiederherstellung bei vorübergehenden Netzwerkfehlern und Kommunikationsfehlern sicherstellen.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-124">While many of the scenarios presented are specific to certain business needs or processing requirements, planning to support dynamic updates and utilizing error handling can often be considered as best practices as they allow you to modify routing logic at runtime and recover from transient network and communication failures.</span></span>  
  
### <a name="service-versioning"></a><span data-ttu-id="ac0a7-125">Dienstversionsverwaltung</span><span class="sxs-lookup"><span data-stu-id="ac0a7-125">Service Versioning</span></span>  

 <span data-ttu-id="ac0a7-126">Wenn Sie eine neue Version eines Diensts einführen, müssen Sie die ältere Version häufig noch so lange weiter pflegen, bis alle Clients auf den neuen Dienst umgestellt wurden.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-126">When introducing a new version of a service, you must often maintain the previous version until all clients have transitioned to the new service.</span></span> <span data-ttu-id="ac0a7-127">Dies ist besonders wichtig, wenn es sich bei dem Dienst um einen Prozess mit langer Laufzeit handelt, der Tage, Wochen oder sogar Monate dauert.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-127">This is especially critical if the service is a long-running process that takes days, weeks, or even months to complete.</span></span> <span data-ttu-id="ac0a7-128">Normalerweise erfordert dies die Implementierung einer neuen Endpunktadresse für den neuen Dienst, während der ursprüngliche Endpunkt für den vorherigen Dienst weiter verwaltet wird.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-128">Usually this requires implementing a new endpoint address for the new service while maintaining the original endpoint for the previous version.</span></span>  
  
 <span data-ttu-id="ac0a7-129">Mithilfe des Routingdiensts können Sie einen Endpunkt verfügbar machen, um Nachrichten von Clientanwendungen zu empfangen und dann jede Nachricht anhand ihres Inhalts an die richtige Endversion weiterzuleiten.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-129">By using the Routing Service, you can expose one endpoint to receive messages from client applications and then route each message to the correct service version based on the message content.</span></span> <span data-ttu-id="ac0a7-130">Die Basisimplementierung erfordert das Hinzufügen eines benutzerdefinierten Headers zur Nachricht, der die Version des Diensts angibt, von der die Nachricht verarbeitet werden soll.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-130">The most basic implementation involves adding a custom header to the message that indicates the version of the service that the message is to be processed by.</span></span> <span data-ttu-id="ac0a7-131">Der Routingdienst kann den XPathMessageFilter verwenden, um jede Nachricht auf das Vorhandensein des benutzerdefinierten Headers zu überprüfen und die Nachricht an den entsprechenden Zielendpunkt weiterzuleiten.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-131">The Routing Service can use the XPathMessageFilter to inspect each message for the presence of the custom header and route the message to the appropriate destination endpoint.</span></span>  
  
 <span data-ttu-id="ac0a7-132">Die Schritte zum Erstellen einer Dienst Versionsverwaltung finden Sie unter Vorgehens [Weise: Dienst Versionsverwaltung](how-to-service-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="ac0a7-132">For the steps used to create a service versioning configuration, see [How To: Service Versioning](how-to-service-versioning.md).</span></span>
  
### <a name="service-data-partitioning"></a><span data-ttu-id="ac0a7-133">Dienstdatenpartitionierung</span><span class="sxs-lookup"><span data-stu-id="ac0a7-133">Service Data Partitioning</span></span>  

 <span data-ttu-id="ac0a7-134">Beim Entwerfen einer verteilten Umgebung ist es häufig ratsam, die Verarbeitungslast auf mehrere Computer zu verteilen, um Hochverfügbarkeit sicherzustellen, die Verarbeitungslast für einzelne Computer zu verringern oder für eine bestimmte Teilmenge von Nachrichten dedizierte Ressourcen bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-134">When designing a distributed environment, it is often desirable to spread processing load across multiple computers in order to provide high availability, decrease processing load on individual computers, or to provide dedicated resources for a specific subset of messages.</span></span> <span data-ttu-id="ac0a7-135">Der Routingdienst ist zwar kein Ersatz für eine dedizierte Lösung für den Lastenausgleich, aber Sie können die Funktion für das inhaltsbasierte Routing verwenden, um Nachrichten, die einander ansonsten ähnlich sind, an bestimmte Ziele weiterzuleiten.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-135">While the Routing Service does not replace a dedicated load balancing solution, its ability to perform content based routing can be used to route otherwise similar messages to specific destinations.</span></span> <span data-ttu-id="ac0a7-136">Es kann z. B. sein, dass Sie Nachrichten eines bestimmten Clients gesondert von den Nachrichten verarbeiten müssen, die Sie von anderen Clients empfangen.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-136">For example, you may have a requirement to process messages from a specific client separately from messages received from other clients.</span></span>  
  
 <span data-ttu-id="ac0a7-137">Die Schritte zum Erstellen einer Konfiguration für die Dienst Daten Partitionierung finden Sie unter Gewusst [wie: Dienst Daten Partitionierung](how-to-service-data-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="ac0a7-137">For the steps used to create a service data partitioning configuration, see [How To: Service Data Partitioning](how-to-service-data-partitioning.md).</span></span>  
  
### <a name="dynamic-routing"></a><span data-ttu-id="ac0a7-138">Dynamisches Routing</span><span class="sxs-lookup"><span data-stu-id="ac0a7-138">Dynamic Routing</span></span>  

 <span data-ttu-id="ac0a7-139">Häufig ist es ratsam, die Routingkonfiguration zu ändern, um auf sich ändernde Geschäftsanforderungen zu reagieren. Dies kann das Hinzufügen einer Route zu einer neueren Version eines Diensts, das Ändern von Routingkriterien oder das Ändern des Zielendpunkts einer bestimmten Nachricht sein, an den der Filter Nachrichten weiterleitet.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-139">Often it is desirable to modify the routing configuration to satisfy changing business needs, such as adding a route to a newer version of a service, changing routing criteria, or changing the destination endpoint a specific message that the filter routes to.</span></span> <span data-ttu-id="ac0a7-140">Mit dem Routingdienst können Sie dies mithilfe von <xref:System.ServiceModel.Routing.RoutingExtension> durchführen. Sie können damit zur Laufzeit ein neues RoutingConfiguration-Objekt bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-140">The Routing Service allows you to do this through the <xref:System.ServiceModel.Routing.RoutingExtension>, which allows you to provide a new RoutingConfiguration during run time.</span></span> <span data-ttu-id="ac0a7-141">Die neue Konfiguration ist sofort wirksam. Sie gilt jedoch nur für die neuen Sitzungen, die vom Routingdienst verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-141">The new configuration takes effect immediately, but only affects any new sessions processed by the Routing Service.</span></span>  
  
 <span data-ttu-id="ac0a7-142">Die Schritte, die zum Implementieren des dynamischen Routings verwendet werden, finden Sie unter Gewusst [wie: Dynamisches Update](how-to-dynamic-update.md).</span><span class="sxs-lookup"><span data-stu-id="ac0a7-142">For the steps used to implement dynamic routing, see [How To: Dynamic Update](how-to-dynamic-update.md).</span></span>
  
### <a name="multicast"></a><span data-ttu-id="ac0a7-143">Multicast</span><span class="sxs-lookup"><span data-stu-id="ac0a7-143">Multicast</span></span>  

 <span data-ttu-id="ac0a7-144">Beim Weiterleiten von Nachrichten werden Nachrichten normalerweise an einen bestimmten Zielendpunkt weitergeleitet.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-144">When routing messages, usually you routing each message to one specific destination endpoint.</span></span>  <span data-ttu-id="ac0a7-145">Es kann jedoch sein, dass Sie gelegentlich eine Kopie der Nachricht an mehrere Zielendpunkte weiterleiten müssen.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-145">However, you may occasionally need to route a copy of the message to multiple destination endpoints.</span></span> <span data-ttu-id="ac0a7-146">Um das Routing per Multicast durchzuführen, müssen die folgenden Bedingungen erfüllt sein:</span><span class="sxs-lookup"><span data-stu-id="ac0a7-146">To perform multicast routing, the following conditions must be true:</span></span>  
  
- <span data-ttu-id="ac0a7-147">Die Kanalform darf nicht vom Typ "Anforderung-Antwort" sein (unidirektional oder duplex ist jedoch möglich), weil dabei vorgegeben ist, dass die Clientanwendung als Antwort auf die Anforderung nur eine Antwort empfangen kann.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-147">The channel shape must not be request-reply (though it may be one-way or duplex,) because request-reply mandates that only one reply can be received by the client application in response to the request.</span></span>  
  
- <span data-ttu-id="ac0a7-148">Mehrere Filter müssen beim Auswerten der Nachricht **true** zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-148">Multiple filters must return **true** when evaluating the message.</span></span>  
  
 <span data-ttu-id="ac0a7-149">Wenn diese Bedingungen erfüllt sind, empfängt jeder Zielendpunkt, der einem Filter mit der Rückgabe "true" zugeordnet ist, eine Kopie der Nachricht.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-149">If these conditions are met, each destination endpoint that is associated with a filter that returns true will receive a copy of the message.</span></span>  
  
### <a name="protocol-bridging"></a><span data-ttu-id="ac0a7-150">Protokollüberbrückung</span><span class="sxs-lookup"><span data-stu-id="ac0a7-150">Protocol Bridging</span></span>  

 <span data-ttu-id="ac0a7-151">Beim Weiterleiten von Nachrichten zwischen unterschiedlichen SOAP-Protokollen verwendet der Routingdienst WCF-APIs zum Konvertieren der Nachricht von einem Protokoll zum anderen.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-151">When routing messages between dissimilar SOAP protocols, the Routing Service uses WCF APIs to convert the message from one protocol to the other.</span></span> <span data-ttu-id="ac0a7-152">Dies tritt automatisch ein, wenn die vom Routingdienst verfügbar gemachten Dienstendpunkte ein anderes Protokoll verwenden als die Clientendpunkte, an die Nachrichten weitergeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-152">This occurs automatically when the service endpoint(s) exposed by the Routing Service use a different protocol than the client endpoint(s) that messages are routed to.</span></span> <span data-ttu-id="ac0a7-153">Es ist möglich, dieses Verhalten zu deaktivieren, falls keine standardmäßigen Protokolle verwendet sind. Sie müssen dann jedoch einen eigenen Überbrückungscode bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-153">It is possible to disable this behavior if the protocols in use are not standard; however, you must then provide your own bridging code.</span></span>
  
### <a name="error-handling"></a><span data-ttu-id="ac0a7-154">Fehlerbehandlung</span><span class="sxs-lookup"><span data-stu-id="ac0a7-154">Error Handling</span></span>  

 <span data-ttu-id="ac0a7-155">In einer verteilten Umgebung ist es nicht ungewöhnlich, dass vorübergehende Netzwerkfehler oder Kommunikationsfehler auftreten.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-155">In a distributed environment, it is not uncommon to encounter transient network or communication failures.</span></span> <span data-ttu-id="ac0a7-156">Ohne einen Vermittlerdienst wie den Routingdienst ist die Clientanwendung für die Behandlung dieser Art von Fehlern zuständig.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-156">Without an intermediary service such as the Routing Service, the burden of handling such failures falls on the client application.</span></span> <span data-ttu-id="ac0a7-157">Falls die Clientanwendung keine spezielle Logik für wiederholte Versuche bei Netzwerk- oder Kommunikationsfehlern aufweist und keine alternativen Zielorte kennt, kann es zu Szenarios kommen, in denen eine Nachricht mehrere Male gesendet werden muss, bevor sie vom Zieldienst erfolgreich verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-157">If the client application does not include specific logic to retry in the event of network or communication failures and knowledge of alternate locations, the user may encounter scenarios where a message must be submitted multiple times before it is successfully processed by the destination service.</span></span> <span data-ttu-id="ac0a7-158">Dies kann bei Kunden zu Unzufriedenheit mit der Anwendung führen, weil diese ggf. als unzuverlässig wahrgenommen wird.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-158">This can lead to customer dissatisfaction with the application, as it may be perceived as unreliable.</span></span>  
  
 <span data-ttu-id="ac0a7-159">Der Routingdienst versucht, dieses Szenario zu beheben, indem er robuste Fehlerbehandlungsfunktionen für Nachrichten bereitstellt, für die Netzwerk- oder Kommunikationsfehler auftreten.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-159">The Routing Service attempts to remedy this scenario by providing robust error handling capabilities for messages that encounter network or communication-related failures.</span></span> <span data-ttu-id="ac0a7-160">Wenn Sie eine Liste möglicher Zielendpunkte erstellen und diese Liste jedem Nachrichtenfilter zuordnen, beseitigen Sie die Fehlerquelle (Single Point of Failure), deren Ursache die Verwendung von nur einem möglichen Ziel ist.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-160">By creating a list of possible destination endpoints and associating this list with each message filter, you remove the single point of failure incurred by having only one possible destination.</span></span> <span data-ttu-id="ac0a7-161">Bei einem Fehler versucht der Routingdienst, die Nachricht an den nächsten Endpunkt in der Liste zu übermitteln, bis die Nachricht übermittelt wurde, ein anderer Fehler als ein Kommunikationsfehler aufgetreten ist oder alle Endpunkte abgearbeitet wurden.</span><span class="sxs-lookup"><span data-stu-id="ac0a7-161">In the event of a failure, the Routing Service will attempt to deliver the message to the next endpoint in the list until the message has been delivered, a non-communication failure occurs, or all endpoints have been exhausted.</span></span>  
  
 <span data-ttu-id="ac0a7-162">Die Schritte, die zum Konfigurieren der Fehlerbehandlung verwendet werden, finden Sie unter Vorgehens [Weise: Fehlerbehandlung](how-to-error-handling.md).</span><span class="sxs-lookup"><span data-stu-id="ac0a7-162">For the steps used to configure error handling, see [How To: Error Handling](how-to-error-handling.md).</span></span>
  
### <a name="in-this-section"></a><span data-ttu-id="ac0a7-163">In diesem Abschnitt</span><span class="sxs-lookup"><span data-stu-id="ac0a7-163">In This Section</span></span>  

 [<span data-ttu-id="ac0a7-164">Vorgehensweise: Dienstversionsverwaltung</span><span class="sxs-lookup"><span data-stu-id="ac0a7-164">How To: Service Versioning</span></span>](how-to-service-versioning.md)  
  
 [<span data-ttu-id="ac0a7-165">Vorgehensweise: Dienstdatenpartitionierung</span><span class="sxs-lookup"><span data-stu-id="ac0a7-165">How To: Service Data Partitioning</span></span>](how-to-service-data-partitioning.md)  
  
 [<span data-ttu-id="ac0a7-166">Vorgehensweise: Dynamisches Update</span><span class="sxs-lookup"><span data-stu-id="ac0a7-166">How To: Dynamic Update</span></span>](how-to-dynamic-update.md)  
  
 [<span data-ttu-id="ac0a7-167">Vorgehensweise: Fehlerbehandlung</span><span class="sxs-lookup"><span data-stu-id="ac0a7-167">How To: Error Handling</span></span>](how-to-error-handling.md)  
  
## <a name="see-also"></a><span data-ttu-id="ac0a7-168">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="ac0a7-168">See also</span></span>

- [<span data-ttu-id="ac0a7-169">Einführung in das Routing</span><span class="sxs-lookup"><span data-stu-id="ac0a7-169">Routing Introduction</span></span>](routing-introduction.md)
