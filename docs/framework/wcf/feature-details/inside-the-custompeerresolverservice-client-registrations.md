---
title: 'Einblicke in den CustomPeerResolverService: Clientregistrierungen'
ms.date: 03/30/2017
ms.assetid: 40236953-a916-4236-84a6-928859e1331a
ms.openlocfilehash: ce694408edbb40309d1750be49b8414ebcbce3f7
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/09/2020
ms.locfileid: "84596837"
---
# <a name="inside-the-custompeerresolverservice-client-registrations"></a><span data-ttu-id="d7a7d-102">Einblicke in den CustomPeerResolverService: Clientregistrierungen</span><span class="sxs-lookup"><span data-stu-id="d7a7d-102">Inside the CustomPeerResolverService: Client Registrations</span></span>
<span data-ttu-id="d7a7d-103">Jeder Knoten im Netz veröffentlicht seine Endpunktinformationen für den Resolverdienst durch die `Register`-Funktion.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-103">Each node in the mesh publishes its endpoint information to the resolver service through the `Register` function.</span></span> <span data-ttu-id="d7a7d-104">Der Resolverdienst speichert diese Informationen als Registrierungsdatensatz.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-104">The resolver service stores this information as a registration record.</span></span> <span data-ttu-id="d7a7d-105">Dieser Datensatz enthält einen eindeutigen Bezeichner (RegistrationID) sowie Endpunktinformationen (PeerNodeAddress) für den Knoten.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-105">This record contains a unique identifier (RegistrationID) and endpoint information (PeerNodeAddress) for the node.</span></span>  
  
## <a name="stale-records-and-expiration-time"></a><span data-ttu-id="d7a7d-106">Veraltete Datensätze und Ablaufzeit</span><span class="sxs-lookup"><span data-stu-id="d7a7d-106">Stale Records and Expiration Time</span></span>  
 <span data-ttu-id="d7a7d-107">Idealerweise ruft ein Knoten beim Verlassen des Netzes die `Unregister`- Funktion auf, wodurch der Registrierungseintrag vom Resolverdienst entfernt wird.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-107">Ideally, when a node leaves the mesh, it will call the `Unregister` function, which causes the resolver service to remove the registration entry.</span></span> <span data-ttu-id="d7a7d-108">Manchmal werden Knoten jedoch geschlossen oder nicht verfügbar, bevor `Unregister` aufgerufen wurde. Dadurch bleibt ein veralteter Registrierungsdatensatz zurück.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-108">Sometimes, nodes shut down or become inaccessible before calling `Unregister`, leaving behind a stale registration record.</span></span>  
  
 <span data-ttu-id="d7a7d-109">Veraltete Datensätze im Resolverdienst können zu fehlerhaften Verbindungen führen.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-109">Stale records in your resolver service can cause failed connections.</span></span> <span data-ttu-id="d7a7d-110">Erhält ein Knoten beim Versuch, eine Verbindung mit einem Netz herzustellen, veraltete Verbindungsinformationen vom Resolverdienst, dauert es ggf. länger, bis er eine erfolgreiche Verknüpfung zu dem Netz herstellen kann.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-110">If a node trying to connect to a mesh receives stale connection information from the resolver service, it can take longer to successfully join the mesh.</span></span> <span data-ttu-id="d7a7d-111">Veraltete Datensätze belegen zudem Speicherplatz.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-111">Stale records also take up memory.</span></span> <span data-ttu-id="d7a7d-112">Ohne effizienten Bereinigungsprozess kann ein Überlauf des Zwischenspeichers auftreten, in dem die Registrierungen gespeichert werden, was den Absturz des Resolverdiensts zur Folge haben kann.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-112">Without an efficient clean up process, the cache used to store registrations could eventually overflow and crash the resolver service.</span></span>  
  
 <span data-ttu-id="d7a7d-113">Der <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> versieht jeden Datensatz mit einer Ablaufzeit (DateTime) und speichert diese Information zusammen mit dem Datensatz.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-113">The <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> marks each record with an expiration time (DateTime), and stores that information as part of the record.</span></span> <span data-ttu-id="d7a7d-114">Anhand der Ablaufzeit werden veraltete Datensätze durch den Dienst erkannt.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-114">The service uses the expiration time to identify stale records.</span></span> <span data-ttu-id="d7a7d-115">Eine solche Vorgehensweise empfiehlt sich auch bei benutzerdefinierten Implementierungen.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-115">Custom implementations should do something similar.</span></span>  
  
## <a name="refreshinterval-and-cleanupinterval"></a><span data-ttu-id="d7a7d-116">RefreshInterval und CleanupInterval</span><span class="sxs-lookup"><span data-stu-id="d7a7d-116">RefreshInterval and CleanupInterval</span></span>  
 <span data-ttu-id="d7a7d-117">Mit der `RefreshInterval`-Eigenschaft des <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> wird die Gültigkeitsdauer von Registrierungsdatensätzen in der Registrierungssuchtabelle des Diensts definiert.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-117">The `RefreshInterval` property of the <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> defines how long registration records remain valid in the service's registration lookup table.</span></span> <span data-ttu-id="d7a7d-118">Ist die für diese Eigenschaft angegebene Zeit für einen bestimmten Datensatz abgelaufen, ist dieser Datensatz veraltet und wird zum Löschen markiert.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-118">When the amount of time supplied to this property has passed for a given record, that record becomes stale and is marked for deletion.</span></span>  
  
 <span data-ttu-id="d7a7d-119">Mithilfe der `CleanupInterval`-Eigenschaft des <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> wird dem Dienst mitgeteilt, wie häufig veraltete Registrierungsdatensätze gesucht und gelöscht werden sollen.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-119">The `CleanupInterval` property of the <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> tells the service how often to search for and delete stale registration records.</span></span> <span data-ttu-id="d7a7d-120">Das `CleanupInterval` sollte auf eine Zeit festgelegt werden, die mindestens dem für den Dienst festgelegten `RefreshInterval` entspricht.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-120">The `CleanupInterval` should be set to a time greater than or equal to the `RefreshInterval` set on the service.</span></span>  
  
 <span data-ttu-id="d7a7d-121">Wenn Sie einen eigenen Resolverdienst implementieren möchten, müssen Sie eine Wartungsfunktion zum Entfernen veralteter Registrierungsdatensätze schreiben.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-121">To implement your own resolver service, you need to write a maintenance function to remove stale registration records.</span></span> <span data-ttu-id="d7a7d-122">Dafür stehen verschiedene Möglichkeiten zur Verfügung:</span><span class="sxs-lookup"><span data-stu-id="d7a7d-122">There are several ways to do this:</span></span>  
  
- <span data-ttu-id="d7a7d-123">**Regelmäßige Wartung**: Legen Sie fest, dass ein Timer regelmäßig deaktiviert wird, und durchlaufen Sie den Datenspeicher, um alte Einträge zu löschen.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-123">**Periodic maintenance**: Set a timer to go off periodically, and go through your data store to delete old records.</span></span> <span data-ttu-id="d7a7d-124">Dieser Ansatz wird vom <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> verwendet.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-124">The <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> uses this approach.</span></span>  
  
- <span data-ttu-id="d7a7d-125">**Passives löschen**: anstatt regelmäßig in regelmäßigen Abständen nach veralteten Datensätzen zu suchen, können Sie veraltete Datensätze erkennen und löschen, wenn Ihr Dienst bereits eine andere Funktion ausführt.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-125">**Passive deletion**: Instead of actively searching for stale records at regular intervals, you can identify and delete stale records when your service is already performing another function.</span></span> <span data-ttu-id="d7a7d-126">Dadurch erhöht sich zwar möglicherweise die Antwortzeit für Anforderungen der Resolverclients, andererseits wird in diesem Fall kein Timer benötigt. Darüber hinaus ist diese Methode möglicherweise effizienter, wenn voraussichtlich nur wenige Knoten das Netz ohne Aufruf von `Unregister` verlassen.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-126">This may potentially slow down response time to requests from the resolver clients, but it eliminates the need for a timer, and may be more efficient if few nodes are expected to leave without calling `Unregister`.</span></span>  
  
## <a name="registrationlifetime-and-refresh"></a><span data-ttu-id="d7a7d-127">RegistrationLifetime und Refresh</span><span class="sxs-lookup"><span data-stu-id="d7a7d-127">RegistrationLifetime and Refresh</span></span>  
 <span data-ttu-id="d7a7d-128">Wenn sich ein Knoten bei einem Resolverdienst registriert, erhält er vom Dienst ein <xref:System.ServiceModel.PeerResolvers.RegisterResponseInfo>-Objekt.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-128">When a node registers with a resolver service, it receives a <xref:System.ServiceModel.PeerResolvers.RegisterResponseInfo> object from the service.</span></span> <span data-ttu-id="d7a7d-129">Dieses Objekt besitzt eine `RegistrationLifetime`-Eigenschaft, mit der dem Knoten die verbleibende Zeit bis zum Ablauf der Registrierung und damit bis zur Entfernung durch den Resolverdienst angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-129">This object has a `RegistrationLifetime` property which indicates to the node how much time it has before the registration expires and is removed by the resolver service.</span></span> <span data-ttu-id="d7a7d-130">Beispiel: Beträgt die `RegistrationLifetime` zwei Minuten, muss durch den Knoten in weniger als zwei Minuten ein Aufruf von `Refresh` erfolgen, damit der Datensatz nicht als veraltet gilt und gelöscht wird.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-130">If, for example, the `RegistrationLifetime` is 2 minutes, the node needs to call `Refresh` in under 2 minutes to ensure the record stays fresh and is not deleted.</span></span> <span data-ttu-id="d7a7d-131">Erhält der Resolverdienst eine `Refresh`-Anforderung, sucht er den Datensatz und setzt die Ablaufzeit zurück.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-131">When the resolver service receives a `Refresh` request, it looks up the record and resets the expiration time.</span></span> <span data-ttu-id="d7a7d-132">Durch die Refresh-Anforderung wird ein <xref:System.ServiceModel.PeerResolvers.RefreshResponseInfo>-Objekt mit einer `RegistrationLifetime`-Eigenschaft zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="d7a7d-132">Refresh returns a <xref:System.ServiceModel.PeerResolvers.RefreshResponseInfo> object with a `RegistrationLifetime` property.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d7a7d-133">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="d7a7d-133">See also</span></span>

- [<span data-ttu-id="d7a7d-134">Peerresolver</span><span class="sxs-lookup"><span data-stu-id="d7a7d-134">Peer Resolvers</span></span>](peer-resolvers.md)
