---
title: Nachrichtenübertragung per Stream
ms.date: 03/30/2017
ms.assetid: 72a47a51-e5e7-4b76-b24a-299d51e0ae5a
ms.openlocfilehash: 4b90e5bf15f5cb1c4684a3ba224371f6cc232034
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/26/2020
ms.locfileid: "96246328"
---
# <a name="streaming-message-transfer"></a><span data-ttu-id="c2374-102">Nachrichtenübertragung per Stream</span><span class="sxs-lookup"><span data-stu-id="c2374-102">Streaming Message Transfer</span></span>

<span data-ttu-id="c2374-103">Windows Communication Foundation (WCF)-Transporte unterstützen zwei Modi zum Übertragen von Nachrichten:</span><span class="sxs-lookup"><span data-stu-id="c2374-103">Windows Communication Foundation (WCF) transports support two modes for transferring messages:</span></span>  
  
- <span data-ttu-id="c2374-104">Bei gepufferten Übertragungen wird die gesamte Nachricht in einem Puffer zwischengespeichert, bis die Übertragung abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="c2374-104">Buffered transfers hold the entire message in a memory buffer until the transfer is complete.</span></span> <span data-ttu-id="c2374-105">Gepufferte Nachrichten müssen vollständig übertragen worden sein, bevor sie vom Empfänger gelesen werden können.</span><span class="sxs-lookup"><span data-stu-id="c2374-105">A buffered message must be completely delivered before a receiver can read it.</span></span>  
  
- <span data-ttu-id="c2374-106">Bei Streamingübertragungen wird die Nachricht als Stream verfügbar gemacht.</span><span class="sxs-lookup"><span data-stu-id="c2374-106">Streamed transfers expose the message as a stream.</span></span> <span data-ttu-id="c2374-107">Die Nachricht kann vom Empfänger verarbeitet werden, bevor sie vollständig empfangen wurde.</span><span class="sxs-lookup"><span data-stu-id="c2374-107">The receiver starts processing the message before it is completely delivered.</span></span>  
  
- <span data-ttu-id="c2374-108">Streamübertragungen können die Skalierbarkeit eines Diensts verbessern, indem sie große Speicherpuffer überflüssig machen.</span><span class="sxs-lookup"><span data-stu-id="c2374-108">Streamed transfers can improve the scalability of a service by eliminating the requirement for large memory buffers.</span></span> <span data-ttu-id="c2374-109">Der Einfluss einer Änderung des Übertragungsmodus auf die Skalierbarkeit ist abhängig von der Größe der übertragenen Nachricht.</span><span class="sxs-lookup"><span data-stu-id="c2374-109">Whether changing the transfer mode improves scalability depends on the size of the messages being transferred.</span></span> <span data-ttu-id="c2374-110">Je größer eine Nachricht ist, desto eher ist eine Streamübertragung zu bevorzugen.</span><span class="sxs-lookup"><span data-stu-id="c2374-110">Large message sizes favor using streamed transfers.</span></span>  
  
 <span data-ttu-id="c2374-111">HTTP, TCP/IP sowie Named Pipe-Transporte verwenden gepufferte Übertragungen.</span><span class="sxs-lookup"><span data-stu-id="c2374-111">By default, the HTTP, TCP/IP, and named pipe transports use buffered transfers.</span></span> <span data-ttu-id="c2374-112">In diesem Dokument wird beschrieben, wie Streamingübertragungen anstelle von gepufferten Übertragungen für diese Transporte verwendet werden, und welche Konsequenzen sich daraus ergeben.</span><span class="sxs-lookup"><span data-stu-id="c2374-112">This document describes how to switch these transports from a buffered to streamed transfer mode and the consequences of doing so.</span></span>  
  
## <a name="enabling-streamed-transfers"></a><span data-ttu-id="c2374-113">Aktivieren von Streamübertragungen</span><span class="sxs-lookup"><span data-stu-id="c2374-113">Enabling Streamed Transfers</span></span>  

 <span data-ttu-id="c2374-114">Die Auswahl zwischen der gepufferten Übertragung und der Streamingübertragung erfolgt mithilfe des Transportbindungselements.</span><span class="sxs-lookup"><span data-stu-id="c2374-114">Selecting between buffered and streamed transfer modes is done on the binding element of the transport.</span></span> <span data-ttu-id="c2374-115">Das Bindungselement weist eine <xref:System.ServiceModel.TransferMode>-Eigenschaft auf, die auf `Buffered`, `Streamed`, `StreamedRequest` oder `StreamedResponse` festgelegt werden kann.</span><span class="sxs-lookup"><span data-stu-id="c2374-115">The binding element has a <xref:System.ServiceModel.TransferMode> property that can be set to `Buffered`, `Streamed`, `StreamedRequest`, or `StreamedResponse`.</span></span> <span data-ttu-id="c2374-116">Wenn Sie den Übertragungsmodus auf `Streamed` festlegen, wird ein Kommunikationsstream in beide Richtungen ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="c2374-116">Setting the transfer mode to `Streamed` enables streaming communication in both directions.</span></span> <span data-ttu-id="c2374-117">Wenn Sie den Übertragungsmodus auf `StreamedRequest` oder `StreamedResponse` festlegen, wird ein Kommunikationsstream nur in der angegebenen Richtung ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="c2374-117">Setting the transfer mode to `StreamedRequest` or `StreamedResponse` enables streaming communication in the indicated direction only.</span></span>  
  
 <span data-ttu-id="c2374-118">Mit den Bindungen <xref:System.ServiceModel.BasicHttpBinding>, <xref:System.ServiceModel.NetTcpBinding> und <xref:System.ServiceModel.NetNamedPipeBinding> wird die <xref:System.ServiceModel.TransferMode>-Eigenschaft verfügbar gemacht.</span><span class="sxs-lookup"><span data-stu-id="c2374-118">The <xref:System.ServiceModel.BasicHttpBinding>, <xref:System.ServiceModel.NetTcpBinding>, and <xref:System.ServiceModel.NetNamedPipeBinding> bindings expose the <xref:System.ServiceModel.TransferMode> property.</span></span> <span data-ttu-id="c2374-119">Für andere Transporte müssen Sie eine benutzerdefinierte Bindung erstellen, um den Übertragungsmodus festzulegen.</span><span class="sxs-lookup"><span data-stu-id="c2374-119">For other transports, you must create a custom binding to set the transfer mode.</span></span>  
  
 <span data-ttu-id="c2374-120">Die Entscheidung über die Verwendung der gepufferten oder der Streamingübertragung wird lokal am Endpunkt getroffen.</span><span class="sxs-lookup"><span data-stu-id="c2374-120">The decision to use either buffered or streamed transfers is a local decision of the endpoint.</span></span> <span data-ttu-id="c2374-121">Bei HTTP-Übertragungen wird der Übertragungsmodus nicht über Verbindungen oder an Server oder andere Vermittler weitergegeben.</span><span class="sxs-lookup"><span data-stu-id="c2374-121">For HTTP transports, the transfer mode does not propagate across a connection, or to servers and other intermediaries.</span></span> <span data-ttu-id="c2374-122">Das Festlegen des Übertragungsmodus spiegelt sich nicht in der Beschreibung der Dienstschnittstelle wider.</span><span class="sxs-lookup"><span data-stu-id="c2374-122">Setting the transfer mode is not reflected in the description of the service interface.</span></span> <span data-ttu-id="c2374-123">Nachdem Sie eine Clientklasse für einen Dienst erstellt haben, müssen Sie die Konfigurationsdatei für Dienste bearbeiten, die mit Streamingübertragungen verwendet werden sollen, um den Modus festzulegen.</span><span class="sxs-lookup"><span data-stu-id="c2374-123">After generating a client class for a service, you must edit the configuration file for services intended to be used with streamed transfers to set the mode.</span></span> <span data-ttu-id="c2374-124">Bei TCP und Named Pipe-Transporten wird der Übertragungsmodus als Richtlinienassertion weitergegeben.</span><span class="sxs-lookup"><span data-stu-id="c2374-124">For TCP and named pipe transports, the transfer mode is propagated as a policy assertion.</span></span>  
  
 <span data-ttu-id="c2374-125">Codebeispiele finden Sie unter Gewusst [wie: Aktivieren des Streamings](how-to-enable-streaming.md).</span><span class="sxs-lookup"><span data-stu-id="c2374-125">For code samples, see [How to: Enable Streaming](how-to-enable-streaming.md).</span></span>  
  
## <a name="enabling-asynchronous-streaming"></a><span data-ttu-id="c2374-126">Aktivieren von asynchronem Streaming</span><span class="sxs-lookup"><span data-stu-id="c2374-126">Enabling Asynchronous Streaming</span></span>  

 <span data-ttu-id="c2374-127">Um das asynchrone Streaming zu aktivieren, fügen Sie dem Diensthost das <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior>-Endpunktverhalten hinzu und legen dessen <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.AsynchronousSendEnabled%2A>-Eigenschaft auf `true` fest.</span><span class="sxs-lookup"><span data-stu-id="c2374-127">To enable asynchronous streaming, add the  <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior> endpoint behavior to the service host and set its <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.AsynchronousSendEnabled%2A> property to `true`.</span></span>  
  
 <span data-ttu-id="c2374-128">Mit dieser WCF-Version wird die Fähigkeit zum echten asynchronen Streaming auf der Senderseite hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="c2374-128">This version of WCF also adde the capability of true asynchronous streaming on the send side.</span></span> <span data-ttu-id="c2374-129">Dies verbessert die Skalierbarkeit des Diensts in Szenarien, in denen Nachrichten an mehrere Clients gestreamt werden, von denen einige eine langsame Lesegeschwindigkeit haben, möglicherweise aufgrund von Netzwerküberlastung, oder überhaupt nicht lesen.</span><span class="sxs-lookup"><span data-stu-id="c2374-129">This improves scalability of the service in scenarios where it is streaming messages to multiple clients some of which are slow in reading; possibly due to network congestion or are not reading at all.</span></span> <span data-ttu-id="c2374-130">In diesen Szenarien werden einzelne Threads für den Dienst pro Client nicht blockiert.</span><span class="sxs-lookup"><span data-stu-id="c2374-130">In these scenarios WCF no longer blocks individual threads on the service per client.</span></span> <span data-ttu-id="c2374-131">Dadurch wird sichergestellt, dass der Dienst in der Lage ist, viel mehr Clients zu verarbeiten und somit die Skalierbarkeit des Diensts zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="c2374-131">This ensures that the service is able to process many more clients thereby improving the scalability of the service.</span></span>  
  
## <a name="restrictions-on-streamed-transfers"></a><span data-ttu-id="c2374-132">Einschränkungen für Streamübertragungen</span><span class="sxs-lookup"><span data-stu-id="c2374-132">Restrictions on Streamed Transfers</span></span>  

 <span data-ttu-id="c2374-133">Wenn Sie den Streamübertragungsmodus verwenden, werden zusätzliche Einschränkungen von der Laufzeit implementiert.</span><span class="sxs-lookup"><span data-stu-id="c2374-133">Using the streamed transfer mode causes the run time to enforce additional restrictions.</span></span>  
  
 <span data-ttu-id="c2374-134">Vorgänge, die unter Verwendung einer Streamübertragung ausgeführt werden, können einen Vertrag mit maximal einem Eingabe- oder Ausgabeparameter aufweisen.</span><span class="sxs-lookup"><span data-stu-id="c2374-134">Operations that occur across a streamed transport can have a contract with at most one input or output parameter.</span></span> <span data-ttu-id="c2374-135">Der Parameter entspricht dem gesamten Nachrichtentext, und es muss sich um <xref:System.ServiceModel.Channels.Message>, um einen abgeleiteten Typ von <xref:System.IO.Stream> oder um eine <xref:System.Xml.Serialization.IXmlSerializable>-Implementierung handeln.</span><span class="sxs-lookup"><span data-stu-id="c2374-135">That parameter corresponds to the entire body of the message and must be a <xref:System.ServiceModel.Channels.Message>, a derived type of <xref:System.IO.Stream>, or an <xref:System.Xml.Serialization.IXmlSerializable> implementation.</span></span> <span data-ttu-id="c2374-136">Ein Rückgabewert für einen Vorgang entspricht einem Ausgabeparameter.</span><span class="sxs-lookup"><span data-stu-id="c2374-136">Having a return value for an operation is equivalent to having an output parameter.</span></span>  
  
 <span data-ttu-id="c2374-137">Einige WCF-Features, z. b. zuverlässiges Messaging, Transaktionen und SOAP-Sicherheit auf Nachrichten Ebene, basieren auf der Pufferung von Nachrichten für Übertragungen.</span><span class="sxs-lookup"><span data-stu-id="c2374-137">Some WCF features, such as reliable messaging, transactions, and SOAP message-level security, rely on buffering messages for transmissions.</span></span> <span data-ttu-id="c2374-138">Dadurch können mögliche Leistungsvorteile durch das Streaming reduziert oder zunichte gemacht werden.</span><span class="sxs-lookup"><span data-stu-id="c2374-138">Using these features may reduce or eliminate the performance benefits gained by using streaming.</span></span> <span data-ttu-id="c2374-139">Mit der Sicherheit auf Transportebene oder mit der Sicherheit auf Transportebene sowie dem Authentifizierungsmodus für die Nachrichtensicherheit können Sie eine Streamübertragung absichern.</span><span class="sxs-lookup"><span data-stu-id="c2374-139">To secure a streamed transport, use transport-level security only or use transport-level security plus authentication-only message security.</span></span>  
  
 <span data-ttu-id="c2374-140">SOAP-Header werden immer gepuffert, auch wenn eine Streamübertragung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="c2374-140">SOAP headers are always buffered, even when the transfer mode is set to streamed.</span></span> <span data-ttu-id="c2374-141">Die Nachrichtenheader dürfen nicht größer sein als das `MaxBufferSize`-Transportkontingent.</span><span class="sxs-lookup"><span data-stu-id="c2374-141">The headers for a message must not exceed the size of the `MaxBufferSize` transport quota.</span></span> <span data-ttu-id="c2374-142">Weitere Informationen zu dieser Einstellung finden Sie unter [Transport Kontingente](transport-quotas.md).</span><span class="sxs-lookup"><span data-stu-id="c2374-142">For more information about this setting, see [Transport Quotas](transport-quotas.md).</span></span>  
  
## <a name="differences-between-buffered-and-streamed-transfers"></a><span data-ttu-id="c2374-143">Unterschiede zwischen gepufferten und Streamingübertragungen</span><span class="sxs-lookup"><span data-stu-id="c2374-143">Differences Between Buffered and Streamed Transfers</span></span>  

 <span data-ttu-id="c2374-144">Durch das Ändern des Übertragungsmodus von gepuffert in gestreamt wird auch die systemeigene Kanalform von TCP- und Named Pipe-Transporten geändert.</span><span class="sxs-lookup"><span data-stu-id="c2374-144">Changing the transfer mode from buffered to streamed also changes the native channel shape of the TCP and named pipe transports.</span></span> <span data-ttu-id="c2374-145">Die systemeigene Kanalform für gepufferte Übertragungen ist <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="c2374-145">For buffered transfers, the native channel shape is <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span></span> <span data-ttu-id="c2374-146">Die systemeigenen Kanäle für Streamingübertragungen sind <xref:System.ServiceModel.Channels.IRequestChannel> und <xref:System.ServiceModel.Channels.IReplyChannel>.</span><span class="sxs-lookup"><span data-stu-id="c2374-146">For streamed transfers, the native channels are <xref:System.ServiceModel.Channels.IRequestChannel> and <xref:System.ServiceModel.Channels.IReplyChannel>.</span></span> <span data-ttu-id="c2374-147">Wenn Sie den Übertragungsmodus in einer bestehenden Anwendung ändern möchten, die diese Transporte unmittelbar (d. h. nicht über einen Dienstvertrag) verwendet, müssen Sie die erwartete Kanalform für Kanalfactorys und -listener ändern.</span><span class="sxs-lookup"><span data-stu-id="c2374-147">Changing the transfer mode in an existing application that uses these transports directly (that is, not through a service contract) requires changing the expected channel shape for channel factories and listeners.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c2374-148">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="c2374-148">See also</span></span>

- [<span data-ttu-id="c2374-149">Vorgehensweise: Aktivieren des Streamingmodus</span><span class="sxs-lookup"><span data-stu-id="c2374-149">How to: Enable Streaming</span></span>](how-to-enable-streaming.md)
