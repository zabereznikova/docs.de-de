---
title: Auswählen eines Nachrichtenencoders
ms.date: 03/30/2017
ms.assetid: 2204d82d-d962-4922-a79e-c9a231604f19
ms.openlocfilehash: fd5bc2270f2e4095ef6ad2b1d89af3560fb8d312
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/15/2020
ms.locfileid: "90559370"
---
# <a name="choose-a-message-encoder"></a><span data-ttu-id="51875-102">Auswählen eines Nachrichten Encoders</span><span class="sxs-lookup"><span data-stu-id="51875-102">Choose a Message Encoder</span></span>

<span data-ttu-id="51875-103">In diesem Artikel werden die Kriterien für die Auswahl der Nachrichten Encoder erläutert, die in Windows Communication Foundation (WCF) enthalten sind: Binary, Text und Message Transmission Optimization Mechanism (MTOM).</span><span class="sxs-lookup"><span data-stu-id="51875-103">This article discusses criteria for choosing among the message encoders that are included in Windows Communication Foundation (WCF): binary, text, and Message Transmission Optimization Mechanism (MTOM).</span></span>  
  
 <span data-ttu-id="51875-104">In WCF geben Sie an, wie Daten über ein Netzwerk zwischen Endpunkten über eine *Bindung*übertragen werden, die aus einer Sequenz von *Bindungs Elementen*besteht.</span><span class="sxs-lookup"><span data-stu-id="51875-104">In WCF, you specify how to transfer data across a network between endpoints by means of a *binding*, which is made up of a sequence of *binding elements*.</span></span> <span data-ttu-id="51875-105">Ein Nachrichtenencoder wird von einem Nachrichtencodierungs-Bindungselement im Bindungsstapel dargestellt.</span><span class="sxs-lookup"><span data-stu-id="51875-105">A message encoder is represented by a message encoding binding element in the binding stack.</span></span> <span data-ttu-id="51875-106">Eine Bindung enthält optionale Protokollbindungselemente, wie ein Sicherheitsbindungselement oder ein zuverlässiges Nachrichtenbindungselement, ein erforderliches Nachrichtencodierungs-Bindungselement und ein erforderliches Transportbindungselement.</span><span class="sxs-lookup"><span data-stu-id="51875-106">A binding includes optional protocol binding elements, such as a security binding element or reliable messaging binding element, a required message encoding binding element, and a required transport binding element.</span></span>  
  
 <span data-ttu-id="51875-107">Das Nachrichtencodierungs-Bindungselement befindet sich unter den optionalen Protokollbindungselementen und über dem erforderlichen Transportbindungselement.</span><span class="sxs-lookup"><span data-stu-id="51875-107">The message encoding binding element sits below the optional protocol binding elements and above the required transport binding element.</span></span> <span data-ttu-id="51875-108">Auf der ausgehenden Seite serialisiert ein Nachrichtenencoder die ausgehende <xref:System.ServiceModel.Channels.Message> und übergibt sie an den Transport.</span><span class="sxs-lookup"><span data-stu-id="51875-108">On the outgoing side, a message encoder serializes the outgoing <xref:System.ServiceModel.Channels.Message> and passes it to the transport.</span></span> <span data-ttu-id="51875-109">Auf der eingehenden Seite ruft ein Nachrichtenencoder die serialisierte Form einer <xref:System.ServiceModel.Channels.Message> aus dem Transport ab und übergibt sie an die höhere Protokollschicht, falls vorhanden, oder andernfalls an die Anwendung.</span><span class="sxs-lookup"><span data-stu-id="51875-109">On the incoming side, a message encoder receives the serialized form of a <xref:System.ServiceModel.Channels.Message> from the transport and passes it to the higher protocol layer, if present, or to the application, if not.</span></span>  
  
 <span data-ttu-id="51875-110">Wenn Sie eine Verbindung mit einem zuvor vorhandenen Client oder Server herstellen, haben Sie eventuell keine Wahl, ob Sie eine bestimmte Nachrichtencodierung verwenden möchten, da Sie Ihre Nachrichten auf eine Weise codieren müssen, die von der anderen Seite erwartet wird.</span><span class="sxs-lookup"><span data-stu-id="51875-110">When connecting to a pre-existing client or server, you may not have a choice about using a particular message encoding since you need to encode your messages in a way that the other side is expecting.</span></span> <span data-ttu-id="51875-111">Wenn Sie jedoch einen WCF-Dienst schreiben, können Sie den Dienst über mehrere Endpunkte verfügbar machen, von denen jeder eine andere Nachrichten Codierung verwendet.</span><span class="sxs-lookup"><span data-stu-id="51875-111">However, if you are writing a WCF service, you can expose your service through multiple endpoints, each using a different message encoding.</span></span> <span data-ttu-id="51875-112">So können Clients die beste Codierung für die Kommunikation mit Ihrem Dienst über den am besten geeigneten Endpunkt auswählen. Außerdem verfügen Sie dann über die Flexibilität, die für die Clients am besten geeignete Codierung auszuwählen.</span><span class="sxs-lookup"><span data-stu-id="51875-112">This allows clients to choose the best encoding for talking to your service over the endpoint that is best for them, as well as giving your clients the flexibility to choose the encoding that is best for them.</span></span> <span data-ttu-id="51875-113">Die Verwendung von mehreren Endpunkten ermöglicht Ihnen, die Vorteile anderer Nachrichtencodierungen mit anderen Bindungselementen zu kombinieren.</span><span class="sxs-lookup"><span data-stu-id="51875-113">Using multiple endpoints also allows you to combine the advantages of different message encodings with other binding elements.</span></span>  
  
## <a name="system-provided-encoders"></a><span data-ttu-id="51875-114">Vom System bereitgestellte Encoder</span><span class="sxs-lookup"><span data-stu-id="51875-114">System-Provided Encoders</span></span>  
 <span data-ttu-id="51875-115">WCF enthält drei Nachrichten Encoder, die durch die folgenden drei Klassen dargestellt werden:</span><span class="sxs-lookup"><span data-stu-id="51875-115">WCF includes three message encoders, which are represented by the following three classes:</span></span>  
  
- <span data-ttu-id="51875-116"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>, der Textnachrichtenencoder, unterstützt sowohl reine XML-Codierung als auch SOAP-Codierung.</span><span class="sxs-lookup"><span data-stu-id="51875-116"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>, the text message encoder, supports both plain XML encoding and SOAP encoding.</span></span> <span data-ttu-id="51875-117">Der reine XML-Codierungsmodus des Textnachrichtenencoders wird als "Plain Old XML" (POX) bezeichnet, um ihn von der textbasierten SOAP-Codierung zu unterscheiden.</span><span class="sxs-lookup"><span data-stu-id="51875-117">The plain XML encoding mode of the text message encoder is called "plain old XML" (POX) to distinguish it from text-based SOAP encoding.</span></span> <span data-ttu-id="51875-118">Um POX zu aktivieren, legen Sie die <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement.MessageVersion%2A>-Eigenschaft auf <xref:System.ServiceModel.Channels.MessageVersion.None%2A> fest.</span><span class="sxs-lookup"><span data-stu-id="51875-118">To enable POX, set the <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement.MessageVersion%2A> property to <xref:System.ServiceModel.Channels.MessageVersion.None%2A>.</span></span> <span data-ttu-id="51875-119">Verwenden Sie den Textnachrichten Encoder, um mit nicht-WCF-Endpunkten zu interagieren.</span><span class="sxs-lookup"><span data-stu-id="51875-119">Use the text message encoder to interoperate with non-WCF endpoints.</span></span>  
  
- <span data-ttu-id="51875-120"><xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>, der binäre Nachrichten Encoder, verwendet ein kompaktes Binärformat und ist für die WCF-zu-WCF-Kommunikation optimiert und somit nicht interoperabel.</span><span class="sxs-lookup"><span data-stu-id="51875-120"><xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>, the binary message encoder, uses a compact binary format and is optimized for WCF to WCF communication, and hence is not interoperable.</span></span> <span data-ttu-id="51875-121">Dies ist auch der leistungsfähigste Encoder aller von WCF bereitgestellten Encoder.</span><span class="sxs-lookup"><span data-stu-id="51875-121">This is also the most performant encoder of all the encoders WCF provides.</span></span>  
  
- <span data-ttu-id="51875-122">Das <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>-Bindungselement gibt die Zeichencodierung und die für MTOM verwendete Nachrichtenversionsverwaltung an.</span><span class="sxs-lookup"><span data-stu-id="51875-122"><xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>, the binding element, specifies the character encoding and message versioning for messages using MTOM encoding.</span></span> <span data-ttu-id="51875-123">MTOM ist eine effiziente Technologie zum Übertragen von Binärdaten in WCF-Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="51875-123">MTOM is an efficient technology for transmitting binary data in WCF messages.</span></span> <span data-ttu-id="51875-124">Der MTOM-Encoder versucht, einen Ausgleich zwischen Effizienz und Interoperabilität zu schaffen.</span><span class="sxs-lookup"><span data-stu-id="51875-124">The MTOM encoder attempts to create a balance between efficiency and interoperability.</span></span> <span data-ttu-id="51875-125">Die MTOM-Verschlüsselung überträgt die meisten XML-Daten in Textform, optimiert aber große Binärdatenblöcke durch Übertragung ohne Textkonvertierung.</span><span class="sxs-lookup"><span data-stu-id="51875-125">The MTOM encoding transmits most XML in textual form, but optimizes large blocks of binary data by transmitting them as-is, without conversion to text.</span></span> <span data-ttu-id="51875-126">Hinsichtlich der Effizienz ist MTOM zwischen den Encodern, die WCF bereitstellt, zwischen Text (der langsamsten) und Binär (am schnellsten).</span><span class="sxs-lookup"><span data-stu-id="51875-126">In terms of efficiency, among the encoders WCF provides, MTOM is in-between text (the slowest) and binary (the fastest).</span></span>  
  
## <a name="how-to-choose-a-message-encoder"></a><span data-ttu-id="51875-127">So wählen Sie einen Nachrichtenencoder aus</span><span class="sxs-lookup"><span data-stu-id="51875-127">How to Choose a Message Encoder</span></span>  
 <span data-ttu-id="51875-128">In der folgenden Tabelle werden allgemeine Faktoren beschrieben, die bei der Auswahl eines Nachrichtenencoders berücksichtigt werden.</span><span class="sxs-lookup"><span data-stu-id="51875-128">The following table describes common factors used to choose a message encoder.</span></span> <span data-ttu-id="51875-129">Priorisieren Sie die Faktoren, die für Ihre Anwendung wichtig sind, und wählen Sie dann die Nachrichtenencoder aus, die mit diesen Faktoren am besten funktionieren.</span><span class="sxs-lookup"><span data-stu-id="51875-129">Prioritize the factors that are important for your application, and then choose the message encoders that work best with these factors.</span></span> <span data-ttu-id="51875-130">Berücksichtigen Sie alle weiteren, in dieser Tabelle nicht aufgelisteten Faktoren sowie alle benutzerdefinierten Encoder, die eventuell für Ihre Anwendung erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="51875-130">Be sure to consider any additional factors not listed in this table and any custom message encoders that may be required in your application.</span></span>  
  
|<span data-ttu-id="51875-131">Faktor</span><span class="sxs-lookup"><span data-stu-id="51875-131">Factor</span></span>|<span data-ttu-id="51875-132">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="51875-132">Description</span></span>|<span data-ttu-id="51875-133">Encoder, die diesen Faktor unterstützen</span><span class="sxs-lookup"><span data-stu-id="51875-133">Encoders that support this factor</span></span>|  
|------------|-----------------|---------------------------------------|  
|<span data-ttu-id="51875-134">Unterstützte Zeichensätze</span><span class="sxs-lookup"><span data-stu-id="51875-134">Supported Character Sets</span></span>|<span data-ttu-id="51875-135"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement> und <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement> unterstützen nur die UTF8-und UTF16-Unicode-Codierungen (*Big-d* und *Little-enddian*).</span><span class="sxs-lookup"><span data-stu-id="51875-135"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement> and <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement> support only the UTF8 and UTF16 Unicode (*big-endian* and *little-endian*) encodings.</span></span> <span data-ttu-id="51875-136">Sind andere Codierungen erforderlich (beispielsweise UTF7 oder ASCII), muss ein benutzerdefinierter Encoder verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="51875-136">If other encodings are required, such as UTF7 or ASCII, a custom encoder must be used.</span></span> <span data-ttu-id="51875-137">Ein Beispiel für einen benutzerdefinierten Encoder finden Sie unter [benutzerdefinierter Nachrichten Encoder](../samples/custom-message-encoder-custom-text-encoder.md).</span><span class="sxs-lookup"><span data-stu-id="51875-137">For a sample custom encoder, see [Custom Message Encoder](../samples/custom-message-encoder-custom-text-encoder.md).</span></span>|<span data-ttu-id="51875-138">Text</span><span class="sxs-lookup"><span data-stu-id="51875-138">Text</span></span>|  
|<span data-ttu-id="51875-139">Inspektion</span><span class="sxs-lookup"><span data-stu-id="51875-139">Inspection</span></span>|<span data-ttu-id="51875-140">Inspektion ist die Fähigkeit, Nachrichten während der Übertragung zu untersuchen.</span><span class="sxs-lookup"><span data-stu-id="51875-140">Inspection is the ability to examine messages during transmission.</span></span> <span data-ttu-id="51875-141">Textcodierungem, entweder mit oder ohne die Verwendung von SOAP, ermöglichen die Inspektion und Analyse von Nachrichten mit vielen Anwendungen, ohne spezielle Tools zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="51875-141">Text encodings, either with or without the use of SOAP, allow messages to be inspected and analyzed by many applications without the use of specialized tools.</span></span> <span data-ttu-id="51875-142">Die Verwendung der Übertragungssicherheit auf der Nachrichten-oder Transport Ebene wirkt sich auf die Fähigkeit aus, Nachrichten zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="51875-142">The use of transfer security, at either the message or transport level, affects your ability to inspect messages.</span></span> <span data-ttu-id="51875-143">Vertraulichkeit schützt eine Nachricht davor, untersucht zu werden, und Integrität schützt eine Nachricht davor, geändert zu werden.</span><span class="sxs-lookup"><span data-stu-id="51875-143">Confidentiality protects a message from being examined and integrity protects a message from being modified.</span></span>|<span data-ttu-id="51875-144">Text</span><span class="sxs-lookup"><span data-stu-id="51875-144">Text</span></span>|  
|<span data-ttu-id="51875-145">Zuverlässigkeit</span><span class="sxs-lookup"><span data-stu-id="51875-145">Reliability</span></span>|<span data-ttu-id="51875-146">Zuverlässigkeit ist die Widerstandsfähigkeit eines Encoders gegen Übertragungsfehler.</span><span class="sxs-lookup"><span data-stu-id="51875-146">Reliability is the resiliency of an encoder to transmission errors.</span></span> <span data-ttu-id="51875-147">Zuverlässigkeit kann auch auf Nachrichten-, Transport- oder Anwendungsebene bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="51875-147">Reliability can also be provided at the message, transport, or application layer.</span></span> <span data-ttu-id="51875-148">Alle WCF-Standard Encoder nehmen an, dass eine andere Ebene Zuverlässigkeit bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="51875-148">All of the standard WCF encoders assume that another layer is providing reliability.</span></span> <span data-ttu-id="51875-149">Der Encoder hat wenige Möglichkeiten, nach einem Übertragungsfehler eine Wiederherstellung durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="51875-149">The encoder has little ability to recover from a transmission error.</span></span>|<span data-ttu-id="51875-150">Keine</span><span class="sxs-lookup"><span data-stu-id="51875-150">None</span></span>|  
|<span data-ttu-id="51875-151">Einfachheit</span><span class="sxs-lookup"><span data-stu-id="51875-151">Simplicity</span></span>|<span data-ttu-id="51875-152">Einfachheit stellt die Leichtigkeit dar, mit der Sie Encoder und Decoder für eine Codierungsspezifikation erstellen können.</span><span class="sxs-lookup"><span data-stu-id="51875-152">Simplicity represents the ease with which you can create encoders and decoders for an encoding specification.</span></span> <span data-ttu-id="51875-153">Textcodierungen sind besonders vorteilhaft für die Einfachheit. Die POX-Textcodierung hat den zusätzlichen Vorteil, dass keine Unterstützung der SOAP-Verarbeitung erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="51875-153">Text encodings are particularly advantageous for simplicity, and the POX text encoding has the additional advantage of not requiring support for processing SOAP.</span></span>|<span data-ttu-id="51875-154">Text (POX)</span><span class="sxs-lookup"><span data-stu-id="51875-154">Text (POX)</span></span>|  
|<span data-ttu-id="51875-155">Size</span><span class="sxs-lookup"><span data-stu-id="51875-155">Size</span></span>|<span data-ttu-id="51875-156">Die Codierung bestimmt den Mehraufwand für den Inhalt.</span><span class="sxs-lookup"><span data-stu-id="51875-156">The encoding determines the amount of overhead imposed on content.</span></span> <span data-ttu-id="51875-157">Die Größe der codierten Nachrichten bezieht sich direkt auf den maximalen Durchsatz von Dienstvorgängen.</span><span class="sxs-lookup"><span data-stu-id="51875-157">The size of encoded messages is directly related to the maximum throughput of service operations.</span></span> <span data-ttu-id="51875-158">Binäre Codierungen sind im Allgemeinen kompakter als Textcodierungen.</span><span class="sxs-lookup"><span data-stu-id="51875-158">Binary encodings are generally more compact than text encodings.</span></span> <span data-ttu-id="51875-159">Wenn die Nachrichtengröße ein Maximum erreicht hat, sollten Sie auch eine Komprimierung des Nachrichteninhalts während der Codierung in Erwägung ziehen.</span><span class="sxs-lookup"><span data-stu-id="51875-159">When message size is at a premium, consider also compressing the message contents during encoding.</span></span> <span data-ttu-id="51875-160">Durch die Komprimierung entstehen jedoch höhere Verarbeitungskosten für den Absender und den Empfänger der Nachricht.</span><span class="sxs-lookup"><span data-stu-id="51875-160">However, compression adds processing costs for both the message sender and receiver.</span></span>|<span data-ttu-id="51875-161">Binary</span><span class="sxs-lookup"><span data-stu-id="51875-161">Binary</span></span>|  
|<span data-ttu-id="51875-162">Streaming</span><span class="sxs-lookup"><span data-stu-id="51875-162">Streaming</span></span>|<span data-ttu-id="51875-163">Streaming ermöglicht Anwendungen, mit der Verarbeitung einer Nachricht zu beginnen, bevor die ganze Nachricht angekommen ist.</span><span class="sxs-lookup"><span data-stu-id="51875-163">Streaming allows applications to begin processing a message before the entire message has arrived.</span></span> <span data-ttu-id="51875-164">Wenn Sie das Streaming effektiv anwenden möchten, ist es erforderlich, dass die wichtigen Daten einer Nachricht am Anfang der Nachricht zur Verfügung stehen, sodass die empfangende Anwendung nicht warten muss, bis die Nachricht ankommt.</span><span class="sxs-lookup"><span data-stu-id="51875-164">Effectively using streaming requires that the important data for a message be available at the beginning of the message so that the receiving application is not required to wait for it to arrive.</span></span> <span data-ttu-id="51875-165">Außerdem müssen Anwendungen, die eine Übertragung per Stream nutzen, die Daten in der Nachricht inkrementell organisieren, damit der Inhalt keine Weiterleitungsabhängigkeiten aufweist.</span><span class="sxs-lookup"><span data-stu-id="51875-165">Moreover, applications that use streamed transfer must organize data in the message incrementally so that the content does not have forward dependencies.</span></span> <span data-ttu-id="51875-166">In vielen Fällen müssen Sie einen Kompromiss schließen zwischen dem Streaminginhalt und der kleinstmöglichen Übertragungsgröße dieses Inhalts.</span><span class="sxs-lookup"><span data-stu-id="51875-166">In many cases, you must compromise between streaming content and having the smallest possible transfer size for that content.</span></span>|<span data-ttu-id="51875-167">Keine</span><span class="sxs-lookup"><span data-stu-id="51875-167">None</span></span>|  
|<span data-ttu-id="51875-168">Unterstützung von Drittanbieter Tools</span><span class="sxs-lookup"><span data-stu-id="51875-168">Third-Party Tool Support</span></span>|<span data-ttu-id="51875-169">Unterstützungsbereiche für eine Codierung umfassen Entwicklung und Diagnose.</span><span class="sxs-lookup"><span data-stu-id="51875-169">Support areas for an encoding include development and diagnosis.</span></span> <span data-ttu-id="51875-170">Drittanbieter haben viel investiert in Bibliotheken und Toolkits zur Verarbeitung von Nachrichten, die im POX-Format codiert sind.</span><span class="sxs-lookup"><span data-stu-id="51875-170">Third-party developers have made a large investment in libraries and toolkits for handling messages encoded in the POX format.</span></span>|<span data-ttu-id="51875-171">Text (POX)</span><span class="sxs-lookup"><span data-stu-id="51875-171">Text (POX)</span></span>|  
|<span data-ttu-id="51875-172">Interoperabilität</span><span class="sxs-lookup"><span data-stu-id="51875-172">Interoperability</span></span>|<span data-ttu-id="51875-173">Dieser Faktor bezieht sich auf die Fähigkeit eines WCF-Encoders, mit nicht-WCF-Diensten zu interagieren.</span><span class="sxs-lookup"><span data-stu-id="51875-173">This factor refers to the ability of a WCF encoder to interoperate with non-WCF services.</span></span>|<span data-ttu-id="51875-174">Text</span><span class="sxs-lookup"><span data-stu-id="51875-174">Text</span></span><br /><br /> <span data-ttu-id="51875-175">MTOM (teilweise)</span><span class="sxs-lookup"><span data-stu-id="51875-175">MTOM (partial)</span></span>|  
  
<span data-ttu-id="51875-176">Hinweis: Bei Verwendung des Binärencoders hat die IgnoreWhitespace-Einstellung keine Auswirkung, wenn ein XML-Reader erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="51875-176">Note: When using the Binary Encoder, using the IgnoreWhitespace setting when creating a XMLReader will have no effect.</span></span>  <span data-ttu-id="51875-177">Angenommen, in einem Dienstvorgang wird Folgendes ausgeführt:</span><span class="sxs-lookup"><span data-stu-id="51875-177">For example, if you do the following inside a service operation:</span></span>  

```csharp
public void OperationContract(XElement input)
{
    Console.WriteLine("{0}", input.Value);
    int counter = 0;
    var xreader = input.CreateReader();
    var reader = XmlReader.Create(xreader, new XmlReaderSettings() { IgnoreWhitespace = true });
    while (reader.Read())
    {
        counter++;
    }

    Console.WriteLine("Read {0} lines with reader", counter);
}
```  
  
<span data-ttu-id="51875-178">Die IgnoreWhitespace-Einstellung wird ignoriert.</span><span class="sxs-lookup"><span data-stu-id="51875-178">The IgnoreWhitespace setting is ignored.</span></span>  
  
## <a name="compression-and-the-binary-encoder"></a><span data-ttu-id="51875-179">Komprimierung und binärer Encoder</span><span class="sxs-lookup"><span data-stu-id="51875-179">Compression and the Binary Encoder</span></span>

<span data-ttu-id="51875-180">Ab WCF 4.5 bietet der binäre WCF-Encoder Komprimierungsunterstützung.</span><span class="sxs-lookup"><span data-stu-id="51875-180">Beginning with WCF 4.5 the WCF binary encoder adds support for compression.</span></span> <span data-ttu-id="51875-181">Dies ermöglicht es Ihnen, den gzip/deflate-Algorithmus zum Senden komprimierter Nachrichten von einem WCF-Client zu senden und mit komprimierten Nachrichten von einem selbst gehosteten WCF-Dienst zu antworten.</span><span class="sxs-lookup"><span data-stu-id="51875-181">This enables you to use the gzip/deflate algorithm for sending compressed messages from a WCF client and also respond with compressed messages from a self-hosted WCF service.</span></span> <span data-ttu-id="51875-182">Diese Funktion ermöglicht die Komprimierung bei HTTP- und TCP-Transporten.</span><span class="sxs-lookup"><span data-stu-id="51875-182">This feature enables compression on both the HTTP and TCP transports.</span></span> <span data-ttu-id="51875-183">Ein IIS-gehosteter WCF-Dienst kann immer durch Konfigurieren des IIS-Hostservers zum Senden von komprimierten Antworten befähigt werden.</span><span class="sxs-lookup"><span data-stu-id="51875-183">An IIS hosted WCF service can always be enabled for sending compressed responses by configuring the IIS host server.</span></span> <span data-ttu-id="51875-184">Der Komprimierungstyp wird mit der <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A?displayProperty=nameWithType>-Eigenschaft konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="51875-184">The type of compression is configured with the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="51875-185">Diese Eigenschaft wird auf einen der <xref:System.ServiceModel.Channels.CompressionFormat?displayProperty=nameWithType>-Enumerationswerte festgelegt:</span><span class="sxs-lookup"><span data-stu-id="51875-185">This property is set to one of the <xref:System.ServiceModel.Channels.CompressionFormat?displayProperty=nameWithType> enum values:</span></span>

- <xref:System.ServiceModel.Channels.CompressionFormat.Deflate>
- <xref:System.ServiceModel.Channels.CompressionFormat.GZip>
- <xref:System.ServiceModel.Channels.CompressionFormat.None>
  
<span data-ttu-id="51875-186">Da diese Eigenschaft nur für das BinaryMessageEncodingBindingElement verfügbar gemacht wird, müssen Sie für die Verwendung dieses Features eine benutzerdefinierte Bindung wie die folgende erstellen:</span><span class="sxs-lookup"><span data-stu-id="51875-186">Since this property is only exposed on the binaryMessageEncodingBindingElement, you will need to create a custom binding like the following to use this feature:</span></span>

 ```xml
 <customBinding>
   <binding name="BinaryCompressionBinding">
     <binaryMessageEncoding compressionFormat ="GZip" />
     <httpTransport />
  </binding>
</customBinding>
 ```

<span data-ttu-id="51875-187">Sowohl der Client als auch der Dienst müssen dem Senden und empfangen von komprimierten Nachrichten zustimmen. Daher muss die compressionformat-Eigenschaft für das binaryMessageEncoding-Element sowohl auf dem Client als auch auf dem Dienst konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="51875-187">Both the client and the service need to agree to send and receive compressed messages and therefore the compressionFormat property must be configured on the binaryMessageEncoding element on both client and service.</span></span> <span data-ttu-id="51875-188">Eine ProtocolException wird ausgelöst, wenn entweder der Dienst oder der Client nicht für die Komprimierung konfiguriert ist, aber die andere Seite ist.</span><span class="sxs-lookup"><span data-stu-id="51875-188">A ProtocolException is thrown if either the service or client is not configured for compression, but the other side is.</span></span> <span data-ttu-id="51875-189">Die Aktivierung der Komprimierung sollte sorgfältig in Erwägung gezogen werden.</span><span class="sxs-lookup"><span data-stu-id="51875-189">Enabling compression should be carefully considered.</span></span> <span data-ttu-id="51875-190">Die Komprimierung ist vor allem dann nützlich, wenn die Netzwerkbandbreite beschränkt ist.</span><span class="sxs-lookup"><span data-stu-id="51875-190">Compression is mostly useful if network bandwidth is a bottleneck.</span></span> <span data-ttu-id="51875-191">Wenn die CPU der Engpass ist, mindert die Komprimierung den Durchsatz.</span><span class="sxs-lookup"><span data-stu-id="51875-191">In the case where the CPU is the bottleneck, compression will decrease throughput.</span></span> <span data-ttu-id="51875-192">Es müssen entsprechende Tests in einer simulierten Umgebung ausgeführt werden, um zu ermitteln, ob dies für die Anwendung Vorteile erbringt.</span><span class="sxs-lookup"><span data-stu-id="51875-192">Appropriate testing must be done in a simulated environment to find out if this benefits the application</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="51875-193">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="51875-193">See also</span></span>

- [<span data-ttu-id="51875-194">Bindungen</span><span class="sxs-lookup"><span data-stu-id="51875-194">Bindings</span></span>](bindings.md)
