---
title: "Identitätswechsel und Transportsicherheit"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 426df8cb-6337-4262-b2c0-b96c2edf21a9
caps.latest.revision: "12"
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.openlocfilehash: 906d45ccba7185e82aed82626a13034f2e97422d
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/21/2017
---
# <a name="using-impersonation-with-transport-security"></a><span data-ttu-id="75887-102">Identitätswechsel und Transportsicherheit</span><span class="sxs-lookup"><span data-stu-id="75887-102">Using Impersonation with Transport Security</span></span>
<span data-ttu-id="75887-103">*Identitätswechsel* ist die Fähigkeit einer Serveranwendung, die Identität des Clients anzunehmen.</span><span class="sxs-lookup"><span data-stu-id="75887-103">*Impersonation* is the ability of a server application to take on the identity of the client.</span></span> <span data-ttu-id="75887-104">Dienste greifen bei der Validierung des Zugriffs auf Ressourcen häufig auf den Identitätswechsel zurück.</span><span class="sxs-lookup"><span data-stu-id="75887-104">It is common for services to use impersonation when validating access to resources.</span></span> <span data-ttu-id="75887-105">Die Serveranwendung wird unter einem Dienstkonto ausgeführt. Wenn der Server eine Clientverbindung akzeptiert, nimmt er die Identität des Clients an, das heißt, Zugriffsvalidierungen werden mit den Anmeldeinformationen des Clients durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="75887-105">The server application runs using a service account, but when the server accepts a client connection, it impersonates the client so that access checks are performed using the client's credentials.</span></span> <span data-ttu-id="75887-106">Bei der Transportsicherheit handelt es sich um einen Mechanismus, mit dem Anmeldeinformationen übergeben und die Kommunikation mit diesen Anmeldeinformationen gesichert werden können.</span><span class="sxs-lookup"><span data-stu-id="75887-106">Transport security is a mechanism both for passing credentials and securing communication using those credentials.</span></span> <span data-ttu-id="75887-107">In diesem Thema wird die Verwendung der Transportsicherheit mit der Identitätswechsel-Funktion in [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] beschrieben.</span><span class="sxs-lookup"><span data-stu-id="75887-107">This topic describes using transport security in [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] with the impersonation feature.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="75887-108">Identitätswechsel mit nachrichtensicherheit, finden Sie unter [Delegierung und Identitätswechsel](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="75887-108"> impersonation using message security, see [Delegation and Impersonation](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span></span>  
  
## <a name="five-impersonation-levels"></a><span data-ttu-id="75887-109">Die fünf Ebenen des Identitätswechsels</span><span class="sxs-lookup"><span data-stu-id="75887-109">Five Impersonation Levels</span></span>  
 <span data-ttu-id="75887-110">Die Transportsicherheit nutzt fünf Ebenen des Identitätswechsels, die in der folgenden Tabelle beschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="75887-110">Transport security makes use of five levels of impersonation, as described in the following table.</span></span>  
  
|<span data-ttu-id="75887-111">Ebene des Identitätswechsels</span><span class="sxs-lookup"><span data-stu-id="75887-111">Impersonation level</span></span>|<span data-ttu-id="75887-112">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="75887-112">Description</span></span>|  
|-------------------------|-----------------|  
|<span data-ttu-id="75887-113">Keine</span><span class="sxs-lookup"><span data-stu-id="75887-113">None</span></span>|<span data-ttu-id="75887-114">Die Serveranwendung versucht nicht, die Identität des Clients anzunehmen.</span><span class="sxs-lookup"><span data-stu-id="75887-114">The server application does not attempt to impersonate the client.</span></span>|  
|<span data-ttu-id="75887-115">Anonym</span><span class="sxs-lookup"><span data-stu-id="75887-115">Anonymous</span></span>|<span data-ttu-id="75887-116">Die Serveranwendung kann mit den Anmeldeinformationen des Clients Zugriffsüberprüfungen durchführen, erhält jedoch keine Informationen über die Identität des Clients.</span><span class="sxs-lookup"><span data-stu-id="75887-116">The server application can perform access checks against the client's credentials, but does not receive any information about the client's identity.</span></span> <span data-ttu-id="75887-117">Diese Ebene des Identitätswechsels ist nur sinnvoll bei einer computerinternen Kommunikation, z.&#160;B. bei Named Pipes (benannten Pipes).</span><span class="sxs-lookup"><span data-stu-id="75887-117">This impersonation level is meaningful only for on-machine communication, such as named pipes.</span></span> <span data-ttu-id="75887-118">Die Verwendung von `Anonymous` mit einer Remoteverbindung erhöht die Ebene des Identitätswechsels auf Identifizieren.</span><span class="sxs-lookup"><span data-stu-id="75887-118">Using `Anonymous` with a remote connection promotes the impersonation level to Identify.</span></span>|  
|<span data-ttu-id="75887-119">Identifizieren (Identify)</span><span class="sxs-lookup"><span data-stu-id="75887-119">Identify</span></span>|<span data-ttu-id="75887-120">Die Serveranwendung kennt die Identität des Clients und kann mit den Anmeldeinformationen des Clients Zugriffsvalidierungen durchführen, sie kann jedoch nicht die Identität des Clients annehmen.</span><span class="sxs-lookup"><span data-stu-id="75887-120">The server application knows the client's identity and can perform access validation against the client's credentials, but cannot impersonate the client.</span></span> <span data-ttu-id="75887-121">Identifizieren ist die standardmäßig in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] bei SSPI-Anmeldeinformationen verwendete Ebene des Identitätswechsels, es sei denn, der Tokenaussteller stellt eine andere Identitätswechselebene bereit.</span><span class="sxs-lookup"><span data-stu-id="75887-121">Identify is the default impersonation level used with SSPI credentials in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] unless the token provider provides a different impersonation level.</span></span>|  
|<span data-ttu-id="75887-122">Identitätswechsel</span><span class="sxs-lookup"><span data-stu-id="75887-122">Impersonate</span></span>|<span data-ttu-id="75887-123">Die Serveranwendung kann Zugriffsüberprüfungen durchführen und auf dem Servercomputer als Client auf Ressourcen zugreifen.</span><span class="sxs-lookup"><span data-stu-id="75887-123">The server application can access resources on the server machine as the client in addition to performing access checks.</span></span> <span data-ttu-id="75887-124">Die Serveranwendung kann jedoch nicht mit der Identität des Clients auf Ressourcen auf Remotecomputern zugreifen, da das Identitätswechsel-Token über keine Anmeldeinformationen für das Netzwerk verfügt.</span><span class="sxs-lookup"><span data-stu-id="75887-124">The server application cannot access resources on remote machines using the client's identity because the impersonated token does not have network credentials</span></span>|  
|<span data-ttu-id="75887-125">Delegate</span><span class="sxs-lookup"><span data-stu-id="75887-125">Delegate</span></span>|<span data-ttu-id="75887-126">Bei der Identitätswechselebene Delegieren verfügt die Serveranwendung über dieselben Möglichkeiten wie bei der Ebene `Impersonate` und kann zudem unter der Identität des Clients auf Remotecomputer zugreifen und die Identität an andere Anwendungen übergeben.</span><span class="sxs-lookup"><span data-stu-id="75887-126">In addition to having the same capabilities as `Impersonate`, the Delegate impersonation level also enables the server application to access resources on remote machines using the client's identity and to pass the identity to other applications.</span></span><br /><br /> <span data-ttu-id="75887-127">**Wichtige** das Domänenkonto Server markiert werden muss als vertrauenswürdig für die Delegierung auf dem Domänencontroller mit diesen zusätzlichen Funktionen verwenden.</span><span class="sxs-lookup"><span data-stu-id="75887-127">**Important** The server domain account must be marked as trusted for delegation on the domain controller to use these additional features.</span></span> <span data-ttu-id="75887-128">Diese Ebene des Identitätswechsels kann nicht mit als vertraulich eingestuften Clientdomänenkonten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="75887-128">This level of impersonation cannot be used with client domain accounts marked as sensitive.</span></span>|  
  
 <span data-ttu-id="75887-129">Die transportsicherheit am häufigsten verwendeten Ebenen sind `Identify` und `Impersonate`.</span><span class="sxs-lookup"><span data-stu-id="75887-129">The levels most commonly used with transport security are `Identify` and `Impersonate`.</span></span> <span data-ttu-id="75887-130">Die Ebenen `None` und `Anonymous` sind nicht für die üblichen Verwendungszwecke zu empfehlen, und bei vielen Transporten werden diese Ebenen nicht für die Authentifizierung unterstützt.</span><span class="sxs-lookup"><span data-stu-id="75887-130">The levels `None` and `Anonymous` are not recommended for typical use, and many transports do not support using those levels with authentication.</span></span> <span data-ttu-id="75887-131">Die `Delegate`-Ebene ist eine leistungsstarke Funktion, die nur mit großer Sorgfalt verwendet werden sollte.</span><span class="sxs-lookup"><span data-stu-id="75887-131">The `Delegate` level is a powerful feature that should be used with care.</span></span> <span data-ttu-id="75887-132">Nur vertrauenswürdigen Serveranwendungen sollte die Berechtigung gegeben werden, Anmeldeinformationen delegieren zu können.</span><span class="sxs-lookup"><span data-stu-id="75887-132">Only trusted server applications should be given the permission to delegate credentials.</span></span>  
  
 <span data-ttu-id="75887-133">Damit der Identitätswechsel mit den Ebenen `Impersonate` oder `Delegate` verwendet werden kann, muss die Serveranwendung die `SeImpersonatePrivilege`-Berechtigung aufweisen.</span><span class="sxs-lookup"><span data-stu-id="75887-133">Using impersonation at the `Impersonate` or `Delegate` levels requires the server application to have the `SeImpersonatePrivilege` privilege.</span></span> <span data-ttu-id="75887-134">Eine Anwendung verfügt standardmäßig über diese Berechtigung, wenn sie unter einem Konto in der Gruppe der Administratoren oder unter einem Konto mit einer Dienst-SID (Netzwerkdienst, lokaler Dienst oder lokales System) ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="75887-134">An application has this privilege by default if it is running on an account in the Administrators group or on an account with a Service SID (Network Service, Local Service, or Local System).</span></span> <span data-ttu-id="75887-135">Der Identitätswechsel erfordert keine gegenseitige Authentifizierung von Client und Server.</span><span class="sxs-lookup"><span data-stu-id="75887-135">Impersonation does not require mutual authentication of the client and server.</span></span> <span data-ttu-id="75887-136">Einige Authentifizierungsschemas, die einen Identitätswechsel unterstützen, wie NTLM, können nicht mit einer gegenseitigen Authentifizierung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="75887-136">Some authentication schemes that support impersonation, such as NTLM, cannot be used with mutual authentication.</span></span>  
  
## <a name="transport-specific-issues-with-impersonation"></a><span data-ttu-id="75887-137">Transportspezifische Aspekte beim Identitätswechsel</span><span class="sxs-lookup"><span data-stu-id="75887-137">Transport-Specific Issues with Impersonation</span></span>  
 <span data-ttu-id="75887-138">Die Auswahl des Transports in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] beeinflusst die möglichen Optionen für den Identitätswechsel.</span><span class="sxs-lookup"><span data-stu-id="75887-138">The choice of a transport in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] affects the possible choices for impersonation.</span></span> <span data-ttu-id="75887-139">In diesem Abschnitt werden die Aspekte beschrieben, die sich auf Standard-HTTP- und Named Pipe-Transporte in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] auswirken.</span><span class="sxs-lookup"><span data-stu-id="75887-139">This section describes issues affecting the standard HTTP and named pipe transports in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span> <span data-ttu-id="75887-140">Benutzerspezifische Transporte haben ihre eigenen Einschränkungen in Bezug auf die Unterstützung eines Identitätswechsels.</span><span class="sxs-lookup"><span data-stu-id="75887-140">Custom transports have their own restrictions on support for impersonation.</span></span>  
  
### <a name="named-pipe-transport"></a><span data-ttu-id="75887-141">Named Pipe-Transport</span><span class="sxs-lookup"><span data-stu-id="75887-141">Named Pipe Transport</span></span>  
 <span data-ttu-id="75887-142">Die folgenden Elemente werden mit dem Named Pipe-Transport verwendet:</span><span class="sxs-lookup"><span data-stu-id="75887-142">The following items are used with the named pipe transport:</span></span>  
  
-   <span data-ttu-id="75887-143">Der Named Pipe-Transport ist nur für die Verwendung auf dem lokalen Computer bestimmt.</span><span class="sxs-lookup"><span data-stu-id="75887-143">The named pipe transport is intended for use only on the local machine.</span></span> <span data-ttu-id="75887-144">Der Named Pipe-Transport in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] lässt explizit keine computerübergreifenden Verbindungen zu.</span><span class="sxs-lookup"><span data-stu-id="75887-144">The named pipe transport in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] explicitly disallows cross-machine connections.</span></span>  
  
-   <span data-ttu-id="75887-145">Named Pipes können nicht mit den Identitätswechselebenen `Impersonate` und `Delegate` verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="75887-145">Named pipes cannot be used with the `Impersonate` or `Delegate` impersonation level.</span></span> <span data-ttu-id="75887-146">Die Named Pipe kann bei diesen Identitätswechselebenen keine computerinterne Kommunikation garantieren.</span><span class="sxs-lookup"><span data-stu-id="75887-146">The named pipe cannot enforce the on-machine guarantee at these impersonation levels.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="75887-147">benannte Pipes, finden Sie unter [Wählen eines Transports](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span><span class="sxs-lookup"><span data-stu-id="75887-147"> named pipes, see [Choosing a Transport](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span></span>  
  
### <a name="http-transport"></a><span data-ttu-id="75887-148">HTTP-Transport</span><span class="sxs-lookup"><span data-stu-id="75887-148">HTTP Transport</span></span>  
 <span data-ttu-id="75887-149">Die Bindungen, die den HTTP-Transport verwenden (<xref:System.ServiceModel.WSHttpBinding> und <xref:System.ServiceModel.BasicHttpBinding>) mehrere Authentifizierungsschemen zu unterstützen, wie in beschrieben [Grundlegendes zu HTTP-Authentifizierung](../../../../docs/framework/wcf/feature-details/understanding-http-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="75887-149">The bindings that use the HTTP transport (<xref:System.ServiceModel.WSHttpBinding> and <xref:System.ServiceModel.BasicHttpBinding>) support several authentication schemes, as explained in [Understanding HTTP Authentication](../../../../docs/framework/wcf/feature-details/understanding-http-authentication.md).</span></span> <span data-ttu-id="75887-150">Die unterstützte Ebene des Identitätswechsels ist abhängig vom Authentifizierungsschema.</span><span class="sxs-lookup"><span data-stu-id="75887-150">The impersonation level supported depends on the authentication scheme.</span></span> <span data-ttu-id="75887-151">Die folgenden Elemente werden mit dem HTTP-Transport verwendet:</span><span class="sxs-lookup"><span data-stu-id="75887-151">The following items are used with the HTTP transport:</span></span>  
  
-   <span data-ttu-id="75887-152">Das `Anonymous`-Authentifizierungsschema ignoriert den Identitätswechsel.</span><span class="sxs-lookup"><span data-stu-id="75887-152">The `Anonymous` authentication scheme ignores impersonation.</span></span>  
  
-   <span data-ttu-id="75887-153">Die `Basic` -Authentifizierungsschema unterstützt nur die `Delegate` Ebene.</span><span class="sxs-lookup"><span data-stu-id="75887-153">The `Basic` authentication scheme supports only the `Delegate` level.</span></span> <span data-ttu-id="75887-154">Alle niedrigeren Identitätswechselebenen werden hochgestuft.</span><span class="sxs-lookup"><span data-stu-id="75887-154">All lower impersonation levels are upgraded.</span></span>  
  
-   <span data-ttu-id="75887-155">Das `Digest`-Authentifizierungsschema unterstützt nur die `Impersonate`-Ebene und die `Delegate`-Ebene.</span><span class="sxs-lookup"><span data-stu-id="75887-155">The `Digest` authentication scheme supports only the `Impersonate` and `Delegate` levels.</span></span>  
  
-   <span data-ttu-id="75887-156">Das `NTLM`-Authentifizierungsschema, das entweder direkt oder durch Aushandlung ausgewählt werden kann, unterstützt nur die `Delegate`-Ebene auf dem lokalen Computer.</span><span class="sxs-lookup"><span data-stu-id="75887-156">The `NTLM` authentication scheme, selectable either directly or through negotiation, supports only the `Delegate` level on the local machine.</span></span>  
  
-   <span data-ttu-id="75887-157">Das Kerberos-Authentifizierungsschema, das nur durch Aushandlung ausgewählt werden kann, kann mit allen unterstützten Ebenen des Identitätswechsels verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="75887-157">The Kerberos authentication scheme, which can only be selected through negotiation, can be used with any supported impersonation level.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="75887-158">der HTTP-Transport, finden Sie unter [Wählen eines Transports](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span><span class="sxs-lookup"><span data-stu-id="75887-158"> the HTTP transport, see [Choosing a Transport](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="75887-159">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="75887-159">See Also</span></span>  
 [<span data-ttu-id="75887-160">Delegierung und Identitätswechsel</span><span class="sxs-lookup"><span data-stu-id="75887-160">Delegation and Impersonation</span></span>](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md)  
 [<span data-ttu-id="75887-161">Autorisierung</span><span class="sxs-lookup"><span data-stu-id="75887-161">Authorization</span></span>](../../../../docs/framework/wcf/feature-details/authorization-in-wcf.md)  
 [<span data-ttu-id="75887-162">Vorgehensweise: Annahme der Clientidentität durch einen Dienst</span><span class="sxs-lookup"><span data-stu-id="75887-162">How to: Impersonate a Client on a Service</span></span>](../../../../docs/framework/wcf/how-to-impersonate-a-client-on-a-service.md)  
 [<span data-ttu-id="75887-163">Grundlegendes zu HTTP-Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="75887-163">Understanding HTTP Authentication</span></span>](../../../../docs/framework/wcf/feature-details/understanding-http-authentication.md)
