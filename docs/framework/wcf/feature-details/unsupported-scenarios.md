---
title: Nicht unterstützte Szenarien
ms.date: 03/30/2017
ms.assetid: 72027d0f-146d-40c5-9d72-e94392c8bb40
ms.openlocfilehash: a3ee91e5232926b4ea7db80db35d9a309ca8105b
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/15/2020
ms.locfileid: "90557813"
---
# <a name="unsupported-scenarios"></a><span data-ttu-id="3fded-102">Nicht unterstützte Szenarien</span><span class="sxs-lookup"><span data-stu-id="3fded-102">Unsupported scenarios</span></span>

<span data-ttu-id="3fded-103">Aus verschiedenen Gründen unterstützt Windows Communication Foundation (WCF) einige bestimmte Sicherheits Szenarios nicht.</span><span class="sxs-lookup"><span data-stu-id="3fded-103">For various reasons, Windows Communication Foundation (WCF) does not support some specific security scenarios.</span></span> <span data-ttu-id="3fded-104">Beispielsweise implementiert Windows XP Home Edition die SSPI-oder Kerberos-Authentifizierungsprotokolle nicht, weshalb WCF das Ausführen eines Dienstanbieter mit Windows-Authentifizierung auf dieser Plattform nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="3fded-104">For example, Windows XP Home Edition does not implement the SSPI or Kerberos authentication protocols, and therefore WCF does not support running a service with Windows authentication on that platform.</span></span> <span data-ttu-id="3fded-105">Andere Authentifizierungsmechanismen, z. b. Benutzername/Kennwort und integrierte HTTP/HTTPS-Authentifizierung, werden bei der Ausführung von WCF unter Windows XP Home Edition unterstützt.</span><span class="sxs-lookup"><span data-stu-id="3fded-105">Other authentication mechanisms, such as username/password and HTTP/HTTPS integrated authentication are supported when running WCF under Windows XP Home Edition.</span></span>

## <a name="impersonation-scenarios"></a><span data-ttu-id="3fded-106">Identitätswechsel Szenarien</span><span class="sxs-lookup"><span data-stu-id="3fded-106">Impersonation scenarios</span></span>

### <a name="impersonated-identity-might-not-flow-when-clients-make-asynchronous-calls"></a><span data-ttu-id="3fded-107">Identität mit Identitätswechsel wird bei asynchronen Aufrufen von Clients möglicherweise nicht durchgeführt</span><span class="sxs-lookup"><span data-stu-id="3fded-107">Impersonated identity might not flow when clients make asynchronous calls</span></span>
 <span data-ttu-id="3fded-108">Wenn ein WCF-Client unter Verwendung der Windows-Authentifizierung mit einem Identitätswechsel asynchrone Aufrufe eines WCF-Dienstes ausführt, kann die Authentifizierung mit der Identität des Clientprozesses anstelle der gewechselten Identität erfolgen.</span><span class="sxs-lookup"><span data-stu-id="3fded-108">When a WCF client makes asynchronous calls to a WCF service using Windows authentication under impersonation, authentication might occur with the identity of the client process instead of the impersonated identity.</span></span>

### <a name="windows-xp-and-secure-context-token-cookie-enabled"></a><span data-ttu-id="3fded-109">Windows XP und sicheres Kontext Token-Cookie aktiviert</span><span class="sxs-lookup"><span data-stu-id="3fded-109">Windows XP and secure context token cookie enabled</span></span>

<span data-ttu-id="3fded-110">WCF unterstützt keinen Identitätswechsel, und eine wird ausgelöst, <xref:System.InvalidOperationException> Wenn die folgenden Bedingungen erfüllt sind:</span><span class="sxs-lookup"><span data-stu-id="3fded-110">WCF does not support impersonation and an <xref:System.InvalidOperationException> is thrown when the following conditions exist:</span></span>

- <span data-ttu-id="3fded-111">Das Betriebssystem ist Windows XP.</span><span class="sxs-lookup"><span data-stu-id="3fded-111">The operating system is Windows XP.</span></span>

- <span data-ttu-id="3fded-112">Der Authentifizierungsmodus ruft eine Windows-Identität hervor.</span><span class="sxs-lookup"><span data-stu-id="3fded-112">The authentication mode results in a Windows identity.</span></span>

- <span data-ttu-id="3fded-113">Für die Eigenschaft <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> des <xref:System.ServiceModel.OperationBehaviorAttribute> wird der Wert <xref:System.ServiceModel.ImpersonationOption.Required> festgelegt.</span><span class="sxs-lookup"><span data-stu-id="3fded-113">The <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> property of the <xref:System.ServiceModel.OperationBehaviorAttribute> is set to <xref:System.ServiceModel.ImpersonationOption.Required>.</span></span>

- <span data-ttu-id="3fded-114">Ein statusbasiertes Sicherheitszustandskontexttoken (SCT) wird erstellt. (Standardmäßig ist die Erstellung deaktiviert.)</span><span class="sxs-lookup"><span data-stu-id="3fded-114">A state-based security context token (SCT) is created (by default, creation is disabled).</span></span>

 <span data-ttu-id="3fded-115">Das statusbasierte SCT kann nur mit einer benutzerdefinierten Bindung erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="3fded-115">The state-based SCT can only be created using a custom binding.</span></span> <span data-ttu-id="3fded-116">Weitere Informationen finden Sie unter Vorgehens [Weise: Erstellen eines Sicherheitskontext Tokens für eine sichere Sitzung](how-to-create-a-security-context-token-for-a-secure-session.md).) Im Code wird das Token aktiviert, indem ein sicherheitsbindungs Element (entweder <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> oder <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> ) mithilfe der- <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement%28System.Boolean%29?displayProperty=nameWithType> Methode oder der <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSecureConversationBindingElement%28System.ServiceModel.Channels.SecurityBindingElement%2CSystem.Boolean%29?displayProperty=nameWithType> -Methode erstellt und der-Parameter auf festgelegt wird `requireCancellation` `false` .</span><span class="sxs-lookup"><span data-stu-id="3fded-116">For more information, see [How to: Create a Security Context Token for a Secure Session](how-to-create-a-security-context-token-for-a-secure-session.md).) In code, the token is enabled by creating a security binding element (either <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> or <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>) using the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement%28System.Boolean%29?displayProperty=nameWithType> or the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSecureConversationBindingElement%28System.ServiceModel.Channels.SecurityBindingElement%2CSystem.Boolean%29?displayProperty=nameWithType> method and setting the `requireCancellation` parameter to `false`.</span></span> <span data-ttu-id="3fded-117">Der Parameter bezieht sich auf die Zwischenspeicherung des SCT.</span><span class="sxs-lookup"><span data-stu-id="3fded-117">The parameter refers to the caching of the SCT.</span></span> <span data-ttu-id="3fded-118">Wenn Sie den Wert auf `false` festlegen, wird die statusbasierte SCT-Funktion aktiviert.</span><span class="sxs-lookup"><span data-stu-id="3fded-118">Setting the value to `false` enables the state-based SCT feature.</span></span>

 <span data-ttu-id="3fded-119">Alternativ wird das Token in der Konfiguration aktiviert, indem ein <`customBinding`> erstellt, dann ein <`security`> Element hinzugefügt und das- `authenticationMode` Attribut auf SecureConversation und das- `requireSecurityContextCancellation` Attribut auf festgelegt wird `true` .</span><span class="sxs-lookup"><span data-stu-id="3fded-119">Alternatively, in configuration, the token is enabled by creating a <`customBinding`>, then adding a <`security`> element, and setting the `authenticationMode` attribute to SecureConversation and the `requireSecurityContextCancellation` attribute to `true`.</span></span>

> [!NOTE]
> <span data-ttu-id="3fded-120">Die zuvor genannten Anforderungen sind spezifisch.</span><span class="sxs-lookup"><span data-stu-id="3fded-120">The preceding requirements are specific.</span></span> <span data-ttu-id="3fded-121">Beispielsweise erstellt das <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosBindingElement%2A> ein Bindungselement, das zu einer Windows-Identität führt, wobei aber kein SCT eingerichtet wird.</span><span class="sxs-lookup"><span data-stu-id="3fded-121">For example, the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosBindingElement%2A> creates a binding element that results in a Windows identity, but does not establish an SCT.</span></span> <span data-ttu-id="3fded-122">Daher können Sie Sie mit der Option unter `Required` Windows XP verwenden.</span><span class="sxs-lookup"><span data-stu-id="3fded-122">Therefore, you can use it with the `Required` option on Windows XP.</span></span>

### <a name="possible-aspnet-conflict"></a><span data-ttu-id="3fded-123">Möglicher ASP.net-Konflikt</span><span class="sxs-lookup"><span data-stu-id="3fded-123">Possible ASP.NET conflict</span></span>

<span data-ttu-id="3fded-124">WCF und ASP.net können den Identitätswechsel aktivieren oder deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="3fded-124">WCF and ASP.NET can both enable or disable impersonation.</span></span> <span data-ttu-id="3fded-125">Wenn ASP.net eine WCF-Anwendung hostet, besteht möglicherweise ein Konflikt zwischen den WCF-und ASP.NET-Konfigurationseinstellungen.</span><span class="sxs-lookup"><span data-stu-id="3fded-125">When ASP.NET hosts a WCF application, a conflict may exist between the WCF and ASP.NET configuration settings.</span></span> <span data-ttu-id="3fded-126">Bei einem Konflikt hat die WCF-Einstellung Vorrang, es sei denn <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> , die-Eigenschaft ist auf festgelegt <xref:System.ServiceModel.ImpersonationOption.NotAllowed> . in diesem Fall hat die ASP.NET-Identitätswechsel Einstellung Vorrang.</span><span class="sxs-lookup"><span data-stu-id="3fded-126">In case of conflict, the WCF setting takes precedence, unless the <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> property is set to <xref:System.ServiceModel.ImpersonationOption.NotAllowed>, in which case the ASP.NET impersonation setting takes precedence.</span></span>

### <a name="assembly-loads-may-fail-under-impersonation"></a><span data-ttu-id="3fded-127">Beim Identitätswechsel können assemblylade Vorgänge fehlschlagen.</span><span class="sxs-lookup"><span data-stu-id="3fded-127">Assembly loads may fail under impersonation</span></span>

<span data-ttu-id="3fded-128">Wenn der Identitätswechselkontext keine Zugriffsberechtigungen zum Laden einer Assembly hat und es das erste Mal ist, dass die Common Language Runtime (CLR) versucht, die Assembly für diese Anwendungsdomäne zu laden, speichert die <xref:System.AppDomain> den Fehler zwischen.</span><span class="sxs-lookup"><span data-stu-id="3fded-128">If the impersonated context does not have access rights to load an assembly and if it is the first time the common language runtime (CLR) is attempting to load the assembly for that AppDomain, the <xref:System.AppDomain> caches the failure.</span></span> <span data-ttu-id="3fded-129">Nachfolgende Versuche, diese Assembly(s) zu laden, schlagen fehl, selbst nach dem Zurücksetzen des Identitätswechsels und sogar wenn der zurückgesetzte Kontext die Zugriffsberechtigungen hat, die Assembly zu laden.</span><span class="sxs-lookup"><span data-stu-id="3fded-129">Subsequent attempts to load that assembly (or assemblies) fail, even after reverting the impersonation, and even if the reverted context has access rights to load the assembly.</span></span> <span data-ttu-id="3fded-130">Dies liegt daran, dass die CLR den Ladevorgang nicht erneut versucht, nachdem der Benutzer Kontext geändert wurde.</span><span class="sxs-lookup"><span data-stu-id="3fded-130">This is because the CLR does not reattempt the load after the user context is changed.</span></span> <span data-ttu-id="3fded-131">Sie müssen die Anwendungsdomäne neu starten, um nach dem Fehler wiederhergestellt zu werden.</span><span class="sxs-lookup"><span data-stu-id="3fded-131">You must restart the application domain to recover from the failure.</span></span>

> [!NOTE]
> <span data-ttu-id="3fded-132">Der Standardwert für die <xref:System.ServiceModel.Security.WindowsClientCredential.AllowedImpersonationLevel%2A>-Eigenschaft der <xref:System.ServiceModel.Security.WindowsClientCredential>-Klasse ist <xref:System.Security.Principal.TokenImpersonationLevel.Identification>.</span><span class="sxs-lookup"><span data-stu-id="3fded-132">The default value for the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowedImpersonationLevel%2A> property of the <xref:System.ServiceModel.Security.WindowsClientCredential> class is <xref:System.Security.Principal.TokenImpersonationLevel.Identification>.</span></span> <span data-ttu-id="3fded-133">In den meisten Fällen hat ein Identitätswechsel auf Identifizierungsebene nicht die Berechtigung, zusätzliche Assemblys zu laden.</span><span class="sxs-lookup"><span data-stu-id="3fded-133">In most cases, an identification-level impersonation context has no rights to load any additional assemblies.</span></span> <span data-ttu-id="3fded-134">Dies ist der Standardwert. Es handelt sich somit um eine sehr übliche Bedingung, derer Sie sich bewusst sein sollten.</span><span class="sxs-lookup"><span data-stu-id="3fded-134">This is the default value, so this is a very common condition to be aware of.</span></span> <span data-ttu-id="3fded-135">Der Identitätswechsel auf Identifizierungsebene kann auch dann auftreten, wenn der Identitätswechselvorgang nicht die `SeImpersonate`-Berechtigung hat.</span><span class="sxs-lookup"><span data-stu-id="3fded-135">Identification-level impersonation also occurs when the impersonating process does not have the `SeImpersonate` privilege.</span></span> <span data-ttu-id="3fded-136">Weitere Informationen finden Sie unter [Delegierung und](delegation-and-impersonation-with-wcf.md)Identitätswechsel.</span><span class="sxs-lookup"><span data-stu-id="3fded-136">For more information, see [Delegation and Impersonation](delegation-and-impersonation-with-wcf.md).</span></span>

### <a name="delegation-requires-credential-negotiation"></a><span data-ttu-id="3fded-137">Delegierung erfordert die Aushandlung von Anmelde Informationen</span><span class="sxs-lookup"><span data-stu-id="3fded-137">Delegation requires credential negotiation</span></span>

<span data-ttu-id="3fded-138">Um das Kerberos-Authentifizierungsprotokoll mit Delegierung zu verwenden, müssen Sie das Kerberos-Protokoll mit Anmeldeinformationen-Aushandlung (mitunter als bilaterales oder mehrstufiges Kerberos bezeichnet) implementieren.</span><span class="sxs-lookup"><span data-stu-id="3fded-138">To use the Kerberos authentication protocol with delegation, you must implement the Kerberos protocol with credential negotiation (sometimes called multi-leg or multi-step Kerberos).</span></span> <span data-ttu-id="3fded-139">Wenn Sie die Kerberos-Authentifizierung ohne Anmeldeinformationen-Aushandlung (mitunter als One-Shot-Kerberos bezeichnet) implementieren, wird eine Ausnahme ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="3fded-139">If you implement Kerberos authentication without credential negotiation (sometimes called one-shot or single-leg Kerberos), an exception is thrown.</span></span> <span data-ttu-id="3fded-140">Weitere Informationen zum Implementieren der Aushandlung von Anmelde Informationen finden Sie unter [Debuggen von Windows-Authentifizierungs Fehlern](debugging-windows-authentication-errors.md).</span><span class="sxs-lookup"><span data-stu-id="3fded-140">For more information about how to implement credential negotiation, see [Debugging Windows Authentication Errors](debugging-windows-authentication-errors.md).</span></span>

## <a name="cryptography"></a><span data-ttu-id="3fded-141">Kryptografie</span><span class="sxs-lookup"><span data-stu-id="3fded-141">Cryptography</span></span>

### <a name="sha-256-supported-only-for-symmetric-key-usages"></a><span data-ttu-id="3fded-142">SHA-256 wird nur für die Verwendung von symmetrischen Schlüsseln unterstützt.</span><span class="sxs-lookup"><span data-stu-id="3fded-142">SHA-256 supported only for symmetric key usages</span></span>

<span data-ttu-id="3fded-143">WCF unterstützt eine Vielzahl von Algorithmen zum Erstellen von Verschlüsselungs-und Signatur Digest, die Sie mithilfe der Algorithmussuite in den vom System bereitgestellten Bindungen angeben können.</span><span class="sxs-lookup"><span data-stu-id="3fded-143">WCF supports a variety of encryption and signature digest creation algorithms that you can specify using the algorithm suite in the system-provided bindings.</span></span> <span data-ttu-id="3fded-144">Um die Sicherheit zu verbessern, unterstützt WCF Secure Hash Algorithmus (SHA) 2-Algorithmen (insbesondere SHA-256) zum Erstellen von Signatur Hash Hashs.</span><span class="sxs-lookup"><span data-stu-id="3fded-144">For improved security, WCF supports Secure Hash Algorithm (SHA) 2 algorithms, specifically SHA-256, for creating signature digest hashes.</span></span> <span data-ttu-id="3fded-145">Dieses Release unterstützt SHA-256 nur für Einsätze mit symmetrischen Schlüsseln, z. B. Kerberos-Schlüssel und wenn kein X.509-Zertifikat zum Signieren der Nachricht verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="3fded-145">This release supports SHA-256 only for symmetric key usages, such as Kerberos keys, and where an X.509 certificate is not used to sign the message.</span></span> <span data-ttu-id="3fded-146">WCF unterstützt keine RSA-Signaturen (in X. 509-Zertifikaten verwendet) mithilfe von SHA-256-Hash aufgrund der aktuellen fehlenden Unterstützung für RSA-SHA256 in WinFX.</span><span class="sxs-lookup"><span data-stu-id="3fded-146">WCF does not support RSA signatures (used in X.509 certificates) using SHA-256 hash due to the current lack of support for RSA-SHA256 in the WinFX.</span></span>

### <a name="fips-compliant-sha-256-hashes-not-supported"></a><span data-ttu-id="3fded-147">Mit dem PPS kompatible SHA-256-Hashes werden nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="3fded-147">FIPS-compliant SHA-256 hashes not supported</span></span>

<span data-ttu-id="3fded-148">WCF unterstützt keine SHA-256-fps-kompatiblen Hashes, sodass Algorithmussuites, die SHA-256 verwenden, von WCF nicht auf Systemen unterstützt werden, in denen die Verwendung von mit der Verwendung von PPS kompatiblen Algorithmen erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="3fded-148">WCF does not support SHA-256 FIPS-compliant hashes, so algorithm suites that use SHA-256 are not supported by WCF on systems where use of FIPS-compliant algorithms is required.</span></span>

### <a name="fips-compliant-algorithms-may-fail-if-registry-is-edited"></a><span data-ttu-id="3fded-149">Bei der Bearbeitung der Registrierung treten möglicherweise Fehler auf.</span><span class="sxs-lookup"><span data-stu-id="3fded-149">FIPS-compliant algorithms may fail if registry is edited</span></span>

<span data-ttu-id="3fded-150">Sie können Federal Information Processing Standards (FIPS)-kompatible Algorithmen aktivieren und deaktivieren, indem Sie das Snap-In Lokale Sicherheitseinstellungen der Microsoft Management Console (MMC) verwenden.</span><span class="sxs-lookup"><span data-stu-id="3fded-150">You can enable and disable Federal Information Processing Standards (FIPS)-compliant algorithms by using the Local Security Settings Microsoft Management Console (MMC) snap-in.</span></span> <span data-ttu-id="3fded-151">Sie können auch auf die Einstellung in der Registrierung zugreifen.</span><span class="sxs-lookup"><span data-stu-id="3fded-151">You can also access the setting in the registry.</span></span> <span data-ttu-id="3fded-152">Beachten Sie jedoch, dass WCF das Zurücksetzen der Einstellung mithilfe der Registrierung nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="3fded-152">Note, however, that WCF does not support using the registry to reset the setting.</span></span> <span data-ttu-id="3fded-153">Wenn ein anderer Wert als 1 oder 0 festgelegt wurde, können zwischen CLR und dem Betriebssystem inkonsistente Ergebnisse auftreten.</span><span class="sxs-lookup"><span data-stu-id="3fded-153">If the value is set to anything other than 1 or 0, inconsistent results can occur between the CLR and the operating system.</span></span>

### <a name="fips-compliant-aes-encryption-limitation"></a><span data-ttu-id="3fded-154">Einschränkung der Konformität mit der Konformität mit der Konformität mit der Konformität</span><span class="sxs-lookup"><span data-stu-id="3fded-154">FIPS-compliant AES encryption limitation</span></span>

<span data-ttu-id="3fded-155">Die mit der PPS-kompatible AES-Verschlüsselung funktioniert nicht bei Duplex Rückrufen bei Identitätswechsel auf Identifizierungs Ebene.</span><span class="sxs-lookup"><span data-stu-id="3fded-155">FIPS-compliant AES encryption does not work in duplex callbacks under identification level impersonation.</span></span>

### <a name="cngksp-certificates"></a><span data-ttu-id="3fded-156">CNG/KSP-Zertifikate</span><span class="sxs-lookup"><span data-stu-id="3fded-156">CNG/KSP certificates</span></span>

<span data-ttu-id="3fded-157">*Cryptography API: Next Generation (CNG)* ist die langfristige Ersetzung der CryptoAPI.</span><span class="sxs-lookup"><span data-stu-id="3fded-157">*Cryptography API: Next Generation (CNG)* is the long-term replacement for the CryptoAPI.</span></span> <span data-ttu-id="3fded-158">Diese API ist in nicht verwaltetem Code unter Windows Vista, Windows Server 2008 und späteren Windows-Versionen verfügbar.</span><span class="sxs-lookup"><span data-stu-id="3fded-158">This API is available in unmanaged code on Windows Vista, Windows Server 2008, and later Windows versions.</span></span>

 <span data-ttu-id="3fded-159">.NET Framework 4.6.1 und frühere Versionen unterstützen diese Zertifikate nicht, da Sie die Legacy-CryptoAPI verwenden, um CNG/KSP-Zertifikate zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="3fded-159">.NET Framework 4.6.1 and earlier versions do not support these certificates because they use the legacy CryptoAPI to handle CNG/KSP certificates.</span></span> <span data-ttu-id="3fded-160">Die Verwendung dieser Zertifikate mit .NET Framework 4.6.1 und früheren Versionen führt zu einer Ausnahme.</span><span class="sxs-lookup"><span data-stu-id="3fded-160">The use of these certificates with   .NET Framework 4.6.1 and earlier versions will cause an exception.</span></span>

 <span data-ttu-id="3fded-161">Ob KSP von einem Zertifikat verwendet wird, kann auf zwei Arten ermittelt werden:</span><span class="sxs-lookup"><span data-stu-id="3fded-161">There are two possible ways to tell if a certificate uses KSP:</span></span>

- <span data-ttu-id="3fded-162">Führen Sie `p/invoke` für die `CertGetCertificateContextProperty` aus, und überprüfen Sie `dwProvType` in der zurückgegebenen `CertGetCertificateContextProperty`.</span><span class="sxs-lookup"><span data-stu-id="3fded-162">Do a `p/invoke` of `CertGetCertificateContextProperty`, and inspect `dwProvType` on the returned `CertGetCertificateContextProperty`.</span></span>

- <span data-ttu-id="3fded-163">Verwenden Sie den  `certutil` Befehl in der Befehlszeile zum Abfragen von Zertifikaten.</span><span class="sxs-lookup"><span data-stu-id="3fded-163">Use the  `certutil` command from the command line for querying certificates.</span></span> <span data-ttu-id="3fded-164">Weitere Informationen finden Sie unter [certutil-Aufgaben für die Problembehandlung von Zertifikaten](/previous-versions/orphan-topics/ws.10/cc772619(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="3fded-164">For more information, see [Certutil tasks for troubleshooting certificates](/previous-versions/orphan-topics/ws.10/cc772619(v=ws.10)).</span></span>

## <a name="message-security-fails-if-using-aspnet-impersonation-and-aspnet-compatibility-is-required"></a><span data-ttu-id="3fded-165">Nachrichten Sicherheit schlägt fehl, wenn die Verwendung von ASP.NET-Identitätswechsel und ASP.NET-Kompatibilität erforderlich ist</span><span class="sxs-lookup"><span data-stu-id="3fded-165">Message security fails if using ASP.NET impersonation and ASP.NET compatibility is required</span></span>

<span data-ttu-id="3fded-166">WCF unterstützt die folgende Kombination von Einstellungen nicht, da Sie verhindern können, dass die Client Authentifizierung stattfindet:</span><span class="sxs-lookup"><span data-stu-id="3fded-166">WCF does not support the following combination of settings because they can prevent client authentication from occurring:</span></span>

- <span data-ttu-id="3fded-167">ASP.NET Identitätswechsel ist aktiviert.</span><span class="sxs-lookup"><span data-stu-id="3fded-167">ASP.NET Impersonation is enabled.</span></span> <span data-ttu-id="3fded-168">Dies erfolgt in der Web.config-Datei durch Festlegen des- `impersonate` Attributs des <`identity`>-Elements auf `true` .</span><span class="sxs-lookup"><span data-stu-id="3fded-168">This is done in the Web.config file by setting the `impersonate` attribute of the <`identity`> element to `true`.</span></span>

- <span data-ttu-id="3fded-169">Der ASP.NET-Kompatibilitätsmodus wird aktiviert, indem das- `aspNetCompatibilityEnabled` Attribut des auf festgelegt wird [\<serviceHostingEnvironment>](../../configure-apps/file-schema/wcf/servicehostingenvironment.md) `true` .</span><span class="sxs-lookup"><span data-stu-id="3fded-169">ASP.NET compatibility mode is enabled by setting the `aspNetCompatibilityEnabled` attribute of the [\<serviceHostingEnvironment>](../../configure-apps/file-schema/wcf/servicehostingenvironment.md) to `true`.</span></span>

- <span data-ttu-id="3fded-170">Die Nachrichtenmodussicherheit wird verwendet.</span><span class="sxs-lookup"><span data-stu-id="3fded-170">Message mode security is used.</span></span>

<span data-ttu-id="3fded-171">Die Problem Umgehung besteht darin, den ASP.NET-Kompatibilitätsmodus zu deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="3fded-171">The work-around is to turn off the ASP.NET compatibility mode.</span></span> <span data-ttu-id="3fded-172">Wenn der ASP.NET-Kompatibilitätsmodus erforderlich ist, deaktivieren Sie das Feature ASP.NET-Identitätswechsel, und verwenden Sie stattdessen den von WCF bereitgestellten Identitätswechsel.</span><span class="sxs-lookup"><span data-stu-id="3fded-172">Or, if the ASP.NET compatibility mode is required, disable the ASP.NET impersonation feature and use WCF-provided impersonation instead.</span></span> <span data-ttu-id="3fded-173">Weitere Informationen finden Sie unter [Delegierung und](delegation-and-impersonation-with-wcf.md)Identitätswechsel.</span><span class="sxs-lookup"><span data-stu-id="3fded-173">For more information, see [Delegation and Impersonation](delegation-and-impersonation-with-wcf.md).</span></span>

## <a name="ipv6-literal-address-failure"></a><span data-ttu-id="3fded-174">IPv6-literaladressfehler</span><span class="sxs-lookup"><span data-stu-id="3fded-174">IPv6 literal address failure</span></span>

<span data-ttu-id="3fded-175">Bei Sicherheitsanforderungen tritt ein Fehler auf, wenn sich Client und Dienst auf dem gleichen Computer befinden und für den Dienst IPv6-Literaladressen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="3fded-175">Security requests fail when the client and service are on the same machine, and IPv6 literal addresses are used for the service.</span></span>

 <span data-ttu-id="3fded-176">IPv6-Literal-Adressen funktionieren, wenn der Dienst und der Client sich auf unterschiedlichen Computern befinden.</span><span class="sxs-lookup"><span data-stu-id="3fded-176">Literal IPv6 addresses work if the service and client are on different machines.</span></span>

## <a name="wsdl-retrieval-failures-with-federated-trust"></a><span data-ttu-id="3fded-177">WSDL-Abruf Fehler mit Verbund Vertrauensstellung</span><span class="sxs-lookup"><span data-stu-id="3fded-177">WSDL retrieval failures with federated trust</span></span>

<span data-ttu-id="3fded-178">WCF erfordert genau ein WSDL-Dokument für jeden Knoten in der Verbund Vertrauenskette.</span><span class="sxs-lookup"><span data-stu-id="3fded-178">WCF requires exactly one WSDL document for each node in the federated trust chain.</span></span> <span data-ttu-id="3fded-179">Achten Sie darauf, beim Angeben von Endpunkten keine Schleife einzurichten.</span><span class="sxs-lookup"><span data-stu-id="3fded-179">Be careful not to set up a loop when specifying endpoints.</span></span> <span data-ttu-id="3fded-180">Eine Schleife kann beispielsweise bei Verwendung eines WSDL-Downloads von Vertrauensketten des Verbunds entstehen, wenn das gleiche WSDL-Dokument mehrere Links enthält.</span><span class="sxs-lookup"><span data-stu-id="3fded-180">One way in which loops can arise is using a WSDL download of federated trust chains with two or more links in the same WSDL document.</span></span> <span data-ttu-id="3fded-181">Ein häufig auftretendes Szenario für dieses Problem ist ein Verbunddienst, bei dem sich der Sicherheitstokenserver und der Dienst im gleichen ServiceHost befinden.</span><span class="sxs-lookup"><span data-stu-id="3fded-181">A common scenario that can produce this problem is a federated service where the Security Token Server and the service are contained inside the same ServiceHost.</span></span>

 <span data-ttu-id="3fded-182">Ein Beispiel für diese Situation ist ein Dienst mit den folgenden drei Endpunktadressen:</span><span class="sxs-lookup"><span data-stu-id="3fded-182">An example of this situation is a service with the following three endpoint addresses:</span></span>

- <span data-ttu-id="3fded-183">`http://localhost/CalculatorService/service` (der Dienst)</span><span class="sxs-lookup"><span data-stu-id="3fded-183">`http://localhost/CalculatorService/service` (the service)</span></span>

- <span data-ttu-id="3fded-184">`http://localhost/CalculatorService/issue_ticket` (STS)</span><span class="sxs-lookup"><span data-stu-id="3fded-184">`http://localhost/CalculatorService/issue_ticket` (the STS)</span></span>

- <span data-ttu-id="3fded-185">`http://localhost/CalculatorService/mex` (der Metadatenendpunkt)</span><span class="sxs-lookup"><span data-stu-id="3fded-185">`http://localhost/CalculatorService/mex` (the metadata endpoint)</span></span>

 <span data-ttu-id="3fded-186">Dadurch wird eine Ausnahme ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="3fded-186">This throws an exception.</span></span>

 <span data-ttu-id="3fded-187">Verlegen Sie den `issue_ticket`-Endpunkt, damit dieses Szenario funktioniert.</span><span class="sxs-lookup"><span data-stu-id="3fded-187">You can make this scenario work by putting the `issue_ticket` endpoint elsewhere.</span></span>

## <a name="wsdl-import-attributes-can-be-lost"></a><span data-ttu-id="3fded-188">WSDL-Import Attribute können verloren gehen.</span><span class="sxs-lookup"><span data-stu-id="3fded-188">WSDL import attributes can be lost</span></span>

<span data-ttu-id="3fded-189">WCF kann die Attribute eines `<wst:Claims>`-Vorlage beim Ausführen eines WSDL-Imports nicht verfolgen.</span><span class="sxs-lookup"><span data-stu-id="3fded-189">WCF loses track of the attributes on a `<wst:Claims>` element in an `RST` template when doing a WSDL import.</span></span> <span data-ttu-id="3fded-190">Dieses Problem tritt im Zuge eines WSDL-Importvorgangs auf, wenn `<Claims>``WSFederationHttpBinding.Security.Message.TokenRequestParameters` und nicht unter direkter Verwendung der Anspruchstypauflistungen angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="3fded-190">This happens during a WSDL import if you specify `<Claims>` directly in `WSFederationHttpBinding.Security.Message.TokenRequestParameters` or `IssuedSecurityTokenRequestParameters.AdditionalRequestParameters` instead of using the claim type collections directly.</span></span>  <span data-ttu-id="3fded-191">Da die Attribute beim Importieren verloren gehen, verläuft der Roundtrip der Bindung durch WSDL nicht ordnungsgemäß, und die Bindung ist auf der Clientseite ungültig.</span><span class="sxs-lookup"><span data-stu-id="3fded-191">Since the import loses the attributes, the binding does not round trip properly through WSDL and hence is incorrect on the client side.</span></span>

 <span data-ttu-id="3fded-192">Ändern Sie nach Abschluss des Importvorgangs die Bindung direkt auf dem Client, um dieses Problem zu korrigieren.</span><span class="sxs-lookup"><span data-stu-id="3fded-192">The fix is to modify the binding directly on the client after doing the import.</span></span>

## <a name="see-also"></a><span data-ttu-id="3fded-193">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="3fded-193">See also</span></span>

- [<span data-ttu-id="3fded-194">Sicherheitshinweise</span><span class="sxs-lookup"><span data-stu-id="3fded-194">Security Considerations</span></span>](security-considerations-in-wcf.md)
- [<span data-ttu-id="3fded-195">Veröffentlichung von Informationen</span><span class="sxs-lookup"><span data-stu-id="3fded-195">Information Disclosure</span></span>](information-disclosure.md)
- [<span data-ttu-id="3fded-196">Erhöhung von Rechten</span><span class="sxs-lookup"><span data-stu-id="3fded-196">Elevation of Privilege</span></span>](elevation-of-privilege.md)
- [<span data-ttu-id="3fded-197">Denial-of-Service</span><span class="sxs-lookup"><span data-stu-id="3fded-197">Denial of Service</span></span>](denial-of-service.md)
- [<span data-ttu-id="3fded-198">Manipulation</span><span class="sxs-lookup"><span data-stu-id="3fded-198">Tampering</span></span>](tampering.md)
- [<span data-ttu-id="3fded-199">Wiederholungsangriffe</span><span class="sxs-lookup"><span data-stu-id="3fded-199">Replay Attacks</span></span>](replay-attacks.md)
