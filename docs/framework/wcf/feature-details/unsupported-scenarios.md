---
title: Nicht unterstützte Szenarien
ms.date: 03/30/2017
ms.assetid: 72027d0f-146d-40c5-9d72-e94392c8bb40
ms.openlocfilehash: 6c0ee061f754e85244bffdc06cbe23aee68d2222
ms.sourcegitcommit: efff8f331fd9467f093f8ab8d23a203d6ecb5b60
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/01/2018
ms.locfileid: "43388529"
---
# <a name="unsupported-scenarios"></a><span data-ttu-id="7532f-102">Nicht unterstützte Szenarien</span><span class="sxs-lookup"><span data-stu-id="7532f-102">Unsupported Scenarios</span></span>
<span data-ttu-id="7532f-103">Aus verschiedenen Gründen unterstützt der Windows Communication Foundation (WCF) einige bestimmte Sicherheitsszenarien nicht.</span><span class="sxs-lookup"><span data-stu-id="7532f-103">For various reasons, Windows Communication Foundation (WCF) does not support some specific security scenarios.</span></span> <span data-ttu-id="7532f-104">Z. B. [!INCLUDE[wxp](../../../../includes/wxp-md.md)] Home Edition die SSPI- oder Kerberos-Authentifizierungsprotokolle nicht implementiert, und daher WCF unterstützt nicht das Ausführen eines Diensts mit Windows-Authentifizierung auf dieser Plattform.</span><span class="sxs-lookup"><span data-stu-id="7532f-104">For example, [!INCLUDE[wxp](../../../../includes/wxp-md.md)] Home Edition does not implement the SSPI or Kerberos authentication protocols, and therefore WCF does not support running a service with Windows authentication on that platform.</span></span> <span data-ttu-id="7532f-105">Andere Authentifizierungsmechanismen, wie z. B. Benutzername/Kennwort und die HTTP/HTTPS-integrierte Authentifizierung werden unterstützt, wenn WCF unter Windows XP Home Edition ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="7532f-105">Other authentication mechanisms, such as username/password and HTTP/HTTPS integrated authentication are supported when running WCF under Windows XP Home Edition.</span></span>  
  
## <a name="impersonation-scenarios"></a><span data-ttu-id="7532f-106">Identitätswechselszenarien</span><span class="sxs-lookup"><span data-stu-id="7532f-106">Impersonation Scenarios</span></span>  
  
### <a name="impersonated-identity-might-not-flow-when-clients-make-asynchronous-calls"></a><span data-ttu-id="7532f-107">Keine Weitergabe der gewechselten Identität bei asynchronen Aufrufen am Client</span><span class="sxs-lookup"><span data-stu-id="7532f-107">Impersonated Identity Might Not Flow When Clients Make Asynchronous Calls</span></span>  
 <span data-ttu-id="7532f-108">Wenn ein WCF-Client unter Verwendung der Windows-Authentifizierung mit einem Identitätswechsel asynchrone Aufrufe eines WCF-Dienstes ausführt, kann die Authentifizierung mit der Identität des Clientprozesses anstelle der gewechselten Identität erfolgen.</span><span class="sxs-lookup"><span data-stu-id="7532f-108">When a WCF client makes asynchronous calls to a WCF service using Windows authentication under impersonation, authentication might occur with the identity of the client process instead of the impersonated identity.</span></span>  
  
### <a name="windows-xp-and-secure-context-token-cookie-enabled"></a><span data-ttu-id="7532f-109">Windows XP und Sicherheitskontexttoken-Cookie aktiviert</span><span class="sxs-lookup"><span data-stu-id="7532f-109">Windows XP and Secure Context Token Cookie Enabled</span></span>  
 <span data-ttu-id="7532f-110">WCF unterstützt keinen Identitätswechsel und <xref:System.InvalidOperationException> wird ausgelöst, wenn die folgenden Bedingungen erfüllt sein:</span><span class="sxs-lookup"><span data-stu-id="7532f-110">WCF does not support impersonation and an <xref:System.InvalidOperationException> is thrown when the following conditions exist:</span></span>  
  
-   <span data-ttu-id="7532f-111">Das Betriebssystem ist [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7532f-111">The operating system is [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span>  
  
-   <span data-ttu-id="7532f-112">Der Authentifizierungsmodus ruft eine Windows-Identität hervor.</span><span class="sxs-lookup"><span data-stu-id="7532f-112">The authentication mode results in a Windows identity.</span></span>  
  
-   <span data-ttu-id="7532f-113">Die <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A>-Eigenschaft von <xref:System.ServiceModel.OperationBehaviorAttribute> wird auf <xref:System.ServiceModel.ImpersonationOption.Required> festgelegt.</span><span class="sxs-lookup"><span data-stu-id="7532f-113">The <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> property of the <xref:System.ServiceModel.OperationBehaviorAttribute> is set to <xref:System.ServiceModel.ImpersonationOption.Required>.</span></span>  
  
-   <span data-ttu-id="7532f-114">Ein statusbasiertes Sicherheitszustandskontexttoken (SCT) wird erstellt. (Standardmäßig ist die Erstellung deaktiviert.)</span><span class="sxs-lookup"><span data-stu-id="7532f-114">A state-based security context token (SCT) is created (by default, creation is disabled).</span></span>  
  
 <span data-ttu-id="7532f-115">Das statusbasierte SCT kann nur mit einer benutzerdefinierten Bindung erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="7532f-115">The state-based SCT can only be created using a custom binding.</span></span> <span data-ttu-id="7532f-116">Weitere Informationen finden Sie unter [Vorgehensweise: Erstellen Sie ein Token für den Sicherheitskontext für eine Sicherheitssitzung](../../../../docs/framework/wcf/feature-details/how-to-create-a-security-context-token-for-a-secure-session.md).) Im Code wird das Token aktiviert, indem ein Sicherheitsbindungselement erstellt wird (<xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> oder <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>), wobei die <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement%28System.Boolean%29?displayProperty=nameWithType>-Methode oder die <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSecureConversationBindingElement%28System.ServiceModel.Channels.SecurityBindingElement%2CSystem.Boolean%29?displayProperty=nameWithType>-Methode verwendet wird und der `requireCancellation`-Parameter auf `false` festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="7532f-116">For more information, see [How to: Create a Security Context Token for a Secure Session](../../../../docs/framework/wcf/feature-details/how-to-create-a-security-context-token-for-a-secure-session.md).) In code, the token is enabled by creating a security binding element (either <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> or <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>) using the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement%28System.Boolean%29?displayProperty=nameWithType> or the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSecureConversationBindingElement%28System.ServiceModel.Channels.SecurityBindingElement%2CSystem.Boolean%29?displayProperty=nameWithType> method and setting the `requireCancellation` parameter to `false`.</span></span> <span data-ttu-id="7532f-117">Der Parameter bezieht sich auf die Zwischenspeicherung des SCT.</span><span class="sxs-lookup"><span data-stu-id="7532f-117">The parameter refers to the caching of the SCT.</span></span> <span data-ttu-id="7532f-118">Wenn Sie den Wert auf `false` festlegen, wird die statusbasierte SCT-Funktion aktiviert.</span><span class="sxs-lookup"><span data-stu-id="7532f-118">Setting the value to `false` enables the state-based SCT feature.</span></span>  
  
 <span data-ttu-id="7532f-119">Alternativ in der Konfiguration der Token aktiviert, durch das Erstellen einer <`customBinding`>, Hinzufügen einer <`security`> Element, und die Einstellung der `authenticationMode` SecureConversation Attribut und die `requireSecurityContextCancellation` -Attribut auf `true`.</span><span class="sxs-lookup"><span data-stu-id="7532f-119">Alternatively, in configuration, the token is enabled by creating a <`customBinding`>, then adding a <`security`> element, and setting the `authenticationMode` attribute to SecureConversation and the `requireSecurityContextCancellation` attribute to `true`.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="7532f-120">Die zuvor genannten Anforderungen sind spezifisch.</span><span class="sxs-lookup"><span data-stu-id="7532f-120">The preceding requirements are specific.</span></span> <span data-ttu-id="7532f-121">Beispielsweise erstellt das <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosBindingElement%2A> ein Bindungselement, das zu einer Windows-Identität führt, wobei aber kein SCT eingerichtet wird.</span><span class="sxs-lookup"><span data-stu-id="7532f-121">For example, the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosBindingElement%2A> creates a binding element that results in a Windows identity, but does not establish an SCT.</span></span> <span data-ttu-id="7532f-122">Sie können es daher mit der `Required`-Option unter [!INCLUDE[wxp](../../../../includes/wxp-md.md)] verwenden.</span><span class="sxs-lookup"><span data-stu-id="7532f-122">Therefore, you can use it with the `Required` option on [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span>  
  
### <a name="possible-aspnet-conflict"></a><span data-ttu-id="7532f-123">Möglicher ASP.NET-Konflikt</span><span class="sxs-lookup"><span data-stu-id="7532f-123">Possible ASP.NET Conflict</span></span>  
 <span data-ttu-id="7532f-124">WCF und [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] können sowohl Identitätswechsel aktivieren oder deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="7532f-124">WCF and [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] can both enable or disable impersonation.</span></span> <span data-ttu-id="7532f-125">Wenn [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] hostet eine WCF-Anwendung ist möglicherweise ein Konflikt zwischen dem WCF vorhanden und [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] Konfigurationseinstellungen.</span><span class="sxs-lookup"><span data-stu-id="7532f-125">When [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] hosts an WCF application, a conflict may exist between the WCF and [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] configuration settings.</span></span> <span data-ttu-id="7532f-126">Bei einem Konflikt hat die WCF-Einstellung Vorrang, es sei denn, die <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> -Eigenschaftensatz auf <xref:System.ServiceModel.ImpersonationOption.NotAllowed>, in diesem Fall die [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] -identitätswechseleinstellung Vorrang.</span><span class="sxs-lookup"><span data-stu-id="7532f-126">In case of conflict, the WCF setting takes precedence, unless the <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> property is set to <xref:System.ServiceModel.ImpersonationOption.NotAllowed>, in which case the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] impersonation setting takes precedence.</span></span>  
  
### <a name="assembly-loads-may-fail-under-impersonation"></a><span data-ttu-id="7532f-127">Assembly-Ladevorgänge können beim Identitätswechsel fehlschlagen</span><span class="sxs-lookup"><span data-stu-id="7532f-127">Assembly Loads May Fail Under Impersonation</span></span>  
 <span data-ttu-id="7532f-128">Wenn der Identitätswechselkontext keine Zugriffsberechtigungen zum Laden einer Assembly hat und es das erste Mal ist, dass die Common Language Runtime (CLR) versucht, die Assembly für diese Anwendungsdomäne zu laden, speichert die <xref:System.AppDomain> den Fehler zwischen.</span><span class="sxs-lookup"><span data-stu-id="7532f-128">If the impersonated context does not have access rights to load an assembly and if it is the first time the common language runtime (CLR) is attempting to load the assembly for that AppDomain, the <xref:System.AppDomain> caches the failure.</span></span> <span data-ttu-id="7532f-129">Nachfolgende Versuche, diese Assembly(s) zu laden, schlagen fehl, selbst nach dem Zurücksetzen des Identitätswechsels und sogar wenn der zurückgesetzte Kontext die Zugriffsberechtigungen hat, die Assembly zu laden.</span><span class="sxs-lookup"><span data-stu-id="7532f-129">Subsequent attempts to load that assembly (or assemblies) fail, even after reverting the impersonation, and even if the reverted context has access rights to load the assembly.</span></span> <span data-ttu-id="7532f-130">Die Ursache dafür ist, dass die CLR nach der Änderung des Benutzerkontextes keinen weiteren Ladeversuch unternimmt.</span><span class="sxs-lookup"><span data-stu-id="7532f-130">This is because the CLR does not re-attempt the load after the user context is changed.</span></span> <span data-ttu-id="7532f-131">Sie müssen die Anwendungsdomäne neu starten, um nach dem Fehler wiederhergestellt zu werden.</span><span class="sxs-lookup"><span data-stu-id="7532f-131">You must restart the application domain to recover from the failure.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="7532f-132">Der Standardwert für die <xref:System.ServiceModel.Security.WindowsClientCredential.AllowedImpersonationLevel%2A>-Eigenschaft der <xref:System.ServiceModel.Security.WindowsClientCredential>-Klasse ist <xref:System.Security.Principal.TokenImpersonationLevel.Identification>.</span><span class="sxs-lookup"><span data-stu-id="7532f-132">The default value for the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowedImpersonationLevel%2A> property of the <xref:System.ServiceModel.Security.WindowsClientCredential> class is <xref:System.Security.Principal.TokenImpersonationLevel.Identification>.</span></span> <span data-ttu-id="7532f-133">In den meisten Fällen hat ein Identitätswechsel auf Identifizierungsebene nicht die Berechtigung, zusätzliche Assemblys zu laden.</span><span class="sxs-lookup"><span data-stu-id="7532f-133">In most cases, an identification-level impersonation context has no rights to load any additional assemblies.</span></span> <span data-ttu-id="7532f-134">Dies ist der Standardwert. Es handelt sich somit um eine sehr übliche Bedingung, derer Sie sich bewusst sein sollten.</span><span class="sxs-lookup"><span data-stu-id="7532f-134">This is the default value, so this is a very common condition to be aware of.</span></span> <span data-ttu-id="7532f-135">Der Identitätswechsel auf Identifizierungsebene kann auch dann auftreten, wenn der Identitätswechselvorgang nicht die `SeImpersonate`-Berechtigung hat.</span><span class="sxs-lookup"><span data-stu-id="7532f-135">Identification-level impersonation also occurs when the impersonating process does not have the `SeImpersonate` privilege.</span></span> <span data-ttu-id="7532f-136">Weitere Informationen finden Sie unter [Delegierung und Identitätswechsel](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="7532f-136">For more information, see [Delegation and Impersonation](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span></span>  
  
### <a name="delegation-requires-credential-negotiation"></a><span data-ttu-id="7532f-137">Delegierung erfordert eine Anmeldeinformationen-Aushandlung</span><span class="sxs-lookup"><span data-stu-id="7532f-137">Delegation Requires Credential Negotiation</span></span>  
 <span data-ttu-id="7532f-138">Um das Kerberos-Authentifizierungsprotokoll mit Delegierung zu verwenden, müssen Sie das Kerberos-Protokoll mit Anmeldeinformationen-Aushandlung (mitunter als bilaterales oder mehrstufiges Kerberos bezeichnet) implementieren.</span><span class="sxs-lookup"><span data-stu-id="7532f-138">To use the Kerberos authentication protocol with delegation, you must implement the Kerberos protocol with credential negotiation (sometimes called multi-leg or multi-step Kerberos).</span></span> <span data-ttu-id="7532f-139">Wenn Sie die Kerberos-Authentifizierung ohne Anmeldeinformationen-Aushandlung (mitunter als One-Shot-Kerberos bezeichnet) implementieren, wird eine Ausnahme ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="7532f-139">If you implement Kerberos authentication without credential negotiation (sometimes called one-shot or single-leg Kerberos), an exception is thrown.</span></span> <span data-ttu-id="7532f-140">Weitere Informationen dazu, wie Sie die Anmeldeinformationen-Aushandlung zu implementieren, finden Sie unter [Debuggen von Windows-Authentifizierungsfehlern](../../../../docs/framework/wcf/feature-details/debugging-windows-authentication-errors.md).</span><span class="sxs-lookup"><span data-stu-id="7532f-140">For more information about how to implement credential negotiation, see [Debugging Windows Authentication Errors](../../../../docs/framework/wcf/feature-details/debugging-windows-authentication-errors.md).</span></span>  
  
## <a name="cryptography"></a><span data-ttu-id="7532f-141">Kryptografie</span><span class="sxs-lookup"><span data-stu-id="7532f-141">Cryptography</span></span>  
  
### <a name="sha-256-supported-only-for-symmetric-key-usages"></a><span data-ttu-id="7532f-142">Unterstützt HA-256 nur für den Einsatz mit symmetrischen Schlüsseln</span><span class="sxs-lookup"><span data-stu-id="7532f-142">SHA-256 Supported Only for Symmetric Key Usages</span></span>  
 <span data-ttu-id="7532f-143">WCF unterstützt eine Vielzahl von Verschlüsselung und Signatur Digest-erstellungsalgorithmen, die Sie angeben können, mit der algorithmussuite in den vom System bereitgestellten Bindungen.</span><span class="sxs-lookup"><span data-stu-id="7532f-143">WCF supports a variety of encryption and signature digest creation algorithms that you can specify using the algorithm suite in the system-provided bindings.</span></span> <span data-ttu-id="7532f-144">Zur Verbesserung der Sicherheit unterstützt WCF Secure Hash Algorithm (SHA) 2-Algorithmen, insbesondere SHA-256, für die Erstellung von Signatur-Hashwert-Hashes.</span><span class="sxs-lookup"><span data-stu-id="7532f-144">For improved security, WCF supports Secure Hash Algorithm (SHA) 2 algorithms, specifically SHA-256, for creating signature digest hashes.</span></span> <span data-ttu-id="7532f-145">Dieses Release unterstützt SHA-256 nur für Einsätze mit symmetrischen Schlüsseln, z. B. Kerberos-Schlüssel und wenn kein X.509-Zertifikat zum Signieren der Nachricht verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="7532f-145">This release supports SHA-256 only for symmetric key usages, such as Kerberos keys, and where an X.509 certificate is not used to sign the message.</span></span> <span data-ttu-id="7532f-146">WCF unterstützt keine RSA-Signaturen (in x. 509-Zertifikaten) mit SHA-256-Hash aufgrund der derzeitigen fehlenden Supports für RSA-SHA256, in der [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7532f-146">WCF does not support RSA signatures (used in X.509 certificates) using SHA-256 hash due to the current lack of support for RSA-SHA256 in the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)].</span></span>  
  
### <a name="fips-compliant-sha-256-hashes-not-supported"></a><span data-ttu-id="7532f-147">FIPS-kompatible SHA-256-Hashes werden nicht unterstützt</span><span class="sxs-lookup"><span data-stu-id="7532f-147">FIPS-Compliant SHA-256 Hashes not Supported</span></span>  
 <span data-ttu-id="7532f-148">WCF unterstützt keine SHA-256-FIPS-kompatiblen Hashes, sodass algorithmussuites, die SHA-256 Verwenden von WCF auf Systemen nicht unterstützt werden, wenn für die Verwendung von FIPS-konformen Algorithmus erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="7532f-148">WCF does not support SHA-256 FIPS-compliant hashes, so algorithm suites that use SHA-256 are not supported by WCF on systems where use of FIPS compliant algorithms is required.</span></span>  
  
### <a name="fips-compliant-algorithms-may-fail-if-registry-is-edited"></a><span data-ttu-id="7532f-149">FIPS-kompatible Algorithmen schlagen ggf. fehl, wenn die Registrierung bearbeitet wird</span><span class="sxs-lookup"><span data-stu-id="7532f-149">FIPS-Compliant Algorithms May Fail if Registry Is Edited</span></span>  
 <span data-ttu-id="7532f-150">Sie können Federal Information Processing Standards (FIPS)-kompatible Algorithmen aktivieren und deaktivieren, indem Sie das Snap-In Lokale Sicherheitseinstellungen der Microsoft Management Console (MMC) verwenden.</span><span class="sxs-lookup"><span data-stu-id="7532f-150">You can enable and disable Federal Information Processing Standards (FIPS)-compliant algorithms by using the Local Security Settings Microsoft Management Console (MMC) snap-in.</span></span> <span data-ttu-id="7532f-151">Sie können auch auf die Einstellung in der Registrierung zugreifen.</span><span class="sxs-lookup"><span data-stu-id="7532f-151">You can also access the setting in the registry.</span></span> <span data-ttu-id="7532f-152">Beachten Sie jedoch, dass WCF nicht unterstützt, mithilfe der Registrierung zum Zurücksetzen der Einstellung.</span><span class="sxs-lookup"><span data-stu-id="7532f-152">Note, however, that WCF does not support using the registry to reset the setting.</span></span> <span data-ttu-id="7532f-153">Wenn ein anderer Wert als 1 oder 0 festgelegt wurde, können zwischen CLR und dem Betriebssystem inkonsistente Ergebnisse auftreten.</span><span class="sxs-lookup"><span data-stu-id="7532f-153">If the value is set to anything other than 1 or 0, inconsistent results can occur between the CLR and the operating system.</span></span>  
  
### <a name="fips-compliant-aes-encryption-limitation"></a><span data-ttu-id="7532f-154">FIPS-kompatible AES-Verschlüsselungseinschränkungen</span><span class="sxs-lookup"><span data-stu-id="7532f-154">FIPS-Compliant AES Encryption Limitation</span></span>  
 <span data-ttu-id="7532f-155">Die FIPS-kompatible AES-Verschlüsselung funktioniert nicht bei Duplexrückrufen unter dem Identitätswechsel auf Identifizierungsebene.</span><span class="sxs-lookup"><span data-stu-id="7532f-155">FIPS compliant AES encryption does not work in duplex callbacks under identification level impersonation.</span></span>  
  
### <a name="cngksp-certificates"></a><span data-ttu-id="7532f-156">CNG/KSP-Zertifikate</span><span class="sxs-lookup"><span data-stu-id="7532f-156">CNG/KSP Certificates</span></span>  
 <span data-ttu-id="7532f-157">*Kryptografie-API: Next Generation (CNG)* ist der langfristige Ersatz für CryptoAPI.</span><span class="sxs-lookup"><span data-stu-id="7532f-157">*Cryptography API: Next Generation (CNG)* is the long-term replacement for the CryptoAPI.</span></span> <span data-ttu-id="7532f-158">Diese API ist verfügbar in nicht verwaltetem Code auf [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[lserver](../../../../includes/lserver-md.md)] und höheren Windows-Versionen.</span><span class="sxs-lookup"><span data-stu-id="7532f-158">This API is available in unmanaged code on [!INCLUDE[wv](../../../../includes/wv-md.md)],  [!INCLUDE[lserver](../../../../includes/lserver-md.md)] and later Windows versions.</span></span>  
  
 <span data-ttu-id="7532f-159">.NET Framework 4.6.1 und früheren Versionen unterstützen nicht diese Zertifikate, da sie die alte CryptoAPI verwenden, um CNG/KSP-Zertifikate zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="7532f-159">.NET Framework 4.6.1 and earlier versions do not support these certificates because they use the legacy CryptoAPI to handle CNG/KSP certificates.</span></span> <span data-ttu-id="7532f-160">Die Verwendung dieser Zertifikate mit .NET Framework 4.6.1 und früheren Versionen löst eine Ausnahme aus.</span><span class="sxs-lookup"><span data-stu-id="7532f-160">The use of these certificates with   .NET Framework 4.6.1 and earlier versions will cause an exception.</span></span>  
  
 <span data-ttu-id="7532f-161">Ob KSP von einem Zertifikat verwendet wird, kann auf zwei Arten ermittelt werden:</span><span class="sxs-lookup"><span data-stu-id="7532f-161">There are two possible ways to tell if a certificate uses KSP:</span></span>  
  
-   <span data-ttu-id="7532f-162">Führen Sie `p/invoke` für die `CertGetCertificateContextProperty` aus, und überprüfen Sie `dwProvType` in der zurückgegebenen `CertGetCertificateContextProperty`.</span><span class="sxs-lookup"><span data-stu-id="7532f-162">Do a `p/invoke` of `CertGetCertificateContextProperty`, and inspect `dwProvType` on the returned `CertGetCertificateContextProperty`.</span></span>  
  
-   <span data-ttu-id="7532f-163">Verwenden der `certutil` Befehl über die Befehlszeile zum Abfragen von Zertifikaten.</span><span class="sxs-lookup"><span data-stu-id="7532f-163">Use the  `certutil` command from the command line for querying certificates.</span></span> <span data-ttu-id="7532f-164">Weitere Informationen finden Sie unter [Aufgaben von Certutil für die Problembehandlung bei Zertifikaten](https://go.microsoft.com/fwlink/?LinkId=120056).</span><span class="sxs-lookup"><span data-stu-id="7532f-164">For more information, see [Certutil tasks for troubleshooting certificates](https://go.microsoft.com/fwlink/?LinkId=120056).</span></span>  
  
## <a name="message-security-fails-if-using-aspnet-impersonation-and-aspnet-compatibility-is-required"></a><span data-ttu-id="7532f-165">Nachrichtensicherheit schlägt fehlt, wenn der ASP.NET-Identitätswechsel verwendet wird und die ASP.NET-Kompatibilität erforderlich ist</span><span class="sxs-lookup"><span data-stu-id="7532f-165">Message Security Fails if Using ASP.NET Impersonation and ASP.NET Compatibility Is Required</span></span>  
 <span data-ttu-id="7532f-166">WCF unterstützt nicht die folgende Kombination von Einstellungen, da sie auftreten der Clientauthentifizierung verhindern können:</span><span class="sxs-lookup"><span data-stu-id="7532f-166">WCF does not support the following combination of settings because they can prevent client authentication from occurring:</span></span>  
  
-   [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]<span data-ttu-id="7532f-167">-Identitätswechsel ist aktiviert.</span><span class="sxs-lookup"><span data-stu-id="7532f-167"> Impersonation is enabled.</span></span> <span data-ttu-id="7532f-168">Dies erfolgt in der Datei "Web.config" durch Festlegen der `impersonate` Attribut der <`identity`>-Element `true`.</span><span class="sxs-lookup"><span data-stu-id="7532f-168">This is done in the Web.config file by setting the `impersonate` attribute of the <`identity`> element to `true`.</span></span>  
  
-   [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]<span data-ttu-id="7532f-169"> im Kompatibilitätsmodus ist aktiviert, indem die `aspNetCompatibilityEnabled` Attribut der [ \<ServiceHostingEnvironment >](../../../../docs/framework/configure-apps/file-schema/wcf/servicehostingenvironment.md) zu `true`.</span><span class="sxs-lookup"><span data-stu-id="7532f-169"> compatibility mode is enabled by setting the `aspNetCompatibilityEnabled` attribute of the [\<serviceHostingEnvironment>](../../../../docs/framework/configure-apps/file-schema/wcf/servicehostingenvironment.md) to `true`.</span></span>  
  
-   <span data-ttu-id="7532f-170">Die Nachrichtenmodussicherheit wird verwendet.</span><span class="sxs-lookup"><span data-stu-id="7532f-170">Message mode security is used.</span></span>  
  
 <span data-ttu-id="7532f-171">Sie können alternativ auch den [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]-Kompatibilitätsmodus deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="7532f-171">The work-around is to turn off the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] compatibility mode.</span></span> <span data-ttu-id="7532f-172">Oder, wenn Sie die [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] -Kompatibilitätsmodus erforderlich ist, deaktivieren Sie die [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] Identitätswechsel feature aus, und verwenden Sie stattdessen die von WCF bereitgestellter Identitätswechsel.</span><span class="sxs-lookup"><span data-stu-id="7532f-172">Or, if the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] compatibility mode is required, disable the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] impersonation feature and use WCF-provided impersonation instead.</span></span> <span data-ttu-id="7532f-173">Weitere Informationen finden Sie unter [Delegierung und Identitätswechsel](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="7532f-173">For more information, see [Delegation and Impersonation](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span></span>  
  
## <a name="ipv6-literal-address-failure"></a><span data-ttu-id="7532f-174">IPv6-Literal-Adressfehler</span><span class="sxs-lookup"><span data-stu-id="7532f-174">IPv6 Literal Address Failure</span></span>  
 <span data-ttu-id="7532f-175">Bei Sicherheitsanforderungen tritt ein Fehler auf, wenn sich Client und Dienst auf dem gleichen Computer befinden und für den Dienst IPv6-Literaladressen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="7532f-175">Security requests fail when the client and service are on the same machine, and IPv6 literal addresses are used for the service.</span></span>  
  
 <span data-ttu-id="7532f-176">IPv6-Literal-Adressen funktionieren, wenn der Dienst und der Client sich auf unterschiedlichen Computern befinden.</span><span class="sxs-lookup"><span data-stu-id="7532f-176">Literal IPv6 addresses work if the service and client are on different machines.</span></span>  
  
## <a name="wsdl-retrieval-failures-with-federated-trust"></a><span data-ttu-id="7532f-177">WSDL-Abruffehler bei Verbundvertrauen</span><span class="sxs-lookup"><span data-stu-id="7532f-177">WSDL Retrieval Failures with Federated Trust</span></span>  
 <span data-ttu-id="7532f-178">WCF erfordert genau ein WSDL-Dokument für jeden Knoten in der Vertrauenskette des Verbunds.</span><span class="sxs-lookup"><span data-stu-id="7532f-178">WCF requires exactly one WSDL document for each node in the federated trust chain.</span></span> <span data-ttu-id="7532f-179">Achten Sie darauf, beim Angeben von Endpunkten keine Schleife einzurichten.</span><span class="sxs-lookup"><span data-stu-id="7532f-179">Be careful not to set up a loop when specifying endpoints.</span></span> <span data-ttu-id="7532f-180">Eine Schleife kann beispielsweise bei Verwendung eines WSDL-Downloads von Vertrauensketten des Verbunds entstehen, wenn das gleiche WSDL-Dokument mehrere Links enthält.</span><span class="sxs-lookup"><span data-stu-id="7532f-180">One way in which loops can arise is using a WSDL download of federated trust chains with two or more links in the same WSDL document.</span></span> <span data-ttu-id="7532f-181">Ein häufig auftretendes Szenario für dieses Problem ist ein Verbunddienst, bei dem sich der Sicherheitstokenserver und der Dienst im gleichen ServiceHost befinden.</span><span class="sxs-lookup"><span data-stu-id="7532f-181">A common scenario that can produce this problem is a federated service where the Security Token Server and the service are contained inside the same ServiceHost.</span></span>  
  
 <span data-ttu-id="7532f-182">Ein Beispiel für diese Situation ist ein Dienst mit den folgenden drei Endpunktadressen:</span><span class="sxs-lookup"><span data-stu-id="7532f-182">An example of this situation is a service with the following three endpoint addresses:</span></span>  
  
-   <span data-ttu-id="7532f-183">http://localhost/CalculatorService/service (der Dienst)</span><span class="sxs-lookup"><span data-stu-id="7532f-183">http://localhost/CalculatorService/service (the service)</span></span>  
  
-   <span data-ttu-id="7532f-184">http://localhost/CalculatorService/issue_ticket (der STS)</span><span class="sxs-lookup"><span data-stu-id="7532f-184">http://localhost/CalculatorService/issue_ticket (the STS)</span></span>  
  
-   <span data-ttu-id="7532f-185">http://localhost/CalculatorService/mex (der Metadatenendpunkt)</span><span class="sxs-lookup"><span data-stu-id="7532f-185">http://localhost/CalculatorService/mex (the metadata endpoint)</span></span>  
  
 <span data-ttu-id="7532f-186">Dadurch wird eine Ausnahme ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="7532f-186">This throws an exception.</span></span>  
  
 <span data-ttu-id="7532f-187">Verlegen Sie den `issue_ticket`-Endpunkt, damit dieses Szenario funktioniert.</span><span class="sxs-lookup"><span data-stu-id="7532f-187">You can make this scenario work by putting the `issue_ticket` endpoint elsewhere.</span></span>  
  
## <a name="wsdl-import-attributes-can-be-lost"></a><span data-ttu-id="7532f-188">WSDL-Importattribute können verloren werden</span><span class="sxs-lookup"><span data-stu-id="7532f-188">WSDL Import Attributes can be Lost</span></span>  
 <span data-ttu-id="7532f-189">WCF kann die Attribute eines `<wst:Claims>`-Elements in einer `RST`-Vorlage beim Ausführen eines WSDL-Imports nicht nachverfolgen.</span><span class="sxs-lookup"><span data-stu-id="7532f-189">WCF loses track of the attributes on a `<wst:Claims>` element in an `RST` template when doing a WSDL import.</span></span> <span data-ttu-id="7532f-190">Dieses Problem tritt im Zuge eines WSDL-Importvorgangs auf, wenn `<Claims>` direkt in`WSFederationHttpBinding.Security.Message.TokenRequestParameters` oder in`IssuedSecurityTokenRequestParameters.AdditionalRequestParameters` und nicht unter direkter Verwendung der Anspruchstypauflistungen angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="7532f-190">This happens during a WSDL import if you specify `<Claims>` directly in `WSFederationHttpBinding.Security.Message.TokenRequestParameters` or `IssuedSecurityTokenRequestParameters.AdditionalRequestParameters` instead of using the claim type collections directly.</span></span>  <span data-ttu-id="7532f-191">Da die Attribute beim Importieren verloren gehen, verläuft der Roundtrip der Bindung durch WSDL nicht ordnungsgemäß, und die Bindung ist auf der Clientseite ungültig.</span><span class="sxs-lookup"><span data-stu-id="7532f-191">Since the import loses the attributes, the binding does not round trip properly through WSDL and hence is incorrect on the client side.</span></span>  
  
 <span data-ttu-id="7532f-192">Ändern Sie nach Abschluss des Importvorgangs die Bindung direkt auf dem Client, um dieses Problem zu korrigieren.</span><span class="sxs-lookup"><span data-stu-id="7532f-192">The fix is to modify the binding directly on the client after doing the import.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7532f-193">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="7532f-193">See Also</span></span>  
 [<span data-ttu-id="7532f-194">Sicherheitsüberlegungen</span><span class="sxs-lookup"><span data-stu-id="7532f-194">Security Considerations</span></span>](../../../../docs/framework/wcf/feature-details/security-considerations-in-wcf.md)  
 [<span data-ttu-id="7532f-195">Offenlegung vertraulicher Informationen</span><span class="sxs-lookup"><span data-stu-id="7532f-195">Information Disclosure</span></span>](../../../../docs/framework/wcf/feature-details/information-disclosure.md)  
 [<span data-ttu-id="7532f-196">Erhöhen der Berechtigungen</span><span class="sxs-lookup"><span data-stu-id="7532f-196">Elevation of Privilege</span></span>](../../../../docs/framework/wcf/feature-details/elevation-of-privilege.md)  
 [<span data-ttu-id="7532f-197">Denial-of-Service-Angriffe</span><span class="sxs-lookup"><span data-stu-id="7532f-197">Denial of Service</span></span>](../../../../docs/framework/wcf/feature-details/denial-of-service.md)  
 [<span data-ttu-id="7532f-198">Manipulation</span><span class="sxs-lookup"><span data-stu-id="7532f-198">Tampering</span></span>](../../../../docs/framework/wcf/feature-details/tampering.md)  
 [<span data-ttu-id="7532f-199">Replayangriffe</span><span class="sxs-lookup"><span data-stu-id="7532f-199">Replay Attacks</span></span>](../../../../docs/framework/wcf/feature-details/replay-attacks.md)
