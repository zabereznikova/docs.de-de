---
title: Warteschlangenübersicht
ms.date: 03/30/2017
helpviewer_keywords:
- queues [WCF], MSMQ integration
ms.assetid: b8757992-ffce-40ad-9e9b-3243f6d0fce1
ms.openlocfilehash: 78d80a88153ee15f7ab152da44801c77900f874d
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/12/2020
ms.locfileid: "79184601"
---
# <a name="queues-overview"></a><span data-ttu-id="846e8-102">Warteschlangenübersicht</span><span class="sxs-lookup"><span data-stu-id="846e8-102">Queues overview</span></span>

<span data-ttu-id="846e8-103">In diesem Abschnitt werden die allgemeinen Begriffe und Kernbegriffe der Warteschlangenkommunikation vorgestellt.</span><span class="sxs-lookup"><span data-stu-id="846e8-103">This section introduces the general and core concepts behind queued communication.</span></span> <span data-ttu-id="846e8-104">In den nachfolgenden Abschnitten wird ausführlich erläutert, wie sich die hier beschriebenen Warteschlangenkonzepte in Windows Communication Foundation (WCF) manifestieren.</span><span class="sxs-lookup"><span data-stu-id="846e8-104">Subsequent sections go into details about how the queuing concepts described here are manifested in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="basic-queuing-concepts"></a><span data-ttu-id="846e8-105">Grundlegende Warteschlangenbegriffe</span><span class="sxs-lookup"><span data-stu-id="846e8-105">Basic Queuing Concepts</span></span>  
 <span data-ttu-id="846e8-106">Beim Entwerfen einer verteilten Anwendung ist das Wählen der richtigen Transportart für die Kommunikation zwischen Diensten und Clients sehr wichtig.</span><span class="sxs-lookup"><span data-stu-id="846e8-106">When designing a distributed application, choosing the right transport for communication between services and clients is important.</span></span> <span data-ttu-id="846e8-107">Mehrere Faktoren beeinflussen, für welche Transportart Sie sich entscheiden sollten.</span><span class="sxs-lookup"><span data-stu-id="846e8-107">Several factors affect the kind of transport to use.</span></span> <span data-ttu-id="846e8-108">Ein wichtiger Faktor, nämlich die Isolation zwischen Dienst, Client und Transport, bestimmt die Verwendung eines Warteschlangentransports oder eines direkten Transports wie TCP oder HTTP.</span><span class="sxs-lookup"><span data-stu-id="846e8-108">One important factor—isolation between the service, the client, and the transport—determines use of a queued transport or a direct transport, such as TCP or HTTP.</span></span> <span data-ttu-id="846e8-109">Aufgrund des Aufbaus von direkten Transporten (wie TCP und HTTP) wird die Kommunikation vollständig gestoppt, wenn der Dienst oder der Client nicht ordnungsgemäß funktioniert oder wenn Netzwerkprobleme auftreten.</span><span class="sxs-lookup"><span data-stu-id="846e8-109">Due to the nature of direct transports such as TCP and HTTP, communication stops altogether if the service or the client stop functioning or if the network fails.</span></span> <span data-ttu-id="846e8-110">Der Dienst, der Client und das Netzwerk müssen gleichzeitig ausgeführt werden, damit die Anwendung funktioniert.</span><span class="sxs-lookup"><span data-stu-id="846e8-110">The service, the client, and the network must be running at the same time for the application to work.</span></span> <span data-ttu-id="846e8-111">Warteschlangentransporte ermöglichen eine Isolation. Dies bedeutet, dass der Client und der Dienst weiterhin funktionieren, wenn der Dienst bzw. der Client ausfallen oder wenn die jeweiligen Kommunikationsverbindungen ausfallen.</span><span class="sxs-lookup"><span data-stu-id="846e8-111">Queued transports provide isolation, which means that if the service or client fail or if communication links between them fail, the client and service can continue to function.</span></span>  
  
 <span data-ttu-id="846e8-112">Warteschlangen sorgen sogar für die zuverlässige Kommunikation, wenn Ausfälle bei den Kommunikationspartnern oder im Netzwerk auftreten.</span><span class="sxs-lookup"><span data-stu-id="846e8-112">Queues provide reliable communication even with failures in the communicating parties or the network.</span></span> <span data-ttu-id="846e8-113">Warteschlangen erfassen Nachrichten, die zwischen den Kommunikationspartnern ausgetauscht werden, und stellen diese zu.</span><span class="sxs-lookup"><span data-stu-id="846e8-113">Queues capture and deliver messages exchanged between the communicating parties.</span></span> <span data-ttu-id="846e8-114">Warteschlangen werden in der Regel von einem Speicher eines bestimmten Typs unterstützt, beispielsweise flüchtiger oder permanenter Speicher.</span><span class="sxs-lookup"><span data-stu-id="846e8-114">Queues are typically backed by some kind of a store, which can be volatile or durable.</span></span> <span data-ttu-id="846e8-115">Warteschlangen speichern Nachrichten für einen Dienst und leiten diese Nachrichten später dann an den Dienst weiter.</span><span class="sxs-lookup"><span data-stu-id="846e8-115">Queues store messages from a client on behalf of a service and later forward these messages to the service.</span></span> <span data-ttu-id="846e8-116">Die Dereferenzierungswarteschlangen ermöglichen eine sichere Fehlerisolation für beide Parteien. Aus diesem Grund ist dies der bevorzugte Kommunikationsmechanismus für Systeme, die eine hohe Verfügbarkeit erfordern, sowie für verteilte Dienste.</span><span class="sxs-lookup"><span data-stu-id="846e8-116">The indirection queues provide ensured isolation of failure by either party, thus making it the preferred communication mechanism for high-availability systems and disconnected services.</span></span> <span data-ttu-id="846e8-117">Die Dereferenzierung führt jedoch zu einer hohen Latenz.</span><span class="sxs-lookup"><span data-stu-id="846e8-117">The indirection comes with the cost of high latency.</span></span> <span data-ttu-id="846e8-118">*Latenz* ist die Zeitverzögerung zwischen dem Senden einer Nachricht durch den Client und dem Zeitpunkt, zu dem der Dienst sie empfängt.</span><span class="sxs-lookup"><span data-stu-id="846e8-118">*Latency* is the time delay between the time the client sends a message and the time the service receives it.</span></span> <span data-ttu-id="846e8-119">Dies bedeutet, dass Sie nach dem Senden einer Nachricht nicht wissen, wann die Nachricht verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="846e8-119">This means that once a message is sent, you do not know when that message may be processed.</span></span> <span data-ttu-id="846e8-120">Die meisten Warteschlangenanwendungen weisen eine hohe Latenz auf.</span><span class="sxs-lookup"><span data-stu-id="846e8-120">Most queued applications cope with high latency.</span></span> <span data-ttu-id="846e8-121">Die folgende Abbildung zeigt ein Modell einer Warteschlangenkommunikation.</span><span class="sxs-lookup"><span data-stu-id="846e8-121">The following illustration shows a conceptual model of queued communication.</span></span>  
  
 <span data-ttu-id="846e8-122">![Modell einer Warteschlangenkommunikation](../../../../docs/framework/wcf/feature-details/media/qconceptual-figure1c.gif "QKonzeption-Figure1c")</span><span class="sxs-lookup"><span data-stu-id="846e8-122">![Model of queued communication](../../../../docs/framework/wcf/feature-details/media/qconceptual-figure1c.gif "QConceptual-Figure1c")</span></span>  
  
 <span data-ttu-id="846e8-123">Modell einer Warteschlangenkommunikation</span><span class="sxs-lookup"><span data-stu-id="846e8-123">Queued communication conceptual model</span></span>  
  
 <span data-ttu-id="846e8-124">In Wirklichkeit ist die Warteschlange verteilt angeordnet.</span><span class="sxs-lookup"><span data-stu-id="846e8-124">In reality, the queue is a distributed concept.</span></span> <span data-ttu-id="846e8-125">Eine Warteschlange kann also für eine Partei lokal oder für beide Parteien entfernt angeordnet sein.</span><span class="sxs-lookup"><span data-stu-id="846e8-125">As such, they can be local to either party or remote to both parties.</span></span> <span data-ttu-id="846e8-126">Normalerweise befindet sich die Warteschlange lokal beim Dienst.</span><span class="sxs-lookup"><span data-stu-id="846e8-126">Typically, the queue is local to the service.</span></span> <span data-ttu-id="846e8-127">Bei dieser Konfiguration kann der Client sich nicht darauf verlassen, dass die Verbindung zur Remotewarteschlange ständig verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="846e8-127">In this configuration, the client cannot depend on connectivity to the remote queue to be constantly available.</span></span> <span data-ttu-id="846e8-128">Außerdem muss die Warteschlange unabhängig von der Verfügbarkeit des Diensts, der aus der Warteschlange ausliest, verfügbar sein.</span><span class="sxs-lookup"><span data-stu-id="846e8-128">Similarly, the queue must be available independent of the availability of the service reading from the queue.</span></span> <span data-ttu-id="846e8-129">Ein Warteschlangen-Manager verwaltet eine Auflistung von Warteschlangen.</span><span class="sxs-lookup"><span data-stu-id="846e8-129">A queue manager manages a collection of queues.</span></span> <span data-ttu-id="846e8-130">Der Manager ist dafür verantwortlich, Nachrichten anzunehmen, die von anderen Warteschlangen-Managern an seine Warteschlangen gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="846e8-130">It is responsible for accepting messages sent to its queues from other queue managers.</span></span> <span data-ttu-id="846e8-131">Er ist auch dafür verantwortlich, die Konnektivität zu Remotewarteschlangen zu verwalten und Nachrichten an diese Remotewarteschlangen zu übertragen.</span><span class="sxs-lookup"><span data-stu-id="846e8-131">It is also responsible for managing connectivity to remote queues and transferring messages to those remote queues.</span></span> <span data-ttu-id="846e8-132">Um die Verfügbarkeit auch bei Ausfällen der Client- oder Dienstanwendung sicherzustellen, wird der Warteschlangen-Manager normalerweise als externer Dienst ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="846e8-132">To ensure availability of queues despite client or service application failures, the queue manager is typically run as an external service.</span></span>  
  
 <span data-ttu-id="846e8-133">Wenn ein Client eine Nachricht an eine Warteschlange sendet, adressiert er die Nachricht an die Zielwarteschlange. Dabei handelt es sich um die Warteschlange, die vom Warteschlangen-Manager des Diensts verwaltet wird.</span><span class="sxs-lookup"><span data-stu-id="846e8-133">When a client sends a message to a queue, it addresses the message to the target queue, which is the queue managed by the service's queue manager.</span></span> <span data-ttu-id="846e8-134">Der Warteschlangen-Manager auf dem Client sendet die Nachricht an eine Übertragungswarteschlange (auch: Ausgangswarteschlange).</span><span class="sxs-lookup"><span data-stu-id="846e8-134">The queue manager on the client sends the message to a transmission (or outgoing) queue.</span></span> <span data-ttu-id="846e8-135">Die Übertragungswarteschlange ist eine Warteschlange im Warteschlangen-Manager des Clients, in der die Nachrichten zur Übertragung an die Zielwarteschlange gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="846e8-135">The transmission queue is a queue on the client queue manager that stores messages for transmission to the target queue.</span></span> <span data-ttu-id="846e8-136">Der Warteschlangen-Manager ermittelt dann einen Pfad zu dem Warteschlangen-Manager, der die Zielwarteschlange verwaltet, und überträgt die Nachricht.</span><span class="sxs-lookup"><span data-stu-id="846e8-136">The queue manager then finds a path to the queue manager that owns the target queue and transfers the message to it.</span></span> <span data-ttu-id="846e8-137">Um eine zuverlässige Kommunikation sicherzustellen, implementieren die Warteschlangen-Manager zur Verhinderung von Datenverlusten ein zuverlässiges Übertragungsprotokoll.</span><span class="sxs-lookup"><span data-stu-id="846e8-137">To ensure reliable communication, the queue managers implement a reliable transfer protocol to prevent data loss.</span></span> <span data-ttu-id="846e8-138">Der Zielwarteschlangen-Manager nimmt an seine Zielwarteschlangen adressierte Nachrichten an und speichert die Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="846e8-138">The destination queue manager accepts messages addressed to the target queues it owns and stores the messages.</span></span> <span data-ttu-id="846e8-139">Wenn der Dienst Leseanforderungen für die Zielwarteschlange sendet, stellt der Warteschlangen-Manager die Nachricht an die Zielanwendung zu.</span><span class="sxs-lookup"><span data-stu-id="846e8-139">The service makes requests to read from the target queue, at which time the queue manager then delivers the message to the destination application.</span></span> <span data-ttu-id="846e8-140">Die folgende Abbildung zeigt die Kommunikation zwischen den vier Parteien.</span><span class="sxs-lookup"><span data-stu-id="846e8-140">The following illustration shows communication between the four parties.</span></span>  
  
 <span data-ttu-id="846e8-141">![In die Warteschlange gestelltes Anwendungsdiagramm](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Verteilte Warteschlangen (Abbildung)")</span><span class="sxs-lookup"><span data-stu-id="846e8-141">![Queued Application Diagram](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="846e8-142">Warteschlangenkommunikation in einem typischen Bereitstellungsszenario</span><span class="sxs-lookup"><span data-stu-id="846e8-142">Queued communication in a typical deployment scenario</span></span>  
  
 <span data-ttu-id="846e8-143">Der Warteschlangen-Manager stellt die erforderliche Isolation bereit, damit es sich nicht auf die Kommunikation auswirkt, wenn der Absender und Empfänger einzeln ausfallen.</span><span class="sxs-lookup"><span data-stu-id="846e8-143">Thus, the queue manager provides the required isolation so that the sender and receiver can independently fail without affecting actual communication.</span></span> <span data-ttu-id="846e8-144">Der Vorteil der zusätzlichen Dereferenzierung, den Warteschlangen bieten, ermöglicht es außerdem, dass mehrere Anwendungsinstanzen aus ein und derselben Warteschlange auslesen, damit beim Farming zwischen den Knoten ein höherer Durchsatz erzielt wird.</span><span class="sxs-lookup"><span data-stu-id="846e8-144">The benefit of extra indirection that queues provide also enables multiple application instances to read from the same queue, so that farming work among the nodes achieves higher throughput.</span></span> <span data-ttu-id="846e8-145">Deshalb ist es nicht ungewöhnlich, dass Warteschlangen verwendet werden, um höhere Skalierungs- und Durchsatzanforderungen zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="846e8-145">Therefore, it is not uncommon to see queues being used to achieve higher scale and throughput requirements.</span></span>  
  
## <a name="queues-and-transactions"></a><span data-ttu-id="846e8-146">Warteschlangen und Transaktionen</span><span class="sxs-lookup"><span data-stu-id="846e8-146">Queues and Transactions</span></span>  
 <span data-ttu-id="846e8-147">Transaktionen ermöglichen es Ihnen, mehrere Vorgänge zu gruppieren, so dass alle Vorgänge fehlschlagen, wenn ein Vorgang fehlschlägt.</span><span class="sxs-lookup"><span data-stu-id="846e8-147">Transactions allow you to group a set of operations together so that if one operation fails, all of the operations fail.</span></span> <span data-ttu-id="846e8-148">Ein Beispiel für die Verwendung von Transaktionen ist, wenn eine Person einen Geldautomaten verwendet, um 1.000 USD von ihrem Sparkonto auf ihr Girokonto zu überweisen.</span><span class="sxs-lookup"><span data-stu-id="846e8-148">An example of how to use transactions is when a person uses an ATM to transfer $1,000 from their savings account to their checking account.</span></span> <span data-ttu-id="846e8-149">Dazu sind die folgenden Vorgänge erforderlich:</span><span class="sxs-lookup"><span data-stu-id="846e8-149">This entails the following operations:</span></span>  
  
- <span data-ttu-id="846e8-150">Das Abbuchen von 1.000 € vom Sparkonto.</span><span class="sxs-lookup"><span data-stu-id="846e8-150">Withdrawing $1,000 from the savings account.</span></span>  
  
- <span data-ttu-id="846e8-151">Das Einzahlen von 1.000 € auf das Girokonto.</span><span class="sxs-lookup"><span data-stu-id="846e8-151">Depositing $1,000 into the checking account.</span></span>  
  
 <span data-ttu-id="846e8-152">Wenn der erste Vorgang erfolgreich ist und 1.000 € vom Sparkonto abgebucht werden, der zweite Vorgang jedoch fehlschlägt, sind die 1.000 € verloren, weil sie bereits vom Sparkonto abgebucht wurden.</span><span class="sxs-lookup"><span data-stu-id="846e8-152">If the first operation succeeds and $1,000 is withdrawn from the savings account but the second operation fails, the $1,000 is lost because it has already been withdrawn from the savings account.</span></span> <span data-ttu-id="846e8-153">Wenn ein Vorgang fehlschlägt, müssen also beide Vorgänge fehlschlagen, um für die Konten die richtigen Kontostände beizubehalten.</span><span class="sxs-lookup"><span data-stu-id="846e8-153">To keep the accounts in a valid state, if one operation fails, both operations must fail.</span></span>  
  
 <span data-ttu-id="846e8-154">Bei Verwendung von Transaktionsnachrichten können Nachrichten an die Warteschlange gesendet und von der Warteschlange im Rahmen einer Transaktion empfangen werden.</span><span class="sxs-lookup"><span data-stu-id="846e8-154">In transactional messaging, messages can be sent to the queue and received from the queue under a transaction.</span></span> <span data-ttu-id="846e8-155">Wenn eine Nachricht also über eine Transaktion gesendet und für die Transaktion ein Rollback ausgeführt wird, wird ein Zustand wiederhergestellt, als ob die Nachricht nie an die Warteschlange gesendet wurde.</span><span class="sxs-lookup"><span data-stu-id="846e8-155">Thus, if a message is sent in a transaction and the transaction is rolled back, then the outcome is as if the message had never been sent to the queue.</span></span> <span data-ttu-id="846e8-156">Wenn eine Nachricht über eine Transaktion empfangen und für die Transaktion ein Rollback ausgeführt wird, wird ebenfalls ein Zustand wiederhergestellt, als ob die Nachricht nie empfangen wurde.</span><span class="sxs-lookup"><span data-stu-id="846e8-156">Similarly if a message is received in a transaction and the transaction is rolled back, then the outcome is as if the message had never been received.</span></span> <span data-ttu-id="846e8-157">Die Nachricht verbleibt in der Warteschlange, damit sie bei Bedarf gelesen werden kann.</span><span class="sxs-lookup"><span data-stu-id="846e8-157">The message remains in the queue to be read.</span></span>  
  
 <span data-ttu-id="846e8-158">Aufgrund der hohen Latenz beim Senden einer Nachricht können Sie weder wissen, wie lange diese zum Erreichen der Zielwarteschlange benötigt, noch ist Ihnen bekannt, wie lange der Dienst zum Verarbeiten der Nachricht benötigt.</span><span class="sxs-lookup"><span data-stu-id="846e8-158">Because of high latency, when you send a message you have no way of knowing how long it takes to reach its target queue, nor do you know how long it takes for the service to process the message.</span></span> <span data-ttu-id="846e8-159">Aus diesem Grund sollten Sie keine einzelne Transaktion verwenden, um die Nachricht zu senden, die Nachricht zu empfangen und die Nachricht zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="846e8-159">Because of this, you do not want to use a single transaction to send the message, receive the message, and then process the message.</span></span> <span data-ttu-id="846e8-160">Dabei wird eine Transaktion erstellt, für die für einen unbestimmten Zeitraum kein Commit besteht.</span><span class="sxs-lookup"><span data-stu-id="846e8-160">This creates a transaction that is not committed for an indeterminate amount of time.</span></span> <span data-ttu-id="846e8-161">Wenn ein Client und ein Dienst über eine Warteschlange mithilfe von Transaktionen kommunizieren, sind daran zwei Transaktionen beteiligt: eine beim Client und eine beim Dienst.</span><span class="sxs-lookup"><span data-stu-id="846e8-161">When a client and service communicate through a queue using a transaction, two transactions are involved: one on the client and one on the service.</span></span> <span data-ttu-id="846e8-162">Die folgende Abbildung zeigt die Transaktionsgrenzen einer typischen Warteschlangenkommunikation.</span><span class="sxs-lookup"><span data-stu-id="846e8-162">The following illustration shows the transaction boundaries in typical queued communication.</span></span>  
  
 <span data-ttu-id="846e8-163">![Warteschlange mit Transaktionen](../../../../docs/framework/wcf/feature-details/media/qwithtransactions-figure3.gif "QWithTransactions-Figure3")</span><span class="sxs-lookup"><span data-stu-id="846e8-163">![Queue with transactions](../../../../docs/framework/wcf/feature-details/media/qwithtransactions-figure3.gif "QWithTransactions-Figure3")</span></span>  
  
 <span data-ttu-id="846e8-164">Warteschlangenkommunikation mit separaten Transaktionen zur Erfassung und Zustellung</span><span class="sxs-lookup"><span data-stu-id="846e8-164">Queued communication showing separate transactions for capture and delivery</span></span>  
  
 <span data-ttu-id="846e8-165">Die Clienttransaktion verarbeitet und sendet die Nachricht.</span><span class="sxs-lookup"><span data-stu-id="846e8-165">The client transaction processes and sends the message.</span></span> <span data-ttu-id="846e8-166">Wenn ein Commit für die Transaktion ausgeführt wird, befindet sich die Nachricht in der Übertragungswarteschlange.</span><span class="sxs-lookup"><span data-stu-id="846e8-166">When the transaction is committed, the message is in the transmission queue.</span></span> <span data-ttu-id="846e8-167">Beim Dienst liest die Transaktion die Nachricht aus der Zielwarteschlange aus und führt für die Transaktion einen Commit aus.</span><span class="sxs-lookup"><span data-stu-id="846e8-167">On the service, the transaction reads the message from the target queue, processes the message, and then commits the transaction.</span></span> <span data-ttu-id="846e8-168">Wenn während der Verarbeitung ein Fehler auftritt, wird für die Nachricht ein Rollback ausgeführt, und sie wird wieder in die Zielwarteschlange eingefügt.</span><span class="sxs-lookup"><span data-stu-id="846e8-168">If an error occurs during the processing, the message is rolled back and placed in the target queue.</span></span>  
  
## <a name="asynchronous-communication-using-queues"></a><span data-ttu-id="846e8-169">Asynchrone Kommunikation mit Warteschlangen</span><span class="sxs-lookup"><span data-stu-id="846e8-169">Asynchronous Communication Using Queues</span></span>  
 <span data-ttu-id="846e8-170">Warteschlangen sind ein asynchrones Mittel der Kommunikation.</span><span class="sxs-lookup"><span data-stu-id="846e8-170">Queues provide an asynchronous means of communication.</span></span> <span data-ttu-id="846e8-171">Anwendungen, die Nachrichten mithilfe von Warteschlangen senden, können nicht darauf warten, dass die Nachricht vom Empfänger empfangen und verarbeitet wird. Dies liegt an der hohen Latenz des Warteschlangen-Managers.</span><span class="sxs-lookup"><span data-stu-id="846e8-171">Applications that send messages using queues cannot wait for the message to be received and processed by the receiver because of high latency introduced by the queue manager.</span></span> <span data-ttu-id="846e8-172">Nachrichten verbleiben ggf. für einen weit längeren Zeitraum in der Warteschlange, als die Anwendung beabsichtigt hat.</span><span class="sxs-lookup"><span data-stu-id="846e8-172">Messages can remain in the queue for a far longer time than the application intended.</span></span> <span data-ttu-id="846e8-173">Um dies zu vermeiden, kann die Anwendung für die Nachricht einen Gültigkeitsdauerwert angeben.</span><span class="sxs-lookup"><span data-stu-id="846e8-173">To avoid this, the application can specify a Time-To-Live value on the message.</span></span> <span data-ttu-id="846e8-174">Dieser Wert gibt an, wie lange die Nachricht in der Übertragungswarteschlange verbleiben soll.</span><span class="sxs-lookup"><span data-stu-id="846e8-174">This value specifies how long the message should remain in the transmission queue.</span></span> <span data-ttu-id="846e8-175">Wenn dieser Zeitwert überschritten wird und die Nachricht noch nicht an die Zielwarteschlange gesendet wurde, kann die Nachricht an eine Warteschlange für unzustellbare Nachrichten übertragen werden.</span><span class="sxs-lookup"><span data-stu-id="846e8-175">If this time value is exceeded, and the message still has not been sent to the target queue, the message can be transferred to a dead-letter queue.</span></span>  
  
 <span data-ttu-id="846e8-176">Wenn der Absender eine Nachricht sendet, sagt die Rückgabe des Sendevorgangs aus, dass die Nachricht nur bis in die Übertragungswarteschlange des Absenders gelangt ist.</span><span class="sxs-lookup"><span data-stu-id="846e8-176">When the sender sends a message, the return from the send operation implies that the message only made it to the transmission queue on the sender.</span></span> <span data-ttu-id="846e8-177">Wenn beim Senden der Nachricht an die Zielwarteschlange also ein Fehler auftritt, erfährt die sendende Anwendung dies nicht sofort.</span><span class="sxs-lookup"><span data-stu-id="846e8-177">As such, if there is a failure in getting the message to the target queue, the sending application cannot know about it immediately.</span></span> <span data-ttu-id="846e8-178">Um solche Fehler anzuzeigen, wird die fehlgeschlagene Nachricht in eine Warteschlange für unzustellbare Nachrichten übertragen.</span><span class="sxs-lookup"><span data-stu-id="846e8-178">To take note of such failures, the failed message is transferred to a dead-letter queue.</span></span>  
  
 <span data-ttu-id="846e8-179">Alle Fehler, beispielsweise eine Nachricht, die die Zielwarteschlange nicht erreicht oder deren Gültigkeitsdauer abgelaufen ist, müssen einzeln verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="846e8-179">Any error, such as a message failing to reach the target queue or the Time-To-Live expiring, must be processed separately.</span></span> <span data-ttu-id="846e8-180">Es ist deshalb nicht ungewöhnlich, dass Warteschlangenanwendungen zwei Arten von Logik schreiben:</span><span class="sxs-lookup"><span data-stu-id="846e8-180">It is not uncommon, therefore, for queued applications to write two sets of logic:</span></span>  
  
- <span data-ttu-id="846e8-181">Die normale Client- und Dienstlogik zum Senden und Empfangen von Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="846e8-181">The normal client and service logic of sending and receiving messages.</span></span>  
  
- <span data-ttu-id="846e8-182">Die Kompensationslogik zum Verarbeiten von Nachrichten, deren Übertragung oder Zustellung fehlgeschlagen ist.</span><span class="sxs-lookup"><span data-stu-id="846e8-182">Compensation logic to handle messages from the failed transmission or delivery.</span></span>  
  
 <span data-ttu-id="846e8-183">Diese Begriffe werden in den folgenden Abschnitten erläutert.</span><span class="sxs-lookup"><span data-stu-id="846e8-183">The following sections discuss these concepts.</span></span>  
  
## <a name="dead-letter-queue-programming"></a><span data-ttu-id="846e8-184">Programmierung der Warteschlange für unzustellbare Nachrichten</span><span class="sxs-lookup"><span data-stu-id="846e8-184">Dead-Letter Queue Programming</span></span>  
 <span data-ttu-id="846e8-185">Warteschlangen für unzustellbare Nachrichten enthalten Nachrichten, die die Zielwarteschlange aus verschiedenen Gründen nicht erreichen.</span><span class="sxs-lookup"><span data-stu-id="846e8-185">Dead-letter queues contain messages that failed to reach the target queue for various reasons.</span></span> <span data-ttu-id="846e8-186">Die Gründe können von abgelaufenen Nachrichten bis zu Konnektivitätsproblemen reichen, die die Übertragung der Nachricht an die Zielwarteschlange verhindern.</span><span class="sxs-lookup"><span data-stu-id="846e8-186">The reasons can range from expired messages to connectivity issues preventing transfer of the message to the target queue.</span></span>  
  
 <span data-ttu-id="846e8-187">Normalerweise ist eine Anwendung dazu in der Lage, Nachrichten aus einer systemweiten Warteschlange für unzustellbare Nachrichten auszulesen, zu ermitteln, welcher Fehler vorliegt, und entsprechende Schritte einzuleiten, wie das Beheben der Fehler und das erneute Senden der Nachricht bzw. das Aufzeichnen des Status.</span><span class="sxs-lookup"><span data-stu-id="846e8-187">Typically, an application can read messages from a system-wide dead-letter queue, determine what went wrong, and take appropriate action, such as correcting the errors and resending the message or taking note of it.</span></span>  
  
## <a name="poison-message-queue-programming"></a><span data-ttu-id="846e8-188">Programmierung für Warteschlangen für potenziell schädliche Nachrichten</span><span class="sxs-lookup"><span data-stu-id="846e8-188">Poison Message Queue Programming</span></span>  
 <span data-ttu-id="846e8-189">Nachdem eine Nachricht in der Zielwarteschlange eingetroffen ist, schlägt der Dienst beim Verarbeiten der Nachricht ggf. wiederholt fehl.</span><span class="sxs-lookup"><span data-stu-id="846e8-189">After a message makes it to the target queue, the service may repeatedly fail to process the message.</span></span> <span data-ttu-id="846e8-190">Eine Anwendung, die im Rahmen einer Transaktion eine Nachricht aus einer Warteschlange ausliest und eine Datenbank aktualisiert, kann zum Beispiel auf das Problem treffen, dass die Verbindung zur Datenbank vorübergehend unterbrochen ist.</span><span class="sxs-lookup"><span data-stu-id="846e8-190">For example, an application reading a message from the queue under a transaction and updating a database may find the database temporarily disconnected.</span></span> <span data-ttu-id="846e8-191">In diesem Fall wird für die Transaktion ein Rollback ausgeführt, es wird eine neue Transaktion erstellt, und die Nachricht wird erneut aus der Warteschlange ausgelesen.</span><span class="sxs-lookup"><span data-stu-id="846e8-191">In this case, the transaction is rolled back, a new transaction is created, and the message is reread from the queue.</span></span> <span data-ttu-id="846e8-192">Ein zweiter Versuch kann erfolgreich sein oder fehlschlagen.</span><span class="sxs-lookup"><span data-stu-id="846e8-192">A second attempt may succeed or fail.</span></span> <span data-ttu-id="846e8-193">Es kann je nach Fehlerursache auch vorkommen, dass die Nachricht wiederholt nicht an die Anwendung zugestellt wird.</span><span class="sxs-lookup"><span data-stu-id="846e8-193">In some cases, depending on the cause of the error, the message may repeatedly fail delivery to the application.</span></span> <span data-ttu-id="846e8-194">In diesem Fall wird die Nachricht als "potenziell schädlich" eingestuft.</span><span class="sxs-lookup"><span data-stu-id="846e8-194">In this case, the message is deemed as "poison."</span></span> <span data-ttu-id="846e8-195">Nachrichten dieser Art werden in eine Warteschlange für potenziell schädliche Nachrichten verschoben, die von einer Anwendung zur Bearbeitung von potenziell schädlichen Nachrichten gelesen werden kann.</span><span class="sxs-lookup"><span data-stu-id="846e8-195">Such messages are moved to a poison queue that can be read by a poison-handling application.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="846e8-196">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="846e8-196">See also</span></span>

- [<span data-ttu-id="846e8-197">Warteschlangen in WCF</span><span class="sxs-lookup"><span data-stu-id="846e8-197">Queuing in WCF</span></span>](../../../../docs/framework/wcf/feature-details/queuing-in-wcf.md)
- [<span data-ttu-id="846e8-198">Sitzungen und Warteschlangen</span><span class="sxs-lookup"><span data-stu-id="846e8-198">Sessions and Queues</span></span>](../../../../docs/framework/wcf/samples/sessions-and-queues.md)
- [<span data-ttu-id="846e8-199">Warteschlangen für unzustellbare Meldungen</span><span class="sxs-lookup"><span data-stu-id="846e8-199">Dead Letter Queues</span></span>](../../../../docs/framework/wcf/samples/dead-letter-queues.md)
- [<span data-ttu-id="846e8-200">Flüchtige Kommunikation unter Verwendung von Warteschlangen</span><span class="sxs-lookup"><span data-stu-id="846e8-200">Volatile Queued Communication</span></span>](../../../../docs/framework/wcf/samples/volatile-queued-communication.md)
- [<span data-ttu-id="846e8-201">Windows Communication Foundation zu Message Queuing</span><span class="sxs-lookup"><span data-stu-id="846e8-201">Windows Communication Foundation to Message Queuing</span></span>](../../../../docs/framework/wcf/samples/wcf-to-message-queuing.md)
- [<span data-ttu-id="846e8-202">Installieren von Message Queuing (MSMQ)</span><span class="sxs-lookup"><span data-stu-id="846e8-202">Installing Message Queuing (MSMQ)</span></span>](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md)
- [<span data-ttu-id="846e8-203">Message Queuing zu Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="846e8-203">Message Queuing to Windows Communication Foundation</span></span>](../../../../docs/framework/wcf/samples/message-queuing-to-wcf.md)
- [<span data-ttu-id="846e8-204">Nachrichtensicherheit über Message Queuing</span><span class="sxs-lookup"><span data-stu-id="846e8-204">Message Security over Message Queuing</span></span>](../../../../docs/framework/wcf/samples/message-security-over-message-queuing.md)
