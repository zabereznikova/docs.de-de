---
title: Net.TCP-Anschlussfreigabe
description: Erfahren Sie mehr über ein TCP-basiertes Protokoll für die Hochleistungs Kommunikation und den Dienst, der die gemeinsame Nutzung von Ports über mehrere Benutzer Prozesse in WCF hinweg ermöglicht.
ms.date: 03/30/2017
helpviewer_keywords:
- port activation [WCF]
- port sharing [WCF]
ms.assetid: f13692ee-a179-4439-ae72-50db9534eded
ms.openlocfilehash: 37e2c1de4516cbde58970db685422c5c65e25fb3
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/26/2020
ms.locfileid: "96248096"
---
# <a name="nettcp-port-sharing"></a><span data-ttu-id="19adf-103">Net.TCP-Anschlussfreigabe</span><span class="sxs-lookup"><span data-stu-id="19adf-103">Net.TCP Port Sharing</span></span>

<span data-ttu-id="19adf-104">Windows Communication Foundation (WCF) stellt ein neues TCP-basiertes Netzwerkprotokoll (net. TCP://) für die leistungsstarke Kommunikation bereit.</span><span class="sxs-lookup"><span data-stu-id="19adf-104">Windows Communication Foundation (WCF) provides a new TCP-based network protocol (net.tcp://) for high-performance communication.</span></span> <span data-ttu-id="19adf-105">WCF führt außerdem eine neue Systemkomponente ein, den Net. TCP-Port Freigabe Dienst, mit dem net. TCP-Ports für mehrere Benutzer Prozesse freigegeben werden können.</span><span class="sxs-lookup"><span data-stu-id="19adf-105">WCF also introduces a new system component, the Net.TCP Port Sharing Service that enables net.tcp ports to be shared across multiple user processes.</span></span>  
  
## <a name="background-and-motivation"></a><span data-ttu-id="19adf-106">Hintergrund und Motivation</span><span class="sxs-lookup"><span data-stu-id="19adf-106">Background and Motivation</span></span>  

 <span data-ttu-id="19adf-107">Als das TCP/IP-Protokoll erstmals eingeführt wurde, wurde es nur von einer geringen Anzahl von Anwendungsprotokollen verwendet.</span><span class="sxs-lookup"><span data-stu-id="19adf-107">When the TCP/IP protocol was first introduced, only a small number of application protocols made use of it.</span></span> <span data-ttu-id="19adf-108">TCP/IP verwendete Anschlussnummern, um zwischen Anwendungen zu unterscheiden, indem es jedem Anwendungsprotokoll eine eindeutige 16-bit-Anschlussnummer zuwies.</span><span class="sxs-lookup"><span data-stu-id="19adf-108">TCP/IP used port numbers to differentiate between applications by assigning a unique 16-bit port number to each application protocol.</span></span> <span data-ttu-id="19adf-109">HTTP-Verkehr verwendet heute beispielsweise standardmäßig den TCP-Anschluss 80, SMTP verwendet den TCP-Anschluss 25, und FTP verwendet die TCP-Anschlüsse 20 und 21.</span><span class="sxs-lookup"><span data-stu-id="19adf-109">For example, HTTP traffic today is standardized to use TCP port 80, SMTP uses TCP port 25, and FTP uses TCP ports 20 and 21.</span></span> <span data-ttu-id="19adf-110">Andere Anwendungen, die TCP als Transport verwenden, können eine weitere verfügbare Anschlussnummer wählen, entweder durch Konventionen oder durch formale Standardisierung.</span><span class="sxs-lookup"><span data-stu-id="19adf-110">Other applications using TCP as a transport can choose another available port number, either by convention or through formal standardization.</span></span>  
  
 <span data-ttu-id="19adf-111">Die Verwendung von Anschlussnummern zur Unterscheidung zwischen Anwendungen barg Sicherheitsprobleme.</span><span class="sxs-lookup"><span data-stu-id="19adf-111">Using port numbers to distinguish between applications had security problems.</span></span> <span data-ttu-id="19adf-112">Firewalls sind in der Regel so konfiguriert, dass Sie TCP-Verkehr an allen Anschlüssen außer den wenigen wohlbekannten Eingangspunkten blockieren, sodass die Bereitstellung einer Anwendung, die einen Nicht-Standardanschluss verwendet, durch das Vorhandensein firmenspezifischer oder persönlicher Firewalls oft kompliziert oder sogar unmöglich ist.</span><span class="sxs-lookup"><span data-stu-id="19adf-112">Firewalls are generally configured to block TCP traffic on all ports except for a few well-known entry points, so deploying an application that uses a non-standard port is often complicated or even impossible due to the presence of corporate and personal firewalls.</span></span> <span data-ttu-id="19adf-113">Anwendungen, die über bekannten, bereits zugelassene Standardanschlüsse kommunizieren können, verringern die Angriffsfläche für externe Angriffe.</span><span class="sxs-lookup"><span data-stu-id="19adf-113">Applications that can communicate over standard, well-known ports that are already permitted, reduce the external attack surface.</span></span> <span data-ttu-id="19adf-114">Viele Netzwerkanwendungen verwenden das HTTP-Protokoll, da die meisten Firewalls standardmäßig so konfiguriert sind, dass sie Verkehr am TCP-Anschluss&#160;80 zulassen.</span><span class="sxs-lookup"><span data-stu-id="19adf-114">Many network applications make use of the HTTP protocol because most firewalls are configured by default to allow traffic on TCP port 80.</span></span>  
  
 <span data-ttu-id="19adf-115">Das HTTP.SYS-Modell, in dem der Verkehr für viele verschiedene HTTP-Anwendungen als Multiplex über einen einzelnen TCP-Anschluss geleitet wird, ist heute Standard auf der Windows-Plattform.</span><span class="sxs-lookup"><span data-stu-id="19adf-115">The HTTP.SYS model in which traffic for many different HTTP applications is multiplexed onto a single TCP port has become standard on the Windows platform.</span></span> <span data-ttu-id="19adf-116">Dies bietet Firewalladministratoren einen gemeinsamen Steuerungspunkt, und bietet zugleich Anwendungsentwicklern die Möglichkeit, die Bereitstellungskosten beim Erstellen neuer Anwendungen, die das Netzwerk verwenden können, zu minimieren.</span><span class="sxs-lookup"><span data-stu-id="19adf-116">This provides a common point of control for firewall administrators while allowing application developers to minimize the deployment cost of building new applications that can make use of the network.</span></span>  
  
 <span data-ttu-id="19adf-117">Die Möglichkeit, Anschlüsse für mehrere HTTP-Anwendungen freizugeben ist schon lange eine Funktion von Internetinformationsdiensten (Internet Information Services, IIS).</span><span class="sxs-lookup"><span data-stu-id="19adf-117">The ability to share ports across multiple HTTP applications has long been a feature of Internet Information Services (IIS).</span></span> <span data-ttu-id="19adf-118">Dies war jedoch nur mit der Einführung von HTTP.SYS (dem Kernel Modus-HTTP-Protokolllistener) mit IIS 6,0, dass diese Infrastruktur vollständig generalisiert wurde.</span><span class="sxs-lookup"><span data-stu-id="19adf-118">However, it was only with the introduction of HTTP.SYS (the kernel-mode HTTP protocol listener) with IIS 6.0 that this infrastructure was fully generalized.</span></span> <span data-ttu-id="19adf-119">Tatsächlich ermöglicht HTTP.SYS es beliebigen Benutzerprozessen, die für HTTP-Verkehr vorgesehen TCP-Anschlüsse gemeinsam zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="19adf-119">In effect, HTTP.SYS allows arbitrary user processes to share the TCP ports dedicated to HTTP traffic.</span></span> <span data-ttu-id="19adf-120">Durch diese Fähigkeit können zahlreiche HTTP-Anwendungen auf dem selben physischen Gerät in getrennten, isolierten Prozessen koexistieren und dabei die zum Senden und Empfangen von Verkehr über den TCP-Anschluss 80 erforderliche Netzwerkinfrastruktur gemeinsam verwenden.</span><span class="sxs-lookup"><span data-stu-id="19adf-120">This capability allows many HTTP applications to coexist on the same physical machine in separate, isolated processes while sharing the network infrastructure required to send and receive traffic over TCP port 80.</span></span> <span data-ttu-id="19adf-121">Der Net.TCP-Portfreigabedienst ermöglicht die gleiche Art der Anschlussfreigabe für net.tcp-Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="19adf-121">The Net.TCP Port Sharing Service enables the same type of port sharing for net.tcp applications.</span></span>  
  
## <a name="port-sharing-architecture"></a><span data-ttu-id="19adf-122">Architektur der Anschlussfreigabe</span><span class="sxs-lookup"><span data-stu-id="19adf-122">Port Sharing Architecture</span></span>  

 <span data-ttu-id="19adf-123">Die Architektur der Port Freigabe in WCF besteht aus drei Hauptkomponenten:</span><span class="sxs-lookup"><span data-stu-id="19adf-123">The Port Sharing architecture in WCF has three main components:</span></span>  
  
- <span data-ttu-id="19adf-124">Ein Arbeitsprozess: Ein beliebiger Prozess, der mithilfe freigegebener Anschlüsse über net.tcp:// kommuniziert.</span><span class="sxs-lookup"><span data-stu-id="19adf-124">A Worker Process: Any process communicating over net.tcp:// using shared ports.</span></span>  
  
- <span data-ttu-id="19adf-125">Der WCF-TCP-Transport: Implementiert das net. TCP://-Protokoll.</span><span class="sxs-lookup"><span data-stu-id="19adf-125">The WCF TCP transport: Implements the net.tcp:// protocol.</span></span>  
  
- <span data-ttu-id="19adf-126">Der Net.TCP-Portfreigabedienst: Ermöglicht mehreren Arbeitsprozessen, den gleichen TCP-Anschluss zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="19adf-126">The Net.TCP Port Sharing Service: Allows many worker processes to share the same TCP port.</span></span>  
  
 <span data-ttu-id="19adf-127">Der Net.TCP-Portfreigabedienst ist ein Windows-Dienst im Benutzermodus, der net.tcp://-Verbindungen im Namen von Arbeitsprozessen akzeptiert, die sich über ihn verbinden.</span><span class="sxs-lookup"><span data-stu-id="19adf-127">The Net.TCP Port Sharing Service is a user-mode Windows service that accepts net.tcp:// connections on behalf of the worker processes that connect through it.</span></span> <span data-ttu-id="19adf-128">Wenn eine Socketverbindung ankommt, untersucht der Portfreigabedienst den eingehenden Nachrichtenstrom, um dessen Zieladresse zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="19adf-128">When a socket connection arrives, the port sharing service inspects the incoming message stream to obtain its destination address.</span></span> <span data-ttu-id="19adf-129">Basierend auf dieser Adresse kann der Portfreigabedienst den Datenstrom zu der Anwendung weiterleiten, die ihn letztendlich verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="19adf-129">Based on this address, the port sharing service can route the data stream to the application that ultimately processes it.</span></span>  
  
 <span data-ttu-id="19adf-130">Wenn ein WCF-Dienst, der die net. TCP://-Port Freigabe verwendet, geöffnet wird, öffnet die WCF-TCP-Transport-Infrastruktur im Anwendungsprozess nicht direkt einen TCP-Socket.</span><span class="sxs-lookup"><span data-stu-id="19adf-130">When a WCF service that uses net.tcp:// port sharing opens, the WCF TCP transport infrastructure does not directly open a TCP socket in the application process.</span></span> <span data-ttu-id="19adf-131">Stattdessen registriert die Transportinfrastruktur den Basisadressen-URI (Uniform Resource Identifier) des Dienstes mit dem Net.TCP-Portfreigabedienst und wartet darauf, dass der Portfreigabedienst in ihrem Namen den Eingang von Nachrichten abhört.</span><span class="sxs-lookup"><span data-stu-id="19adf-131">Instead, the transport infrastructure registers the service’s base address Uniform Resource Identifier (URI) with the Net.TCP Port Sharing Service and waits for the port sharing service to listen for messages on its behalf.</span></span>  <span data-ttu-id="19adf-132">Der Portfreigabedienst leitet an den Anwendungsdienst adressierte Nachrichten bei Eingang weiter.</span><span class="sxs-lookup"><span data-stu-id="19adf-132">The port sharing service dispatches messages addressed to the application service as they arrive.</span></span>  
  
## <a name="installing-port-sharing"></a><span data-ttu-id="19adf-133">Installieren der Anschlussfreigabe</span><span class="sxs-lookup"><span data-stu-id="19adf-133">Installing Port Sharing</span></span>  

 <span data-ttu-id="19adf-134">Der net. TCP-Port Freigabe Dienst ist auf allen Betriebssystemen verfügbar, die WinFX unterstützen, der Dienst ist jedoch standardmäßig nicht aktiviert.</span><span class="sxs-lookup"><span data-stu-id="19adf-134">The Net.TCP Port Sharing Service is available on all operating systems that support WinFX, but the service is not enabled by default.</span></span> <span data-ttu-id="19adf-135">Als Sicherheitsmaßnahme muss der Net.TCP-Portfreigabedienst vor der ersten Verwendung manuell von einem Administrator aktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="19adf-135">As a security precaution, an administrator must manually enable the Net.TCP Port Sharing Service prior to first use.</span></span> <span data-ttu-id="19adf-136">Der Net.TCP-Portfreigabedienst stellt Konfigurationsoptionen zur Verfügung, mit denen Sie einige Merkmale der dem Portfreigabedienst gehörenden Netzwerksockets ändern können.</span><span class="sxs-lookup"><span data-stu-id="19adf-136">The Net.TCP Port Sharing Service exposes configuration options that allow you to manipulate several characteristics of the network sockets owned by the port sharing service.</span></span> <span data-ttu-id="19adf-137">Weitere Informationen finden Sie unter Gewusst [wie: Aktivieren des net. TCP-Port Freigabe Dienstanbieter](how-to-enable-the-net-tcp-port-sharing-service.md).</span><span class="sxs-lookup"><span data-stu-id="19adf-137">For more information, see [How to: Enable the Net.TCP Port Sharing Service](how-to-enable-the-net-tcp-port-sharing-service.md).</span></span>  
  
## <a name="using-nettcp-port-sharing-in-an-application"></a><span data-ttu-id="19adf-138">Verwenden der Net.tcp-Anschlussfreigabe in einer Anwendung</span><span class="sxs-lookup"><span data-stu-id="19adf-138">Using Net.tcp Port Sharing in an Application</span></span>  

 <span data-ttu-id="19adf-139">Die einfachste Möglichkeit zur Verwendung von net. TCP://der Port Freigabe in der WCF-Anwendung besteht darin, einen Dienst mithilfe von verfügbar zu machen <xref:System.ServiceModel.NetTcpBinding> und dann den Net. TCP-Port Freigabe Dienst mithilfe der-Eigenschaft zu aktivieren <xref:System.ServiceModel.NetTcpBinding.PortSharingEnabled%2A> .</span><span class="sxs-lookup"><span data-stu-id="19adf-139">The easiest way to use net.tcp:// port sharing in your WCF application is to expose a service using the <xref:System.ServiceModel.NetTcpBinding> and then to enable Net.TCP Port Sharing Service using the <xref:System.ServiceModel.NetTcpBinding.PortSharingEnabled%2A> property.</span></span>  
  
 <span data-ttu-id="19adf-140">Weitere Informationen hierzu finden Sie unter Gewusst [wie: Konfigurieren eines WCF-Dienstanbieter für die Verwendung der Port Freigabe](how-to-configure-a-wcf-service-to-use-port-sharing.md).</span><span class="sxs-lookup"><span data-stu-id="19adf-140">For more information about how to do this, see [How to: Configure a WCF Service to Use Port Sharing](how-to-configure-a-wcf-service-to-use-port-sharing.md).</span></span>  
  
## <a name="security-implications-of-port-sharing"></a><span data-ttu-id="19adf-141">Sicherheitsauswirkungen der Anschlussfreigabe</span><span class="sxs-lookup"><span data-stu-id="19adf-141">Security Implications of Port Sharing</span></span>  

 <span data-ttu-id="19adf-142">Obwohl der Net.TCP-Portfreigabedienst eine Verarbeitungsschicht zwischen Anwendungen und dem Netzwerk bereitstellt, sollten Anwendungen, die die Anschlussfreigabe nutzen, zusätzlich so gesichert werden, als würden sie das Netzwerk direkt überwachen.</span><span class="sxs-lookup"><span data-stu-id="19adf-142">Although the Net.TCP Port Sharing Service provides a layer of processing between applications and the network, applications that use port sharing should still be secured as if they were directly listening on the network.</span></span> <span data-ttu-id="19adf-143">Insbesondere sollten Anwendungen, die die Anschlussfreigabe nutzen, die Prozessprivilegien auswerten, unter denen sie ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="19adf-143">Specifically, applications that use port sharing should evaluate the process privileges under which they run.</span></span> <span data-ttu-id="19adf-144">Ziehen Sie in Betracht, die Anwendung unter dem integrierten Netzwerkdienstkonto auszuführen, das mit der minimalen Gruppe der zur Netzwerkkommunikation erforderlichen Privilegien ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="19adf-144">Consider running your application using the built-in Network Service account, which runs with the minimal set of process privileges required for network communication.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="19adf-145">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="19adf-145">See also</span></span>

- [<span data-ttu-id="19adf-146">Konfigurieren des Net.TCP-Portfreigabediensts</span><span class="sxs-lookup"><span data-stu-id="19adf-146">Configuring the Net.TCP Port Sharing Service</span></span>](configuring-the-net-tcp-port-sharing-service.md)
- [<span data-ttu-id="19adf-147">Hosting</span><span class="sxs-lookup"><span data-stu-id="19adf-147">Hosting</span></span>](hosting.md)
- [<span data-ttu-id="19adf-148">Vorgehensweise: Konfigurieren eines WCF-Diensts für die Portfreigabe</span><span class="sxs-lookup"><span data-stu-id="19adf-148">How to: Configure a WCF Service to Use Port Sharing</span></span>](how-to-configure-a-wcf-service-to-use-port-sharing.md)
- [<span data-ttu-id="19adf-149">Vorgehensweise: Aktivieren des Net.TCP-Portfreigabediensts</span><span class="sxs-lookup"><span data-stu-id="19adf-149">How to: Enable the Net.TCP Port Sharing Service</span></span>](how-to-enable-the-net-tcp-port-sharing-service.md)
