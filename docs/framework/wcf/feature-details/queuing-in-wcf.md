---
title: Warteschlangen in WCF
ms.date: 03/30/2017
ms.assetid: e98d76ba-1acf-42cd-b137-0f8214661112
ms.openlocfilehash: a55e9e38472f67b609685224e5dda34729c6481a
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/26/2020
ms.locfileid: "96295183"
---
# <a name="queuing-in-wcf"></a><span data-ttu-id="eba8b-102">Warteschlangen in WCF</span><span class="sxs-lookup"><span data-stu-id="eba8b-102">Queuing in WCF</span></span>

<span data-ttu-id="eba8b-103">In diesem Abschnitt wird beschrieben, wie die Warteschlangen Kommunikation in Windows Communication Foundation (WCF) verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="eba8b-103">This section describes how to use queued communication in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="queues-as-a-wcf-transport-binding"></a><span data-ttu-id="eba8b-104">Warteschlangen als WCF-Transportbindung</span><span class="sxs-lookup"><span data-stu-id="eba8b-104">Queues as a WCF transport binding</span></span>  

 <span data-ttu-id="eba8b-105">In WCF geben die Verträge an, was ausgetauscht wird.</span><span class="sxs-lookup"><span data-stu-id="eba8b-105">In WCF, the contracts specify what is being exchanged.</span></span> <span data-ttu-id="eba8b-106">Verträge sind geschäftsabhängige oder anwendungsspezifische Nachrichtenaustausche.</span><span class="sxs-lookup"><span data-stu-id="eba8b-106">Contracts are business-dependent or application-specific message exchanges.</span></span> <span data-ttu-id="eba8b-107">Der Mechanismus (oder die „Art und Weise“) zum Austausch von Nachrichten wird in den Bindungen angegeben.</span><span class="sxs-lookup"><span data-stu-id="eba8b-107">The mechanism used to exchange messages (or the "how") is specified in the bindings.</span></span> <span data-ttu-id="eba8b-108">Bindungen in WCF Kapseln Details zum Nachrichtenaustausch.</span><span class="sxs-lookup"><span data-stu-id="eba8b-108">Bindings in WCF encapsulate details of the message exchange.</span></span> <span data-ttu-id="eba8b-109">Die Bindungen stellen dem Benutzer Konfigurationssteuerelemente zur Verfügung, mit denen verschiedene Aspekte des Transports oder des Protokolls gesteuert werden, der bzw. das von den Bindungen dargestellt wird.</span><span class="sxs-lookup"><span data-stu-id="eba8b-109">They expose configuration knobs for the user to control various aspects of the transport or the protocol that the bindings represent.</span></span> <span data-ttu-id="eba8b-110">Warteschlangen werden in WCF wie jede andere Transport Bindung behandelt. Dies ist ein großer Vorteil für viele Warteschlangen Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="eba8b-110">Queuing in WCF is treated like any other transport binding, which is a big advantage for many queuing applications.</span></span> <span data-ttu-id="eba8b-111">Heute werden zahlreiche Warteschlangenanwendungen anders geschrieben als andere verteilte RPC (Remote Procedure Call)-Anwendungen, wodurch die Verfolgung und Verwaltung erschwert wird.</span><span class="sxs-lookup"><span data-stu-id="eba8b-111">Today, many queuing applications are written differently from other remote procedure call (RPC)-style distributed applications, making it harder to follow and maintain.</span></span> <span data-ttu-id="eba8b-112">Mit WCF ist das Schreiben einer verteilten Anwendung sehr ähnlich, sodass Sie leichter befolgt und gewartet werden kann.</span><span class="sxs-lookup"><span data-stu-id="eba8b-112">With WCF, the style of writing a distributed application is much the same, making it easier to follow and maintain.</span></span> <span data-ttu-id="eba8b-113">Durch separates Trennen des Austauschmechanismus von der Geschäftslogik wird zudem die Konfiguration des Transports oder das Vornehmen von Änderungen erleichtert, ohne dass der anwendungsspezifische Code davon betroffen ist.</span><span class="sxs-lookup"><span data-stu-id="eba8b-113">Moreover, by factoring out the mechanism of exchange separately from the business logic, it is easier to configure the transport or make changes to it without affecting application specific code.</span></span> <span data-ttu-id="eba8b-114">Die folgende Abbildung zeigt die Struktur eines WCF-Diensts und eines Clients mit MSMQ als Transport.</span><span class="sxs-lookup"><span data-stu-id="eba8b-114">The following figure illustrates the structure of a WCF service and client using MSMQ as a transport.</span></span>  
  
 <span data-ttu-id="eba8b-115">![In die Warteschlange gestelltes Anwendungsdiagramm](media/distributed-queue-figure.jpg "Verteilte Warteschlangen (Abbildung)")</span><span class="sxs-lookup"><span data-stu-id="eba8b-115">![Queued Application Diagram](media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="eba8b-116">Aus der vorherigen Abbildung geht hervor, dass mit dem Client und dem Dienst nur die Anwendungssemantik definiert werden muss, d.&#160;h. der Vertrag und die Implementierung.</span><span class="sxs-lookup"><span data-stu-id="eba8b-116">As you can see from the preceding figure, the client and service must define only the application semantics, that is, the contract and implementation.</span></span> <span data-ttu-id="eba8b-117">Eine der Warteschlange hinzugefügte Bindung wird vom Dienst mit den bevorzugten Einstellungen konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="eba8b-117">The service configures a queued binding with preferred settings.</span></span> <span data-ttu-id="eba8b-118">Der Client verwendet das [Service Model Metadata Utility-Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) , um einen WCF-Client für den Dienst zu generieren und eine Konfigurationsdatei zu generieren, in der die Bindungen beschrieben werden, die zum Senden von Nachrichten an den Dienst verwendet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="eba8b-118">The client uses the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) to generate a WCF client to the service and to generate a configuration file that describes the bindings to use to send messages to the service.</span></span> <span data-ttu-id="eba8b-119">Damit eine Nachricht in der Warteschlange gesendet werden kann, instanziiert der Client einen WCF-Client und Ruft einen Vorgang darauf auf.</span><span class="sxs-lookup"><span data-stu-id="eba8b-119">Thus, to send a queued message, the client instantiates a WCF client and invokes an operation on it.</span></span> <span data-ttu-id="eba8b-120">Daraufhin wird die Nachricht an die Übertragungswarteschlange gesendet und an die Zielwarteschlange übertragen.</span><span class="sxs-lookup"><span data-stu-id="eba8b-120">This causes the message to be sent to the transmission queue and transferred to the target queue.</span></span> <span data-ttu-id="eba8b-121">Alle Komplexitäten der in der Warteschlange enthaltenen Kommunikation werden der Anwendung, die Nachrichten sendet und empfängt, nicht angezeigt.</span><span class="sxs-lookup"><span data-stu-id="eba8b-121">All the complexities of queued communication are hidden from the application that is sending and receiving messages.</span></span>  
  
 <span data-ttu-id="eba8b-122">Einschränkungen bei der in der Warteschlange befindlichen Bindung in WCF umfassen Folgendes:</span><span class="sxs-lookup"><span data-stu-id="eba8b-122">Caveats about queued binding in WCF include:</span></span>  
  
- <span data-ttu-id="eba8b-123">Alle Dienst Vorgänge müssen unidirektional sein, da die Standard Bindung in der Warteschlange in WCF keine Duplex Kommunikation mithilfe von Warteschlangen unterstützt.</span><span class="sxs-lookup"><span data-stu-id="eba8b-123">All service operations must be one-way because the default queued binding in WCF does not support duplex communication using queues.</span></span> <span data-ttu-id="eba8b-124">Ein Beispiel für eine bidirektionale Kommunikation (bidirektionale[Kommunikation](../samples/two-way-communication.md)) veranschaulicht die Verwendung von 2 1-Wege-Verträgen zum Implementieren der Duplex Kommunikation mithilfe von Warteschlangen.</span><span class="sxs-lookup"><span data-stu-id="eba8b-124">A two-way communication sample ([Two-Way Communication](../samples/two-way-communication.md)) illustrates how to use two one-way contracts to implement duplex communication using queues.</span></span>  
  
- <span data-ttu-id="eba8b-125">Zum Generieren eines WCF-Clients mit Metadatenaustausch ist ein zusätzlicher HTTP-Endpunkt für den Dienst erforderlich, damit er direkt abgefragt werden kann, um den WCF-Client zu generieren, und Bindungs Informationen abrufen, um die Kommunikation in der Warteschlange entsprechend zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="eba8b-125">To generate a WCF client using metadata exchange requires an additional HTTP endpoint on the service so that it can be queried directly to generate the WCF client and obtain binding information to appropriately configure queued communication.</span></span>  
  
- <span data-ttu-id="eba8b-126">Basierend auf der Bindung in der Warteschlange ist eine zusätzliche Konfiguration außerhalb von WCF erforderlich.</span><span class="sxs-lookup"><span data-stu-id="eba8b-126">Based on the queued binding, extra configuration outside of WCF is required.</span></span> <span data-ttu-id="eba8b-127">Beispielsweise müssen Sie für die- <xref:System.ServiceModel.NetMsmqBinding> Klasse, die mit WCF ausgeliefert wird, die Bindungen konfigurieren und Message Queuing (MSMQ) minimal konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="eba8b-127">For example, the <xref:System.ServiceModel.NetMsmqBinding> class that is shipped with WCF requires you to configure the bindings as well as minimally configure Message Queuing (MSMQ).</span></span>  
  
 <span data-ttu-id="eba8b-128">In den folgenden Abschnitten werden die spezifischen Bindungen in der Warteschlange beschrieben, die mit WCF ausgeliefert werden und auf dem MSMQ basieren.</span><span class="sxs-lookup"><span data-stu-id="eba8b-128">The following sections describe the specific queued bindings shipped with WCF, which are based on MSMQ.</span></span>  
  
### <a name="msmq"></a><span data-ttu-id="eba8b-129">MSMQ</span><span class="sxs-lookup"><span data-stu-id="eba8b-129">MSMQ</span></span>  

 <span data-ttu-id="eba8b-130">Der in der Warteschlange befindliche Transport in WCF verwendet MSMQ für die Kommunikation in der Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="eba8b-130">The queued transport in WCF uses MSMQ for its queued communication.</span></span>  
  
 <span data-ttu-id="eba8b-131">MSMQ steht als optionale Windows-Komponente zur Verfügung und wird als NT-Dienst ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="eba8b-131">MSMQ ships as an optional component with Windows and runs as an NT service.</span></span> <span data-ttu-id="eba8b-132">MSMQ erfasst Nachrichten, die in einer Übertragungswarteschlange übertragen und an eine Zielwarteschlange gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="eba8b-132">It captures messages for transmission in a transmission queue and for delivery in a target queue.</span></span> <span data-ttu-id="eba8b-133">Die MSMQ-Warteschlangen-Manager implementieren ein zuverlässiges Nachrichtenübertragungsprotokoll, damit Nachrichten bei der Übertragung nicht verloren gehen.</span><span class="sxs-lookup"><span data-stu-id="eba8b-133">The MSMQ queue managers implement a reliable message-transfer protocol so that messages are not lost in transmission.</span></span> <span data-ttu-id="eba8b-134">Das Protokoll kann entweder systemeigen oder SOAP-basiert sein, zum Beispiel das SOAP Reliable Message Protocol (SRMP).</span><span class="sxs-lookup"><span data-stu-id="eba8b-134">The protocol can be either native or SOAP-based, such as the SOAP Reliable Message Protocol (SRMP).</span></span>  
  
 <span data-ttu-id="eba8b-135">In MSMQ können Warteschlangen transaktional oder nicht transaktional sein.</span><span class="sxs-lookup"><span data-stu-id="eba8b-135">In MSMQ, queues can be transactional or non-transactional.</span></span> <span data-ttu-id="eba8b-136">Eine transaktionale Warteschlange ermöglicht das Erfassen und Zustellen von Nachrichten in einer Transaktion und das anschließende dauerhafte Speichern in der Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="eba8b-136">A transactional queue allows messages to be captured and delivered in a transaction and then stored durably in the queue.</span></span> <span data-ttu-id="eba8b-137">An eine transaktionale Warteschlange gesendete Nachrichten werden genau einmal entsprechend ihrer Reihenfolge übertragen.</span><span class="sxs-lookup"><span data-stu-id="eba8b-137">Messages sent to a transactional queue are transferred exactly once in order.</span></span> <span data-ttu-id="eba8b-138">Mit einer nicht transaktionalen Warteschlange können sowohl flüchtige als auch permanente Nachrichten gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="eba8b-138">You can use a non-transactional queue to send both volatile and durable messages.</span></span> <span data-ttu-id="eba8b-139">An nicht transaktionale Warteschlange gesendete Nachrichten werden nicht zuverlässig übertragen, sodass manche Nachrichten verloren gehen können.</span><span class="sxs-lookup"><span data-stu-id="eba8b-139">A message sent to a non-transactional queue does not carry any reliable transfer assurances; thus, messages can be lost.</span></span>  
  
 <span data-ttu-id="eba8b-140">MSMQ-Warteschlangen können auch mit einer Windows-Identität, die im Active Directory-Verzeichnisdienst registriert wird, gesichert werden.</span><span class="sxs-lookup"><span data-stu-id="eba8b-140">MSMQ queues can also be secured using a Windows identity registered with the Active Directory directory service.</span></span> <span data-ttu-id="eba8b-141">Bei der Installation von MSMQ kann die Active Directory-Integration installiert werden. Der Computer muss in diesem Fall Teil eines Windows-Domänennetzwerks sein.</span><span class="sxs-lookup"><span data-stu-id="eba8b-141">When installing MSMQ, you can install Active Directory integration, which requires the computer to be part of a Windows domain network.</span></span>  
  
 <span data-ttu-id="eba8b-142">Weitere Informationen zu MSMQ finden Sie unter [Installieren von Message Queuing (MSMQ)](../samples/installing-message-queuing-msmq.md).</span><span class="sxs-lookup"><span data-stu-id="eba8b-142">For more information about MSMQ, see [Installing Message Queuing (MSMQ)](../samples/installing-message-queuing-msmq.md).</span></span>  
  
### <a name="netmsmqbinding"></a><span data-ttu-id="eba8b-143">NetMsmqBinding</span><span class="sxs-lookup"><span data-stu-id="eba8b-143">NetMsmqBinding</span></span>  

 <span data-ttu-id="eba8b-144">Der [\<netMsmqBinding>](../../configure-apps/file-schema/wcf/netmsmqbinding.md) ist die in der Warteschlange befindliche Bindung, die WCF für zwei WCF-Endpunkte zur Kommunikation mit MSMQ bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="eba8b-144">The [\<netMsmqBinding>](../../configure-apps/file-schema/wcf/netmsmqbinding.md) is the queued binding WCF provides for two WCF endpoints to communicate using MSMQ.</span></span> <span data-ttu-id="eba8b-145">Die Bindung macht deshalb MSMQ-spezifische Eigenschaften verfügbar.</span><span class="sxs-lookup"><span data-stu-id="eba8b-145">The binding, therefore, exposes properties that are specific to MSMQ.</span></span> <span data-ttu-id="eba8b-146">Allerdings sind nicht alle MSMQ-Features und -Eigenschaften in `NetMsmqBinding` verfügbar.</span><span class="sxs-lookup"><span data-stu-id="eba8b-146">However, not all MSMQ features and properties are exposed in the `NetMsmqBinding`.</span></span> <span data-ttu-id="eba8b-147">Die kompakte `NetMsmqBinding` verfügt über ein optimales Spektrum an Funktionen, die für die meisten Kunden ausreichend sind.</span><span class="sxs-lookup"><span data-stu-id="eba8b-147">The compact `NetMsmqBinding` is designed with an optimal set of features that most customers should find sufficient.</span></span>  
  
 <span data-ttu-id="eba8b-148">`NetMsmqBinding` beschreibt die grundlegenden Warteschlangenkonzepte, die bisher in Form von Bindungseigenschaften erörtert wurden.</span><span class="sxs-lookup"><span data-stu-id="eba8b-148">The `NetMsmqBinding` manifests the core queuing concepts discussed thus far in the form of properties on the bindings.</span></span> <span data-ttu-id="eba8b-149">Mit diesen Eigenschaften wird wiederum MSMQ mitgeteilt, wie Nachrichten übertragen und zugestellt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="eba8b-149">These properties, in turn, communicate to MSMQ how to transfer and deliver the messages.</span></span> <span data-ttu-id="eba8b-150">Eine Erläuterung der Eigenschaftenkategorien befindet sich in den folgenden Abschnitten.</span><span class="sxs-lookup"><span data-stu-id="eba8b-150">A discussion of the property categories is in the following sections.</span></span> <span data-ttu-id="eba8b-151">Weitere Informationen finden Sie in den konzeptionellen Themen, in denen bestimmte Eigenschaften vollständig beschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="eba8b-151">For more information, see the conceptual topics that describe specific properties more completely.</span></span>  
  
#### <a name="exactlyonce-and-durable-properties"></a><span data-ttu-id="eba8b-152">ExactlyOnce-Eigenschaft und Durable-Eigenschaft</span><span class="sxs-lookup"><span data-stu-id="eba8b-152">ExactlyOnce and Durable Properties</span></span>  

 <span data-ttu-id="eba8b-153">Die `ExactlyOnce`-Eigenschaft und die `Durable`-Eigenschaft beeinflussen die Übertragung von Nachrichten zwischen Warteschlangen:</span><span class="sxs-lookup"><span data-stu-id="eba8b-153">The `ExactlyOnce` and `Durable` properties affect how messages are transferred between queues:</span></span>  
  
- <span data-ttu-id="eba8b-154">`ExactlyOnce`: Bei einer Festlegung auf `true` (Standard) wird durch den in der Warteschlange stehenden Kanal sichergestellt, dass die Nachricht im Falle der Zustellung nicht dupliziert wird.</span><span class="sxs-lookup"><span data-stu-id="eba8b-154">`ExactlyOnce`: When set to `true` (the default), the queued channel ensures that the message, if delivered, is not duplicated.</span></span> <span data-ttu-id="eba8b-155">Dabei wird auch gewährleistet, dass die Nachricht nicht verloren geht.</span><span class="sxs-lookup"><span data-stu-id="eba8b-155">It also ensures that the message is not lost.</span></span> <span data-ttu-id="eba8b-156">Falls eine Zustellung der Nachricht nicht möglich ist oder die Gültigkeitsdauer der Nachricht abläuft, bevor die Nachricht zugestellt werden kann, wird die nicht zugestellte Nachricht mit der Ursache für den Zustellungsfehler in einer Warteschlange für unzustellbare Nachrichten aufgezeichnet.</span><span class="sxs-lookup"><span data-stu-id="eba8b-156">If the message cannot be delivered, or the message Time-To Live expires before the message can be delivered, the failed message along with the delivery failure reason is recorded in a dead-letter queue.</span></span> <span data-ttu-id="eba8b-157">Wenn der der Warteschlange hinzugefügte Kanal auf `false` festgelegt ist, wird versucht, die Nachricht zu übertragen.</span><span class="sxs-lookup"><span data-stu-id="eba8b-157">When set to `false`, the queued channel makes an effort to transfer the message.</span></span> <span data-ttu-id="eba8b-158">In diesem Fall können Sie optional eine Warteschlange für unzustellbare Nachrichten auswählen.</span><span class="sxs-lookup"><span data-stu-id="eba8b-158">In this case, you can optionally choose a dead-letter queue.</span></span>  
  
- <span data-ttu-id="eba8b-159">`Durable:` Bei einer Festlegung auf `true` (Standard) wird durch den der Warteschlange hinzugefügten Kanal sichergestellt, dass MSMQ die Nachricht permanent auf einem Datenträger speichert.</span><span class="sxs-lookup"><span data-stu-id="eba8b-159">`Durable:` When set to `true` (the default), the queued channel ensures that MSMQ stores the message durably on disk.</span></span> <span data-ttu-id="eba8b-160">Wird der MSMQ-Dienst beendet und neu gestartet, werden die Nachrichten auf dem Datenträger somit an die Zielwarteschlange übertragen oder an den Dienst gesendet.</span><span class="sxs-lookup"><span data-stu-id="eba8b-160">Thus, if the MSMQ service were to stop and restart, the messages on disk is transferred to the target queue or delivered to the service.</span></span> <span data-ttu-id="eba8b-161">Bei einer Festlegung auf `false` werden die Nachrichten in einem flüchtigen Speicher gespeichert und gehen beim Beenden und Neustarten des MSMQ-Diensts verloren.</span><span class="sxs-lookup"><span data-stu-id="eba8b-161">When set to `false`, the messages are stored in volatile store and are lost on stopping and restarting the MSMQ service.</span></span>  
  
 <span data-ttu-id="eba8b-162">Für eine zuverlässige Übertragung von `ExactlyOnce` wird von MSMQ eine transaktionale Warteschlange gefordert.</span><span class="sxs-lookup"><span data-stu-id="eba8b-162">For `ExactlyOnce` reliable transfer, MSMQ requires the queue to be transactional.</span></span> <span data-ttu-id="eba8b-163">Zudem wird von MSMQ gefordert, dass eine Transaktion von einer Transaktionswarteschlange gelesen wird.</span><span class="sxs-lookup"><span data-stu-id="eba8b-163">Also, MSMQ requires a transaction to read from a transactional queue.</span></span> <span data-ttu-id="eba8b-164">Bei Verwendung von `NetMsmqBinding` muss eine Transaktion daher Nachrichten senden oder empfangen, wenn `ExactlyOnce` auf `true` festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="eba8b-164">As such, when you use the `NetMsmqBinding`, remember that a transaction is required to send or receive messages when `ExactlyOnce` is set to `true`.</span></span> <span data-ttu-id="eba8b-165">Vergleichbar damit ist, dass MSMQ eine nicht transaktionale Warteschlange für Zusicherungen nach dem Best-Effort-Prinzip (beispielsweise wenn `ExactlyOnce` auf `false` festgelegt ist) sowie für flüchtiges Messaging benötigt.</span><span class="sxs-lookup"><span data-stu-id="eba8b-165">Similarly, MSMQ requires the queue to be non-transactional for best-effort assurances, such as when `ExactlyOnce` is `false` and for volatile messaging.</span></span> <span data-ttu-id="eba8b-166">Wird `ExactlyOnce` auf `false` oder durable auf `false` festgelegt, ist Senden oder Empfangen mithilfe einer Transaktion nicht möglich.</span><span class="sxs-lookup"><span data-stu-id="eba8b-166">Thus, when setting `ExactlyOnce` to `false` or durable to `false`, you cannot send or receive using a transaction.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="eba8b-167">Stellen Sie sicher, dass die richtige Warteschlange (transaktional oder nicht transaktional) auf Grundlage der Einstellungen in den Bindungen erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="eba8b-167">Ensure that the correct queue (transactional or non-transactional) is created based on settings in the bindings.</span></span> <span data-ttu-id="eba8b-168">Wenn für `ExactlyOnce` der Wert `true` gilt, verwenden Sie eine Transaktionswarteschlange und andernfalls eine nicht transaktionale Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="eba8b-168">If `ExactlyOnce` is `true`, use a transactional queue; otherwise, use a non-transactional queue.</span></span>  
  
#### <a name="dead-letter-queue-properties"></a><span data-ttu-id="eba8b-169">Eigenschaften der Warteschlange für unzustellbare Nachrichten</span><span class="sxs-lookup"><span data-stu-id="eba8b-169">Dead-Letter Queue Properties</span></span>  

 <span data-ttu-id="eba8b-170">Die Warteschlange für unzustellbare Nachrichten wird verwendet, um unzustellbare Nachrichten zu speichern.</span><span class="sxs-lookup"><span data-stu-id="eba8b-170">The dead-letter queue is used to store messages that fail delivery.</span></span> <span data-ttu-id="eba8b-171">Der Benutzer kann kompensierende Logik schreiben, die Nachrichten aus der Warteschlange für unzustellbare Nachrichten liest.</span><span class="sxs-lookup"><span data-stu-id="eba8b-171">The user can write compensating logic that reads messages out of the dead-letter queue.</span></span>  
  
 <span data-ttu-id="eba8b-172">Viele Warteschlangensysteme verfügen über eine systemweite Warteschlange für unzustellbare Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="eba8b-172">Many queuing systems provide for a system-wide dead-letter queue.</span></span> <span data-ttu-id="eba8b-173">MSMQ verfügt über eine systemweite Warteschlange für unzustellbare nicht transaktionale Nachrichten. Diese Warteschlange wird für Nachrichten verwendet, deren Zustellung an nicht transaktionale Warteschlangen nicht möglich ist. Darüber hinaus besitzt MSMQ eine systemweite transaktionale Warteschlange für unzustellbare Nachrichten, die für Nachrichten verwendet wird, die nicht an Transaktionswarteschlange gesendet werden können.</span><span class="sxs-lookup"><span data-stu-id="eba8b-173">MSMQ provides a system-wide non-transactional dead-letter queue for messages that fail delivery to non-transactional queues and a system-wide transactional dead-letter queue for messages that fail delivery to transactional queues.</span></span>  
  
 <span data-ttu-id="eba8b-174">Wird der MSMQ-Dienst von mehreren Clients, die Nachrichten an verschiedene Zielwarteschlangen senden, gemeinsam verwendet, werden alle von den Clients gesendeten Nachrichten in dieselbe Warteschlange für unzustellbare Nachrichten verschoben.</span><span class="sxs-lookup"><span data-stu-id="eba8b-174">If multiple clients sending messages to different target queues share the MSMQ service, all messages sent by the clients go to the same dead-letter queue.</span></span> <span data-ttu-id="eba8b-175">Dies ist nicht immer empfehlenswert.</span><span class="sxs-lookup"><span data-stu-id="eba8b-175">This is not always preferable.</span></span> <span data-ttu-id="eba8b-176">Zur besseren Isolation bieten WCF und MSMQ in Windows Vista eine benutzerdefinierte Warteschlange für unzustellbare Nachrichten (oder eine anwendungsspezifische Warteschlange für unzustellbare Nachrichten), die der Benutzer angeben kann, um Nachrichten zu speichern, die nicht zugestellt werden</span><span class="sxs-lookup"><span data-stu-id="eba8b-176">For better isolation, WCF and MSMQ in Windows Vista provide a custom dead-letter queue (or application-specific dead-letter queue) that the user can specify to store messages that fail delivery.</span></span> <span data-ttu-id="eba8b-177">Daher verwenden unterschiedliche Clients nicht gemeinsam dieselbe Warteschlange für unzustellbare Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="eba8b-177">Therefore, different clients do not share the same dead-letter queue.</span></span>  
  
 <span data-ttu-id="eba8b-178">Die Bindung verfügt über zwei wichtige Eigenschaften:</span><span class="sxs-lookup"><span data-stu-id="eba8b-178">The binding has two properties of interest:</span></span>  
  
- <span data-ttu-id="eba8b-179">`DeadLetterQueue`: Diese Eigenschaft ist eine Enumeration, die angibt, ob eine Warteschlange für unzustellbare Nachrichten angefordert wird.</span><span class="sxs-lookup"><span data-stu-id="eba8b-179">`DeadLetterQueue`: This property is an enumeration that indicates whether a dead-letter queue is requested.</span></span> <span data-ttu-id="eba8b-180">Die Enumeration enthält auch die Art der Warteschlange für unzustellbare Nachrichten, sofern eine Warteschlange angefordert wird.</span><span class="sxs-lookup"><span data-stu-id="eba8b-180">The enumeration also contains the kind of dead-letter queue, if one is requested.</span></span> <span data-ttu-id="eba8b-181">Mögliche Werte sind `None`, `System` und `Custom`.</span><span class="sxs-lookup"><span data-stu-id="eba8b-181">The values are `None`, `System`, and `Custom`.</span></span> <span data-ttu-id="eba8b-182">Weitere Informationen zur Interpretation dieser Eigenschaften finden Sie unter Verwenden von [Dead-Letter Warteschlangen zum Behandeln von Fehlern bei der Nachrichtenübertragung](using-dead-letter-queues-to-handle-message-transfer-failures.md) .</span><span class="sxs-lookup"><span data-stu-id="eba8b-182">For more information about the interpretation of these properties, see [Using Dead-Letter Queues to Handle Message Transfer Failures](using-dead-letter-queues-to-handle-message-transfer-failures.md)</span></span>  
  
- <span data-ttu-id="eba8b-183">`CustomDeadLetterQueue`: Diese Eigenschaft ist die Uniform Resource Identifier (URI)-Adresse der anwendungsspezifischen Warteschlange für unzustellbare Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="eba8b-183">`CustomDeadLetterQueue`: This property is the Uniform Resource Identifier (URI) address of the application-specific dead-letter queue.</span></span> <span data-ttu-id="eba8b-184">Dies ist erforderlich, wenn `DeadLetterQueue` .`Custom`</span><span class="sxs-lookup"><span data-stu-id="eba8b-184">This is required if `DeadLetterQueue`.`Custom`</span></span> <span data-ttu-id="eba8b-185">wird ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="eba8b-185">is chosen.</span></span>  
  
#### <a name="poison-message-handling-properties"></a><span data-ttu-id="eba8b-186">Eigenschaften der Behandlung nicht verarbeitbarer Nachrichten</span><span class="sxs-lookup"><span data-stu-id="eba8b-186">Poison Message Handling properties</span></span>  

 <span data-ttu-id="eba8b-187">Liest der Dienst im Rahmen einer Transaktion Nachrichten aus der Zielwarteschlange, kann die Nachricht vom Dienst aus verschiedenen Gründen möglicherweise nicht verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="eba8b-187">When the service reads messages from the target queue under a transaction, the service may fail to process the message for various reasons.</span></span> <span data-ttu-id="eba8b-188">Die Nachricht wird anschließend zum erneuten Lesen in die Warteschlange zurückgestellt.</span><span class="sxs-lookup"><span data-stu-id="eba8b-188">The message is then put back into the queue to be read again.</span></span> <span data-ttu-id="eba8b-189">Zur Verarbeitung von Nachrichten, die mehrmals nicht zugestellt werden konnten, kann in der Bindung ein Satz Eigenschaften zur Behandlung nicht verarbeitbarer Nachrichten konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="eba8b-189">To deal with messages that fail repeatedly, a set of poison-message handling properties can be configured in the binding.</span></span> <span data-ttu-id="eba8b-190">Es gibt vier Eigenschaften: `ReceiveRetryCount`, `MaxRetryCycles`, `RetryCycleDelay` und `ReceiveErrorHandling`.</span><span class="sxs-lookup"><span data-stu-id="eba8b-190">There are four properties: `ReceiveRetryCount`, `MaxRetryCycles`, `RetryCycleDelay`, and `ReceiveErrorHandling`.</span></span> <span data-ttu-id="eba8b-191">Weitere Informationen zu diesen Eigenschaften finden Sie unter [Behandlung](poison-message-handling.md)von nicht verarbeitbaren Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="eba8b-191">For more information about these properties, see [Poison Message Handling](poison-message-handling.md).</span></span>  
  
#### <a name="security-properties"></a><span data-ttu-id="eba8b-192">Sicherheitseigenschaften</span><span class="sxs-lookup"><span data-stu-id="eba8b-192">Security Properties</span></span>  

 <span data-ttu-id="eba8b-193">MSMQ verfügt über ein eigenes Sicherheitsmodell, zu dem beispielsweise Zugriffssteuerungslisten in einer Warteschlange oder das Senden von authentifizierten Nachrichten gehören.</span><span class="sxs-lookup"><span data-stu-id="eba8b-193">MSMQ exposes its own security model, such as access control lists (ACLs) on a queue or sending authenticated messages.</span></span> <span data-ttu-id="eba8b-194">`NetMsmqBinding` macht diese Sicherheitseigenschaften als Teil der Transportsicherheitseinstellungen verfügbar.</span><span class="sxs-lookup"><span data-stu-id="eba8b-194">The `NetMsmqBinding` exposes these security properties as part of its transport security settings.</span></span> <span data-ttu-id="eba8b-195">Die Bindung für Transportsicherheit besitzt zwei Eigenschaften: `MsmqAuthenticationMode` und `MsmqProtectionLevel`.</span><span class="sxs-lookup"><span data-stu-id="eba8b-195">There are two properties in the binding for transport security: `MsmqAuthenticationMode` and `MsmqProtectionLevel`.</span></span> <span data-ttu-id="eba8b-196">Einstellungen in diesen Eigenschaften sind von der Konfiguration von MSMQ abhängig.</span><span class="sxs-lookup"><span data-stu-id="eba8b-196">Settings in these properties depend on how MSMQ is configured.</span></span> <span data-ttu-id="eba8b-197">Weitere Informationen finden Sie unter [Sichern von Nachrichten mit Transport Sicherheit](securing-messages-using-transport-security.md).</span><span class="sxs-lookup"><span data-stu-id="eba8b-197">For more information, see [Securing Messages Using Transport Security](securing-messages-using-transport-security.md).</span></span>  
  
 <span data-ttu-id="eba8b-198">Zusätzlich zur Transportsicherheit kann die eigentliche SOAP-Nachricht mit Nachrichtensicherheit gesichert werden.</span><span class="sxs-lookup"><span data-stu-id="eba8b-198">In addition to transport security, the actual SOAP message itself can be secured using message security.</span></span> <span data-ttu-id="eba8b-199">Weitere Informationen finden Sie unter [Sichern von Nachrichten mithilfe der Nachrichten Sicherheit](securing-messages-using-message-security.md).</span><span class="sxs-lookup"><span data-stu-id="eba8b-199">For more information, see [Securing Messages Using Message Security](securing-messages-using-message-security.md).</span></span>  
  
 <span data-ttu-id="eba8b-200">`MsmqTransportSecurity` macht ebenfalls zwei Eigenschaften verfügbar, `MsmqEncryptionAlgorithm` und `MsmqHashAlgorithm`.</span><span class="sxs-lookup"><span data-stu-id="eba8b-200">`MsmqTransportSecurity` also exposes two properties, `MsmqEncryptionAlgorithm` and `MsmqHashAlgorithm`.</span></span> <span data-ttu-id="eba8b-201">Dabei handelt es sich um Enumerationen verschiedener Algorithmen, die bei Übertragungen zwischen Warteschlangen für die Verschlüsselung von Nachrichten und das Hashing der Signaturen gewählt werden können.</span><span class="sxs-lookup"><span data-stu-id="eba8b-201">These are enumerations of different algorithms to choose for queue-to-queue transfer encryption of messages and hashing of the signatures.</span></span>  
  
#### <a name="other-properties"></a><span data-ttu-id="eba8b-202">Andere Eigenschaften</span><span class="sxs-lookup"><span data-stu-id="eba8b-202">Other Properties</span></span>  

 <span data-ttu-id="eba8b-203">Neben den zuvor genannten Eigenschaften stehen in der Bindung auch andere MSMQ-spezifische Eigenschaften zur Verfügung:</span><span class="sxs-lookup"><span data-stu-id="eba8b-203">In addition to the preceding properties, other MSMQ-specific properties exposed in the binding include:</span></span>  
  
- <span data-ttu-id="eba8b-204">`UseSourceJournal`: Eine Eigenschaft, mit der angegeben wird, dass die Führung von Quelljournalen aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="eba8b-204">`UseSourceJournal`: A property to indicate that source journaling is turned on.</span></span> <span data-ttu-id="eba8b-205">Die Führung von Quelljournalen ist eine MSMQ-Funktion zum Erfassen von Nachrichten, die erfolgreich von der Übertragungswarteschlange übertragen wurden.</span><span class="sxs-lookup"><span data-stu-id="eba8b-205">Source journaling is an MSMQ feature that keeps track of messages that have been successfully transmitted from the transmission queue.</span></span>  
  
- <span data-ttu-id="eba8b-206">`UseMsmqTracing`: Eine Eigenschaft, mit der angegeben wird, dass die MSMQ-Ablaufverfolgung aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="eba8b-206">`UseMsmqTracing`: A property to indicate that MSMQ tracing is turned on.</span></span> <span data-ttu-id="eba8b-207">Die MSMQ-Ablaufverfolgung sendet Berichtsnachrichten an eine Berichtwarteschlange, wenn eine Nachricht einen Computer, der als Host für einen MSMQ-Warteschlangen-Manager fungiert, verlässt oder bei diesem eingeht.</span><span class="sxs-lookup"><span data-stu-id="eba8b-207">MSMQ tracing sends report messages to a report queue each time a message leaves or arrives at a machine hosting an MSMQ queue manager.</span></span>  
  
- <span data-ttu-id="eba8b-208">`QueueTransferProtocol`: Eine Enumeration des Protokolls, das für Nachrichtenübertragungen zwischen Warteschlangen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="eba8b-208">`QueueTransferProtocol`: An enumeration of the protocol to use for queue-to-queue message transfers.</span></span> <span data-ttu-id="eba8b-209">MSMQ implementiert ein systemeigenes Protokoll für Übertragungen zwischen Warteschlangen und ein SOAP-basiertes Protokoll mit der Bezeichnung SOAP Reliable Messaging Protocol (SRMP).</span><span class="sxs-lookup"><span data-stu-id="eba8b-209">MSMQ implements a native queue-to-queue transfer protocol and a SOAP-based protocol called SOAP Reliable Messaging Protocol (SRMP).</span></span> <span data-ttu-id="eba8b-210">SRMP wird bei Verwendung von HTTP-Transport für Übertragungen zwischen Warteschlangen verwendet.</span><span class="sxs-lookup"><span data-stu-id="eba8b-210">SRMP is used when using HTTP transport for queue-to-queue transfers.</span></span> <span data-ttu-id="eba8b-211">Sicheres SRMP wird bei Verwendung von HTTPS für Übertragungen zwischen Warteschlangen verwendet.</span><span class="sxs-lookup"><span data-stu-id="eba8b-211">SRMP secure is used when using HTTPS for queue-to-queue transfers.</span></span>  
  
- <span data-ttu-id="eba8b-212">`UseActiveDirectory`: Ein boolescher Wert, mit dem angegeben wird, ob Active Directory für die Auflösung von Warteschlangenadressen verwendet werden muss.</span><span class="sxs-lookup"><span data-stu-id="eba8b-212">`UseActiveDirectory`: A Boolean value to indicate whether the Active Directory must be used for queue address resolution.</span></span> <span data-ttu-id="eba8b-213">Standardmäßig ist dieser Wert deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="eba8b-213">By default, this is off.</span></span> <span data-ttu-id="eba8b-214">Weitere Informationen finden Sie unter [Dienst Endpunkte und Adressierung von Warteschlangen](service-endpoints-and-queue-addressing.md).</span><span class="sxs-lookup"><span data-stu-id="eba8b-214">For more information, see [Service Endpoints and Queue Addressing](service-endpoints-and-queue-addressing.md).</span></span>  
  
### <a name="msmqintegrationbinding"></a><span data-ttu-id="eba8b-215">MsmqIntegrationBinding</span><span class="sxs-lookup"><span data-stu-id="eba8b-215">MsmqIntegrationBinding</span></span>  

 <span data-ttu-id="eba8b-216">`MsmqIntegrationBinding`Wird verwendet, wenn ein WCF-Endpunkt mit einer vorhandenen MSMQ-Anwendung kommunizieren soll, die in C-, C++-, com-oder System. Messaging-APIs geschrieben wurde.</span><span class="sxs-lookup"><span data-stu-id="eba8b-216">The `MsmqIntegrationBinding` is used when you want a WCF endpoint to communicate with an existing MSMQ application written in C, C++, COM, or System.Messaging APIs.</span></span>  
  
 <span data-ttu-id="eba8b-217">Die Bindungseigenschaften sind für `NetMsmqBinding` identisch.</span><span class="sxs-lookup"><span data-stu-id="eba8b-217">The binding properties are the same as for `NetMsmqBinding`.</span></span> <span data-ttu-id="eba8b-218">Folgende Unterschiede sind jedoch zu berücksichtigen:</span><span class="sxs-lookup"><span data-stu-id="eba8b-218">However, the following differences apply:</span></span>  
  
- <span data-ttu-id="eba8b-219">Der Vorgangsvertrag für `MsmqIntegrationBinding` ist auf das Verwenden eines Einzelparameters vom Typ <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> beschränkt, in dem der Typparameter der Texttyp ist.</span><span class="sxs-lookup"><span data-stu-id="eba8b-219">The operation contract for `MsmqIntegrationBinding` is restricted to taking a single parameter of type <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> where the type parameter is the body type.</span></span>  
  
- <span data-ttu-id="eba8b-220">Ein Großteil der Eigenschaften der systemeigenen MSMQ-Nachrichten steht in <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="eba8b-220">Much of MSMQ native message properties are exposed in the <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> for use.</span></span>  
  
- <span data-ttu-id="eba8b-221">Die Serialisierung und Deserialisierung des Nachrichtentexts wird durch verfügbare Serialisierungsprogramme wie XML und ActiveX unterstützt.</span><span class="sxs-lookup"><span data-stu-id="eba8b-221">To help with serialization and deserialization of the message body, serializers such as XML and ActiveX are provided.</span></span>  
  
### <a name="sample-code"></a><span data-ttu-id="eba8b-222">Beispielcode</span><span class="sxs-lookup"><span data-stu-id="eba8b-222">Sample Code</span></span>  

 <span data-ttu-id="eba8b-223">Schritt-für-Schritt-Anweisungen zum Schreiben von WCF-Diensten, die MSMQ verwenden, finden Sie in den folgenden Themen:</span><span class="sxs-lookup"><span data-stu-id="eba8b-223">For step by step instructions on how to write WCF services that use MSMQ see the following topics:</span></span>  
  
- [<span data-ttu-id="eba8b-224">Vorgehensweise: Nachrichtenaustausch mit WCF-Endpunkten und Message Queuing-Anwendungen</span><span class="sxs-lookup"><span data-stu-id="eba8b-224">How to: Exchange Messages with WCF Endpoints and Message Queuing Applications</span></span>](how-to-exchange-messages-with-wcf-endpoints-and-message-queuing-applications.md)  
  
- [<span data-ttu-id="eba8b-225">Vorgehensweise: Austauschen von Nachrichten in einer Warteschlange mit WCF-Endpunkten</span><span class="sxs-lookup"><span data-stu-id="eba8b-225">How to: Exchange Queued Messages with WCF Endpoints</span></span>](how-to-exchange-queued-messages-with-wcf-endpoints.md)  
  
 <span data-ttu-id="eba8b-226">Ein vollständiges Codebeispiel, das die Verwendung von MSMQ in WCF veranschaulicht, finden Sie in den folgenden Themen:</span><span class="sxs-lookup"><span data-stu-id="eba8b-226">For a completed code sample illustrating the use of MSMQ in WCF see the following topics:</span></span>  
  
- [<span data-ttu-id="eba8b-227">Abgewickelte MSMQ-Bindung</span><span class="sxs-lookup"><span data-stu-id="eba8b-227">Transacted MSMQ Binding</span></span>](../samples/transacted-msmq-binding.md)  
  
- [<span data-ttu-id="eba8b-228">Flüchtige Kommunikation unter Verwendung von Warteschlangen</span><span class="sxs-lookup"><span data-stu-id="eba8b-228">Volatile Queued Communication</span></span>](../samples/volatile-queued-communication.md)  
  
- [<span data-ttu-id="eba8b-229">Warteschlangen für unzustellbare Meldungen</span><span class="sxs-lookup"><span data-stu-id="eba8b-229">Dead Letter Queues</span></span>](../samples/dead-letter-queues.md)  
  
- [<span data-ttu-id="eba8b-230">Sitzungen und Warteschlangen</span><span class="sxs-lookup"><span data-stu-id="eba8b-230">Sessions and Queues</span></span>](../samples/sessions-and-queues.md)  
  
- [<span data-ttu-id="eba8b-231">Bidirektionale Kommunikation</span><span class="sxs-lookup"><span data-stu-id="eba8b-231">Two-Way Communication</span></span>](../samples/two-way-communication.md)
  
- [<span data-ttu-id="eba8b-232">SRMP</span><span class="sxs-lookup"><span data-stu-id="eba8b-232">SRMP</span></span>](../samples/srmp.md)  
  
- [<span data-ttu-id="eba8b-233">Nachrichtensicherheit über Message Queuing</span><span class="sxs-lookup"><span data-stu-id="eba8b-233">Message Security over Message Queuing</span></span>](../samples/message-security-over-message-queuing.md)  
  
## <a name="see-also"></a><span data-ttu-id="eba8b-234">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="eba8b-234">See also</span></span>

- [<span data-ttu-id="eba8b-235">Dienstendpunkte und Adressieren von Warteschlangen</span><span class="sxs-lookup"><span data-stu-id="eba8b-235">Service Endpoints and Queue Addressing</span></span>](service-endpoints-and-queue-addressing.md)
- [<span data-ttu-id="eba8b-236">Webhosting einer Anwendung mit Queuing</span><span class="sxs-lookup"><span data-stu-id="eba8b-236">Web Hosting a Queued Application</span></span>](web-hosting-a-queued-application.md)
