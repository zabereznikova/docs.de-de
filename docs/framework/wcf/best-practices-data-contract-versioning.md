---
title: 'Bewährte Methoden: Datenvertragsversionsverwaltung'
ms.date: 03/30/2017
helpviewer_keywords:
- data contracts
- service contracts
- best practices [WCF], data contract versioning
- Windows Communication Foundation, data contracts
ms.assetid: bf0ab338-4d36-4e12-8002-8ebfdeb346cb
ms.openlocfilehash: d6a1eef949e30a1a6d9a1c5971d33c788cc548b9
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/26/2020
ms.locfileid: "96277906"
---
# <a name="best-practices-data-contract-versioning"></a><span data-ttu-id="0784b-102">Bewährte Methoden: Datenvertragsversionsverwaltung</span><span class="sxs-lookup"><span data-stu-id="0784b-102">Best Practices: Data Contract Versioning</span></span>

<span data-ttu-id="0784b-103">In diesem Thema sind die empfohlenen Vorgehensweisen zum Erstellen von Datenverträgen aufgeführt, die sich im Laufe der Zeit auf einfache Weise entwickeln können.</span><span class="sxs-lookup"><span data-stu-id="0784b-103">This topic lists the best practices for creating data contracts that can evolve easily over time.</span></span> <span data-ttu-id="0784b-104">Weitere Informationen zu Daten Verträgen finden Sie in den Themen unter [Verwenden von Daten Verträgen](./feature-details/using-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="0784b-104">For more information about data contracts, see the topics in [Using Data Contracts](./feature-details/using-data-contracts.md).</span></span>  
  
## <a name="note-on-schema-validation"></a><span data-ttu-id="0784b-105">Hinweis zur Schemavalidierung</span><span class="sxs-lookup"><span data-stu-id="0784b-105">Note on Schema Validation</span></span>  

 <span data-ttu-id="0784b-106">Bei der Erörterung der Versionsverwaltung von Daten Verträgen ist es wichtig zu beachten, dass das von Windows Communication Foundation (WCF) exportierte Daten Vertrags Schema keine Unterstützung für die Versionskontrolle hat, außer die Tatsache, dass Elemente standardmäßig als optional gekennzeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="0784b-106">In discussing data contract versioning, it is important to note that the data contract schema exported by Windows Communication Foundation (WCF) does not have any versioning support, other than the fact that elements are marked as optional by default.</span></span>  
  
 <span data-ttu-id="0784b-107">Dies bedeutet, dass sogar ein sehr häufig verwendetes Versionsverwaltungsszenario, beispielsweise das Hinzufügen eines neuen Datenmembers, nicht nahtlos für ein bestimmtes Schema implementiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="0784b-107">This means that even the most common versioning scenario, such as adding a new data member, cannot be implemented in a way that is seamless with regard to a given schema.</span></span> <span data-ttu-id="0784b-108">Die neueren Versionen eines Datenvertrags (beispielsweise mit einem neuen Datenmember) können bei Verwendung des alten Schemas nicht überprüft werden.</span><span class="sxs-lookup"><span data-stu-id="0784b-108">The newer versions of a data contract (with a new data member, for example) do not validate using the old schema.</span></span>  
  
 <span data-ttu-id="0784b-109">Es gibt jedoch viele Szenarios, bei denen die strenge Schemakompatibilität nicht erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="0784b-109">However, there are many scenarios in which strict schema compliance is not required.</span></span> <span data-ttu-id="0784b-110">Viele Webdienst Plattformen, einschließlich WCF-und XML-Webdienste, die mit ASP.NET erstellt wurden, führen standardmäßig keine Schema Validierung durch und tolerieren daher zusätzliche Elemente, die nicht durch das Schema beschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="0784b-110">Many Web services platforms, including WCF and XML Web services created using ASP.NET, do not perform schema validation by default and therefore tolerate extra elements that are not described by the schema.</span></span> <span data-ttu-id="0784b-111">Wenn Sie mit Plattformen dieser Art arbeiten, sind viele Versionsverwaltungsszenarios einfacher zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="0784b-111">When working with such platforms, many versioning scenarios are easier to implement.</span></span>  
  
 <span data-ttu-id="0784b-112">Es gibt also zwei Sätze von Richtlinien für die Versionsverwaltung von Datenverträgen: Einen Satz für Szenarios, bei denen die genaue Schemagültigkeit wichtig ist, und einen Satz für Szenarios, bei denen dies nicht wichtig ist.</span><span class="sxs-lookup"><span data-stu-id="0784b-112">Thus, there are two sets of data contract versioning guidelines: one set for scenarios where strict schema validity is important, and another set for scenarios when it is not.</span></span>  
  
## <a name="versioning-when-schema-validation-is-required"></a><span data-ttu-id="0784b-113">Versionsverwaltung, wenn eine Schemavalidierung erforderlich ist</span><span class="sxs-lookup"><span data-stu-id="0784b-113">Versioning When Schema Validation Is Required</span></span>  

 <span data-ttu-id="0784b-114">Wenn die genaue Schemagültigkeit in allen Richtungen erforderlich ist (neu in alt und alt in neu), sollten Datenverträge als unveränderlich angesehen werden.</span><span class="sxs-lookup"><span data-stu-id="0784b-114">If strict schema validity is required in all directions (new-to-old and old-to-new), data contracts should be considered immutable.</span></span> <span data-ttu-id="0784b-115">Wenn die Versionsverwaltung erforderlich ist, sollte ein neuer Datenvertrag mit einem anderen Namen oder Namespace erstellt werden, und der Dienstvertrag, der den Datentyp nutzt, muss eine entsprechende Version erhalten.</span><span class="sxs-lookup"><span data-stu-id="0784b-115">If versioning is required, a new data contract should be created, with a different name or namespace, and the service contract using the data type should be versioned accordingly.</span></span>  
  
 <span data-ttu-id="0784b-116">Angenommen, Sie verwenden einen Dienstvertrag für die Bestellungsverarbeitung mit dem Namen `PoProcessing` mit einem `PostPurchaseOrder`-Vorgang, der einen Parameter erfordert, der einem `PurchaseOrder`-Datenvertrag entspricht.</span><span class="sxs-lookup"><span data-stu-id="0784b-116">For example, a purchase order processing service contract named `PoProcessing` with a `PostPurchaseOrder` operation takes a parameter that conforms to a `PurchaseOrder` data contract.</span></span> <span data-ttu-id="0784b-117">Wenn der `PurchaseOrder`-Vertrag geändert werden muss, müssen Sie einen neuen Datenvertrag erstellen (also `PurchaseOrder2`), der die Änderungen enthält.</span><span class="sxs-lookup"><span data-stu-id="0784b-117">If the `PurchaseOrder` contract has to change, you must create a new data contract, that is, `PurchaseOrder2`, which includes the changes.</span></span> <span data-ttu-id="0784b-118">Sie müssen die Versionsverwaltung dann auf Dienstvertragsebene behandeln.</span><span class="sxs-lookup"><span data-stu-id="0784b-118">You must then handle the versioning at the service contract level.</span></span> <span data-ttu-id="0784b-119">Beispiele: Sie erstellen einen `PostPurchaseOrder2`-Vorgang, der den `PurchaseOrder2`-Parameter verwendet, oder Sie erstellen einen `PoProcessing2`-Dienstvertrag, bei dem der `PostPurchaseOrder`-Vorgang einen `PurchaseOrder2`-Datenvertrag verwendet.</span><span class="sxs-lookup"><span data-stu-id="0784b-119">For example, by creating a `PostPurchaseOrder2` operation that takes the `PurchaseOrder2` parameter, or by creating a `PoProcessing2` service contract where the `PostPurchaseOrder` operation takes a `PurchaseOrder2` data contract.</span></span>  
  
 <span data-ttu-id="0784b-120">Beachten Sie, dass Änderungen von Datenverträgen, auf die von anderen Datenverträgen verwiesen wird, auch für die Dienstmodellebene gelten.</span><span class="sxs-lookup"><span data-stu-id="0784b-120">Note that changes in data contracts that are referenced by other data contracts also extend to the service model layer.</span></span> <span data-ttu-id="0784b-121">Angenommen, der `PurchaseOrder`-Datenvertrag aus dem vorherigen Szenario muss nicht geändert werden.</span><span class="sxs-lookup"><span data-stu-id="0784b-121">For example, in the previous scenario the `PurchaseOrder` data contract does not need to change.</span></span> <span data-ttu-id="0784b-122">Er enthält jedoch einen Datenmember eines `Customer`-Datenvertrags, der wiederum einen Datenmember des `Address`-Datenvertrags enthält, der allerdings geändert werden muss.</span><span class="sxs-lookup"><span data-stu-id="0784b-122">However, it contains a data member of a `Customer` data contract, which in turn contained a data member of the `Address` data contract, which does need to be changed.</span></span> <span data-ttu-id="0784b-123">In diesem Fall müssen Sie einen `Address2`-Datenvertrag mit den erforderlichen Änderungen, einen `Customer2`-Datenvertrag, der den `Address2`-Datenmember enthält, und einen `PurchaseOrder2`-Datenvertrag erstellen, der einen `Customer2`-Datenmember enthält.</span><span class="sxs-lookup"><span data-stu-id="0784b-123">In that case, you would need to create an `Address2` data contract with the required changes, a `Customer2` data contract that contains the `Address2` data member, and a `PurchaseOrder2` data contract that contains a `Customer2` data member.</span></span> <span data-ttu-id="0784b-124">Wie im vorherigen Fall muss der Dienstvertrag ebenfalls über eine Versionsangabe verfügen.</span><span class="sxs-lookup"><span data-stu-id="0784b-124">As in the previous case, the service contract would have to be versioned as well.</span></span>  
  
 <span data-ttu-id="0784b-125">Obwohl in diesen Beispielen Namen geändert werden (indem eine "2" angefügt wird), ist es empfehlenswert, anstelle von Namen Namespaces zu ändern, indem neue Namespaces mit einer Versionsnummer oder einem Datum angefügt werden.</span><span class="sxs-lookup"><span data-stu-id="0784b-125">Although in these examples names are changed (by appending a "2"), the recommendation is to change namespaces instead of names by appending new namespaces with a version number or a date.</span></span> <span data-ttu-id="0784b-126">Der `http://schemas.contoso.com/2005/05/21/PurchaseOrder`-Datenvertrag würde beispielsweise eine Änderung des `http://schemas.contoso.com/2005/10/14/PurchaseOrder`-Datenvertrags bewirken.</span><span class="sxs-lookup"><span data-stu-id="0784b-126">For example, the `http://schemas.contoso.com/2005/05/21/PurchaseOrder` data contract would change to the `http://schemas.contoso.com/2005/10/14/PurchaseOrder` data contract.</span></span>  
  
 <span data-ttu-id="0784b-127">Weitere Informationen finden Sie unter Bewährte Methoden: [Dienst Versionsverwaltung](service-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="0784b-127">For more information, see Best Practices: [Service Versioning](service-versioning.md).</span></span>  
  
 <span data-ttu-id="0784b-128">In einigen Fällen müssen Sie die genaue Einhaltung für Nachrichten sicherstellen, die von Ihrer Anwendung gesendet werden, können sich jedoch nicht darauf verlassen, dass die eingehenden Nachrichten die Vorgaben des Schemas genau einhalten.</span><span class="sxs-lookup"><span data-stu-id="0784b-128">Occasionally, you must guarantee strict schema compliance for messages sent by your application, but cannot rely on the incoming messages to be strictly schema-compliant.</span></span> <span data-ttu-id="0784b-129">In diesem Fall besteht die Gefahr, dass eine eingehende Nachricht fremde Daten enthält.</span><span class="sxs-lookup"><span data-stu-id="0784b-129">In this case, there is a danger that an incoming message might contain extraneous data.</span></span> <span data-ttu-id="0784b-130">Die überflüssigen Werte werden von WCF gespeichert und zurückgegeben und führen somit dazu, dass ungültige Nachrichten gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="0784b-130">The extraneous values are stored and returned by WCF and thus results in schema-invalid messages being sent.</span></span> <span data-ttu-id="0784b-131">Um dieses Problem zu vermeiden, sollten Sie die Roundtripfunktion deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="0784b-131">To avoid this problem, the round-tripping feature should be turned off.</span></span> <span data-ttu-id="0784b-132">Es gibt hierbei zwei Möglichkeiten.</span><span class="sxs-lookup"><span data-stu-id="0784b-132">There are two ways to do this.</span></span>  
  
- <span data-ttu-id="0784b-133">Implementieren Sie die <xref:System.Runtime.Serialization.IExtensibleDataObject>-Schnittstelle für keinen der Typen.</span><span class="sxs-lookup"><span data-stu-id="0784b-133">Do not implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface on any of your types.</span></span>  
  
- <span data-ttu-id="0784b-134">Wenden Sie ein <xref:System.ServiceModel.ServiceBehaviorAttribute>-Attribut auf Ihren Dienstvertrag an, und legen Sie die <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A>-Eigenschaft dabei auf `true` fest.</span><span class="sxs-lookup"><span data-stu-id="0784b-134">Apply a <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to your service contract with the <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> property set to `true`.</span></span>  
  
 <span data-ttu-id="0784b-135">Weitere Informationen zum Roundtrip finden Sie unter [Forward-kompatible Datenverträge](./feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="0784b-135">For more information about round-tripping, see [Forward-Compatible Data Contracts](./feature-details/forward-compatible-data-contracts.md).</span></span>  
  
## <a name="versioning-when-schema-validation-is-not-required"></a><span data-ttu-id="0784b-136">Versionsverwaltung, wenn eine Schemavalidierung nicht erforderlich ist</span><span class="sxs-lookup"><span data-stu-id="0784b-136">Versioning When Schema Validation Is Not Required</span></span>  

 <span data-ttu-id="0784b-137">Die genaue Schemakompatibilität ist nur selten erforderlich.</span><span class="sxs-lookup"><span data-stu-id="0784b-137">Strict schema compliance is rarely required.</span></span> <span data-ttu-id="0784b-138">Viele Plattformen tolerieren zusätzliche Elemente, die von einem Schema nicht beschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="0784b-138">Many platforms tolerate extra elements not described by a schema.</span></span> <span data-ttu-id="0784b-139">Solange dies toleriert wird, kann der vollständige Satz von Funktionen verwendet werden, die unter [Daten Vertrags Versions](./feature-details/data-contract-versioning.md) Verwaltung und [Vorwärts kompatible Datenverträge](./feature-details/forward-compatible-data-contracts.md) beschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="0784b-139">As long as this is tolerated, the full set of features described in [Data Contract Versioning](./feature-details/data-contract-versioning.md) and [Forward-Compatible Data Contracts](./feature-details/forward-compatible-data-contracts.md) can be used.</span></span> <span data-ttu-id="0784b-140">Die folgenden Richtlinien sind zu empfehlen.</span><span class="sxs-lookup"><span data-stu-id="0784b-140">The following guidelines are recommended.</span></span>  
  
 <span data-ttu-id="0784b-141">Einige Richtlinien müssen exakt befolgt werden, um neue Versionen eines Typs zu senden zu können, wenn ein älterer Typ erwartet wird, bzw. um einen älteren Typ senden zu können, wenn ein neuer Typ erwartet wird.</span><span class="sxs-lookup"><span data-stu-id="0784b-141">Some of the guidelines must be followed exactly in order to send new versions of a type where an older one is expected or send an old one where the new one is expected.</span></span> <span data-ttu-id="0784b-142">Andere Richtlinien sind nicht unbedingt erforderlich, hier jedoch aufgeführt, da sich die zukünftige Versionsverwaltung von Schemas darauf auswirken kann.</span><span class="sxs-lookup"><span data-stu-id="0784b-142">Other guidelines are not strictly required, but are listed here because they may be affected by the future of schema versioning.</span></span>  
  
1. <span data-ttu-id="0784b-143">Versuchen Sie nicht, Datenverträge mit einer Versionsangabe zu versehen, indem Sie die Typvererbung verwenden.</span><span class="sxs-lookup"><span data-stu-id="0784b-143">Do not attempt to version data contracts by type inheritance.</span></span> <span data-ttu-id="0784b-144">Um höhere Versionen zu erstellen, ändern Sie entweder den Datenvertrag für einen vorhandenen Typ oder erstellen einen neuen nicht verwandten Typ.</span><span class="sxs-lookup"><span data-stu-id="0784b-144">To create later versions, either change the data contract on an existing type or create a new unrelated type.</span></span>  
  
2. <span data-ttu-id="0784b-145">Die Verwendung der Vererbung im Zusammenhang mit Datenverträgen ist zulässig, vorausgesetzt, die Vererbung wird nicht als Mechanismus für die Versionsverwaltung verwendet und bestimmte Regeln werden befolgt.</span><span class="sxs-lookup"><span data-stu-id="0784b-145">The use of inheritance together with data contracts is allowed, provided that inheritance is not used as a versioning mechanism and that certain rules are followed.</span></span> <span data-ttu-id="0784b-146">Wenn ein Typ von einem bestimmten Basistyp abgeleitet ist, sollten Sie diese Ableitung in einer zukünftigen Version nicht in einen anderen Basistyp ändern (es sei denn, dieser verfügt über denselben Datenvertrag).</span><span class="sxs-lookup"><span data-stu-id="0784b-146">If a type derives from a certain base type, do not make it derive from a different base type in a future version (unless it has the same data contract).</span></span> <span data-ttu-id="0784b-147">Dabei gilt eine Ausnahme: Sie können einen Typ in die Hierarchie zwischen einem Datenvertragstyp und seinem Basistyp einfügen, jedoch nur dann, wenn dieser keine Datenmember mit demselben Namen wie andere Member in beliebigen Versionen der anderen Typen der Hierarchie enthält.</span><span class="sxs-lookup"><span data-stu-id="0784b-147">There is one exception to this: you can insert a type into the hierarchy between a data contract type and its base type, but only if it does not contain data members with the same names as other members in any possible versions of the other types in the hierarchy.</span></span> <span data-ttu-id="0784b-148">Im Allgemeinen kann die Verwendung von Datenmembern mit demselben Namen auf verschiedenen Ebenen einer Vererbungshierarchie zu ernsthaften Problemen bei der Versionsverwaltung führen. Dies sollte daher vermieden werden.</span><span class="sxs-lookup"><span data-stu-id="0784b-148">In general, using data members with the same names at different levels of the same inheritance hierarchy can lead to serious versioning problems and should be avoided.</span></span>  
  
3. <span data-ttu-id="0784b-149">Implementieren Sie immer das <xref:System.Runtime.Serialization.IExtensibleDataObject>, indem Sie mit der ersten Version eines Datenvertrags beginnen, um Roundtrips zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="0784b-149">Starting with the first version of a data contract, always implement <xref:System.Runtime.Serialization.IExtensibleDataObject> to enable round-tripping.</span></span> <span data-ttu-id="0784b-150">Weitere Informationen finden Sie unter [Aufwärtskompatible Datenverträge](./feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="0784b-150">For more information, see [Forward-Compatible Data Contracts](./feature-details/forward-compatible-data-contracts.md).</span></span> <span data-ttu-id="0784b-151">Wenn Sie eine oder mehrere Versionen eines Typs veröffentlicht haben, ohne diese Schnittstelle zu implementieren, sollten Sie sie in der nächsten Version des Typs implementieren.</span><span class="sxs-lookup"><span data-stu-id="0784b-151">If you have released one or more versions of a type without implementing this interface, implement it in the next version of the type.</span></span>  
  
4. <span data-ttu-id="0784b-152">Ändern Sie den Datenvertragsnamen oder den Namespace in höheren Versionen nicht.</span><span class="sxs-lookup"><span data-stu-id="0784b-152">In later versions, do not change the data contract name or namespace.</span></span> <span data-ttu-id="0784b-153">Wenn Sie den Namen oder Namespace des Typs ändern, der dem Datenvertrag zugrunde liegt, müssen Sie darauf achten, den Datenvertragsnamen und Namespace beizubehalten, indem Sie die entsprechenden Mechanismen verwenden, zum Beispiel die <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A>-Eigenschaft des <xref:System.Runtime.Serialization.DataContractAttribute>.</span><span class="sxs-lookup"><span data-stu-id="0784b-153">If changing the name or namespace of the type underlying the data contract, be sure to preserve the data contract name and namespace by using the appropriate mechanisms, such as the <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> property of the <xref:System.Runtime.Serialization.DataContractAttribute>.</span></span> <span data-ttu-id="0784b-154">Weitere Informationen zur Benennung finden Sie unter [Daten Vertrags Namen](./feature-details/data-contract-names.md).</span><span class="sxs-lookup"><span data-stu-id="0784b-154">For more information about naming, see [Data Contract Names](./feature-details/data-contract-names.md).</span></span>  
  
5. <span data-ttu-id="0784b-155">Nehmen Sie in höheren Versionen keine Änderungen an den Namen von Datenmembern vor.</span><span class="sxs-lookup"><span data-stu-id="0784b-155">In later versions, do not change the names of any data members.</span></span> <span data-ttu-id="0784b-156">Wenn Sie den Namen des Felds, der Eigenschaft oder des Ereignisses ändern, das bzw. die dem Datenmember zugrunde liegt, können Sie die `Name`-Eigenschaft des <xref:System.Runtime.Serialization.DataMemberAttribute> verwenden, um den vorhandenen Datenmembernamen beizubehalten.</span><span class="sxs-lookup"><span data-stu-id="0784b-156">If changing the name of the field, property, or event underlying the data member, use the `Name` property of the <xref:System.Runtime.Serialization.DataMemberAttribute> to preserve the existing data member name.</span></span>  
  
6. <span data-ttu-id="0784b-157">Nehmen Sie in höheren Versionen keine Änderungen am Typ eines Felds, einer Eigenschaft oder eines einem Datenmember zugrunde liegenden Ereignisses vor, die sich dahingehend auswirken, dass sich der resultierende Datenvertrag für diesen Datenmember ändert.</span><span class="sxs-lookup"><span data-stu-id="0784b-157">In later versions, do not change the type of any field, property, or event underlying a data member such that the resulting data contract for that data member changes.</span></span> <span data-ttu-id="0784b-158">Denken Sie daran, dass Schnittstellentypen mit <xref:System.Object> äquivalent sind, um den erwarteten Datenvertrag ermitteln zu können.</span><span class="sxs-lookup"><span data-stu-id="0784b-158">Keep in mind that interface types are equivalent to <xref:System.Object> for the purposes of determining the expected data contract.</span></span>  
  
7. <span data-ttu-id="0784b-159">Nehmen Sie in höheren Versionen keine Änderung der Reihenfolge der vorhandenen Datenmember vor, indem Sie die <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A>-Eigenschaft des <xref:System.Runtime.Serialization.DataMemberAttribute>-Attributs anpassen.</span><span class="sxs-lookup"><span data-stu-id="0784b-159">In later versions, do not change the order of the existing data members by adjusting the <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> property of the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute.</span></span>  
  
8. <span data-ttu-id="0784b-160">In höheren Versionen können neue Datenmember hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="0784b-160">In later versions, new data members can be added.</span></span> <span data-ttu-id="0784b-161">Sie sollten dabei immer die folgenden Regeln einhalten:</span><span class="sxs-lookup"><span data-stu-id="0784b-161">They should always follow these rules:</span></span>  
  
    1. <span data-ttu-id="0784b-162">Die <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A>-Eigenschaft muss immer auf ihrem Standardwert `false` belassen werden.</span><span class="sxs-lookup"><span data-stu-id="0784b-162">The <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property should always be left at its default value of `false`.</span></span>  
  
    2. <span data-ttu-id="0784b-163">Wenn der Standardwert `null` bzw. "0" für den Member nicht akzeptabel ist, muss mithilfe von <xref:System.Runtime.Serialization.OnDeserializingAttribute> eine Rückrufmethode bereitgestellt werden, um einen geeigneten Standardwert anzugeben, falls der Member im eingehenden Stream nicht enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="0784b-163">If a default value of `null` or zero for the member is unacceptable, a callback method should be provided using the <xref:System.Runtime.Serialization.OnDeserializingAttribute> to provide a reasonable default in case the member is not present in the incoming stream.</span></span> <span data-ttu-id="0784b-164">Weitere Informationen zum Rückruf finden Sie unter [Versions tolerante Serialisierungsrückrufe](./feature-details/version-tolerant-serialization-callbacks.md).</span><span class="sxs-lookup"><span data-stu-id="0784b-164">For more information about the callback, see [Version-Tolerant Serialization Callbacks](./feature-details/version-tolerant-serialization-callbacks.md).</span></span>  
  
    3. <span data-ttu-id="0784b-165">Die- <xref:System.Runtime.Serialization.DataMemberAttribute.Order?displayProperty=nameWithType> Eigenschaft sollte verwendet werden, um sicherzustellen, dass alle neu hinzugefügten Datenmember nach den vorhandenen Datenmembern angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="0784b-165">The <xref:System.Runtime.Serialization.DataMemberAttribute.Order?displayProperty=nameWithType> property should be used to make sure that all of the newly added data members appear after the existing data members.</span></span> <span data-ttu-id="0784b-166">Die empfohlene Vorgehensweise lautet wie folgt: Für keinen Datenmember der ersten Version eines Datenvertrags sollte die `Order`-Eigenschaft festgelegt sein.</span><span class="sxs-lookup"><span data-stu-id="0784b-166">The recommended way of doing this is as follows: None of the data members in the first version of the data contract should have their `Order` property set.</span></span> <span data-ttu-id="0784b-167">Sie sollten für alle Datenmember, die Sie in Version 2 des Datenvertrags hinzugefügt haben, die `Order`-Eigenschaft auf "2" festlegen.</span><span class="sxs-lookup"><span data-stu-id="0784b-167">All of the data members added in version 2 of the data contract should have their `Order` property set to 2.</span></span> <span data-ttu-id="0784b-168">Ebenso sollten Sie die `Order`-Eigenschaft für in Version 3 des Datenvertrags hinzugefügte Datenmember auf "3" festlegen usw.</span><span class="sxs-lookup"><span data-stu-id="0784b-168">All of the data members added in version 3 of the data contract should have their `Order` set to 3, and so on.</span></span> <span data-ttu-id="0784b-169">Es ist zulässig, mehrere Datenmember auf die gleiche `Order`-Nummer festzulegen.</span><span class="sxs-lookup"><span data-stu-id="0784b-169">It is permissible to have more than one data member set to the same `Order` number.</span></span>  
  
9. <span data-ttu-id="0784b-170">Entfernen Sie Datenmember in höheren Versionen auch dann nicht, wenn die <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A>-Eigenschaft in den vorherigen Versionen auf der Standardeinstellung `false` belassen wurde.</span><span class="sxs-lookup"><span data-stu-id="0784b-170">Do not remove data members in later versions, even if the <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property was left at its default property of `false` in prior versions.</span></span>  
  
10. <span data-ttu-id="0784b-171">Ändern Sie die `IsRequired`-Eigenschaft für vorhandene Datenmember nicht von Version zu Version.</span><span class="sxs-lookup"><span data-stu-id="0784b-171">Do not change the `IsRequired` property on any existing data members from version to version.</span></span>  
  
11. <span data-ttu-id="0784b-172">Ändern Sie die `IsRequired`-Eigenschaft für erforderliche Datenmember (wobei `true` den Wert `EmitDefaultValue` hat) nicht von Version zu Version.</span><span class="sxs-lookup"><span data-stu-id="0784b-172">For required data members (where `IsRequired` is `true`), do not change the `EmitDefaultValue` property from version to version.</span></span>  
  
12. <span data-ttu-id="0784b-173">Versuchen Sie nicht, verzweigte Versionsverwaltungshierarchien zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="0784b-173">Do not attempt to create branched versioning hierarchies.</span></span> <span data-ttu-id="0784b-174">Es sollte also immer ein Pfad in mindestens einer Richtung zwischen Versionen vorhanden sein, indem nur die von diesen Richtlinien zugelassenen Änderungen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="0784b-174">That is, there should always be a path in at least one direction from any version to any other version using only the changes permitted by these guidelines.</span></span>  
  
     <span data-ttu-id="0784b-175">Wenn zum Beispiel die Version 1 eines Person-Datenvertrags nur den Name-Datenmember enthält, sollten Sie keine Version 2a des Vertrags erstellen, indem Sie nur den Age-Member hinzufügen, und keine Version 2b, indem Sie nur den Address-Member hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="0784b-175">For example, if version 1 of a Person data contract contains only the Name data member, you should not create version 2a of the contract adding only the Age member and version 2b adding only the Address member.</span></span> <span data-ttu-id="0784b-176">Der Übergang von 2a zu 2b würde das Entfernen von "Age" und das Hinzufügen von "Address" umfassen. Ein Übergang in der anderen Richtung würde hingegen das Entfernen von "Address" und das Hinzufügen von "Age" umfassen.</span><span class="sxs-lookup"><span data-stu-id="0784b-176">Going from 2a to 2b would involve removing Age and adding Address; going in the other direction would entail removing Address and adding Age.</span></span> <span data-ttu-id="0784b-177">Das Entfernen von Membern ist im Rahmen dieser Richtlinien nicht zulässig.</span><span class="sxs-lookup"><span data-stu-id="0784b-177">Removing members is not permitted by these guidelines.</span></span>  
  
13. <span data-ttu-id="0784b-178">Sie sollten generell keine neuen Untertypen vorhandener Datenvertragstypen in einer neuen Version Ihrer Anwendung erstellen.</span><span class="sxs-lookup"><span data-stu-id="0784b-178">You should generally not create new subtypes of existing data contract types in a new version of your application.</span></span> <span data-ttu-id="0784b-179">Außerdem sollten Sie keine neuen Datenverträge erstellen, die anstelle von Datenmembern verwendet werden, die als Objekt oder als Schnittstellentypen deklariert sind.</span><span class="sxs-lookup"><span data-stu-id="0784b-179">Likewise, you should not create new data contracts that are used in place of data members declared as Object or as interface types.</span></span> <span data-ttu-id="0784b-180">Das Erstellen dieser neuen Klassen ist nur zulässig, wenn Sie wissen, dass Sie die neuen Typen der Liste der bekannten Typen aller Instanzen der alten Anwendung hinzufügen können.</span><span class="sxs-lookup"><span data-stu-id="0784b-180">Creating these new classes is allowed only when you know that you can add the new types to the known types list of all instances of your old application.</span></span> <span data-ttu-id="0784b-181">Es kann zum Beispiel sein, dass Sie in Version 1 Ihrer Anwendung den LibraryItem-Datenvertragstyp mit den Datenvertrags-Untertypen "Buch" und "Zeitung" verwenden.</span><span class="sxs-lookup"><span data-stu-id="0784b-181">For example, in version 1 of your application, you may have the LibraryItem data contract type with the Book and Newspaper data contract subtypes.</span></span> <span data-ttu-id="0784b-182">"LibraryItem" würde dann über eine Liste der bekannten Typen verfügen, die "Buch" und "Zeitung" enthält.</span><span class="sxs-lookup"><span data-stu-id="0784b-182">LibraryItem would then have a known types list that contains Book and Newspaper.</span></span> <span data-ttu-id="0784b-183">Angenommen, Sie fügen in Version 2 den Typ "Zeitschrift" hinzu, bei dem es sich um einen Untertyp von "LibraryItem" handelt.</span><span class="sxs-lookup"><span data-stu-id="0784b-183">Suppose you now add a Magazine type in version 2 which is a subtype of LibraryItem.</span></span> <span data-ttu-id="0784b-184">Wenn Sie eine Zeitschrift-Instanz von Version&#160;2 an Version&#160;1 senden, ist der Zeitschrift-Datenvertrag nicht in der Liste der bekannten Typen enthalten, und es wird eine Ausnahme ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="0784b-184">If you send a Magazine instance from version 2 to version 1, the Magazine data contract is not found in the list of known types and an exception is thrown.</span></span>  
  
14. <span data-ttu-id="0784b-185">Sie sollten zwischen Versionen keine Enumerationsmember hinzufügen oder entfernen.</span><span class="sxs-lookup"><span data-stu-id="0784b-185">You should not add or remove enumeration members between versions.</span></span> <span data-ttu-id="0784b-186">Außerdem sollten Sie Enumerationsmember nicht umbenennen, es sei denn, Sie verwenden die Name-Eigenschaft des `EnumMemberAttribute`-Attributs, um ihre Namen im Datenvertragsmodell identisch zu halten.</span><span class="sxs-lookup"><span data-stu-id="0784b-186">You should also not rename enumeration members, unless you use the Name property on the `EnumMemberAttribute` attribute to keep their names in the data contract model the same.</span></span>  
  
15. <span data-ttu-id="0784b-187">Sammlungen sind im Daten Vertragsmodell austauschbar, wie in [Sammlungs Typen in Daten Verträgen](./feature-details/collection-types-in-data-contracts.md)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="0784b-187">Collections are interchangeable in the data contract model as described in [Collection Types in Data Contracts](./feature-details/collection-types-in-data-contracts.md).</span></span> <span data-ttu-id="0784b-188">Dies ermöglicht einen hohen Grad an Flexibilität.</span><span class="sxs-lookup"><span data-stu-id="0784b-188">This allows for a great degree of flexibility.</span></span> <span data-ttu-id="0784b-189">Sie sollten jedoch sicherstellen, dass Sie einen Auflistungstyp von Version zu Version nicht versehentlich auf nicht austauschbare Weise ändern.</span><span class="sxs-lookup"><span data-stu-id="0784b-189">However, make sure that you do not inadvertently change a collection type in a non-interchangeable way from version to version.</span></span> <span data-ttu-id="0784b-190">Wechseln Sie zum Beispiel nicht von einer nicht anpassbaren Auflistung (also ohne `CollectionDataContractAttribute`-Attribut) zu einer anpassbaren Auflistung oder umgekehrt.</span><span class="sxs-lookup"><span data-stu-id="0784b-190">For example, do not change from a non-customized collection (that is, without the `CollectionDataContractAttribute` attribute) to a customized one or a customized collection to a non-customized one.</span></span> <span data-ttu-id="0784b-191">Ändern Sie auch nicht die Eigenschaften für das `CollectionDataContractAttribute` von Version zu Version.</span><span class="sxs-lookup"><span data-stu-id="0784b-191">Also, do not change the properties on the `CollectionDataContractAttribute` from version to version.</span></span> <span data-ttu-id="0784b-192">Die einzige zulässige Änderung ist das Hinzufügen einer Name- oder Namespace-Eigenschaft, wenn sich der Name oder Namespace des zugrunde liegenden Auflistungstyps geändert hat und Sie Name und Namespace des Datenvertrags an den Stand der vorherigen Version anpassen müssen.</span><span class="sxs-lookup"><span data-stu-id="0784b-192">The only allowed change is adding a Name or Namespace property if the underlying collection type's name or namespace has changed and you need to make its data contract name and namespace the same as in a previous version.</span></span>  
  
 <span data-ttu-id="0784b-193">Einige der Richtlinien, die hier aufgelistet sind, können problemlos ignoriert werden, wenn besondere Umstände gelten.</span><span class="sxs-lookup"><span data-stu-id="0784b-193">Some of the guidelines listed here can be safely ignored when special circumstances apply.</span></span> <span data-ttu-id="0784b-194">Stellen Sie sicher, dass Sie den Mechanismus der Serialisierung, Deserialisierung und Schemaverwendung vollständig verstanden haben, bevor Sie von den Richtlinien abweichen.</span><span class="sxs-lookup"><span data-stu-id="0784b-194">Make sure you fully understand the serialization, deserialization, and schema mechanisms involved before deviating from the guidelines.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0784b-195">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="0784b-195">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A>
- <xref:System.Runtime.Serialization.DataContractAttribute>
- <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A>
- <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A>
- <xref:System.Runtime.Serialization.IExtensibleDataObject>
- <xref:System.ServiceModel.ServiceBehaviorAttribute>
- <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A>
- <xref:System.Runtime.Serialization.ExtensionDataObject>
- <xref:System.Runtime.Serialization.OnDeserializingAttribute>
- [<span data-ttu-id="0784b-196">Verwenden von Datenverträgen</span><span class="sxs-lookup"><span data-stu-id="0784b-196">Using Data Contracts</span></span>](./feature-details/using-data-contracts.md)
- [<span data-ttu-id="0784b-197">Datenvertragsversionsverwaltung</span><span class="sxs-lookup"><span data-stu-id="0784b-197">Data Contract Versioning</span></span>](./feature-details/data-contract-versioning.md)
- [<span data-ttu-id="0784b-198">Datenvertragsnamen</span><span class="sxs-lookup"><span data-stu-id="0784b-198">Data Contract Names</span></span>](./feature-details/data-contract-names.md)
- [<span data-ttu-id="0784b-199">Aufwärtskompatible Datenverträge</span><span class="sxs-lookup"><span data-stu-id="0784b-199">Forward-Compatible Data Contracts</span></span>](./feature-details/forward-compatible-data-contracts.md)
- [<span data-ttu-id="0784b-200">Versionstolerante Serialisierungsrückrufe</span><span class="sxs-lookup"><span data-stu-id="0784b-200">Version-Tolerant Serialization Callbacks</span></span>](./feature-details/version-tolerant-serialization-callbacks.md)
