---
title: Datenvertrag-Ersatzzeichen
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: data contracts [WCF], surrogates
ms.assetid: 8c31134c-46c5-4ed7-94af-bab0ac0dfce5
caps.latest.revision: "8"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: b8d353b50cf9439a9741199a52ca650e02e4d49f
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/02/2017
---
# <a name="data-contract-surrogates"></a><span data-ttu-id="96a61-102">Datenvertrag-Ersatzzeichen</span><span class="sxs-lookup"><span data-stu-id="96a61-102">Data Contract Surrogates</span></span>
<span data-ttu-id="96a61-103">Der Datenvertrag *Ersatzzeichen* ist eine erweiterte Funktion, die auf dem datenvertragsmodell basiert.</span><span class="sxs-lookup"><span data-stu-id="96a61-103">The data contract *surrogate* is an advanced feature built upon the Data Contract model.</span></span> <span data-ttu-id="96a61-104">Diese Funktion wurde zur Verwendung für die Typanpassung und -ersetzung entwickelt, wenn Benutzer Änderungen daran vornehmen möchten, wie ein Typ serialisiert, deserialisiert oder in Metadaten projiziert wird.</span><span class="sxs-lookup"><span data-stu-id="96a61-104">This feature is designed to be used for type customization and substitution in situations where users want to change how a type is serialized, deserialized or projected into metadata.</span></span> <span data-ttu-id="96a61-105">Einige Szenarien, in denen ein Ersatzzeichen verwendet werden kann, sind die fehlende Spezifizierung eines Datenvertrags für den Typ, die fehlende Markierung von Feldern und Eigenschaften mit dem <xref:System.Runtime.Serialization.DataMemberAttribute>-Attribut oder wenn Benutzer die dynamische Erstellung von Schemavarianten wünschen.</span><span class="sxs-lookup"><span data-stu-id="96a61-105">Some scenarios where a surrogate may be used is when a data contract has not been specified for the type, fields and properties are not marked with the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute or users wish to dynamically create schema variations.</span></span>  
  
 <span data-ttu-id="96a61-106">Serialisierung und Deserialisierung werden mit dem Datenvertrag-Ersatzzeichen erreicht, wenn <xref:System.Runtime.Serialization.DataContractSerializer> zum Konvertieren aus .NET Framework in ein geeignetes Format, wie z. B. XML, verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="96a61-106">Serialization and deserialization are accomplished with the data contract surrogate when using <xref:System.Runtime.Serialization.DataContractSerializer> to convert from .NET Framework to a suitable format, such as XML.</span></span> <span data-ttu-id="96a61-107">Das Datenvertrag-Ersatzzeichen kann auch verwendet werden, um die für Typen exportierten Metadaten zu ändern, wenn Metadatendarstellungen, wie z. B. XML Schema Documents (XSD), erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="96a61-107">Data contract surrogate can also be used to modify the metadata exported for types, when producing metadata representations such as XML Schema Documents (XSD).</span></span> <span data-ttu-id="96a61-108">Beim Importieren wird der Code aus den Metadaten erstellt, und das Ersatzzeichen kann in diesem Fall verwendet werden, um auch den generierten Code anzupassen.</span><span class="sxs-lookup"><span data-stu-id="96a61-108">Upon import, code is created from metadata and the surrogate can be used in this case to customize the generated code as well.</span></span>  
  
## <a name="how-the-surrogate-works"></a><span data-ttu-id="96a61-109">So funktioniert das Ersatzzeichen</span><span class="sxs-lookup"><span data-stu-id="96a61-109">How the Surrogate Works</span></span>  
 <span data-ttu-id="96a61-110">Ein Ersatzzeichen funktioniert, indem es einen Typ (den "ursprünglichen" Typ) einem anderen Typ (dem "ersetzten" Typ) zuordnet.</span><span class="sxs-lookup"><span data-stu-id="96a61-110">A surrogate works by mapping one type (the "original" type) to another type (the "surrogated" type).</span></span> <span data-ttu-id="96a61-111">Im folgenden Beispiel werden der ursprüngliche Typ `Inventory` und ein neuer Ersatzzeichen-`InventorySurrogated`-Typ veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="96a61-111">The following example shows the original type `Inventory` and a new surrogate `InventorySurrogated` type.</span></span> <span data-ttu-id="96a61-112">Der Typ `Inventory` ist nicht serialisierbar, aber der Typ `InventorySurrogated` ist serialisierbar:</span><span class="sxs-lookup"><span data-stu-id="96a61-112">The `Inventory` type is not serializable but the `InventorySurrogated` type is:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#1)]  
  
 <span data-ttu-id="96a61-113">Weil für diese Klasse kein Datenvertrag definiert wurde, soll die Klasse in eine Ersatzzeichenklasse mit einem Datenvertrag konvertiert werden.</span><span class="sxs-lookup"><span data-stu-id="96a61-113">Because a data contract has not been defined for this class, convert the class to a surrogate class with a data contract.</span></span> <span data-ttu-id="96a61-114">Die ersetzte Klasse wird im folgenden Beispiel gezeigt:</span><span class="sxs-lookup"><span data-stu-id="96a61-114">The surrogated class is shown in the following example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#2)]  
  
## <a name="implementing-the-idatacontractsurrogate"></a><span data-ttu-id="96a61-115">Implementieren des IDataContractSurrogate</span><span class="sxs-lookup"><span data-stu-id="96a61-115">Implementing the IDataContractSurrogate</span></span>  
 <span data-ttu-id="96a61-116">Zur Verwendung des Datenvertrag-Ersatzzeichens implementieren Sie die <xref:System.Runtime.Serialization.IDataContractSurrogate>-Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="96a61-116">To use the data contract surrogate, implement the <xref:System.Runtime.Serialization.IDataContractSurrogate> interface.</span></span>  
  
 <span data-ttu-id="96a61-117">Es folgt eine Übersicht über jede Methode von <xref:System.Runtime.Serialization.IDataContractSurrogate> mit einer möglichen Implementierung.</span><span class="sxs-lookup"><span data-stu-id="96a61-117">The following is an overview of each method of <xref:System.Runtime.Serialization.IDataContractSurrogate> with a possible implementation.</span></span>  
  
### <a name="getdatacontracttype"></a><span data-ttu-id="96a61-118">GetDataContractType</span><span class="sxs-lookup"><span data-stu-id="96a61-118">GetDataContractType</span></span>  
 <span data-ttu-id="96a61-119">Die <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A>-Methode ordnet einen Typ einem anderen zu.</span><span class="sxs-lookup"><span data-stu-id="96a61-119">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> method maps one type to another.</span></span> <span data-ttu-id="96a61-120">Diese Methode ist für Serialisierung, Deserialisierung, Import und Export erforderlich.</span><span class="sxs-lookup"><span data-stu-id="96a61-120">This method is required for serialization, deserialization, import, and export.</span></span>  
  
 <span data-ttu-id="96a61-121">Die erste Aufgabe definiert, welche Typen anderen Typen zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="96a61-121">The first task is defining what types will be mapped to other types.</span></span> <span data-ttu-id="96a61-122">Zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="96a61-122">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#3)]  
  
-   <span data-ttu-id="96a61-123">Bei der Serialisierung wird die durch diese Methode zurückgegebene Zuordnung verwendet, um die ursprüngliche Instanz in eine ersetzte Instanz zu transformieren, indem die <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A>-Methode aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="96a61-123">On serialization, the mapping returned by this method is subsequently used to transform the original instance to a surrogated instance by calling the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> method.</span></span>  
  
-   <span data-ttu-id="96a61-124">Bei der Deserialisierung wird die durch diese Methode zurückgegebene Zuordnung durch das Serialisierungsprogramm verwendet, um die Deserialisierung in eine Instanz des Ersatzzeichentyps durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="96a61-124">On deserialization, the mapping returned by this method is used by the serializer to deserialize into an instance of the surrogate type.</span></span> <span data-ttu-id="96a61-125">Es ruft anschließend <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDeserializedObject%2A> auf, um die ersetzte Instanz in eine Instanz des ursprünglichen Typs zu transformieren.</span><span class="sxs-lookup"><span data-stu-id="96a61-125">It subsequently calls <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDeserializedObject%2A> to transform the surrogated instance into an instance of the original type.</span></span>  
  
-   <span data-ttu-id="96a61-126">Beim Export wird der durch diese Methode zurückgegebene Ersatzzeichentyp reflektiert, um den Datenvertrag zu erhalten, der zur Generierung von Metadaten verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="96a61-126">On export, the surrogate type returned by this method is reflected to get the data contract to use for generating metadata.</span></span>  
  
-   <span data-ttu-id="96a61-127">Beim Import wird der Ausgangstyp in einen Ersatzzeichentyp geändert und reflektiert, um den Datenvertrag, der für Zwecke wie den Support-Verweis verwendet werden soll, zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="96a61-127">On import, the initial type is changed to a surrogate type that is reflected to get the data contract to use for purposes like referencing support.</span></span>  
  
 <span data-ttu-id="96a61-128">Der <xref:System.Type>-Parameter ist der Typ des Objekts, das serialisiert, deserialisiert, importiert oder exportiert wird.</span><span class="sxs-lookup"><span data-stu-id="96a61-128">The <xref:System.Type> parameter is the type of the object that is being serialized, deserialized, imported, or exported.</span></span> <span data-ttu-id="96a61-129">Die <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A>-Methode muss den Eingabetyp zurückgeben, wenn das Ersatzzeichen den Typ nicht behandelt.</span><span class="sxs-lookup"><span data-stu-id="96a61-129">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> method must return the input type if the surrogate does not handle the type.</span></span> <span data-ttu-id="96a61-130">Ansonsten wird der entsprechende Ersatzzeichentyp zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="96a61-130">Otherwise, return the appropriate surrogated type.</span></span> <span data-ttu-id="96a61-131">Wenn mehrere Ersatzzeichentypen vorhanden sind, können zahlreiche Zuordnungen in dieser Methode definiert werden.</span><span class="sxs-lookup"><span data-stu-id="96a61-131">If several surrogate types exist, numerous mappings can be defined in this method.</span></span>  
  
 <span data-ttu-id="96a61-132">Die <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A>-Methode wird nicht für integrierte Datenvertragsprimitiven, z. B. <xref:System.Int32> oder <xref:System.String>, aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="96a61-132">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> method is not called for built-in data contract primitives, such as <xref:System.Int32> or <xref:System.String>.</span></span> <span data-ttu-id="96a61-133">Für andere Typen, wie z. B. Arrays, benutzerdefinierte Typen und andere Datenstrukturen, wird diese Methode für jeden Typ aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="96a61-133">For other types, such as arrays, user-defined types, and other data structures, this method will be called for each type.</span></span>  
  
 <span data-ttu-id="96a61-134">Beim vorherigen Beispiel überprüft die Methode, ob der `type`-Parameter und `Inventory` vergleichbar sind.</span><span class="sxs-lookup"><span data-stu-id="96a61-134">In the previous example, the method checks if the `type` parameter and `Inventory` are comparable.</span></span> <span data-ttu-id="96a61-135">Wenn das der Fall ist, führt die Methode eine Zuordnung zu `InventorySurrogated` durch.</span><span class="sxs-lookup"><span data-stu-id="96a61-135">If so, the method maps it to `InventorySurrogated`.</span></span> <span data-ttu-id="96a61-136">Bei jedem Aufrufen einer Serialisierung, einer Deserialisierung, eines Importschemas oder eines Exportschemas wird diese Funktion zuerst aufgerufen, um die Zuordnung zwischen den Typen zu ermitteln.</span><span class="sxs-lookup"><span data-stu-id="96a61-136">Whenever a serialization, deserialization, import schema, or export schema is called, this function is called first to determine the mapping between types.</span></span>  
  
### <a name="getobjecttoserialize-method"></a><span data-ttu-id="96a61-137">GetObjectToSerialize-Methode</span><span class="sxs-lookup"><span data-stu-id="96a61-137">GetObjectToSerialize Method</span></span>  
 <span data-ttu-id="96a61-138">Die <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A>-Methode konvertiert die Instanz des ursprünglichen Typs in die Instanz des Ersatzzeichentyps.</span><span class="sxs-lookup"><span data-stu-id="96a61-138">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> method converts the original type instance to the surrogated type instance.</span></span> <span data-ttu-id="96a61-139">Die Methode ist für die Serialisierung erforderlich.</span><span class="sxs-lookup"><span data-stu-id="96a61-139">The method is required for serialization.</span></span>  
  
 <span data-ttu-id="96a61-140">Der nächste Schritt besteht darin zu definieren, wie die physikalischen Daten von der ursprünglichen Instanz zur Ersatzzeicheninstanz erfolgen soll, indem die <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A>-Methode implementiert wird.</span><span class="sxs-lookup"><span data-stu-id="96a61-140">The next step is to define the way the physical data will be mapped from the original instance to the surrogate by implementing the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> method.</span></span> <span data-ttu-id="96a61-141">Zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="96a61-141">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#4)]  
  
 <span data-ttu-id="96a61-142">Die <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A>-Methode wird aufgerufen, wenn ein Objekt serialisiert wird.</span><span class="sxs-lookup"><span data-stu-id="96a61-142">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%2A> method is called when an object is serialized.</span></span> <span data-ttu-id="96a61-143">Diese Methode überträgt Daten vom ursprünglichen Typ auf die Felder des Ersatzzeichentyps.</span><span class="sxs-lookup"><span data-stu-id="96a61-143">This method transfers data from the original type to the fields of the surrogated type.</span></span> <span data-ttu-id="96a61-144">Die Felder können den Ersatzzeichenfeldern direkt zugeordnet werden, oder in dem Ersatzzeichen können Bearbeitungen der ursprünglichen Daten gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="96a61-144">Fields can be directly mapped to surrogate fields, or manipulations of the original data may be stored in the surrogate.</span></span> <span data-ttu-id="96a61-145">Zu den Verwendungsmöglichkeiten zählen: direktes Zuordnen der Felder, Durchführen von Vorgängen an den Daten, die in den Ersatzzeichenfeldern gespeichert werden sollen, oder Speichern der XML des ursprünglichen Typs in dem Ersatzzeichenfeld.</span><span class="sxs-lookup"><span data-stu-id="96a61-145">Some possible uses include: directly mapping the fields, performing operations on the data to be stored in the surrogated fields, or storing the XML of the original type in the surrogated field.</span></span>  
  
 <span data-ttu-id="96a61-146">Der `targetType`-Parameter verweist auf den deklarierten Typ des Members.</span><span class="sxs-lookup"><span data-stu-id="96a61-146">The `targetType` parameter refers to the declared type of the member.</span></span> <span data-ttu-id="96a61-147">Dieser Parameter ist der Ersatzzeichentyp, der durch die <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A>-Methode zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="96a61-147">This parameter is the surrogated type returned by the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%2A> method.</span></span> <span data-ttu-id="96a61-148">Vom Serialisierungsprogramm wird nicht erzwungen, dass das zurückgegebene Objekt diesem Typ zugeordnet werden kann.</span><span class="sxs-lookup"><span data-stu-id="96a61-148">The serializer does not enforce that the object returned is assignable to this type.</span></span> <span data-ttu-id="96a61-149">Die `obj` -Parameter ist das Objekt zu serialisieren, und wird in sein Ersatzzeichen konvertiert werden, falls erforderlich.</span><span class="sxs-lookup"><span data-stu-id="96a61-149">The `obj` parameter is the object to serialize, and will be converted to its surrogate if necessary.</span></span> <span data-ttu-id="96a61-150">Diese Methode muss den Eingabeobjekttyp zurückgeben, wenn das Ersatzzeichen das Objekt nicht behandelt.</span><span class="sxs-lookup"><span data-stu-id="96a61-150">This method must return the input object if the surrogated does not handle the object.</span></span> <span data-ttu-id="96a61-151">Andernfalls wird das neue Ersatzzeichenobjekt zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="96a61-151">Otherwise, the new surrogate object will be returned.</span></span> <span data-ttu-id="96a61-152">Das Ersatzzeichen wird nicht aufgerufen, wenn das Objekt NULL ist.</span><span class="sxs-lookup"><span data-stu-id="96a61-152">The surrogate is not called if the object is null.</span></span> <span data-ttu-id="96a61-153">Innerhalb dieser Methode werden möglicherweise zahlreiche Ersatzzeichenzuordnungen für verschiedene Instanzen definiert.</span><span class="sxs-lookup"><span data-stu-id="96a61-153">Numerous surrogate mappings for different instances may be defined within this method.</span></span>  
  
 <span data-ttu-id="96a61-154">Wenn Sie ein <xref:System.Runtime.Serialization.DataContractSerializer> erstellen, können Sie es anweisen, Objektverweise beizubehalten.</span><span class="sxs-lookup"><span data-stu-id="96a61-154">When creating a <xref:System.Runtime.Serialization.DataContractSerializer>, you can instruct it to preserve object references.</span></span> <span data-ttu-id="96a61-155">([!INCLUDE[crdefault](../../../../includes/crdefault-md.md)] [Serialisierung und Deserialisierung](../../../../docs/framework/wcf/feature-details/serialization-and-deserialization.md).) Dazu wird der `preserveObjectReferences`-Parameter in seinem Konstruktor auf `true` festlegt.</span><span class="sxs-lookup"><span data-stu-id="96a61-155">([!INCLUDE[crdefault](../../../../includes/crdefault-md.md)] [Serialization and Deserialization](../../../../docs/framework/wcf/feature-details/serialization-and-deserialization.md).) This is done by setting the `preserveObjectReferences` parameter in its constructor to `true`.</span></span> <span data-ttu-id="96a61-156">In diesem Fall wird das Ersatzzeichen für ein Objekt nur ein einziges Mal aufgerufen, weil alle nachfolgenden Serialisierungen lediglich den Verweis in den Stream schreiben.</span><span class="sxs-lookup"><span data-stu-id="96a61-156">In that case, the surrogate is called only once for an object since all subsequent serializations just write the reference into the stream.</span></span> <span data-ttu-id="96a61-157">Wenn `preserveObjectReferences` auf `false` festgelegt wird, dann wird das Ersatzzeichen jedes Mal aufgerufen, wenn eine Instanz gefunden wird.</span><span class="sxs-lookup"><span data-stu-id="96a61-157">If `preserveObjectReferences` is set to `false`, then the surrogate is called every time an instance is encountered.</span></span>  
  
 <span data-ttu-id="96a61-158">Wenn der Typ der serialisierten Instanz vom deklarierten Typ abweicht, werden Typinformationen in den Stream geschrieben, z. B. `xsi:type`, um die Deserialisierung der Instanz am anderen Ende zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="96a61-158">If the type of the instance serialized differs from the declared type, type information is written into the stream, for example, `xsi:type` to allow the instance to be deserialized at the other end.</span></span> <span data-ttu-id="96a61-159">Dieser Prozess tritt unabhängig davon auf, ob das Objekt ersetzt wurde oder nicht.</span><span class="sxs-lookup"><span data-stu-id="96a61-159">This process occurs whether the object is surrogated or not.</span></span>  
  
 <span data-ttu-id="96a61-160">Das obige Beispiel konvertiert die Daten der `Inventory`-Instanz zu denen von `InventorySurrogated`.</span><span class="sxs-lookup"><span data-stu-id="96a61-160">The example above converts the data of the `Inventory` instance to that of `InventorySurrogated`.</span></span> <span data-ttu-id="96a61-161">Es überprüft den Objekttyp und führt die erforderlichen Bearbeitungen durch, um die Konvertierung in den Ersatzzeichentyp zu bewirken.</span><span class="sxs-lookup"><span data-stu-id="96a61-161">It checks the type of the object and performs the necessary manipulations to convert to the surrogated type.</span></span> <span data-ttu-id="96a61-162">In diesem Fall werden die Felder der `Inventory`-Klasse direkt über die Felder der `InventorySurrogated`-Klasse kopiert.</span><span class="sxs-lookup"><span data-stu-id="96a61-162">In this case, the fields of the `Inventory` class are directly copied over to the `InventorySurrogated` class fields.</span></span>  
  
### <a name="getdeserializedobject-method"></a><span data-ttu-id="96a61-163">GetDeserializedObject-Methode</span><span class="sxs-lookup"><span data-stu-id="96a61-163">GetDeserializedObject Method</span></span>  
 <span data-ttu-id="96a61-164">Die <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDeserializedObject%2A>-Methode konvertiert die Ersatzzeichentypinstanz in die Instanz des ursprünglichen Typs.</span><span class="sxs-lookup"><span data-stu-id="96a61-164">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDeserializedObject%2A> method converts the surrogated type instance to the original type instance.</span></span> <span data-ttu-id="96a61-165">Sie ist für die Deserialisierung erforderlich.</span><span class="sxs-lookup"><span data-stu-id="96a61-165">It is required for deserialization.</span></span>  
  
 <span data-ttu-id="96a61-166">Die nächste Aufgabe besteht darin zu definieren, wie die physikalischen Daten von der Ersatzzeicheninstanz zur ursprünglichen Instanz zugeordnet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="96a61-166">The next task is to define the way the physical data will be mapped from the surrogate instance to the original.</span></span> <span data-ttu-id="96a61-167">Zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="96a61-167">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#5)]  
  
 <span data-ttu-id="96a61-168">Diese Methode wird nur während der Deserialisierung eines Objekts aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="96a61-168">This method is called only during the deserialization of an object.</span></span> <span data-ttu-id="96a61-169">Sie sorgt für die umgekehrte Datenzuordnung für die Deserialisierung vom Ersatzzeichentyp zum ursprünglichen Typ.</span><span class="sxs-lookup"><span data-stu-id="96a61-169">It provides reverse data mapping for the deserialization from the surrogate type back to its original type.</span></span> <span data-ttu-id="96a61-170">Wie bei der `GetObjectToSerialize`-Methode gehören zu den Anwendungsmöglichkeiten das direkte Austauschen von Felddaten, das Durchführen von Vorgängen an den Daten und das Speichern der XML-Daten.</span><span class="sxs-lookup"><span data-stu-id="96a61-170">Similar to the `GetObjectToSerialize` method, some possible uses may be to directly exchange field data, perform operations on the data, and store XML data.</span></span> <span data-ttu-id="96a61-171">Aufgrund von Änderungen während der Datenkonvertierung ergibt die Deserialisierung möglicherweise nicht immer die exakten Datenwerte aus dem Original.</span><span class="sxs-lookup"><span data-stu-id="96a61-171">When  deserializing, you may not always obtain the exact data values from original due to manipulations in the data conversion.</span></span>  
  
 <span data-ttu-id="96a61-172">Der `targetType`-Parameter verweist auf den deklarierten Typ des Members.</span><span class="sxs-lookup"><span data-stu-id="96a61-172">The `targetType` parameter refers to the declared type of the member.</span></span> <span data-ttu-id="96a61-173">Dieser Parameter ist der Ersatzzeichentyp, der durch die `GetDataContractType`-Methode zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="96a61-173">This parameter is the surrogated type returned by the `GetDataContractType` method.</span></span> <span data-ttu-id="96a61-174">Die `obj` Parameter verweist auf das Objekt, das deserialisiert wurde.</span><span class="sxs-lookup"><span data-stu-id="96a61-174">The `obj` parameter refers to the object that has been deserialized.</span></span> <span data-ttu-id="96a61-175">Das Objekt kann zurück in seinen ursprünglichen Typ konvertiert werden, wenn es ersetzt wurde.</span><span class="sxs-lookup"><span data-stu-id="96a61-175">The object can be converted back to its original type if it is surrogated.</span></span> <span data-ttu-id="96a61-176">Diese Methode gibt den Eingabeobjekttyp zurück, wenn das Ersatzzeichen das Objekt nicht behandelt.</span><span class="sxs-lookup"><span data-stu-id="96a61-176">This method returns the input object if the surrogate does not handle the object.</span></span> <span data-ttu-id="96a61-177">Andernfalls wird das deserialisierte Objekt zurückgegeben, sobald seine Konvertierung abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="96a61-177">Otherwise, the deserialized object will be returned once its conversion has been completed.</span></span> <span data-ttu-id="96a61-178">Wenn verschiedene Ersatzzeichentypen existieren, können Sie für jeden dieser Typen die Datenkonvertierung vom Ersatzzeichentyp in den Primärtyp bewirken, indem Sie jeden Typ und dessen Konvertierung angeben.</span><span class="sxs-lookup"><span data-stu-id="96a61-178">If several surrogate types exist, you may provide data conversion from surrogate to primary type for each by indicating each type and its conversion.</span></span>  
  
 <span data-ttu-id="96a61-179">Beim Zurückgeben eines Objekts werden die internen Objekttabellen mit dem von diesem Ersatzzeichen zurückgegebenen Objekt aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="96a61-179">When returning an object, the internal object tables are updated with the object returned by this surrogate.</span></span> <span data-ttu-id="96a61-180">Alle nachfolgenden Verweise auf eine Instanz rufen die Ersatzzeicheninstanz aus den Objekttabellen ab.</span><span class="sxs-lookup"><span data-stu-id="96a61-180">Any subsequent references to an instance will obtain the surrogated instance from the object tables.</span></span>  
  
 <span data-ttu-id="96a61-181">Im vorherigen Beispiel werden Objekte des Typs `InventorySurrogated` zurück in den ursprünglichen Typ `Inventory` konvertiert.</span><span class="sxs-lookup"><span data-stu-id="96a61-181">The previous example converts objects of type `InventorySurrogated` back to the initial type `Inventory`.</span></span> <span data-ttu-id="96a61-182">In diesem Fall werden die Daten direkt von `InventorySurrogated` auf seine entsprechenden Felder in `Inventory` zurückübertragen.</span><span class="sxs-lookup"><span data-stu-id="96a61-182">In this case, data is directly transferred back from `InventorySurrogated` to its corresponding fields in `Inventory`.</span></span> <span data-ttu-id="96a61-183">Da es keine Datenänderungen gibt, enthält jedes der Memberfelder dieselben Werte wie vor der Serialisierung.</span><span class="sxs-lookup"><span data-stu-id="96a61-183">Because there are no data manipulations, the each of the member fields will contain the same values as before the serialization.</span></span>  
  
### <a name="getcustomdatatoexport-method"></a><span data-ttu-id="96a61-184">GetCustomDataToExport-Methode</span><span class="sxs-lookup"><span data-stu-id="96a61-184">GetCustomDataToExport Method</span></span>  
 <span data-ttu-id="96a61-185">Beim Exportieren eines Schemas ist die <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%2A>-Methode optional.</span><span class="sxs-lookup"><span data-stu-id="96a61-185">When exporting a schema, the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%2A> method is optional.</span></span> <span data-ttu-id="96a61-186">Sie wird verwendet, um zusätzliche Daten oder Hinweise in das exportierte Schema einzufügen.</span><span class="sxs-lookup"><span data-stu-id="96a61-186">It is used to insert additional data or hints into the exported schema.</span></span> <span data-ttu-id="96a61-187">Zusätzliche Daten können auf Memberebene oder auf Typebene eingefügt werden.</span><span class="sxs-lookup"><span data-stu-id="96a61-187">Additional data can be inserted at the member level or type level.</span></span> <span data-ttu-id="96a61-188">Zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="96a61-188">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#6)]  
  
 <span data-ttu-id="96a61-189">Diese Methode (mit zwei Überladungen) ermöglicht die Einbeziehung zusätzlicher Informationen in die Metadaten auf der Member- oder der Typebene.</span><span class="sxs-lookup"><span data-stu-id="96a61-189">This method (with two overloads) enables the inclusion of extra information into the metadata either at the member or type level.</span></span> <span data-ttu-id="96a61-190">Damit ist es möglich, Hinweise dazu einzubeziehen, ob ein Member öffentlich oder privat ist, sowie Kommentare, die während des gesamten Exports und Imports des Schemas beibehalten werden.</span><span class="sxs-lookup"><span data-stu-id="96a61-190">It is possible to include hints about whether a member is public or private, and comments which would be preserved throughout the export and import of the schema.</span></span> <span data-ttu-id="96a61-191">Solche Informationen würden ohne diese Methode verloren gehen.</span><span class="sxs-lookup"><span data-stu-id="96a61-191">Such information would be lost without this method.</span></span> <span data-ttu-id="96a61-192">Diese Methode bewirkt nicht das Einfügen oder Löschen von Membern oder Typen, sondern fügt dem Schema auf diesen beiden Ebenen zusätzliche Daten hinzu.</span><span class="sxs-lookup"><span data-stu-id="96a61-192">This method does not cause the insertion or deletion of members or types, but rather adds additional data to the schemas at either of these levels.</span></span>  
  
 <span data-ttu-id="96a61-193">Die Methode wird überladen und kann entweder einen `Type` (`clrtype`-Parameter) oder <xref:System.Reflection.MemberInfo> (`memberInfo`-Parameter) nehmen.</span><span class="sxs-lookup"><span data-stu-id="96a61-193">The method is overloaded and can take either a `Type` (`clrtype` parameter) or <xref:System.Reflection.MemberInfo> (`memberInfo` parameter).</span></span> <span data-ttu-id="96a61-194">Der zweite Parameter ist immer ein `Type` (`dataContractType`-Parameter).</span><span class="sxs-lookup"><span data-stu-id="96a61-194">The second parameter is always a `Type` (`dataContractType` parameter).</span></span> <span data-ttu-id="96a61-195">Diese Methode wird für jeden Member und jeden Typ des ersetzten `dataContractType`-Typs aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="96a61-195">This method is called for every member and type of the surrogated `dataContractType` type.</span></span>  
  
 <span data-ttu-id="96a61-196">Beide dieser Überladungen müssen entweder `null` oder ein serialisierbares Objekt zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="96a61-196">Either of these overloads must return either `null` or a serializable object.</span></span> <span data-ttu-id="96a61-197">Ein Nicht-NULL-Objekt wird als Anmerkung in das exportierte Schema serialisiert.</span><span class="sxs-lookup"><span data-stu-id="96a61-197">A non-null object will be serialized as annotation into the exported schema.</span></span> <span data-ttu-id="96a61-198">Bei der `Type`-Überladung wird jeder Typ, der in das Schema exportiert wird, im ersten Parameter zusammen mit dem Ersatzzeichentyp als der `dataContractType`-Parameter zu dieser Methode gesendet.</span><span class="sxs-lookup"><span data-stu-id="96a61-198">For the `Type` overload, each type that is exported to schema is sent to this method in the first parameter along with the surrogated type as the `dataContractType` parameter.</span></span> <span data-ttu-id="96a61-199">Bei der `MemberInfo`-Überladung sendet jeder Member, der in das Schema exportiert wird, seine Informationen als den `memberInfo`-Parameter mit dem Ersatzzeichentyp im zweiten Parameter.</span><span class="sxs-lookup"><span data-stu-id="96a61-199">For the `MemberInfo` overload, each member that is exported to schema sends its information as the `memberInfo` parameter with the surrogated type in the second parameter.</span></span>  
  
#### <a name="getcustomdatatoexport-method-type-type"></a><span data-ttu-id="96a61-200">GetCustomDataToExport-Methode (Typ, Typ)</span><span class="sxs-lookup"><span data-stu-id="96a61-200">GetCustomDataToExport Method (Type, Type)</span></span>  
 <span data-ttu-id="96a61-201">Die <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%28System.Type%2CSystem.Type%29?displayProperty=nameWithType>-Methode wird während des Schemaexports für jede Typdefinition aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="96a61-201">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%28System.Type%2CSystem.Type%29?displayProperty=nameWithType> method is called during schema export for every type definition.</span></span> <span data-ttu-id="96a61-202">Die Methode fügt den Typen innerhalb des Schemas beim Export Informationen hinzu.</span><span class="sxs-lookup"><span data-stu-id="96a61-202">The method adds information to the types within the schema when exporting.</span></span> <span data-ttu-id="96a61-203">Jeder definierte Typ wird zu dieser Methode gesendet, um zu überprüfen, ob es zusätzliche Daten gibt, die in das Schema einbezogen werden müssen.</span><span class="sxs-lookup"><span data-stu-id="96a61-203">Each type defined is sent to this method to determine whether there is any additional data that needs to be included in the schema.</span></span>  
  
#### <a name="getcustomdatatoexport-method-memberinfo-type"></a><span data-ttu-id="96a61-204">GetCustomDataToExport-Methode (MemberInfo, Typ)</span><span class="sxs-lookup"><span data-stu-id="96a61-204">GetCustomDataToExport Method (MemberInfo, Type)</span></span>  
 <span data-ttu-id="96a61-205">Die <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%28System.Reflection.MemberInfo%2CSystem.Type%29?displayProperty=nameWithType>-Methode wird während des Exports für jeden Member in den Typen aufgerufen, die exportiert werden.</span><span class="sxs-lookup"><span data-stu-id="96a61-205">The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%28System.Reflection.MemberInfo%2CSystem.Type%29?displayProperty=nameWithType> is called during export for every member in the types that are exported.</span></span> <span data-ttu-id="96a61-206">Mit dieser Funktion können Sie alle Kommentare für die Member anpassen, die beim Export in das Schema aufgenommen werden.</span><span class="sxs-lookup"><span data-stu-id="96a61-206">This function enables you to customize any comments for the members that will be included in the schema upon export.</span></span> <span data-ttu-id="96a61-207">Die Informationen für jeden Member innerhalb der Klasse werden an diese Methode gesendet, um zu überprüfen, ob irgendwelche zusätzlichen Daten zum Schema hinzugefügt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="96a61-207">The information for every member within the class is sent to this method to check whether any additional data need to be added in the schema.</span></span>  
  
 <span data-ttu-id="96a61-208">Das obige Beispiel durchsucht den `dataContractType` für jeden Member des Ersatzzeichens.</span><span class="sxs-lookup"><span data-stu-id="96a61-208">The example above searches through the `dataContractType` for each member of the surrogate.</span></span> <span data-ttu-id="96a61-209">Es gibt dann den entsprechenden Zugriffsmodifizierer für jedes Feld zurück.</span><span class="sxs-lookup"><span data-stu-id="96a61-209">It then returns the appropriate access modifier for each field.</span></span> <span data-ttu-id="96a61-210">Ohne diese Anpassung ist der Standardwert für Zugriffsmodifizierer öffentlich.</span><span class="sxs-lookup"><span data-stu-id="96a61-210">Without this customization, the default value for access modifiers is public.</span></span> <span data-ttu-id="96a61-211">Deshalb würden alle Member in dem mit dem exportierten Schema generierten Code als öffentlich definiert, und zwar unabhängig davon, welche tatsächlichen Zugriffsbeschränkungen für sie gelten.</span><span class="sxs-lookup"><span data-stu-id="96a61-211">Therefore, all members would be defined as public in the code generated using the exported schema no matter what their actual access restrictions are.</span></span> <span data-ttu-id="96a61-212">Wenn diese Implementierung nicht verwendet wird, wäre der Member `numpens` im exportierten Schema öffentlich, obwohl er im Ersatzzeichen als privat definiert wurde.</span><span class="sxs-lookup"><span data-stu-id="96a61-212">When not using this implementation, the member `numpens` would be public in the exported schema even though it was defined in the surrogate as private.</span></span> <span data-ttu-id="96a61-213">Durch die Verwendung dieser Methode kann der Zugriffsmodifizierer im exportierten Schema als privat generiert werden.</span><span class="sxs-lookup"><span data-stu-id="96a61-213">Through the use of this method, in the exported schema, the access modifier can be generated as private.</span></span>  
  
### <a name="getreferencedtypeonimport-method"></a><span data-ttu-id="96a61-214">GetReferencedTypeOnImport-Methode</span><span class="sxs-lookup"><span data-stu-id="96a61-214">GetReferencedTypeOnImport Method</span></span>  
 <span data-ttu-id="96a61-215">Diese Methode ordnet dem ursprünglichen Typ den <xref:System.Type> des Ersatzzeichens zu.</span><span class="sxs-lookup"><span data-stu-id="96a61-215">This method maps the <xref:System.Type> of the surrogate to the original type.</span></span> <span data-ttu-id="96a61-216">Diese Methode ist für den Import von Schemas optional.</span><span class="sxs-lookup"><span data-stu-id="96a61-216">This method is optional for schema importation.</span></span>  
  
 <span data-ttu-id="96a61-217">Beim Erstellen eines Ersatzzeichens, das ein Schema importiert und für dieses Code generiert, besteht die nächste Aufgabe darin, den Typ einer Ersatzzeicheninstanz auf ihren ursprünglichen Typ festzulegen.</span><span class="sxs-lookup"><span data-stu-id="96a61-217">When creating a surrogate that imports a schema and generates code for it, the next task is to define the type of a surrogate instance to its original type.</span></span>  
  
 <span data-ttu-id="96a61-218">Wenn der generierte Code auf einen existierenden Benutzertyp verweisen muss, wird dies durch die Implementierung der <xref:System.Runtime.Serialization.IDataContractSurrogate.GetReferencedTypeOnImport%2A>-Methode erreicht.</span><span class="sxs-lookup"><span data-stu-id="96a61-218">If the generated code needs to reference an existing user type, this is done by implementing the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetReferencedTypeOnImport%2A> method.</span></span>  
  
 <span data-ttu-id="96a61-219">Beim Importieren eines Schemas wird diese Methode für jede Typdeklaration aufgerufen, um einem Typ den Ersatzzeichen-Datenvertrag zuzuordnen.</span><span class="sxs-lookup"><span data-stu-id="96a61-219">When importing a schema, this method is called for every type declaration to map the surrogated data contract to a type.</span></span> <span data-ttu-id="96a61-220">Die Zeichenfolgenparameter `typeName` und `typeNamespace` definieren den Namen und den Namespace des Ersatzzeichentyps.</span><span class="sxs-lookup"><span data-stu-id="96a61-220">The string parameters `typeName` and `typeNamespace` define the name and namespace of the surrogated type.</span></span> <span data-ttu-id="96a61-221">Der Rückgabewert für <xref:System.Runtime.Serialization.IDataContractSurrogate.GetReferencedTypeOnImport%2A> wird verwendet, um zu ermitteln, ob ein neuer Typ generiert werden muss.</span><span class="sxs-lookup"><span data-stu-id="96a61-221">The return value for <xref:System.Runtime.Serialization.IDataContractSurrogate.GetReferencedTypeOnImport%2A> is used to determine whether a new type needs to be generated.</span></span> <span data-ttu-id="96a61-222">Diese Methode muss entweder einen gültigen Typ oder NULL zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="96a61-222">This method must return either a valid type or null.</span></span> <span data-ttu-id="96a61-223">Für gültige Typen wird der zurückgegebene Typ im generierten Code als ein Typ verwendet, auf den verwiesen wird.</span><span class="sxs-lookup"><span data-stu-id="96a61-223">For valid types, the type returned will be used as a referenced type in the generated code.</span></span> <span data-ttu-id="96a61-224">Wenn NULL zurückgegeben wird, wird auf keinen Typ verwiesen, und ein neuer Typ muss erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="96a61-224">If null is returned, no type will be referenced and a new type must be created.</span></span> <span data-ttu-id="96a61-225">Wenn mehrere Ersatzzeichen existieren, kann die Zuordnung für jeden Ersatzzeichentyp zurück zu seinem anfänglichen Typ durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="96a61-225">If several surrogates exist, it is possible to perform the mapping for each surrogate type back to its initial type.</span></span>  
  
 <span data-ttu-id="96a61-226">Der `customData`-Parameter ist das Objekt, das ursprünglich von <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%2A> zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="96a61-226">The `customData` parameter is the object originally returned from <xref:System.Runtime.Serialization.IDataContractSurrogate.GetCustomDataToExport%2A>.</span></span> <span data-ttu-id="96a61-227">Dieser `customData`-Parameter wird verwendet, wenn Autoren von Ersatzzeichen zusätzliche Daten/Hinweise in die Metadaten einfügen möchten, um sie während des Imports zum Generieren von Code zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="96a61-227">This `customData` is used when surrogate authors want to insert extra data/hints into the metadata to use during import to generate code.</span></span>  
  
### <a name="processimportedtype-method"></a><span data-ttu-id="96a61-228">ProcessImportedType-Methode</span><span class="sxs-lookup"><span data-stu-id="96a61-228">ProcessImportedType Method</span></span>  
 <span data-ttu-id="96a61-229">Die <xref:System.Runtime.Serialization.IDataContractSurrogate.ProcessImportedType%2A>-Methode passt jeden aus dem Schemaimport erstellten Typ an.</span><span class="sxs-lookup"><span data-stu-id="96a61-229">The <xref:System.Runtime.Serialization.IDataContractSurrogate.ProcessImportedType%2A> method customizes any type created from schema importation.</span></span> <span data-ttu-id="96a61-230">Diese Methode ist optional.</span><span class="sxs-lookup"><span data-stu-id="96a61-230">This method is optional.</span></span>  
  
 <span data-ttu-id="96a61-231">Beim Importieren eines Schemas ermöglicht diese Methode die Anpassung jeder importierten Typ- und Kompilierungsinformation.</span><span class="sxs-lookup"><span data-stu-id="96a61-231">When importing a schema, this method allows for any imported type and compilation information to be customized.</span></span> <span data-ttu-id="96a61-232">Zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="96a61-232">For example:</span></span>  
  
 [!code-csharp[C_IDataContractSurrogate#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#7)]  
  
 <span data-ttu-id="96a61-233">Während des Imports wird diese Methode für jeden generierten Typ aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="96a61-233">During import, this method is called for every type generated.</span></span> <span data-ttu-id="96a61-234">Ändern der angegebenen <xref:System.CodeDom.CodeTypeDeclaration> oder Ändern der <xref:System.CodeDom.CodeCompileUnit>.</span><span class="sxs-lookup"><span data-stu-id="96a61-234">Change the specified <xref:System.CodeDom.CodeTypeDeclaration> or modify the <xref:System.CodeDom.CodeCompileUnit>.</span></span> <span data-ttu-id="96a61-235">Dies schließt das Ändern von Namen, Membern, Attributen und vielen anderen Eigenschaften der `CodeTypeDeclaration` ein.</span><span class="sxs-lookup"><span data-stu-id="96a61-235">This includes changing the name, members, attributes, and many other properties of the `CodeTypeDeclaration`.</span></span> <span data-ttu-id="96a61-236">Durch Verarbeiten der `CodeCompileUnit` ist es möglich, die Direktiven, die Namespaces, die referenzierten Assemblys und verschiedene andere Aspekte zu ändern.</span><span class="sxs-lookup"><span data-stu-id="96a61-236">By processing the `CodeCompileUnit`, it is possible to modify the directives, namespaces, referenced assemblies, and several other aspects.</span></span>  
  
 <span data-ttu-id="96a61-237">Der `CodeTypeDeclaration`-Parameter enthält die Code-DOM-Typdeklaration.</span><span class="sxs-lookup"><span data-stu-id="96a61-237">The `CodeTypeDeclaration` parameter contains the code DOM type declaration.</span></span> <span data-ttu-id="96a61-238">Der `CodeCompileUnit`-Parameter ermöglicht die Änderung zum Verarbeiten des Codes.</span><span class="sxs-lookup"><span data-stu-id="96a61-238">The `CodeCompileUnit` parameter allows for modification for processing the code.</span></span>  <span data-ttu-id="96a61-239">Zurückgeben von `null`-Ergebnissen in der Typdeklaration, die verworfen wird.</span><span class="sxs-lookup"><span data-stu-id="96a61-239">Returning `null` results in the type declaration being discarded.</span></span> <span data-ttu-id="96a61-240">Umgekehrt werden beim Zurückgeben einer `CodeTypeDeclaration` die Änderungen beibehalten.</span><span class="sxs-lookup"><span data-stu-id="96a61-240">Conversely, when returning a `CodeTypeDeclaration`, the modifications are preserved.</span></span>  
  
 <span data-ttu-id="96a61-241">Wenn während des Metadatenexports benutzerdefinierte Daten eingefügt werden, müssen diese dem Benutzer beim Import so zur Verfügung gestellt werden, dass sie verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="96a61-241">If custom data is inserted during metadata export, it needs to be provided to the user during import so that it can be used.</span></span> <span data-ttu-id="96a61-242">Diese benutzerdefinierten Daten können zur Programmierung von Modellhinweisen oder anderen Kommentaren verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="96a61-242">This custom data can be used for programming model hints, or other comments.</span></span> <span data-ttu-id="96a61-243">Jede `CodeTypeDeclaration`- und <xref:System.CodeDom.CodeTypeMember>-Instanz schließt benutzerdefinierte Daten als die <xref:System.CodeDom.CodeObject.UserData%2A>-Eigenschaft ein, die in den `IDataContractSurrogate`-Typ umgewandelt wird.</span><span class="sxs-lookup"><span data-stu-id="96a61-243">Each `CodeTypeDeclaration` and <xref:System.CodeDom.CodeTypeMember> instance includes custom data as the <xref:System.CodeDom.CodeObject.UserData%2A> property, cast to the `IDataContractSurrogate` type.</span></span>  
  
 <span data-ttu-id="96a61-244">Das obige Beispiel führt einige Änderungen an dem importierten Schema durch.</span><span class="sxs-lookup"><span data-stu-id="96a61-244">The example above performs some changes on the schema imported.</span></span> <span data-ttu-id="96a61-245">Der Code behält private Member des ursprünglichen Typs bei, indem ein Ersatzzeichen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="96a61-245">The code preserves private members of the original type by using a surrogate.</span></span> <span data-ttu-id="96a61-246">Der Standardzugriffsmodifizierer beim Importieren eines Schemas ist `public`.</span><span class="sxs-lookup"><span data-stu-id="96a61-246">The default access modifier when importing a schema is `public`.</span></span> <span data-ttu-id="96a61-247">Deshalb sind alle Member des Ersatzzeichenschemas öffentlich, es sei denn, es erfolgen Änderungen, wie in diesem Beispiel.</span><span class="sxs-lookup"><span data-stu-id="96a61-247">Therefore, all members of the surrogate schema will be public unless modified, as in this example.</span></span> <span data-ttu-id="96a61-248">Während des Exports werden in die Metadaten benutzerdefinierte Daten darüber eingefügt, welche Member privat sind.</span><span class="sxs-lookup"><span data-stu-id="96a61-248">During export, custom data is inserted into the metadata about which members are private.</span></span> <span data-ttu-id="96a61-249">Im Beispiel wird nach den benutzerdefinierten Daten gesucht, es wird überprüft, ob der Zugriffsmodifizierer privat ist, und der entsprechende Member wird dann durch Festlegen seiner Attribute zu privat geändert.</span><span class="sxs-lookup"><span data-stu-id="96a61-249">The example looks up the custom data, checks whether the access modifier is private, and then modifies the appropriate member to be private by setting its attributes.</span></span> <span data-ttu-id="96a61-250">Ohne diese Anpassung würde der `numpens`-Member nicht als privat, sondern als öffentlich definiert werden.</span><span class="sxs-lookup"><span data-stu-id="96a61-250">Without this customization, the `numpens` member would be defined as public instead of private.</span></span>  
  
### <a name="getknowncustomdatatypes-method"></a><span data-ttu-id="96a61-251">GetKnownCustomDataTypes-Methode</span><span class="sxs-lookup"><span data-stu-id="96a61-251">GetKnownCustomDataTypes Method</span></span>  
 <span data-ttu-id="96a61-252">Diese Methode gewinnt aus dem Schema definierte benutzerdefinierte Datentypen.</span><span class="sxs-lookup"><span data-stu-id="96a61-252">This method obtains custom data types defined from the schema.</span></span> <span data-ttu-id="96a61-253">Die Methode ist für den Import von Schemas optional.</span><span class="sxs-lookup"><span data-stu-id="96a61-253">The method is optional for schema importation.</span></span>  
  
 <span data-ttu-id="96a61-254">Die Methode wird zu Beginn des Schemaexports und -imports aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="96a61-254">The method is called at the beginning of schema export and import.</span></span> <span data-ttu-id="96a61-255">Die Methode gibt die benutzerdefinierten Datentypen zurück, die im exportierten oder importierten Schema verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="96a61-255">The method returns the custom data types used in the schema exported or imported.</span></span> <span data-ttu-id="96a61-256">An die Methode wird ein <xref:System.Collections.ObjectModel.Collection%601> übergeben (der `customDataTypes`), wobei es sich um eine Sammlung von Typen handelt.</span><span class="sxs-lookup"><span data-stu-id="96a61-256">The method is passed a <xref:System.Collections.ObjectModel.Collection%601> (the `customDataTypes` parameter), which is a collection of types.</span></span> <span data-ttu-id="96a61-257">Die Methode sollte dieser Sammlung zusätzliche bekannte Typen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="96a61-257">The method should add additional known types to this collection.</span></span> <span data-ttu-id="96a61-258">Die bekannten benutzerdefinierten Datentypen werden benötigt, um die Serialisierung und Deserialisierung von benutzerdefinierten Daten mit dem <xref:System.Runtime.Serialization.DataContractSerializer> zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="96a61-258">The known custom data types are needed to enable serialization and deserialization of custom data using the <xref:System.Runtime.Serialization.DataContractSerializer>.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="96a61-259">[Bekannte Typen in Datenverträgen](../../../../docs/framework/wcf/feature-details/data-contract-known-types.md).</span><span class="sxs-lookup"><span data-stu-id="96a61-259"> [Data Contract Known Types](../../../../docs/framework/wcf/feature-details/data-contract-known-types.md).</span></span>  
  
## <a name="implementing-a-surrogate"></a><span data-ttu-id="96a61-260">Implementieren eines Ersatzzeichens</span><span class="sxs-lookup"><span data-stu-id="96a61-260">Implementing a Surrogate</span></span>  
 <span data-ttu-id="96a61-261">Um das Datenvertrag-Ersatzzeichen innerhalb von [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] zu verwenden, müssen Sie einigen besonderen Prozeduren folgen.</span><span class="sxs-lookup"><span data-stu-id="96a61-261">To use the data contract surrogate within [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], you must follow a few special procedures.</span></span>  
  
### <a name="to-use-a-surrogate-for-serialization-and-deserialization"></a><span data-ttu-id="96a61-262">So verwenden Sie ein Ersatzzeichen für die Serialisierung und Deserialisierung</span><span class="sxs-lookup"><span data-stu-id="96a61-262">To Use a Surrogate for Serialization and Deserialization</span></span>  
 <span data-ttu-id="96a61-263">Verwenden Sie das <xref:System.Runtime.Serialization.DataContractSerializer>, um die Serialisierung und die Deserialisierung von Daten mit dem Ersatzzeichen durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="96a61-263">Use the <xref:System.Runtime.Serialization.DataContractSerializer> to perform serialization and deserialization of data with the surrogate.</span></span> <span data-ttu-id="96a61-264">Das <xref:System.Runtime.Serialization.DataContractSerializer> wird durch das <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> erstellt.</span><span class="sxs-lookup"><span data-stu-id="96a61-264">The <xref:System.Runtime.Serialization.DataContractSerializer> is created by the <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior>.</span></span> <span data-ttu-id="96a61-265">Das Ersatzzeichen muss ebenfalls angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="96a61-265">The surrogate must also be specified.</span></span>  
  
##### <a name="to-implement-serialization-and-deserialization"></a><span data-ttu-id="96a61-266">So implementieren Sie die Serialisierung und die Deserialisierung</span><span class="sxs-lookup"><span data-stu-id="96a61-266">To implement serialization and deserialization</span></span>  
  
1.  <span data-ttu-id="96a61-267">Erstellen Sie eine Instanz des <xref:System.ServiceModel.ServiceHost> für Ihren Dienst.</span><span class="sxs-lookup"><span data-stu-id="96a61-267">Create an instance of the <xref:System.ServiceModel.ServiceHost> for your service.</span></span> <span data-ttu-id="96a61-268">Vollständige Anweisungen finden Sie unter [grundlegende WCF-Programmierung](../../../../docs/framework/wcf/basic-wcf-programming.md).</span><span class="sxs-lookup"><span data-stu-id="96a61-268">For complete instructions, see [Basic WCF Programming](../../../../docs/framework/wcf/basic-wcf-programming.md).</span></span>  
  
2.  <span data-ttu-id="96a61-269">Suchen Sie für jeden <xref:System.ServiceModel.Description.ServiceEndpoint> des angegebenen Diensthosts seine <xref:System.ServiceModel.Description.OperationDescription>.</span><span class="sxs-lookup"><span data-stu-id="96a61-269">For every <xref:System.ServiceModel.Description.ServiceEndpoint> of the specified service host, find its <xref:System.ServiceModel.Description.OperationDescription>.</span></span>  
  
3.  <span data-ttu-id="96a61-270">Durchsuchen Sie die Vorgangsverhalten, um zu ermitteln, ob eine Instanz von <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> gefunden wird.</span><span class="sxs-lookup"><span data-stu-id="96a61-270">Search through the operation behaviors to determine if an instance of the <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> is found.</span></span>  
  
4.  <span data-ttu-id="96a61-271">Wenn ein <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> gefunden wird, legen Sie dessen <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.DataContractSurrogate%2A>-Eigenschaft auf eine neue Instanz des Ersatzzeichens fest.</span><span class="sxs-lookup"><span data-stu-id="96a61-271">If a <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> is found, set its <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.DataContractSurrogate%2A> property to a new instance of the surrogate.</span></span> <span data-ttu-id="96a61-272">Wenn kein <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> gefunden wird, dann erstellen Sie eine neue Instanz, und legen Sie den <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.DataContractSurrogate%2A>-Member des neuen Verhaltens auf eine neue Instanz des Ersatzzeichens fest.</span><span class="sxs-lookup"><span data-stu-id="96a61-272">If no <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> is found, then create a new instance and set the <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.DataContractSurrogate%2A> member of the new behavior to a new instance of the surrogate.</span></span>  
  
5.  <span data-ttu-id="96a61-273">Fügen Sie dieses neue Verhalten schließlich den aktuellen Vorgangsverhalten hinzu, wie im folgenden Beispiel gezeigt wird:</span><span class="sxs-lookup"><span data-stu-id="96a61-273">Finally, add this new behavior to the current operation behaviors, as shown in the following example:</span></span>  
  
     [!code-csharp[C_IDataContractSurrogate#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#8)]  
  
### <a name="to-use-a-surrogate-for-metadata-import"></a><span data-ttu-id="96a61-274">So verwenden Sie ein Ersatzzeichen für den Metadatenimport</span><span class="sxs-lookup"><span data-stu-id="96a61-274">To Use a Surrogate for Metadata Import</span></span>  
 <span data-ttu-id="96a61-275">Beim Importieren von Metadaten wie WSDL und XSD zum Generieren von clientseitigem Code muss das Ersatzzeichen zur Komponente <xref:System.Runtime.Serialization.XsdDataContractImporter>, die für das Generieren von Code aus dem XSD-Schema verantwortlich ist, hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="96a61-275">When importing metadata like WSDL and XSD to generate client-side code, the surrogate needs to be added to the component responsible for generating code from XSD schema, <xref:System.Runtime.Serialization.XsdDataContractImporter>.</span></span> <span data-ttu-id="96a61-276">Dazu ändern Sie direkt den zum Importieren von Metadaten verwendeten <xref:System.ServiceModel.Description.WsdlImporter>.</span><span class="sxs-lookup"><span data-stu-id="96a61-276">To do this, directly modify the <xref:System.ServiceModel.Description.WsdlImporter> used to import metadata.</span></span>  
  
##### <a name="to-implement-a-surrogate-for-metadata-importation"></a><span data-ttu-id="96a61-277">So implementieren Sie ein Ersatzzeichen für den Metadatenimport</span><span class="sxs-lookup"><span data-stu-id="96a61-277">To implement a surrogate for metadata importation</span></span>  
  
1.  <span data-ttu-id="96a61-278">Importieren Sie die Metadaten mit der <xref:System.ServiceModel.Description.WsdlImporter>-Klasse.</span><span class="sxs-lookup"><span data-stu-id="96a61-278">Import the metadata using the <xref:System.ServiceModel.Description.WsdlImporter> class.</span></span>  
  
2.  <span data-ttu-id="96a61-279">Verwenden Sie die <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A>-Methode zur Überprüfung, ob ein <xref:System.Runtime.Serialization.XsdDataContractImporter> definiert wurde.</span><span class="sxs-lookup"><span data-stu-id="96a61-279">Use the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> method to check whether an <xref:System.Runtime.Serialization.XsdDataContractImporter> has been defined.</span></span>  
  
3.  <span data-ttu-id="96a61-280">Wenn die <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A>-Methode `false` zurückgibt, erstellen Sie einen neuen <xref:System.Runtime.Serialization.XsdDataContractImporter>, und legen Sie dessen <xref:System.Runtime.Serialization.XsdDataContractImporter.Options%2A>-Eigenschaft auf eine neue Instanz der <xref:System.Runtime.Serialization.ImportOptions>-Klasse fest.</span><span class="sxs-lookup"><span data-stu-id="96a61-280">If the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> method returns `false`, create a new <xref:System.Runtime.Serialization.XsdDataContractImporter> and set its <xref:System.Runtime.Serialization.XsdDataContractImporter.Options%2A> property to a new instance of the <xref:System.Runtime.Serialization.ImportOptions> class.</span></span> <span data-ttu-id="96a61-281">Verwenden Sie andernfalls den durch den `out`-Parameter der <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A>-Methode zurückgegebenen Importer.</span><span class="sxs-lookup"><span data-stu-id="96a61-281">Otherwise, use the importer returned by the `out` parameter of the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> method.</span></span>  
  
4.  <span data-ttu-id="96a61-282">Wenn für den <xref:System.Runtime.Serialization.XsdDataContractImporter> keine <xref:System.Runtime.Serialization.ImportOptions> definiert sind, dann legen Sie die Eigenschaft auf eine neue Instanz der <xref:System.Runtime.Serialization.ImportOptions>-Klasse fest.</span><span class="sxs-lookup"><span data-stu-id="96a61-282">If the <xref:System.Runtime.Serialization.XsdDataContractImporter> has no <xref:System.Runtime.Serialization.ImportOptions> defined, then set the property to be a new instance of the <xref:System.Runtime.Serialization.ImportOptions> class.</span></span>  
  
5.  <span data-ttu-id="96a61-283">Legen Sie die <xref:System.Runtime.Serialization.ImportOptions.DataContractSurrogate%2A>-Eigenschaft der <xref:System.Runtime.Serialization.ImportOptions> des <xref:System.Runtime.Serialization.XsdDataContractImporter> auf eine neue Instanz des Ersatzzeichens fest.</span><span class="sxs-lookup"><span data-stu-id="96a61-283">Set the <xref:System.Runtime.Serialization.ImportOptions.DataContractSurrogate%2A> property of the <xref:System.Runtime.Serialization.ImportOptions> of the <xref:System.Runtime.Serialization.XsdDataContractImporter> to a new instance of the surrogate.</span></span>  
  
6.  <span data-ttu-id="96a61-284">Fügen Sie den <xref:System.Runtime.Serialization.XsdDataContractImporter> der Sammlung hinzu, die durch die <xref:System.ServiceModel.Description.MetadataExporter.State%2A>-Eigenschaft des <xref:System.ServiceModel.Description.WsdlImporter> (geerbt von der <xref:System.ServiceModel.Description.MetadataExporter>-Klasse) zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="96a61-284">Add the <xref:System.Runtime.Serialization.XsdDataContractImporter> to the collection returned by the <xref:System.ServiceModel.Description.MetadataExporter.State%2A> property of the <xref:System.ServiceModel.Description.WsdlImporter> (inherited from the <xref:System.ServiceModel.Description.MetadataExporter> class.)</span></span>  
  
7.  <span data-ttu-id="96a61-285">Verwenden Sie die <xref:System.ServiceModel.Description.WsdlImporter.ImportAllContracts%2A>-Methode des <xref:System.ServiceModel.Description.WsdlImporter> zum Importieren sämtlicher Datenverträge innerhalb des Schemas.</span><span class="sxs-lookup"><span data-stu-id="96a61-285">Use the <xref:System.ServiceModel.Description.WsdlImporter.ImportAllContracts%2A> method of the <xref:System.ServiceModel.Description.WsdlImporter> to import all of the data contracts within the schema.</span></span> <span data-ttu-id="96a61-286">Während des letzten Schritts wird Code aus den geladenen Schemas durch Aufruf in das Ersatzzeichen generiert.</span><span class="sxs-lookup"><span data-stu-id="96a61-286">During the last step, code is generated from the schemas loaded by calling into the surrogate.</span></span>  
  
     [!code-csharp[C_IDataContractSurrogate#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#9)]  
  
### <a name="to-use-a-surrogate-for-metadata-export"></a><span data-ttu-id="96a61-287">So verwenden Sie ein Ersatzzeichen für den Metadatenexport</span><span class="sxs-lookup"><span data-stu-id="96a61-287">To Use a surrogate for Metadata Export</span></span>  
 <span data-ttu-id="96a61-288">Standardmäßig muss beim Exportieren von Metadaten aus [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] für einen Dienst sowohl das WSDL- als auch das XSD-Schema generiert werden.</span><span class="sxs-lookup"><span data-stu-id="96a61-288">By default, when exporting metadata from [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] for a service, both WSDL and XSD schema needs to be generated.</span></span> <span data-ttu-id="96a61-289">Das Ersatzzeichen muss der Komponente <xref:System.Runtime.Serialization.XsdDataContractExporter> hinzugefügt werden, die für das Generieren des XSD-Schemas für Datenvertragstypen verantwortlich ist.</span><span class="sxs-lookup"><span data-stu-id="96a61-289">The surrogate needs to be added to the component responsible for generating XSD schema for data contract types, <xref:System.Runtime.Serialization.XsdDataContractExporter>.</span></span> <span data-ttu-id="96a61-290">Dazu verwenden Sie entweder ein Verhalten, das <xref:System.ServiceModel.Description.IWsdlExportExtension> implementiert, um das <xref:System.ServiceModel.Description.WsdlExporter> zu ändern, oder ändern Sie das zum Exportieren von Metadaten verwendete <xref:System.ServiceModel.Description.WsdlExporter> direkt.</span><span class="sxs-lookup"><span data-stu-id="96a61-290">To do this, either use a behavior that implements <xref:System.ServiceModel.Description.IWsdlExportExtension> to modify the <xref:System.ServiceModel.Description.WsdlExporter>, or directly modify the <xref:System.ServiceModel.Description.WsdlExporter> used to export metadata.</span></span>  
  
##### <a name="to-use-a-surrogate-for-metadata-export"></a><span data-ttu-id="96a61-291">So verwenden Sie ein Ersatzzeichen für den Metadatenexport</span><span class="sxs-lookup"><span data-stu-id="96a61-291">To use a surrogate for metadata export</span></span>  
  
1.  <span data-ttu-id="96a61-292">Erstellen Sie ein neues <xref:System.ServiceModel.Description.WsdlExporter>, oder verwenden Sie den `wsdlExporter`-Parameter, der an die <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A>-Methode übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="96a61-292">Create a new <xref:System.ServiceModel.Description.WsdlExporter> or use the `wsdlExporter` parameter passed to the <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> method.</span></span>  
  
2.  <span data-ttu-id="96a61-293">Verwenden Sie die <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A>-Funktion zur Überprüfung, ob ein <xref:System.Runtime.Serialization.XsdDataContractExporter> definiert wurde.</span><span class="sxs-lookup"><span data-stu-id="96a61-293">Use the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> function to check whether an <xref:System.Runtime.Serialization.XsdDataContractExporter> has been defined.</span></span>  
  
3.  <span data-ttu-id="96a61-294">Wenn <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> `false` zurückgibt, erstellen Sie ein neues <xref:System.Runtime.Serialization.XsdDataContractExporter> mit den generierten XML-Schemas aus dem <xref:System.ServiceModel.Description.WsdlExporter>, und fügen Sie diesen der Sammlung hinzu, die durch die <xref:System.ServiceModel.Description.MetadataExporter.State%2A>-Eigenschaft des <xref:System.ServiceModel.Description.WsdlExporter> zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="96a61-294">If <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> returns `false`, create a new <xref:System.Runtime.Serialization.XsdDataContractExporter> with the generated XML schemas from the <xref:System.ServiceModel.Description.WsdlExporter>, and add it to the collection returned by the <xref:System.ServiceModel.Description.MetadataExporter.State%2A> property of the <xref:System.ServiceModel.Description.WsdlExporter>.</span></span> <span data-ttu-id="96a61-295">Verwenden Sie andernfalls das Exportprogramm, das durch den `out`-Parameter der <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A>-Methode zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="96a61-295">Otherwise, use the exporter returned by the `out` parameter of the <xref:System.Collections.Generic.Dictionary%602.TryGetValue%2A> method.</span></span>  
  
4.  <span data-ttu-id="96a61-296">Wenn für das <xref:System.Runtime.Serialization.XsdDataContractExporter> keine <xref:System.Runtime.Serialization.ExportOptions> definiert sind, dann legen Sie die <xref:System.Runtime.Serialization.XsdDataContractExporter.Options%2A>-Eigenschaft auf eine neue Instanz der <xref:System.Runtime.Serialization.ExportOptions>-Klasse fest.</span><span class="sxs-lookup"><span data-stu-id="96a61-296">If the <xref:System.Runtime.Serialization.XsdDataContractExporter> has no <xref:System.Runtime.Serialization.ExportOptions> defined, then set the <xref:System.Runtime.Serialization.XsdDataContractExporter.Options%2A> property to a new instance of the <xref:System.Runtime.Serialization.ExportOptions> class.</span></span>  
  
5.  <span data-ttu-id="96a61-297">Legen Sie die <xref:System.Runtime.Serialization.ExportOptions.DataContractSurrogate%2A>-Eigenschaft der <xref:System.Runtime.Serialization.ExportOptions> des <xref:System.Runtime.Serialization.XsdDataContractExporter> auf eine neue Instanz des Ersatzzeichens fest.</span><span class="sxs-lookup"><span data-stu-id="96a61-297">Set the <xref:System.Runtime.Serialization.ExportOptions.DataContractSurrogate%2A> property of the <xref:System.Runtime.Serialization.ExportOptions> of the <xref:System.Runtime.Serialization.XsdDataContractExporter> to a new instance of the surrogate.</span></span> <span data-ttu-id="96a61-298">Die nachfolgenden Schritte zum Exportieren von Metadaten erfordern keine Änderungen.</span><span class="sxs-lookup"><span data-stu-id="96a61-298">Subsequent steps for exporting metadata do not require any changes.</span></span>  
  
     [!code-csharp[C_IDataContractSurrogate#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_idatacontractsurrogate/cs/source.cs#10)]  
  
## <a name="see-also"></a><span data-ttu-id="96a61-299">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="96a61-299">See Also</span></span>  
 <xref:System.Runtime.Serialization.DataContractSerializer>  
 <xref:System.Runtime.Serialization.IDataContractSurrogate>  
 <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior>  
 <xref:System.Runtime.Serialization.ImportOptions>  
 <xref:System.Runtime.Serialization.ExportOptions>  
 [<span data-ttu-id="96a61-300">Verwenden von Datenverträgen</span><span class="sxs-lookup"><span data-stu-id="96a61-300">Using Data Contracts</span></span>](../../../../docs/framework/wcf/feature-details/using-data-contracts.md)
