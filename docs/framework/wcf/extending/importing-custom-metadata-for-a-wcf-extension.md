---
title: "Importieren von benutzerdefinierten Metadaten für eine WCF-Erweiterung"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 78beb28f-408a-4c75-9c3c-caefe9595b1a
caps.latest.revision: "10"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 9208a73f6a35e4c05ab9be612491f3f7db792a5b
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/22/2017
---
# <a name="importing-custom-metadata-for-a-wcf-extension"></a><span data-ttu-id="86301-102">Importieren von benutzerdefinierten Metadaten für eine WCF-Erweiterung</span><span class="sxs-lookup"><span data-stu-id="86301-102">Importing Custom Metadata for a WCF Extension</span></span>
<span data-ttu-id="86301-103">In [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] wird beim Importieren von Metadaten eine abstrakte Darstellung eines Diensts oder seiner Komponenten aus dessen Metadaten generiert.</span><span class="sxs-lookup"><span data-stu-id="86301-103">In [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)], metadata import is the process of generating an abstract representation of a service or its component parts from its metadata.</span></span> <span data-ttu-id="86301-104">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] kann beispielsweise Instanzen von <xref:System.ServiceModel.Description.ServiceEndpoint>, <xref:System.ServiceModel.Channels.Binding> oder <xref:System.ServiceModel.Description.ContractDescription> aus einem WSDL-Dokument für einen Dienst importieren.</span><span class="sxs-lookup"><span data-stu-id="86301-104">For example, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] can import <xref:System.ServiceModel.Description.ServiceEndpoint> instances, <xref:System.ServiceModel.Channels.Binding> instances or <xref:System.ServiceModel.Description.ContractDescription> instances from a WSDL document for a service.</span></span> <span data-ttu-id="86301-105">Mit einer Implementierung der abstrakten [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]-Klasse können Sie Metadaten von Diensten in <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> importieren.</span><span class="sxs-lookup"><span data-stu-id="86301-105">To import service metadata in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], use an implementation of the <xref:System.ServiceModel.Description.MetadataImporter?displayProperty=nameWithType> abstract class.</span></span> <span data-ttu-id="86301-106">Die Unterstützung für das Importieren von Metadatenformaten, die die Importlogik der WS-Richtlinie in <xref:System.ServiceModel.Description.MetadataImporter> unterstützen, wird durch Typen implementiert, die von der [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]-Klasse abgeleitet sind.</span><span class="sxs-lookup"><span data-stu-id="86301-106">Types that derive from the <xref:System.ServiceModel.Description.MetadataImporter> class implement support for importing metadata formats that take advantage of the WS-Policy import logic in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span>  
  
 <span data-ttu-id="86301-107">Benutzerdefinierte Metadaten bestehen aus XML-Elementen, die die Metadatenimportmechanismen des Systems nicht verarbeiten können.</span><span class="sxs-lookup"><span data-stu-id="86301-107">Custom metadata consists of XML elements that the system-provided metadata importers cannot import.</span></span> <span data-ttu-id="86301-108">Dazu gehören i. d. R. auch benutzerdefinierte WSDL-Erweiterungen sowie benutzerdefinierte Richtlinienassertionen.</span><span class="sxs-lookup"><span data-stu-id="86301-108">Typically, this includes custom WSDL extensions and custom policy assertions.</span></span>  
  
 <span data-ttu-id="86301-109">In diesem Abschnitt wird beschrieben, wie benutzerdefinierte WSDL-Erweiterungen und benutzerdefinierte Richtlinienassertionen importiert werden.</span><span class="sxs-lookup"><span data-stu-id="86301-109">This section describes how to import custom WSDL extensions and policy assertions.</span></span> <span data-ttu-id="86301-110">Dabei wird der eigentliche Importvorgang nur am Rande erläutert.</span><span class="sxs-lookup"><span data-stu-id="86301-110">It does not focus on the importing process itself.</span></span> <span data-ttu-id="86301-111">Weitere Informationen zur Verwendung von Typen, die exportieren und Importieren von Metadaten, unabhängig davon, ob die Metadaten benutzerdefinierte oder vom System unterstützt, finden Sie unter [exportieren und Importieren von Metadaten](../../../../docs/framework/wcf/feature-details/exporting-and-importing-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="86301-111">For more information about how to use the types that export and import metadata regardless of whether the metadata is custom or system-supported, see [Exporting and Importing Metadata](../../../../docs/framework/wcf/feature-details/exporting-and-importing-metadata.md).</span></span>  
  
## <a name="overview"></a><span data-ttu-id="86301-112">Übersicht</span><span class="sxs-lookup"><span data-stu-id="86301-112">Overview</span></span>  
 <span data-ttu-id="86301-113">Der <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType>-Typ stellt die Implementierung der abstrakten <xref:System.ServiceModel.Description.MetadataImporter>-Klasse in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] dar.</span><span class="sxs-lookup"><span data-stu-id="86301-113">The <xref:System.ServiceModel.Description.WsdlImporter?displayProperty=nameWithType> type is the implementation of the <xref:System.ServiceModel.Description.MetadataImporter> abstract class included with [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span> <span data-ttu-id="86301-114">Der <xref:System.ServiceModel.Description.WsdlImporter>-Typ importiert WSDL-Metadaten mit angefügten Richtlinien, die in einem <xref:System.ServiceModel.Description.MetadataSet?displayProperty=nameWithType>-Objekt zusammengefasst sind.</span><span class="sxs-lookup"><span data-stu-id="86301-114">The <xref:System.ServiceModel.Description.WsdlImporter> type imports WSDL metadata with attached policies that are bundled in a <xref:System.ServiceModel.Description.MetadataSet?displayProperty=nameWithType> object.</span></span> <span data-ttu-id="86301-115">Richtlinienassertionen und WSDL-Erweiterungen, die von den Standardimportern nicht erkannt werden, werden an eine registrierte benutzerdefinierte Richtlinie oder an einen registrierten WSDL-Importer übergeben, um sie zu importieren.</span><span class="sxs-lookup"><span data-stu-id="86301-115">Policy assertions and WSDL extensions that the default importers do not recognize are passed to any registered custom policy and WSDL importers for importing.</span></span> <span data-ttu-id="86301-116">Normalerweise werden Importer zur Unterstützung von benutzerdefinierten Bindungselementen oder zur Änderung des importierten Vertrags implementiert.</span><span class="sxs-lookup"><span data-stu-id="86301-116">Typically, importers are implemented to support user-defined binding elements or to modify the imported contract.</span></span>  
  
 <span data-ttu-id="86301-117">Dieser Abschnitt beschreibt:</span><span class="sxs-lookup"><span data-stu-id="86301-117">This section describes:</span></span>  
  
1.  <span data-ttu-id="86301-118">Implementierung und Verwendung der <xref:System.ServiceModel.Description.IWsdlImportExtension?displayProperty=nameWithType>-Schnittstelle, die die WSDL-Daten für benutzerdefinierte Importer verfügbar macht, bevor Beschreibungen und Code generiert werden.</span><span class="sxs-lookup"><span data-stu-id="86301-118">How to implement and use the <xref:System.ServiceModel.Description.IWsdlImportExtension?displayProperty=nameWithType> interface, which exposes the WSDL data to custom importers prior to the generation of descriptions and the generation of code.</span></span> <span data-ttu-id="86301-119">Mit dieser Schnittstelle können Sie die Beschreibungen und die Codekompilierungen mit einem vorhandenen Satz von Metadaten untersuchen oder ändern.</span><span class="sxs-lookup"><span data-stu-id="86301-119">You can use this interface to examine or modify the description types and code compilation performed using a given set of metadata.</span></span>  
  
2.  <span data-ttu-id="86301-120">Implementierung und Verwendung der <xref:System.ServiceModel.Description.IPolicyImportExtension?displayProperty=nameWithType>-Schnittstelle, die die Richtlinienassertionen für Importer verfügbar macht, bevor Beschreibungsobjekte generiert werden.</span><span class="sxs-lookup"><span data-stu-id="86301-120">How to implement and use the <xref:System.ServiceModel.Description.IPolicyImportExtension?displayProperty=nameWithType> interface, which exposes policy assertions to importers prior to the generation of description objects.</span></span> <span data-ttu-id="86301-121">Mit dieser Schnittstelle können Sie die Bindung oder den Vertrag anhand der heruntergeladenen Richtlinien untersuchen oder ändern.</span><span class="sxs-lookup"><span data-stu-id="86301-121">You can use this interface to examine or modify the binding or contract based on the downloaded policies.</span></span>  
  
 <span data-ttu-id="86301-122">Weitere Informationen zum Exportieren von benutzerdefinierten WSDL und Richtlinienassertionen finden Sie unter [Exportieren von benutzerdefinierten Metadaten für eine WCF-Erweiterung](../../../../docs/framework/wcf/extending/exporting-custom-metadata-for-a-wcf-extension.md).</span><span class="sxs-lookup"><span data-stu-id="86301-122">For more information about exporting custom WSDL and policy assertions, see [Exporting Custom Metadata for a WCF Extension](../../../../docs/framework/wcf/extending/exporting-custom-metadata-for-a-wcf-extension.md).</span></span>  
  
## <a name="importing-custom-wsdl-extensions"></a><span data-ttu-id="86301-123">Importieren von benutzerdefinierten WSDL-Erweiterungen</span><span class="sxs-lookup"><span data-stu-id="86301-123">Importing Custom WSDL Extensions</span></span>  
 <span data-ttu-id="86301-124">Implementieren Sie die <xref:System.ServiceModel.Description.IWsdlImportExtension>-Schnittstelle, und fügen Sie diese Implementierung der <xref:System.ServiceModel.Description.WsdlImporter.WsdlImportExtensions%2A>-Eigenschaft hinzu, um eine Unterstützung für das Importieren von WSDL-Erweiterungen hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="86301-124">To add support for importing WSDL extensions, implement the <xref:System.ServiceModel.Description.IWsdlImportExtension> interface and then add your implementation to the <xref:System.ServiceModel.Description.WsdlImporter.WsdlImportExtensions%2A> property.</span></span> <span data-ttu-id="86301-125">Der <xref:System.ServiceModel.Description.WsdlImporter> kann auch Implementierungen der <xref:System.ServiceModel.Description.IWsdlImportExtension>-Schnittstelle laden, die in der Konfigurationsdatei der Anwendung registriert sind.</span><span class="sxs-lookup"><span data-stu-id="86301-125">The <xref:System.ServiceModel.Description.WsdlImporter> can also load implementations of the <xref:System.ServiceModel.Description.IWsdlImportExtension> interface registered in your application configuration file.</span></span> <span data-ttu-id="86301-126">Einige WSDL-Importer sind standardmäßig registriert, und die Reihenfolge der registrierten WSDL-Importer ist von Bedeutung.</span><span class="sxs-lookup"><span data-stu-id="86301-126">Note that a number of WSDL importers are registered by default and the order of the registered WSDL importers is significant.</span></span>  
  
 <span data-ttu-id="86301-127">Wenn ein benutzerdefinierter WSDL-Importer geladen und vom <xref:System.ServiceModel.Description.WsdlImporter> verwendet wird, wird zunächst die <xref:System.ServiceModel.Description.IWsdlImportExtension.BeforeImport%2A>-Methode aufgerufen, um eine Änderung der Metadaten vor dem Import zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="86301-127">When the custom WSDL importer is loaded and used by the <xref:System.ServiceModel.Description.WsdlImporter>, first the <xref:System.ServiceModel.Description.IWsdlImportExtension.BeforeImport%2A> method is called to enable the modification of metadata prior to the import process.</span></span> <span data-ttu-id="86301-128">Anschließend werden die Verträge importiert, und die <xref:System.ServiceModel.Description.IWsdlImportExtension.ImportContract%2A>-Methode wird aufgerufen, um eine Änderung der aus den Metadaten importierten Verträge zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="86301-128">Next, the contracts are imported after which the <xref:System.ServiceModel.Description.IWsdlImportExtension.ImportContract%2A> method is called to enable the modification of the contracts imported from the metadata.</span></span> <span data-ttu-id="86301-129">Abschließend wird die <xref:System.ServiceModel.Description.IWsdlImportExtension.ImportEndpoint%2A>-Methode aufgerufen, um die Änderung der importierten Endpunkte zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="86301-129">Finally, the <xref:System.ServiceModel.Description.IWsdlImportExtension.ImportEndpoint%2A> method is called to enable the modification of the imported endpoints.</span></span>  
  
 <span data-ttu-id="86301-130">Weitere Informationen finden Sie unter [Vorgehensweise: Importieren benutzerdefinierte WSDL](../../../../docs/framework/wcf/extending/how-to-import-custom-wsdl.md).</span><span class="sxs-lookup"><span data-stu-id="86301-130">For more information, see [How to: Import Custom WSDL](../../../../docs/framework/wcf/extending/how-to-import-custom-wsdl.md).</span></span>  
  
### <a name="importing-custom-policy-assertions"></a><span data-ttu-id="86301-131">Importieren von benutzerdefinierten Richtlinienassertionen</span><span class="sxs-lookup"><span data-stu-id="86301-131">Importing Custom Policy Assertions</span></span>  
 <span data-ttu-id="86301-132">Die <xref:System.ServiceModel.Description.WsdlImporter> Typ und die [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) automatisch behandelt eine Vielzahl von Assertion Richtlinientypen in Richtlinienausdrücke, WSDL-Dokumente verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="86301-132">The <xref:System.ServiceModel.Description.WsdlImporter> type and the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) automatically handle processing a variety of policy assertion types in policy expressions attached to WSDL documents.</span></span> <span data-ttu-id="86301-133">Diese Tools erfassen, normalisieren, und führen Richtlinienausdrücke zusammen, die an WSDL-Bindungen und WSDL-Anschlüsse angefügt sind.</span><span class="sxs-lookup"><span data-stu-id="86301-133">These tools collect, normalize, and merge policy expressions attached to WSDL bindings and WSDL ports.</span></span>  
  
 <span data-ttu-id="86301-134">Implementieren Sie die <xref:System.ServiceModel.Description.IPolicyImportExtension>-Schnittstelle, und fügen Sie diese Implementierung der <xref:System.ServiceModel.Description.MetadataImporter.PolicyImportExtensions%2A>-Eigenschaft hinzu, um eine Unterstützung für das Importieren von benutzerdefinierten Richtlinienassertionen hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="86301-134">To add support for importing custom policy assertions, implement the <xref:System.ServiceModel.Description.IPolicyImportExtension> interface and then add your implementation to the <xref:System.ServiceModel.Description.MetadataImporter.PolicyImportExtensions%2A> property.</span></span> <span data-ttu-id="86301-135">Der <xref:System.ServiceModel.Description.MetadataImporter> kann auch Implementierungen der <xref:System.ServiceModel.Description.IPolicyImportExtension>-Schnittstelle laden, die in der Konfigurationsdatei der Anwendung registriert sind.</span><span class="sxs-lookup"><span data-stu-id="86301-135">The <xref:System.ServiceModel.Description.MetadataImporter> can also load implementations of the <xref:System.ServiceModel.Description.IPolicyImportExtension> interface registered in your application configuration file.</span></span> <span data-ttu-id="86301-136">Einige Richtlinienimporter sind standardmäßig registriert, und die Reihenfolge der registrierten Richtlinienimporter ist von Bedeutung.</span><span class="sxs-lookup"><span data-stu-id="86301-136">Note that a number of policy importers are registered by default and the order of the registered policy importers is significant.</span></span>  
  
 <span data-ttu-id="86301-137">Die <xref:System.ServiceModel.Description.IPolicyImportExtension.ImportPolicy%2A?displayProperty=nameWithType>-Methode wird vom Metadatensystem wiederholt für alle registrierten Richtlinienimporterweiterungen aufgerufen. Dies geschieht für alle Kombinationen von Richtlinienalternativen, die an eine Nachricht, einen Vorgang oder an das Richtliniensubjekt eines Endpunkts angefügt sind.</span><span class="sxs-lookup"><span data-stu-id="86301-137">The metadata system repeatedly calls the <xref:System.ServiceModel.Description.IPolicyImportExtension.ImportPolicy%2A?displayProperty=nameWithType> method on all registered policy import extensions for each combination of policy alternatives attached to the message, operation, and endpoint policy subjects.</span></span> <span data-ttu-id="86301-138">Beim Importieren eines WSDL-Anschlusses werden die an den Anschluss angefügten Richtlinien sowie die entsprechenden WSDL-Bindungen vor einem Aufruf in die Richtlinienimporterweiterungen zusammengeführt.</span><span class="sxs-lookup"><span data-stu-id="86301-138">When importing a WSDL port, policies attached to the port and to the corresponding WSDL binding are merged before calling into the policy import extensions.</span></span> <span data-ttu-id="86301-139">Die Richtlinienalternativen werden durch einen <xref:System.ServiceModel.Description.PolicyConversionContext> als <xref:System.ServiceModel.Description.PolicyAssertionCollection>-Objekte verfügbar gemacht.</span><span class="sxs-lookup"><span data-stu-id="86301-139">The policy alternatives are made available through a <xref:System.ServiceModel.Description.PolicyConversionContext> as <xref:System.ServiceModel.Description.PolicyAssertionCollection> objects.</span></span> <span data-ttu-id="86301-140">Jede <xref:System.ServiceModel.Description.PolicyAssertionCollection> ist eine Auflistung von Richtlinienassertionen, die durch <xref:System.Xml.XmlElement>-Objekte dargestellt wird.</span><span class="sxs-lookup"><span data-stu-id="86301-140">Each <xref:System.ServiceModel.Description.PolicyAssertionCollection> is a collection of policy assertions represented by <xref:System.Xml.XmlElement> objects.</span></span>  
  
 <span data-ttu-id="86301-141">Die <xref:System.ServiceModel.Description.PolicyConversionContext.Contract%2A>-Eigenschaft und die <xref:System.ServiceModel.Description.PolicyConversionContext.BindingElements%2A>-Eigenschaft des <xref:System.ServiceModel.Description.PolicyConversionContext>-Objekts machen das <xref:System.ServiceModel.Description.ContractDescription>-Objekt und das <xref:System.ServiceModel.Channels.BindingElement>-Objekt verfügbar, die aus der WSDL importiert wurden.</span><span class="sxs-lookup"><span data-stu-id="86301-141">The <xref:System.ServiceModel.Description.PolicyConversionContext.Contract%2A> and <xref:System.ServiceModel.Description.PolicyConversionContext.BindingElements%2A> properties on the <xref:System.ServiceModel.Description.PolicyConversionContext> object expose the <xref:System.ServiceModel.Description.ContractDescription> and <xref:System.ServiceModel.Channels.BindingElement> objects that were imported from the WSDL.</span></span> <span data-ttu-id="86301-142">Richtlinienassertionen werden von Richtlinienimporterweiterungen verarbeitet, indem Instanzen eines bestimmten Richtlinienassertionstyps gesucht und entsprechende Änderungen am <xref:System.ServiceModel.Description.ContractDescription>-Objekt oder an <xref:System.ServiceModel.Channels.BindingElement>-Objekten vorgenommen und die Richtlinienassertionen anschließend aus der entsprechenden <xref:System.ServiceModel.Description.PolicyAssertionCollection>-Instanz entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="86301-142">Policy import extensions process policy assertions by finding instances of a particular policy assertion type, making corresponding changes to the <xref:System.ServiceModel.Description.ContractDescription> or <xref:System.ServiceModel.Channels.BindingElement> objects and then removing the policy assertions from the corresponding <xref:System.ServiceModel.Description.PolicyAssertionCollection> instance.</span></span>  
  
 <span data-ttu-id="86301-143">Das `wsp:Optional`-Attribut sowie geschachtelte Richtlinienausdrücke werden nicht normalisiert, sodass diese Richtlinienkonstrukte von Richtlinienimporterweiterungen behandelt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="86301-143">The `wsp:Optional` attribute and nested policy expressions are not normalized, so policy import extensions must handle these policy constructs.</span></span> <span data-ttu-id="86301-144">Richtlinienimporterweiterungen können außerdem mehrmals mit dem gleichen <xref:System.ServiceModel.Description.ContractDescription>- und <xref:System.ServiceModel.Channels.BindingElement>-Objekt aufgerufen werden, sodass Richtlinienimporterweiterungen diesem Verhalten gegenüber robust sein sollten.</span><span class="sxs-lookup"><span data-stu-id="86301-144">Also, policy import extensions may be called multiple times with the same <xref:System.ServiceModel.Description.ContractDescription> and <xref:System.ServiceModel.Channels.BindingElement> objects, so policy import extensions should be robust to this behavior.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="86301-145">Ungültige oder fehlerhafte Metadaten können an den Importer übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="86301-145">Invalid or improper metadata can be passed to the importer.</span></span> <span data-ttu-id="86301-146">Stellen Sie sicher, dass benutzerdefinierte Importer gegenüber allen Arten von XML robust sind.</span><span class="sxs-lookup"><span data-stu-id="86301-146">Ensure that custom importers are robust to all forms of XML.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="86301-147">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="86301-147">See Also</span></span>  
 [<span data-ttu-id="86301-148">Vorgehensweise: Importieren von benutzerdefinierter WSDL</span><span class="sxs-lookup"><span data-stu-id="86301-148">How to: Import Custom WSDL</span></span>](../../../../docs/framework/wcf/extending/how-to-import-custom-wsdl.md)  
 [<span data-ttu-id="86301-149">Vorgehensweise: Importieren von benutzerdefinierten Richtlinienassertionen</span><span class="sxs-lookup"><span data-stu-id="86301-149">How to: Import Custom Policy Assertions</span></span>](../../../../docs/framework/wcf/extending/how-to-import-custom-policy-assertions.md)  
 [<span data-ttu-id="86301-150">Vorgehensweise: Schreiben einer Erweiterung für den ServiceContractGenerator</span><span class="sxs-lookup"><span data-stu-id="86301-150">How to: Write an Extension for the ServiceContractGenerator</span></span>](../../../../docs/framework/wcf/extending/how-to-write-an-extension-for-the-servicecontractgenerator.md)
