---
title: Codezugriffssicherheit
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: 93e099eb-daa1-4f1e-b031-c1e10a996f88
ms.openlocfilehash: 6fc54bb9e38768e390201ea77243d3df4cd67f10
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/12/2020
ms.locfileid: "79151740"
---
# <a name="code-access-security-and-adonet"></a><span data-ttu-id="a28ad-102">Codezugriffssicherheit und ADO.NET</span><span class="sxs-lookup"><span data-stu-id="a28ad-102">Code Access Security and ADO.NET</span></span>
<span data-ttu-id="a28ad-103">.NET Framework bietet sowohl rollenbasierte Sicherheit als auch Codezugriffssicherheit (Code Access Security, CAS). Beide werden mit einer von der CLR (Common Language Runtime) bereitgestellten gemeinsamen Infrastruktur implementiert.</span><span class="sxs-lookup"><span data-stu-id="a28ad-103">The .NET Framework offers role-based security as well as code access security (CAS), both of which are implemented using a common infrastructure supplied by the common language runtime (CLR).</span></span> <span data-ttu-id="a28ad-104">In der Welt des nicht verwalteten Codes werden die meisten Anwendungen mit den Berechtigungen des Benutzers oder Prinzipals ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="a28ad-104">In the world of unmanaged code, most applications execute with the permissions of the user or principal.</span></span> <span data-ttu-id="a28ad-105">Daher können Computersysteme beschädigt werden und vertrauliche Daten in die falschen Hände gelangen, wenn ein Benutzer mit erweiterten Rechten schädliche oder fehlerhafte Software ausführt.</span><span class="sxs-lookup"><span data-stu-id="a28ad-105">As a result, computer systems can be damaged and private data compromised when malicious or error-filled software is run by a user with elevated privileges.</span></span>  
  
 <span data-ttu-id="a28ad-106">Im Unterschied dazu ist verwalteter Code, der in .NET Framework ausgeführt wird, durch die Codezugriffssicherheit geschützt.</span><span class="sxs-lookup"><span data-stu-id="a28ad-106">By contrast, managed code executing in the .NET Framework includes code access security, which applies to code alone.</span></span> <span data-ttu-id="a28ad-107">Ob der Code ausgeführt werden darf, hängt vom Ursprung des Codes oder von anderen Aspekten der Identität des Codes und nicht allein von der Identität des Prinzipals ab.</span><span class="sxs-lookup"><span data-stu-id="a28ad-107">Whether the code is allowed to run or not depends on the code's origin or other aspects of the code's identity, not solely the identity of the principal.</span></span> <span data-ttu-id="a28ad-108">Dies verringert die Wahrscheinlichkeit des Missbrauchs von verwaltetem Code.</span><span class="sxs-lookup"><span data-stu-id="a28ad-108">This reduces the likelihood that managed code can be misused.</span></span>  
  
## <a name="code-access-permissions"></a><span data-ttu-id="a28ad-109">Codezugriffsberechtigungen</span><span class="sxs-lookup"><span data-stu-id="a28ad-109">Code Access Permissions</span></span>  
 <span data-ttu-id="a28ad-110">Beim Ausführen von Code wird ein Beweis bereitgestellt, der vom CLR-Sicherheitssystem ausgewertet wird.</span><span class="sxs-lookup"><span data-stu-id="a28ad-110">When code is executed, it presents evidence that is evaluated by the CLR security system.</span></span> <span data-ttu-id="a28ad-111">Dieser Beweis umfasst i. d. R. die Herkunft des Codes, wozu URL, Site, Zone und digitale Signaturen gehören, die die Identität der Assembly gewährleisten.</span><span class="sxs-lookup"><span data-stu-id="a28ad-111">Typically, this evidence comprises the origin of the code including URL, site, and zone, and digital signatures that ensure the identity of the assembly.</span></span>  
  
 <span data-ttu-id="a28ad-112">Die CLR ermöglicht es Code, nur die Vorgänge auszuführen, zu denen er berechtigt ist.</span><span class="sxs-lookup"><span data-stu-id="a28ad-112">The CLR allows code to perform only those operations that the code has permission to perform.</span></span> <span data-ttu-id="a28ad-113">Code kann Berechtigungen anfordern, und diese Berechtigungen werden entsprechend der von einem Administrator festgelegten Sicherheitsrichtlinie gewährt.</span><span class="sxs-lookup"><span data-stu-id="a28ad-113">Code can request permissions, and those requests are honored based on the security policy set by an administrator.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="a28ad-114">Code, der in der CLR ausgeführt wird, kann sich nicht selbst Berechtigungen erteilen.</span><span class="sxs-lookup"><span data-stu-id="a28ad-114">Code executing in the CLR cannot grant permissions to itself.</span></span> <span data-ttu-id="a28ad-115">So kann Code z. B. weniger Berechtigungen anfordern und gewährt bekommen, als in einer Sicherheitsrichtlinie festgelegt sind, mehr als die darin festgelegten Berechtigungen werden aber auf keinen Fall gewährt.</span><span class="sxs-lookup"><span data-stu-id="a28ad-115">For example, code can request and be granted fewer permissions than a security policy allows, but it will never be granted more permissions.</span></span> <span data-ttu-id="a28ad-116">Beim Gewähren von Berechtigungen hat es sich bewährt, zunächst ganz ohne Berechtigungen zu beginnen und immer nur die geringstmöglichen Berechtigungen für die konkrete auszuführende Aufgabe hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="a28ad-116">When granting permissions, start with no permissions at all and then add the narrowest permissions for the particular task being performed.</span></span> <span data-ttu-id="a28ad-117">Wenn man stattdessen zu Beginn alle Berechtigungen gewährt und dann nur einzelne Berechtigungen wieder entzieht, entstehen unsichere Anwendungen, die unbeabsichtigte Sicherheitslücken enthalten können, weil mehr Berechtigungen als notwendig gewährt wurden.</span><span class="sxs-lookup"><span data-stu-id="a28ad-117">Starting with all permissions and then denying individual ones leads to insecure applications that may contain unintentional security holes from granting more permissions than required.</span></span> <span data-ttu-id="a28ad-118">Weitere Informationen finden Sie unter [Konfigurieren von Sicherheitsrichtlinien](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/7c9c2y1w(v=vs.100)) und [Sicherheitsrichtlinienverwaltung](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/c1k0eed6(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="a28ad-118">For more information, see [Configuring Security Policy](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/7c9c2y1w(v=vs.100)) and [Security Policy Management](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/c1k0eed6(v=vs.100)).</span></span>  
  
 <span data-ttu-id="a28ad-119">Es gibt die folgenden drei Arten von Codezugriffsberechtigungen:</span><span class="sxs-lookup"><span data-stu-id="a28ad-119">There are three types of code access permissions:</span></span>  
  
- <span data-ttu-id="a28ad-120">`Code access permissions` leiten sich aus der <xref:System.Security.CodeAccessPermission>-Klasse her.</span><span class="sxs-lookup"><span data-stu-id="a28ad-120">`Code access permissions` derive from the <xref:System.Security.CodeAccessPermission> class.</span></span> <span data-ttu-id="a28ad-121">Die Berechtigungen werden benötigt, um auf geschützte Ressourcen, z. B. Dateien und Umgebungsvariablen, zugreifen und geschützte Vorgänge, z. B. das Zugreifen auf nicht verwalteten Code, ausführen zu können.</span><span class="sxs-lookup"><span data-stu-id="a28ad-121">Permissions are required in order to access protected resources, such as files and environment variables, and to perform protected operations, such as accessing unmanaged code.</span></span>  
  
- <span data-ttu-id="a28ad-122">`Identity permissions` stehen für Eigenschaften, die eine Assembly identifizieren.</span><span class="sxs-lookup"><span data-stu-id="a28ad-122">`Identity permissions` represent characteristics that identify an assembly.</span></span> <span data-ttu-id="a28ad-123">Die Berechtigungen werden einer Assembly nach Vorlage eines Beweises gewährt. Als Beweise gelten z. B. digitale Signaturen oder der Ursprung des Codes.</span><span class="sxs-lookup"><span data-stu-id="a28ad-123">Permissions are granted to an assembly based on evidence, which can include items such as a digital signature or where the code originated.</span></span> <span data-ttu-id="a28ad-124">Identitätsberechtigungen leiten sich auch von der <xref:System.Security.CodeAccessPermission>-Basisklasse her.</span><span class="sxs-lookup"><span data-stu-id="a28ad-124">Identity permissions also derive from the <xref:System.Security.CodeAccessPermission> base class.</span></span>  
  
- <span data-ttu-id="a28ad-125">`Role-based security permissions` basieren darauf, ob ein Prinzipal eine bestimmte Identität besitzt oder Member einer bestimmten Rolle ist.</span><span class="sxs-lookup"><span data-stu-id="a28ad-125">`Role-based security permissions` are based on whether a principal has a specified identity or is a member of a specified role.</span></span> <span data-ttu-id="a28ad-126">Die Klasse <xref:System.Security.Permissions.PrincipalPermission> ermöglicht sowohl deklarative als auch imperative Berechtigungsprüfungen des aktiven Prinzipals.</span><span class="sxs-lookup"><span data-stu-id="a28ad-126">The <xref:System.Security.Permissions.PrincipalPermission> class allows both declarative and imperative permission checks against the active principal.</span></span>  
  
 <span data-ttu-id="a28ad-127">Zur Bestimmung, ob Code auf eine Ressource zugreifen oder einen Vorgang ausführen darf, durchläuft das Laufzeit-Sicherheitssystem die Aufrufliste und vergleicht dabei die gewährten Berechtigungen der einzelnen Aufrufer mit den angeforderten Berechtigungen.</span><span class="sxs-lookup"><span data-stu-id="a28ad-127">To determine whether code is authorized to access a resource or perform an operation, the runtime's security system traverses the call stack, comparing the granted permissions of each caller to the permission being demanded.</span></span> <span data-ttu-id="a28ad-128">Wenn einer der Aufrufer in der Aufrufliste die angeforderte Berechtigung nicht besitzt, wird eine <xref:System.Security.SecurityException> ausgelöst, und der Zugriff wird verweigert.</span><span class="sxs-lookup"><span data-stu-id="a28ad-128">If any caller in the call stack does not have the demanded permission, a <xref:System.Security.SecurityException> is thrown and access is refused.</span></span>  
  
### <a name="requesting-permissions"></a><span data-ttu-id="a28ad-129">Anfordern von Berechtigungen</span><span class="sxs-lookup"><span data-stu-id="a28ad-129">Requesting Permissions</span></span>  
 <span data-ttu-id="a28ad-130">Zweck der Anforderung von Berechtigungen ist es, die Laufzeit darüber zu informieren, welche Berechtigungen Ihre Anwendung zum Ausführen benötigt, und sicherzustellen, dass die Anwendung nur die Berechtigungen erhält, die sie tatsächlich benötigt.</span><span class="sxs-lookup"><span data-stu-id="a28ad-130">The purpose of requesting permissions is to inform the runtime which permissions your application requires in order to run, and to ensure that it receives only the permissions that it actually needs.</span></span> <span data-ttu-id="a28ad-131">Wenn die Anwendung z. B. Daten auf die lokale Festplatte schreiben muss, benötigt sie die <xref:System.Security.Permissions.FileIOPermission>.</span><span class="sxs-lookup"><span data-stu-id="a28ad-131">For example, if your application needs to write data to the local disk, it requires <xref:System.Security.Permissions.FileIOPermission>.</span></span> <span data-ttu-id="a28ad-132">Wenn diese Berechtigung nicht gewährt wurde, schlagen alle Versuche, auf die Festplatte zu schreiben, fehl.</span><span class="sxs-lookup"><span data-stu-id="a28ad-132">If that permission hasn't been granted, the application will fail when it attempts to write to the disk.</span></span> <span data-ttu-id="a28ad-133">Wenn die Anwendung die `FileIOPermission` anfordert und die Berechtigung nicht gewährt wurde, generiert die Anwendung aber von vornherein die Ausnahme und wird nicht geladen.</span><span class="sxs-lookup"><span data-stu-id="a28ad-133">However, if the application requests `FileIOPermission` and that permission has not been granted, the application will generate the exception at the outset and will not load.</span></span>  
  
 <span data-ttu-id="a28ad-134">In einem Szenario, in dem die Anwendung nur Daten vom Datenträger lesen muss, können Sie festlegen, dass der Anwendung niemals Schreibberechtigungen gewährt werden.</span><span class="sxs-lookup"><span data-stu-id="a28ad-134">In a scenario where the application only needs to read data from the disk, you can request that it never be granted any write permissions.</span></span> <span data-ttu-id="a28ad-135">Auf diese Weise kann Ihr Code im Falle eines Fehlers im Programm oder eines bösartigen Angriffs die Daten, mit denen er arbeitet, nicht beschädigen.</span><span class="sxs-lookup"><span data-stu-id="a28ad-135">In the event of a bug or a malicious attack, your code cannot damage the data on which it operates.</span></span> <span data-ttu-id="a28ad-136">Weitere Informationen finden Sie unter [Anfordern von Berechtigungen](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/yd267cce(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="a28ad-136">For more information, see [Requesting Permissions](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/yd267cce(v=vs.100)).</span></span>  
  
## <a name="role-based-security-and-cas"></a><span data-ttu-id="a28ad-137">Rollenbasierte Sicherheit und CAS</span><span class="sxs-lookup"><span data-stu-id="a28ad-137">Role-Based Security and CAS</span></span>  
 <span data-ttu-id="a28ad-138">Durch Implementieren der rollenbasierten Sicherheit und der Codezugriffssicherheit (CAS) lässt sich die Gesamtsicherheit Ihrer Anwendung verbessern.</span><span class="sxs-lookup"><span data-stu-id="a28ad-138">Implementing both role-based security and code-accessed security (CAS) enhances overall security for your application.</span></span> <span data-ttu-id="a28ad-139">Als Grundlage für die rollenbasierte Sicherheit kann ein Windows-Konto oder eine benutzerdefinierte Identität verwendet werden, wodurch die Informationen zum Sicherheitsprinzipal für den aktuellen Thread verfügbar werden.</span><span class="sxs-lookup"><span data-stu-id="a28ad-139">Role-based security can be based on a Windows account or a custom identity, making information about the security principal available to the current thread.</span></span> <span data-ttu-id="a28ad-140">Anwendungen müssen darüber hinaus oft anhand der vom Benutzer bereitgestellten Anmeldeinformationen Daten- oder Ressourcenzugriff gewähren.</span><span class="sxs-lookup"><span data-stu-id="a28ad-140">In addition, applications are often required to provide access to data or resources based on credentials supplied by the user.</span></span> <span data-ttu-id="a28ad-141">In der Regel überprüfen diese Anwendungen zunächst die Rolle des Benutzers und stellen dann auf Grundlage dieser Rolle den Zugriff auf Ressourcen bereit.</span><span class="sxs-lookup"><span data-stu-id="a28ad-141">Typically, such applications check the role of a user and provide access to resources based on those roles.</span></span>  
  
 <span data-ttu-id="a28ad-142">Die rollenbasierte Sicherheit ermöglicht es einer Komponente, zur Laufzeit aktuelle Benutzer und die ihnen zugeordneten Rollen zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="a28ad-142">Role-based security enables a component to identify current users and their associated roles at run time.</span></span> <span data-ttu-id="a28ad-143">Diese Informationen werden dann mithilfe einer CAS-Richtlinie zugeordnet, um die zur Laufzeit gewährten Berechtigungen zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="a28ad-143">This information is then mapped using a CAS policy to determine the set of permissions granted at run time.</span></span> <span data-ttu-id="a28ad-144">Für eine bestimmte Anwendungsdomäne kann der Host die Standardrichtlinie der rollenbasierten Sicherheit ändern und einen Standardsicherheitsprinzipal festlegen, der für einen Benutzer und die mit diesem Benutzer verknüpften Rollen steht.</span><span class="sxs-lookup"><span data-stu-id="a28ad-144">For a specified application domain, the host can change the default role-based security policy and set a default security principal that represents a user and the roles associated with that user.</span></span>  
  
 <span data-ttu-id="a28ad-145">Die CLR verwendet Berechtigungen zum Implementieren ihres Mechanismus zur Durchsetzung von Beschränkungen für verwalteten Code.</span><span class="sxs-lookup"><span data-stu-id="a28ad-145">The CLR uses permissions to implement its mechanism for enforcing restrictions on managed code.</span></span> <span data-ttu-id="a28ad-146">Rollenbasierte Sicherheitsberechtigungen bieten die Möglichkeit aufzudecken, ob ein Benutzer (oder der Agent, der im Auftrag des Benutzers agiert) eine bestimmte Identität besitzt oder Member einer bestimmten Rolle ist.</span><span class="sxs-lookup"><span data-stu-id="a28ad-146">Role-based security permissions provide a mechanism for discovering whether a user (or the agent acting on the user's behalf) has a particular identity or is a member of a specified role.</span></span> <span data-ttu-id="a28ad-147">Weitere Informationen finden Sie unter [Sicherheitsberechtigungen](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/5ba4k1c5(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="a28ad-147">For more information, see [Security Permissions](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/5ba4k1c5(v=vs.100)).</span></span>  
  
 <span data-ttu-id="a28ad-148">Je nach Art der Anwendung, die Sie erstellen, sollten Sie in Erwägung ziehen, rollenbasierte Berechtigungen in der Datenbank zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="a28ad-148">Depending on the type of application you are building, you should also consider implementing role-based permissions in the database.</span></span> <span data-ttu-id="a28ad-149">Weitere Informationen zur rollenbasierten Sicherheit in SQL Server finden Sie unter [SQL Server Security](./sql/sql-server-security.md).</span><span class="sxs-lookup"><span data-stu-id="a28ad-149">For more information on role-based security in SQL Server, see [SQL Server Security](./sql/sql-server-security.md).</span></span>  
  
## <a name="assemblies"></a><span data-ttu-id="a28ad-150">Assemblys</span><span class="sxs-lookup"><span data-stu-id="a28ad-150">Assemblies</span></span>  
 <span data-ttu-id="a28ad-151">Assemblys bilden die Grundlage für die Bereitstellung, die Versionskontrolle, die Wiederverwendung, die Festlegung des Aktivierungsumfangs und die Sicherheitsberechtigungen für eine .NET Framework-Anwendung.</span><span class="sxs-lookup"><span data-stu-id="a28ad-151">Assemblies form the fundamental unit of deployment, version control, reuse, activation scoping, and security permissions for a .NET Framework application.</span></span> <span data-ttu-id="a28ad-152">Eine Assembly stellt eine Sammlung von Typen und Ressourcen bereit, die zusammenarbeiten und eine logische Funktionalitätseinheit bilden.</span><span class="sxs-lookup"><span data-stu-id="a28ad-152">An assembly provides a collection of types and resources that are built to work together and form a logical unit of functionality.</span></span> <span data-ttu-id="a28ad-153">Für die CLR existiert ein Typ niemals außerhalb des Kontexts einer Assembly.</span><span class="sxs-lookup"><span data-stu-id="a28ad-153">To the CLR, a type does not exist outside the context of an assembly.</span></span> <span data-ttu-id="a28ad-154">Weitere Informationen zum Erstellen und Bereitstellen von Assemblys finden Sie unter [Programmieren mit Assemblys](../../../standard/assembly/program.md).</span><span class="sxs-lookup"><span data-stu-id="a28ad-154">For more information on creating and deploying assemblies, see [Programming with Assemblies](../../../standard/assembly/program.md).</span></span>  
  
### <a name="strong-naming-assemblies"></a><span data-ttu-id="a28ad-155">Assemblys mit starkem Namen</span><span class="sxs-lookup"><span data-stu-id="a28ad-155">Strong-naming Assemblies</span></span>  
 <span data-ttu-id="a28ad-156">Ein starker Name (oder eine digitale Signatur) setzt sich aus der Identität der Assembly mit einfachem Textnamen, Versionsnummer und (sofern vorhanden) Kulturinformationen sowie einem öffentlichen Schlüssel und einer digitalen Signatur zusammen.</span><span class="sxs-lookup"><span data-stu-id="a28ad-156">A strong name, or digital signature, consists of the assembly's identity, which includes its simple text name, version number, and culture information (if provided), plus a public key and a digital signature.</span></span> <span data-ttu-id="a28ad-157">Die digitale Signatur wird mit dem entsprechenden privaten Schlüssel aus einer Assemblydatei generiert.</span><span class="sxs-lookup"><span data-stu-id="a28ad-157">The digital signature is generated from an assembly file using the corresponding private key.</span></span> <span data-ttu-id="a28ad-158">Die Assemblydatei enthält das Assemblymanifest, das wiederum die Namen und Hashes aller Dateien enthält, die die Assembly bilden.</span><span class="sxs-lookup"><span data-stu-id="a28ad-158">The assembly file contains the assembly manifest, which contains the names and hashes of all the files that make up the assembly.</span></span>  
  
 <span data-ttu-id="a28ad-159">Wenn eine Assembly mit einem starken Namen versehen wird, erhalten Anwendungen oder Komponenten eine eindeutige Identität, über die andere Software explizit auf die Assembly verweisen können.</span><span class="sxs-lookup"><span data-stu-id="a28ad-159">Strong naming an assembly gives an application or component a unique identity that other software can use to refer explicitly to it.</span></span> <span data-ttu-id="a28ad-160">Ein starker Name schützt Assemblys vor Angriffen durch andere Assemblys, die bösartigen Code enthalten.</span><span class="sxs-lookup"><span data-stu-id="a28ad-160">Strong naming guards assemblies against being spoofed by an assembly that contains hostile code.</span></span> <span data-ttu-id="a28ad-161">Außerdem wird durch starke Namen die Versionskonsistenz zwischen verschiedenen Versionen einer Komponente gewährleistet.</span><span class="sxs-lookup"><span data-stu-id="a28ad-161">Strong-naming also ensures versioning consistency among different versions of a component.</span></span> <span data-ttu-id="a28ad-162">Assemblys, die im globalen Assemblycache (GAC) bereitgestellt werden sollen, müssen einen starken Namen erhalten.</span><span class="sxs-lookup"><span data-stu-id="a28ad-162">You must strong name assemblies that will be deployed to the Global Assembly Cache (GAC).</span></span> <span data-ttu-id="a28ad-163">Weitere Informationen finden Sie unter [Erstellen und Verwenden von Assemblys mit starkem Namen](../../../standard/assembly/create-use-strong-named.md).</span><span class="sxs-lookup"><span data-stu-id="a28ad-163">For more information, see [Creating and Using Strong-Named Assemblies](../../../standard/assembly/create-use-strong-named.md).</span></span>  
  
## <a name="partial-trust-in-adonet-20"></a><span data-ttu-id="a28ad-164">Teilweise Vertrauenswürdigkeit in ADO.NET 2.0</span><span class="sxs-lookup"><span data-stu-id="a28ad-164">Partial Trust in ADO.NET 2.0</span></span>  
 <span data-ttu-id="a28ad-165">In ADO.NET 2.0 können der .NET Framework-Datenanbieter für SQL Server, der .NET Framework-Datenanbieter für OLE DB, der .NET Framework-Datenanbieter für ODBC und der .NET Framework-Datenanbieter für Oracle jetzt alle in teilweise vertrauenswürdigen Umgebungen ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="a28ad-165">In ADO.NET 2.0, the .NET Framework Data Provider for SQL Server, the .NET Framework Data Provider for OLE DB, the .NET Framework Data Provider for ODBC, and the .NET Framework Data Provider for Oracle can now all run in partially trusted environments.</span></span> <span data-ttu-id="a28ad-166">In früheren Releases von .NET Framework wurde nur <xref:System.Data.SqlClient> in nicht vollständig vertrauenswürdigen Umgebungen unterstützt.</span><span class="sxs-lookup"><span data-stu-id="a28ad-166">In previous releases of the .NET Framework, only <xref:System.Data.SqlClient> was supported in less than full-trust applications.</span></span>  
  
 <span data-ttu-id="a28ad-167">Eine teilweise vertrauenswürdige Anwendung, die den Datenanbieter für SQL Server verwendet, muss mindestens die Berechtigung zum Ausführen und die <xref:System.Data.SqlClient.SqlClientPermission>-Berechtigung besitzen.</span><span class="sxs-lookup"><span data-stu-id="a28ad-167">At minimum, a partially trusted application using the SQL Server provider must have execution and <xref:System.Data.SqlClient.SqlClientPermission> permissions.</span></span>  
  
### <a name="permission-attribute-properties-for-partial-trust"></a><span data-ttu-id="a28ad-168">Eigenschaften von Berechtigungsattributen für teilweise Vertrauenswürdigkeit</span><span class="sxs-lookup"><span data-stu-id="a28ad-168">Permission Attribute Properties for Partial Trust</span></span>  
 <span data-ttu-id="a28ad-169">In Szenarien für teilweise Vertrauenswürdigkeit können Sie <xref:System.Data.SqlClient.SqlClientPermissionAttribute>-Member zur weiteren Einschränkung der verfügbaren Funktionen des .NET Framework-Datenanbieters für SQL Server verwenden.</span><span class="sxs-lookup"><span data-stu-id="a28ad-169">For partial trust scenarios, you can use <xref:System.Data.SqlClient.SqlClientPermissionAttribute> members to further restrict the capabilities available for the .NET Framework Data Provider for SQL Server.</span></span>  
  
 <span data-ttu-id="a28ad-170">In der folgenden Tabelle werden die verfügbaren <xref:System.Data.SqlClient.SqlClientPermissionAttribute>-Eigenschaften mit ihren Beschreibungen aufgeführt:</span><span class="sxs-lookup"><span data-stu-id="a28ad-170">The following table lists the available <xref:System.Data.SqlClient.SqlClientPermissionAttribute> properties and their descriptions:</span></span>  
  
|<span data-ttu-id="a28ad-171">Berechtigungsattributeigenschaft</span><span class="sxs-lookup"><span data-stu-id="a28ad-171">Permission attribute property</span></span>|<span data-ttu-id="a28ad-172">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="a28ad-172">Description</span></span>|  
|-----------------------------------|-----------------|  
|`Action`|<span data-ttu-id="a28ad-173">Ruft eine Sicherheitsaktion ab oder legt diese fest.</span><span class="sxs-lookup"><span data-stu-id="a28ad-173">Gets or sets a security action.</span></span> <span data-ttu-id="a28ad-174">Wird von <xref:System.Security.Permissions.SecurityAttribute> geerbt.</span><span class="sxs-lookup"><span data-stu-id="a28ad-174">Inherited from <xref:System.Security.Permissions.SecurityAttribute>.</span></span>|  
|`AllowBlankPassword`|<span data-ttu-id="a28ad-175">Aktiviert oder deaktiviert die Verwendung von leeren Kennwörtern in einer Verbindungszeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="a28ad-175">Enables or disables the use of a blank password in a connection string.</span></span> <span data-ttu-id="a28ad-176">Gültige Werte sind `true` (zum Aktivieren der Verwendung von leeren Kennwörtern) und `false` (zum Deaktivieren der Verwendung von leeren Kennwörtern).</span><span class="sxs-lookup"><span data-stu-id="a28ad-176">Valid values are `true` (to enable the use of blank passwords) and `false` (to disable the use of blank passwords).</span></span> <span data-ttu-id="a28ad-177">Wird von <xref:System.Data.Common.DBDataPermissionAttribute> geerbt.</span><span class="sxs-lookup"><span data-stu-id="a28ad-177">Inherited from <xref:System.Data.Common.DBDataPermissionAttribute>.</span></span>|  
|`ConnectionString`|<span data-ttu-id="a28ad-178">Gibt eine zulässige Verbindungszeichenfolge an.</span><span class="sxs-lookup"><span data-stu-id="a28ad-178">Identifies a permitted connection string.</span></span> <span data-ttu-id="a28ad-179">Es können mehrere Verbindungszeichenfolgen angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="a28ad-179">Multiple connection strings can be identified.</span></span> <span data-ttu-id="a28ad-180">**Hinweis:**  Fügen Sie keine Benutzer-ID oder ein Kennwort in Ihre Verbindungszeichenfolge ein.</span><span class="sxs-lookup"><span data-stu-id="a28ad-180">**Note:**  Do not include a user ID or password in your connection string.</span></span> <span data-ttu-id="a28ad-181">In diesem Release können Einschränken von Verbindungszeichenfolgen nicht mit dem .NET Framework-Konfigurationstool geändert werden.</span><span class="sxs-lookup"><span data-stu-id="a28ad-181">In this release, you cannot change connection string restrictions using the .NET Framework Configuration Tool.</span></span> <br /><br /> <span data-ttu-id="a28ad-182">Wird von <xref:System.Data.Common.DBDataPermissionAttribute> geerbt.</span><span class="sxs-lookup"><span data-stu-id="a28ad-182">Inherited from <xref:System.Data.Common.DBDataPermissionAttribute>.</span></span>|  
|`KeyRestrictions`|<span data-ttu-id="a28ad-183">Gibt zulässige oder unzulässige Parameter für Verbindungszeichenfolgen an.</span><span class="sxs-lookup"><span data-stu-id="a28ad-183">Identifies connection string parameters that are allowed or disallowed.</span></span> <span data-ttu-id="a28ad-184">Verbindungszeichenfolgenparameter werden im \* \<Formularparameternamen>=\* identifiziert.</span><span class="sxs-lookup"><span data-stu-id="a28ad-184">Connection string parameters are identified in the form *\<parameter name>=*.</span></span> <span data-ttu-id="a28ad-185">Es können mehrere durch Semikolon (;) getrennte Parameter angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="a28ad-185">Multiple parameters can be specified, delimited using a semicolon (;).</span></span> <span data-ttu-id="a28ad-186">**Hinweis:**  Wenn Sie nicht `KeyRestrictions`angeben, `KeyRestrictionBehavior` aber `AllowOnly` die `PreventUsage`Eigenschaft auf oder festlegen, sind keine zusätzlichen Verbindungszeichenfolgenparameter zulässig.</span><span class="sxs-lookup"><span data-stu-id="a28ad-186">**Note:**  If you do not specify `KeyRestrictions`, but you set `KeyRestrictionBehavior` property to `AllowOnly` or `PreventUsage`, no additional connection string parameters are allowed.</span></span> <span data-ttu-id="a28ad-187">Wird von <xref:System.Data.Common.DBDataPermissionAttribute> geerbt.</span><span class="sxs-lookup"><span data-stu-id="a28ad-187">Inherited from <xref:System.Data.Common.DBDataPermissionAttribute>.</span></span>|  
|`KeyRestrictionBehavior`|<span data-ttu-id="a28ad-188">Legt die Verbindungszeichenfolgenparameter als die einzigen zulässigen zusätzlichen Parameter fest (`AllowOnly`) oder gibt die nicht zulässigen zusätzlichen Parameter an (`PreventUsage`).</span><span class="sxs-lookup"><span data-stu-id="a28ad-188">Identifies the connection string parameters as the only additional parameters allowed (`AllowOnly`), or identifies the additional parameters that are not allowed (`PreventUsage`).</span></span> <span data-ttu-id="a28ad-189">`AllowOnly` ist die Standardeinstellung.</span><span class="sxs-lookup"><span data-stu-id="a28ad-189">`AllowOnly` is the default.</span></span> <span data-ttu-id="a28ad-190">Wird von <xref:System.Data.Common.DBDataPermissionAttribute> geerbt.</span><span class="sxs-lookup"><span data-stu-id="a28ad-190">Inherited from <xref:System.Data.Common.DBDataPermissionAttribute>.</span></span>|  
|`TypeID`|<span data-ttu-id="a28ad-191">Ruft bei Implementierung in einer abgeleiteten Klasse einen eindeutigen Bezeichner für dieses Attribut ab.</span><span class="sxs-lookup"><span data-stu-id="a28ad-191">Gets a unique identifier for this attribute when implemented in a derived class.</span></span> <span data-ttu-id="a28ad-192">Wird von <xref:System.Attribute> geerbt.</span><span class="sxs-lookup"><span data-stu-id="a28ad-192">Inherited from <xref:System.Attribute>.</span></span>|  
|`Unrestricted`|<span data-ttu-id="a28ad-193">Gibt an, ob für die Ressource uneingeschränkte Berechtigungen deklariert wurden.</span><span class="sxs-lookup"><span data-stu-id="a28ad-193">Indicates whether unrestricted permission to the resource is declared.</span></span> <span data-ttu-id="a28ad-194">Wird von <xref:System.Security.Permissions.SecurityAttribute> geerbt.</span><span class="sxs-lookup"><span data-stu-id="a28ad-194">Inherited from <xref:System.Security.Permissions.SecurityAttribute>.</span></span>|  
  
#### <a name="connectionstring-syntax"></a><span data-ttu-id="a28ad-195">Syntax von "ConnectionString"</span><span class="sxs-lookup"><span data-stu-id="a28ad-195">ConnectionString Syntax</span></span>  
 <span data-ttu-id="a28ad-196">Das folgende Beispiel zeigt, wie mithilfe des Elements `connectionStrings` einer Konfigurationsdatei nur eine bestimmte Verbindungszeichenfolge für die Verwendung zugelassen werden kann.</span><span class="sxs-lookup"><span data-stu-id="a28ad-196">The following example demonstrates how to use the `connectionStrings` element of a configuration file to allow only a specific connection string to be used.</span></span> <span data-ttu-id="a28ad-197">Weitere Informationen zum Speichern und Abrufen von Verbindungszeichenfolgen aus Konfigurationsdateien finden Sie unter [Verbindungszeichenfolgen.](connection-strings.md)</span><span class="sxs-lookup"><span data-stu-id="a28ad-197">See [Connection Strings](connection-strings.md) for more information on storing and retrieving connection strings from configuration files.</span></span>  
  
```xml  
<connectionStrings>  
  <add name="DatabaseConnection"
    connectionString="Data Source=(local);Initial
    Catalog=Northwind;Integrated Security=true;" />  
</connectionStrings>  
```  
  
#### <a name="keyrestrictions-syntax"></a><span data-ttu-id="a28ad-198">Syntax von "KeyRestrictions"</span><span class="sxs-lookup"><span data-stu-id="a28ad-198">KeyRestrictions Syntax</span></span>  
 <span data-ttu-id="a28ad-199">Im folgenden Beispiel wird dieselbe Verbindungszeichenfolge aktiviert, die Verwendung der `Encrypt` und `Packet Size` der Verbindungszeichenfolgenoptionen aktiviert, die Verwendung anderer Verbindungszeichenfolgenoptionen wird jedoch eingeschränkt.</span><span class="sxs-lookup"><span data-stu-id="a28ad-199">The following example enables the same connection string, enables the use of the `Encrypt` and `Packet Size` connection string options, but restricts the use of any other connection string options.</span></span>  
  
```xml  
<connectionStrings>  
  <add name="DatabaseConnection"
    connectionString="Data Source=(local);Initial
    Catalog=Northwind;Integrated Security=true;"  
    KeyRestrictions="Encrypt=;Packet Size=;"  
    KeyRestrictionBehavior="AllowOnly" />  
</connectionStrings>  
```  
  
#### <a name="keyrestrictionbehavior-with-preventusage-syntax"></a><span data-ttu-id="a28ad-200">Syntax von "KeyRestrictionBehavior" mit "PreventUsage"</span><span class="sxs-lookup"><span data-stu-id="a28ad-200">KeyRestrictionBehavior with PreventUsage Syntax</span></span>  
 <span data-ttu-id="a28ad-201">Im folgenden Beispiel wird dieselbe Verbindungszeichenfolge aktiviert, und alle anderen Verbindungsparameter bis auf `User Id`, `Password` und `Persist Security Info` werden zugelassen.</span><span class="sxs-lookup"><span data-stu-id="a28ad-201">The following example enables the same connection string and allows all other connection parameters except for `User Id`, `Password` and `Persist Security Info`.</span></span>  
  
```xml  
<connectionStrings>  
  <add name="DatabaseConnection"
    connectionString="Data Source=(local);Initial
    Catalog=Northwind;Integrated Security=true;"  
    KeyRestrictions="User Id=;Password=;Persist Security Info=;"  
    KeyRestrictionBehavior="PreventUsage" />  
</connectionStrings>  
```  
  
#### <a name="keyrestrictionbehavior-with-allowonly-syntax"></a><span data-ttu-id="a28ad-202">Syntax von "KeyRestrictionBehavior" mit "AllowOnly"</span><span class="sxs-lookup"><span data-stu-id="a28ad-202">KeyRestrictionBehavior with AllowOnly Syntax</span></span>  
 <span data-ttu-id="a28ad-203">Im folgenden Beispiel werden zwei Verbindungszeichenfolgen aktiviert, die außerdem die Parameter `Initial Catalog`, `Connection Timeout`, `Encrypt` und `Packet Size` enthalten.</span><span class="sxs-lookup"><span data-stu-id="a28ad-203">The following example enables two connection strings that also contain `Initial Catalog`, `Connection Timeout`, `Encrypt`, and `Packet Size` parameters.</span></span> <span data-ttu-id="a28ad-204">Alle anderen Parameter für Verbindungszeichenfolgen werden nicht zugelassen.</span><span class="sxs-lookup"><span data-stu-id="a28ad-204">All other connection string parameters are restricted.</span></span>  
  
```xml  
<connectionStrings>  
  <add name="DatabaseConnection"
    connectionString="Data Source=(local);Initial
    Catalog=Northwind;Integrated Security=true;"  
    KeyRestrictions="Initial Catalog;Connection Timeout=;  
       Encrypt=;Packet Size=;"
    KeyRestrictionBehavior="AllowOnly" />  
  
  <add name="DatabaseConnection2"
    connectionString="Data Source=SqlServer2;Initial
    Catalog=Northwind2;Integrated Security=true;"  
    KeyRestrictions="Initial Catalog;Connection Timeout=;  
       Encrypt=;Packet Size=;"
    KeyRestrictionBehavior="AllowOnly" />  
</connectionStrings>  
```  
  
### <a name="enabling-partial-trust-with-a-custom-permission-set"></a><span data-ttu-id="a28ad-205">Aktivieren einer teilweisen Vertrauenswürdigkeit mit einem benutzerdefinierten Berechtigungssatz</span><span class="sxs-lookup"><span data-stu-id="a28ad-205">Enabling Partial Trust with a Custom Permission Set</span></span>  
 <span data-ttu-id="a28ad-206">Um die Verwendung der <xref:System.Data.SqlClient>-Berechtigungen für eine bestimmte Zone zu aktivieren, muss ein Systemadministrator einen benutzerdefinierten Berechtigungssatz für eine bestimmte Zone erstellen.</span><span class="sxs-lookup"><span data-stu-id="a28ad-206">To enable the use of <xref:System.Data.SqlClient> permissions for a particular zone, a system administrator must create a custom permission set and set it as the permission set for a particular zone.</span></span> <span data-ttu-id="a28ad-207">Standardberechtigungssätze wie `LocalIntranet` können nicht geändert werden.</span><span class="sxs-lookup"><span data-stu-id="a28ad-207">Default permission sets, such as `LocalIntranet`, cannot be modified.</span></span> <span data-ttu-id="a28ad-208">Um beispielsweise Berechtigungen <xref:System.Data.SqlClient> für Code mit <xref:System.Security.Policy.Zone> `LocalIntranet`einem von einzuschließen, kann `LocalIntranet`ein Systemadministrator den Berechtigungssatz <xref:System.Data.SqlClient> für kopieren, ihn in "CustomLocalIntranet" umbenennen, die Berechtigungen hinzufügen, den Berechtigungssatz CustomLocalIntranet mithilfe des [Caspol.exe (Code Zugriffssicherheitsrichtlinien-Tools)](../../tools/caspol-exe-code-access-security-policy-tool.md)importieren und den Berechtigungssatz von `LocalIntranet_Zone` auf CustomLocalIntranet festlegen.</span><span class="sxs-lookup"><span data-stu-id="a28ad-208">For example, to include <xref:System.Data.SqlClient> permissions for code that has a <xref:System.Security.Policy.Zone> of `LocalIntranet`, a system administrator could copy the permission set for `LocalIntranet`, rename it to "CustomLocalIntranet", add the <xref:System.Data.SqlClient> permissions, import the CustomLocalIntranet permission set using the [Caspol.exe (Code Access Security Policy Tool)](../../tools/caspol-exe-code-access-security-policy-tool.md), and set the permission set of `LocalIntranet_Zone` to CustomLocalIntranet.</span></span>  
  
### <a name="sample-permission-set"></a><span data-ttu-id="a28ad-209">Beispielberechtigungssatz</span><span class="sxs-lookup"><span data-stu-id="a28ad-209">Sample Permission Set</span></span>  
 <span data-ttu-id="a28ad-210">Im Folgenden finden Sie einen Beispielberechtigungssatz für den .NET Framework-Datenanbieter für SQL Server in einem teilweise vertrauenswürdigen Szenario.</span><span class="sxs-lookup"><span data-stu-id="a28ad-210">The following is a sample permission set for the .NET Framework Data Provider for SQL Server in a partially trusted scenario.</span></span> <span data-ttu-id="a28ad-211">Informationen zum Erstellen benutzerdefinierter Berechtigungssätze finden Sie unter [Konfigurieren von Berechtigungssätzen mit Caspol.exe](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/4ybs46y6(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="a28ad-211">For information on creating custom permission sets, see [Configuring Permission Sets Using Caspol.exe](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/4ybs46y6(v=vs.100)).</span></span>  
  
```xml  
<PermissionSet class="System.Security.NamedPermissionSet"  
  version="1"  
  Name="CustomLocalIntranet"  
  Description="Custom permission set given to applications on  
    the local intranet">  
  
<IPermission class="System.Data.SqlClient.SqlClientPermission, System.Data, Version=2.0.0000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"  
version="1"  
AllowBlankPassword="False">  
<add ConnectionString="Data Source=(local);Integrated Security=true;"  
 KeyRestrictions="Initial Catalog=;Connection Timeout=;  
   Encrypt=;Packet Size=;"
 KeyRestrictionBehavior="AllowOnly" />  
 </IPermission>  
</PermissionSet>  
```  
  
## <a name="verifying-adonet-code-access-using-security-permissions"></a><span data-ttu-id="a28ad-212">Überprüfen des ADO.NET-Codezugriffs mit Sicherheitsberechtigungen</span><span class="sxs-lookup"><span data-stu-id="a28ad-212">Verifying ADO.NET Code Access Using Security Permissions</span></span>  
 <span data-ttu-id="a28ad-213">In teilweise vertrauenswürdigen Szenarien können durch Angabe eines <xref:System.Data.SqlClient.SqlClientPermissionAttribute> für bestimmte Methoden im Code CAS-Berechtigungen verlangt werden.</span><span class="sxs-lookup"><span data-stu-id="a28ad-213">For partial-trust scenarios, you can require CAS privileges for particular methods in your code by specifying a <xref:System.Data.SqlClient.SqlClientPermissionAttribute>.</span></span> <span data-ttu-id="a28ad-214">Wenn diese Berechtigung aufgrund einer eingeschränkten Sicherheitsrichtlinie nicht gewährt wird, wird vor dem Ausführen des Codes eine Ausnahme ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="a28ad-214">If that privilege is not allowed by the restricted security policy in effect, an exception is thrown before your code is run.</span></span> <span data-ttu-id="a28ad-215">Weitere Informationen zu Sicherheitsrichtlinien finden Sie unter Bewährte Methoden für die Verwaltung von [Sicherheitsrichtlinien](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/c1k0eed6(v=vs.100)) und [Sicherheitsrichtlinien](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/sa4se9bc(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="a28ad-215">For more information on security policy, see [Security Policy Management](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/c1k0eed6(v=vs.100)) and [Security Policy Best Practices](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/sa4se9bc(v=vs.100)).</span></span>  
  
### <a name="example"></a><span data-ttu-id="a28ad-216">Beispiel</span><span class="sxs-lookup"><span data-stu-id="a28ad-216">Example</span></span>  
 <span data-ttu-id="a28ad-217">Im folgenden Beispiel wird das Schreiben von Code gezeigt, durch den eine bestimmte Verbindungszeichenfolge verlangt wird.</span><span class="sxs-lookup"><span data-stu-id="a28ad-217">The following example demonstrates how to write code that requires a particular connection string.</span></span> <span data-ttu-id="a28ad-218">Der Code simuliert das Verweigern uneingeschränkter Berechtigungen für <xref:System.Data.SqlClient>. Unter Praxisbedingungen würde dies durch eine CAS-Richtlinie implementiert werden.</span><span class="sxs-lookup"><span data-stu-id="a28ad-218">It simulates denying unrestricted permissions to <xref:System.Data.SqlClient>, which a system administrator would implement using a CAS policy in the real world.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="a28ad-219">Die korrekte Vorgehensweise beim Entwerfen von CAS-Berechtigungen für ADO.NET besteht darin, vom restriktivsten Fall (gar keine Berechtigungen) auszugehen und dann nur die Berechtigungen hinzuzufügen, die für die konkreten auszuführenden Aufgaben erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="a28ad-219">When designing CAS permissions for ADO.NET, the correct pattern is to start with the most restrictive case (no permissions at all) and then add the specific permissions that are needed for the particular task that the code needs to perform.</span></span> <span data-ttu-id="a28ad-220">Die umgekehrte Herangehensweise, also zuerst alle Berechtigungen zu gewähren und dann zu versuchen, eine bestimmte Berechtigung zu verweigern, ist dagegen unsicher, da ein und dieselbe Verbindungszeichenfolge auf verschiedene Art und Weise ausgedrückt werden kann.</span><span class="sxs-lookup"><span data-stu-id="a28ad-220">The opposite pattern, starting with all permissions and then denying a specific permission, is not secure because there are many ways of expressing the same connection string.</span></span> <span data-ttu-id="a28ad-221">Wenn Sie z. B. alle Berechtigungen zulassen und dann die Verwendung der Verbindungszeichenfolge "server=someserver" zu verweigern versuchen, wäre die Zeichenfolge "server=someserver.mycompany.com" nach wie vor zulässig.</span><span class="sxs-lookup"><span data-stu-id="a28ad-221">For example, if you start with all permissions and then attempt to deny the use of the connection string "server=someserver", the string "server=someserver.mycompany.com" would still be allowed.</span></span> <span data-ttu-id="a28ad-222">Wenn Sie hingegen immer ohne jede Berechtigung beginnen, sinkt die Gefahr, dass der Berechtigungssatz Lücken enthält.</span><span class="sxs-lookup"><span data-stu-id="a28ad-222">By always starting by granting no permissions at all, you reduce the chances that there are holes in the permission set.</span></span>  
  
 <span data-ttu-id="a28ad-223">Der folgende Code zeigt, wie `SqlClient` die Sicherheitsanforderung ausführt, die eine <xref:System.Security.SecurityException> auslöst, wenn die entsprechenden CAS-Berechtigungen nicht vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="a28ad-223">The following code demonstrates how `SqlClient` performs the security demand, which throws a <xref:System.Security.SecurityException> if the appropriate CAS permissions are not in place.</span></span> <span data-ttu-id="a28ad-224">Die Ausgabe des <xref:System.Security.SecurityException>-Objekts wird im Konsolenfenster angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a28ad-224">The <xref:System.Security.SecurityException> output is displayed in the console window.</span></span>  
  
 [!code-csharp[DataWorks SqlClient.CAS#1](../../../../samples/snippets/csharp/VS_Snippets_ADO.NET/DataWorks SqlClient.CAS/CS/source.cs#1)]
 [!code-vb[DataWorks SqlClient.CAS#1](../../../../samples/snippets/visualbasic/VS_Snippets_ADO.NET/DataWorks SqlClient.CAS/VB/source.vb#1)]  
  
 <span data-ttu-id="a28ad-225">Im Konsolenfenster müsste nun die folgende Ausgabe angezeigt werden:</span><span class="sxs-lookup"><span data-stu-id="a28ad-225">You should see this output in the Console window:</span></span>  
  
```output  
Failed, as expected: <IPermission class="System.Data.SqlClient.  
SqlClientPermission, System.Data, Version=2.0.0.0,
  Culture=neutral, PublicKeyToken=b77a5c561934e089" version="1"  
  AllowBlankPassword="False">  
<add ConnectionString="Data Source=(local);Initial Catalog=  
  Northwind;Integrated Security=SSPI" KeyRestrictions=""  
KeyRestrictionBehavior="AllowOnly"/>  
</IPermission>  
  
Connection opened, as expected.  
Failed, as expected: Request failed.  
```  
  
## <a name="interoperability-with-unmanaged-code"></a><span data-ttu-id="a28ad-226">Interoperabilität mit nicht verwaltetem Code</span><span class="sxs-lookup"><span data-stu-id="a28ad-226">Interoperability with Unmanaged Code</span></span>  
 <span data-ttu-id="a28ad-227">Code, der außerhalb der CLR ausgeführt wird, wird als nicht verwalteter Code bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="a28ad-227">Code that runs outside the CLR is called unmanaged code.</span></span> <span data-ttu-id="a28ad-228">Deshalb können Sicherheitsmechanismen, z. B. CAS, auf nicht verwalteten Code nicht angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="a28ad-228">Therefore, security mechanisms such as CAS cannot be applied to unmanaged code.</span></span> <span data-ttu-id="a28ad-229">Beispiele für nicht verwalteten Code sind COM-Komponenten, ActiveX-Schnittstellen und Windows API-Funktionen.</span><span class="sxs-lookup"><span data-stu-id="a28ad-229">COM components, ActiveX interfaces, and Windows API functions are examples of unmanaged code.</span></span> <span data-ttu-id="a28ad-230">Damit bei der Ausführung von nicht verwaltetem Code die Gesamtsicherheit der Anwendung nicht gefährdet wird, sind besondere Sicherheitsüberlegungen notwendig.</span><span class="sxs-lookup"><span data-stu-id="a28ad-230">Special security considerations apply when executing unmanaged code so that you do not jeopardize overall application security.</span></span> <span data-ttu-id="a28ad-231">Weitere Informationen finden Sie unter [Interoperation mit nicht verwaltetem Code](../../interop/index.md).</span><span class="sxs-lookup"><span data-stu-id="a28ad-231">For more information, see [Interoperating with Unmanaged Code](../../interop/index.md).</span></span>  
  
 <span data-ttu-id="a28ad-232">.NET Framework unterstützt den Zugriff durch COM-Interop, um die Abwärtskompatibilität zu vorhandenen COM-Komponenten sicherzustellen.</span><span class="sxs-lookup"><span data-stu-id="a28ad-232">The .NET Framework also supports backward compatibility to existing COM components by providing access through COM interop.</span></span> <span data-ttu-id="a28ad-233">Sie können COM-Komponenten in eine .NET Framework-Anwendung einbauen, indem Sie die entsprechenden COM-Typen mit den COM-Interop-Tools importieren.</span><span class="sxs-lookup"><span data-stu-id="a28ad-233">You can incorporate COM components into a .NET Framework application by using COM interop tools to import the relevant COM types.</span></span> <span data-ttu-id="a28ad-234">Nach dem Import sind die COM-Typen einsatzbereit.</span><span class="sxs-lookup"><span data-stu-id="a28ad-234">Once imported, the COM types are ready to use.</span></span> <span data-ttu-id="a28ad-235">COM-Interop ermöglicht es COM-Clients auch, auf verwalteten Code zuzugreifen, indem Assemblymetadaten in eine Typbibliothek exportiert und die verwalteten Komponenten als COM-Komponente registriert werden.</span><span class="sxs-lookup"><span data-stu-id="a28ad-235">COM interop also enables COM clients to access managed code by exporting assembly metadata to a type library and registering the managed component as a COM component.</span></span> <span data-ttu-id="a28ad-236">Weitere Informationen finden Sie unter [Erweiterte COM-Interoperabilität](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bd9cdfyx(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="a28ad-236">For more information, see [Advanced COM Interoperability](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bd9cdfyx(v=vs.100)).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a28ad-237">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="a28ad-237">See also</span></span>

- [<span data-ttu-id="a28ad-238">Sichern von ADO.NET-Anwendungen</span><span class="sxs-lookup"><span data-stu-id="a28ad-238">Securing ADO.NET Applications</span></span>](securing-ado-net-applications.md)
- <span data-ttu-id="a28ad-239">[Sicherheit in systemeigenem Code und .NET Framework-Code](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2010/1787tk12(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="a28ad-239">[Security in Native and .NET Framework Code](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2010/1787tk12(v=vs.100))</span></span>
- [<span data-ttu-id="a28ad-240">Rollenbasierte Sicherheit</span><span class="sxs-lookup"><span data-stu-id="a28ad-240">Role-Based Security</span></span>](../../../standard/security/role-based-security.md)
- [<span data-ttu-id="a28ad-241">Übersicht über ADO.NET</span><span class="sxs-lookup"><span data-stu-id="a28ad-241">ADO.NET Overview</span></span>](ado-net-overview.md)
