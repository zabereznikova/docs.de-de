---
title: Objektmaterialisierung (WCF Data Services)
ms.date: 03/30/2017
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, querying
ms.assetid: f0dbf7b0-0292-4e31-9ae4-b98288336dc1
ms.openlocfilehash: 68b04ac59d1b73d6e66a5a7836ce1bfe30d9c681
ms.sourcegitcommit: f348c84443380a1959294cdf12babcb804cfa987
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/12/2019
ms.locfileid: "73975194"
---
# <a name="object-materialization-wcf-data-services"></a><span data-ttu-id="92936-102">Objektmaterialisierung (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="92936-102">Object Materialization (WCF Data Services)</span></span>

<span data-ttu-id="92936-103">Wenn Sie das Dialogfeld " **Dienstverweis hinzufügen** " verwenden, um einen Open Data Protocol (odata)-Feed in einer .NET Framework basierten Client Anwendung zu nutzen, werden für jeden Entitätstyp im Datenmodell, das vom Feed verfügbar gemacht wird, äquivalente Daten Klassen generiert.</span><span class="sxs-lookup"><span data-stu-id="92936-103">When you use the **Add Service Reference** dialog to consume an Open Data Protocol (OData) feed in a .NET Framework-based client application, equivalent data classes are generated for each entity type in the data model exposed by the feed.</span></span> <span data-ttu-id="92936-104">Weitere Informationen finden Sie unter [Erstellen der Datendienst-Client Bibliothek](generating-the-data-service-client-library-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="92936-104">For more information, see [Generating the Data Service Client Library](generating-the-data-service-client-library-wcf-data-services.md).</span></span> <span data-ttu-id="92936-105">Entitätsdaten, die von einer Abfrage zurückgegeben werden, werden in eine Instanz einer dieser generierten Client-Datendienstklassen materialisiert.</span><span class="sxs-lookup"><span data-stu-id="92936-105">Entity data that is returned by a query is materialized into an instance of one of these generated client data service classes.</span></span> <span data-ttu-id="92936-106">Informationen zu mergeoptionen und zur Identitäts Auflösung für nach verfolgte Objekte finden Sie unter [Verwalten des Datendienst Kontexts](managing-the-data-service-context-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="92936-106">For information about merge options and identity resolution for tracked objects, see [Managing the Data Service Context](managing-the-data-service-context-wcf-data-services.md).</span></span>

<span data-ttu-id="92936-107">Mit [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] können Sie auch eigene Client-Datendienstklassen definieren, anstatt die von Tools generierten Datenklassen zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="92936-107">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] also enables you to define your own client data service classes rather than using the tool-generated data classes.</span></span> <span data-ttu-id="92936-108">Dies ermöglicht es Ihnen, eigene Datenklassen zu verwenden, die auch als POCO (plain-old CLR object)-Datenklassen bezeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="92936-108">This enables you to use your own data classes, also known as "plain-old CLR object" (POCO) data classes.</span></span> <span data-ttu-id="92936-109">Wenn Sie diese Typen von benutzerdefinierten Daten Klassen verwenden, sollten Sie die Datenklasse entweder mit <xref:System.Data.Services.Common.DataServiceKeyAttribute> oder <xref:System.Data.Services.Common.DataServiceEntityAttribute> versehen und sicherstellen, dass die Typnamen für den Client Typnamen im Datenmodell des Daten Dienstanbieter entsprechen.</span><span class="sxs-lookup"><span data-stu-id="92936-109">When using these types of custom data classes, you should attribute the data class with either <xref:System.Data.Services.Common.DataServiceKeyAttribute> or <xref:System.Data.Services.Common.DataServiceEntityAttribute> and ensure that type names on the client match type names in the data model of the data service.</span></span>

<span data-ttu-id="92936-110">Nachdem die Bibliothek die Abfrage Antwortnachricht empfangen hat, materialisiert Sie die zurückgegebenen Daten aus dem odata-Feed in Instanzen von Client Datendienst Klassen, die den Typ der Abfrage haben.</span><span class="sxs-lookup"><span data-stu-id="92936-110">After the library receives the query response message, it materializes the returned data from the OData feed into instances of client data service classes that are of the type of the query.</span></span> <span data-ttu-id="92936-111">Zur Materialisierung dieser Objekte werden die folgenden allgemeinen Schritte ausgeführt:</span><span class="sxs-lookup"><span data-stu-id="92936-111">The general process for materializing these objects is as follows:</span></span>

1. <span data-ttu-id="92936-112">Die Clientbibliothek liest den serialisierten Typ aus dem `entry`-Element im Antwortnachrichtenfeed und versucht, mit einer der folgenden Methoden eine neue Instanz des richtigen Typs zu erstellen:</span><span class="sxs-lookup"><span data-stu-id="92936-112">The client library reads the serialized type from the `entry` element in the response message feed and attempts to create a new instance of the correct type, in one of the following ways:</span></span>

    - <span data-ttu-id="92936-113">Wenn der im Feed deklarierte Typ den gleichen Namen wie den Typ der <xref:System.Data.Services.Client.DataServiceQuery%601>-Abfrage hat, wird mit dem leeren Konstruktor eine neue Instanz dieses Typs erstellt.</span><span class="sxs-lookup"><span data-stu-id="92936-113">When the type declared in the feed has the same name as the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this type is created by using the empty constructor.</span></span>

    - <span data-ttu-id="92936-114">Wenn der im Feed deklarierte Typ den gleichen Namen wie ein Typ hat, der vom Typ vom <xref:System.Data.Services.Client.DataServiceQuery%601> abgeleitet ist, wird mit dem leeren Konstruktor eine neue Instanz dieses abgeleiteten Typs erstellt.</span><span class="sxs-lookup"><span data-stu-id="92936-114">When the type declared in the feed has the same name as a type that is derived from the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this derived type is created by using the empty constructor.</span></span>

    - <span data-ttu-id="92936-115">Wenn der im Feed deklarierte Typ nicht dem Typ der <xref:System.Data.Services.Client.DataServiceQuery%601>-Abfrage oder einem abgeleiteten Typen entspricht, wird mit dem leeren Konstruktor eine neue Instanz des abgefragten Typs erstellt.</span><span class="sxs-lookup"><span data-stu-id="92936-115">When the type declared in the feed cannot be matched to the type of the <xref:System.Data.Services.Client.DataServiceQuery%601> or any derived types, a new instance of the queried type is created by using the empty constructor.</span></span>

    - <span data-ttu-id="92936-116">Wenn die <xref:System.Data.Services.Client.DataServiceContext.ResolveType%2A>-Eigenschaft festgelegt wird, wird der angegebene Delegat aufgerufen, um die namensbasierte Standardtypzuordnung zu überschreiben, und stattdessen wird eine neue Instanz des Typs erstellt, die von <xref:System.Func%602> zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="92936-116">When the <xref:System.Data.Services.Client.DataServiceContext.ResolveType%2A> property is set, the supplied delegate is called to override the default name-based type mapping and a new instance of the type returned by the <xref:System.Func%602> is created instead.</span></span> <span data-ttu-id="92936-117">Wenn dieser Delegat einen NULL-Wert zurückgibt, wird stattdessen eine neue Instanz des abgefragten Typs erstellt.</span><span class="sxs-lookup"><span data-stu-id="92936-117">If this delegate returns a null value, a new instance of the queried type is created instead.</span></span> <span data-ttu-id="92936-118">Es ist möglicherweise erforderlich, die namensbasierte Standardtypnamenzuordnung zu überschreiben, um Vererbungsszenarien zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="92936-118">It may be required to override the default name-based type name mapping to support inheritance scenarios.</span></span>

2. <span data-ttu-id="92936-119">Die Clientbibliothek liest den URI-Wert aus dem `id`-Element des `entry`Elements, das der Identitätswert der Entität darstellt.</span><span class="sxs-lookup"><span data-stu-id="92936-119">The client library reads the URI value from the `id` element of the `entry`, which is the identity value of the entity.</span></span> <span data-ttu-id="92936-120">Sofern nicht der <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A>-Wert <xref:System.Data.Services.Client.MergeOption.NoTracking> verwendet wird, wird der Identitätswert verwendet, um das Objekt im <xref:System.Data.Services.Client.DataServiceContext>-Kontext zu verfolgen.</span><span class="sxs-lookup"><span data-stu-id="92936-120">Unless a <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> value of <xref:System.Data.Services.Client.MergeOption.NoTracking> is used, the identity value is used to track the object in the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="92936-121">Der Identitätswert wird auch verwendet, um zu garantieren, dass selbst dann nur eine einzelne Entitätsinstanz erstellt wird, wenn eine Entität mehrmals in der Abfrageantwort zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="92936-121">The identity value is also used to guarantee that only a single entity instance is created, even when an entity is returned multiple times in the query response.</span></span>

3. <span data-ttu-id="92936-122">Die Clientbibliothek liest Eigenschaften vom Feedeintrag und legt die entsprechenden Eigenschaften auf dem neu erstellten Objekt fest.</span><span class="sxs-lookup"><span data-stu-id="92936-122">The client library reads properties from the feed entry and set the corresponding properties on the newly created object.</span></span> <span data-ttu-id="92936-123">Wenn ein Objekt über den gleichen Identitätswert verfügt wie ein bereits im <xref:System.Data.Services.Client.DataServiceContext>-Kontext vorhandenes Objekt, dann werden die Eigenschaften  auf der Grundlage der <xref:System.Data.Services.Client.MergeOption>-Einstellung des <xref:System.Data.Services.Client.DataServiceContext>-Kontexts festgelegt.</span><span class="sxs-lookup"><span data-stu-id="92936-123">When an object that has the same identity value already occurs in the <xref:System.Data.Services.Client.DataServiceContext>, the properties are set based on the <xref:System.Data.Services.Client.MergeOption> setting of the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="92936-124">Die Antwort kann Eigenschaftswerte enthalten, für die keine entsprechende Eigenschaft im Clienttyp vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="92936-124">The response might contain property values for which a corresponding property does not occur in the client type.</span></span> <span data-ttu-id="92936-125">Wenn dieser Fall eintritt, hängt die Aktion vom Wert der <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A>-Eigenschaft des <xref:System.Data.Services.Client.DataServiceContext>-Kontexts ab.</span><span class="sxs-lookup"><span data-stu-id="92936-125">When this occurs, the action depends on the value of the <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> property of the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="92936-126">Wenn diese Eigenschaft auf `true` festgelegt wurde, wird die fehlende Eigenschaft ignoriert.</span><span class="sxs-lookup"><span data-stu-id="92936-126">When this property is set to `true`, the missing property is ignored.</span></span> <span data-ttu-id="92936-127">Andernfalls wird ein Fehler ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="92936-127">Otherwise, an error is raised.</span></span> <span data-ttu-id="92936-128">Eigenschaften werden wie folgt festgelegt:</span><span class="sxs-lookup"><span data-stu-id="92936-128">Properties are set as follows:</span></span>

    - <span data-ttu-id="92936-129">Skalare Eigenschaften werden auf den entsprechenden Wert im Eintrag in der Antwortnachricht festgelegt.</span><span class="sxs-lookup"><span data-stu-id="92936-129">Scalar properties are set to the corresponding value in the entry in the response message.</span></span>

    - <span data-ttu-id="92936-130">Komplexe Eigenschaften werden auf eine neue komplexe Typinstanz festgelegt, die mit den Eigenschaften des komplexen Typs von der Antwort festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="92936-130">Complex properties are set to a new complex type instance, which are set with the properties of the complex type from the response.</span></span>

    - <span data-ttu-id="92936-131">Navigationseigenschaften, die eine Sammlung von verknüpften Entitäten zurückgeben, werden auf eine neue oder vorhandene Instanz von <xref:System.Collections.Generic.ICollection%601> festgelegt, wobei `T` der Typ der verknüpften Entität ist.</span><span class="sxs-lookup"><span data-stu-id="92936-131">Navigation properties that return a collection of related entities are set to a new or existing instance of <xref:System.Collections.Generic.ICollection%601>, where `T` is the type of the related entity.</span></span> <span data-ttu-id="92936-132">Diese Sammlung ist leer, sofern die verknüpften Objekte nicht in den <xref:System.Data.Services.Client.DataServiceContext>-Kontext geladen wurden.</span><span class="sxs-lookup"><span data-stu-id="92936-132">This collection is empty unless the related objects have been loaded into the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="92936-133">Weitere Informationen finden Sie unter [Laden von verzögertem Inhalt](loading-deferred-content-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="92936-133">For more information, see [Loading Deferred Content](loading-deferred-content-wcf-data-services.md).</span></span>

      > [!NOTE]
      > <span data-ttu-id="92936-134">Wenn die generierten Clientdatenklassen die Datenbindung unterstützen, geben Navigationseigenschaften stattdessen Instanzen der <xref:System.Data.Services.Client.DataServiceCollection%601>-Klasse zurück.</span><span class="sxs-lookup"><span data-stu-id="92936-134">When the generated client data classes support data binding, navigation properties return instances of the <xref:System.Data.Services.Client.DataServiceCollection%601> class instead.</span></span> <span data-ttu-id="92936-135">Weitere Informationen finden Sie unter [Binden von Daten an Steuerelemente](binding-data-to-controls-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="92936-135">For more information, see [Binding Data to Controls](binding-data-to-controls-wcf-data-services.md).</span></span>

4. <span data-ttu-id="92936-136">Das <xref:System.Data.Services.Client.DataServiceContext.ReadingEntity>-Ereignis wird ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="92936-136">The <xref:System.Data.Services.Client.DataServiceContext.ReadingEntity> event is raised.</span></span>

5. <span data-ttu-id="92936-137">Die Clientbibliothek fügt das Objekt an den <xref:System.Data.Services.Client.DataServiceContext>-Kontext an.</span><span class="sxs-lookup"><span data-stu-id="92936-137">The client library attaches the object to the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="92936-138">Das Objekt wird nicht angefügt, wenn <xref:System.Data.Services.Client.MergeOption> auf <xref:System.Data.Services.Client.MergeOption.NoTracking> festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="92936-138">The object is not attached when the <xref:System.Data.Services.Client.MergeOption> is <xref:System.Data.Services.Client.MergeOption.NoTracking>.</span></span>

## <a name="see-also"></a><span data-ttu-id="92936-139">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="92936-139">See also</span></span>

- [<span data-ttu-id="92936-140">Abfragen des Datendiensts</span><span class="sxs-lookup"><span data-stu-id="92936-140">Querying the Data Service</span></span>](querying-the-data-service-wcf-data-services.md)
- [<span data-ttu-id="92936-141">Abfrageprojektionen</span><span class="sxs-lookup"><span data-stu-id="92936-141">Query Projections</span></span>](query-projections-wcf-data-services.md)
