---
title: Abfragen des Datendiensts (WCF Data Services)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, querying
- WCF Data Services, accessing data
ms.assetid: 823e9444-27aa-4f1f-be8e-0486d67f54c0
ms.openlocfilehash: e37a1654bdc62937bbb27c293a110293c9928645
ms.sourcegitcommit: f348c84443380a1959294cdf12babcb804cfa987
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/12/2019
ms.locfileid: "73975164"
---
# <a name="querying-the-data-service-wcf-data-services"></a><span data-ttu-id="bf5cc-102">Abfragen des Datendiensts (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="bf5cc-102">Querying the Data Service (WCF Data Services)</span></span>

<span data-ttu-id="bf5cc-103">Die [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]-Clientbibliothek ermöglicht es Ihnen, mit vertrauten .NET Framework-Programmierungsmustern Abfragen für einen Datendienst auszuführen und hierbei auch LINQ (Language Integrated Query) zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-103">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library enables you to execute queries against a data service by using familiar .NET Framework programming patterns, including using language integrated query (LINQ).</span></span> <span data-ttu-id="bf5cc-104">Die Clientbibliothek übersetzt eine Abfrage, die auf dem Client als Instanz der <xref:System.Data.Services.Client.DataServiceQuery%601>-Klasse definiert wird, in eine HTTP GET-Anforderungsnachricht.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-104">The client library translates a query, which is defined on the client as an instance of the <xref:System.Data.Services.Client.DataServiceQuery%601> class, into an HTTP GET request message.</span></span> <span data-ttu-id="bf5cc-105">Die Bibliothek empfängt die Antwortnachricht und übersetzt Sie in Instanzen von Client Datendienst Klassen.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-105">The library receives the response message and translates it into instances of client data service classes.</span></span> <span data-ttu-id="bf5cc-106">Diese Klassen werden vom <xref:System.Data.Services.Client.DataServiceContext> verfolgt, zu dem <xref:System.Data.Services.Client.DataServiceQuery%601> gehört.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-106">These classes are tracked by the <xref:System.Data.Services.Client.DataServiceContext> to which the <xref:System.Data.Services.Client.DataServiceQuery%601> belongs.</span></span>

## <a name="data-service-queries"></a><span data-ttu-id="bf5cc-107">Datendienstabfragen</span><span class="sxs-lookup"><span data-stu-id="bf5cc-107">Data Service Queries</span></span>

<span data-ttu-id="bf5cc-108">Die generische Klasse <xref:System.Data.Services.Client.DataServiceQuery%601> stellt eine Abfrage dar, die eine Auflistung von null oder mehr Entitätstypinstanzen zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-108">The <xref:System.Data.Services.Client.DataServiceQuery%601> generic class represents a query that returns a collection of zero or more entity type instances.</span></span> <span data-ttu-id="bf5cc-109">Eine Datendienstabfrage ist immer einem vorhandenen Datendienstkontext zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-109">A data service query always belongs to an existing data service context.</span></span> <span data-ttu-id="bf5cc-110">Dieser Kontext verwaltet den Dienst-URI und die Metadateninformationen, die zum Erstellen und Ausführen der Abfrage erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-110">This context maintains the service URI and metadata information that is required to compose and execute the query.</span></span>

<span data-ttu-id="bf5cc-111">Wenn Sie das Dialogfeld " **Dienstverweis hinzufügen** " verwenden, um einer .NET Framework basierten Client Anwendung einen Datendienst hinzuzufügen, wird eine Entitäts Container Klasse erstellt, die von der <xref:System.Data.Services.Client.DataServiceContext>-Klasse erbt.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-111">When you use the **Add Service Reference** dialog to add a data service to a .NET Framework-based client application, an entity container class is created that inherits from the <xref:System.Data.Services.Client.DataServiceContext> class.</span></span> <span data-ttu-id="bf5cc-112">Diese Klasse enthält Eigenschaften, die typisierte <xref:System.Data.Services.Client.DataServiceQuery%601>-Instanzen zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-112">This class includes properties that return typed <xref:System.Data.Services.Client.DataServiceQuery%601> instances.</span></span> <span data-ttu-id="bf5cc-113">Es ist eine Eigenschaft für jede Entitätenmenge vorhanden, die der Datendienst verfügbar macht.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-113">There is one property for each entity set that the data service exposes.</span></span> <span data-ttu-id="bf5cc-114">Diese Eigenschaften erleichtern es, eine Instanz eines typisierten <xref:System.Data.Services.Client.DataServiceQuery%601>-Objekts zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-114">These properties make it easier to create an instance of a typed <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span>

<span data-ttu-id="bf5cc-115">In den folgenden Szenarien wird eine Abfrage ausgeführt:</span><span class="sxs-lookup"><span data-stu-id="bf5cc-115">A query is executed in the following scenarios:</span></span>

- <span data-ttu-id="bf5cc-116">Wenn Ergebnisse implizit aufgezählt werden, z. B.:</span><span class="sxs-lookup"><span data-stu-id="bf5cc-116">When results are enumerated implicitly, such as:</span></span>

  - <span data-ttu-id="bf5cc-117">Wenn eine Eigenschaft für den <xref:System.Data.Services.Client.DataServiceContext>-Kontext, der eine Entitätenmenge darstellt, aufgezählt wird, z. B. in einer `foreach`-Schleife (C#) oder `For Each`-Schleife (Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="bf5cc-117">When a property on the <xref:System.Data.Services.Client.DataServiceContext> that represents and entity set is enumerated, such as during a `foreach` (C#) or `For Each` (Visual Basic) loop.</span></span>

  - <span data-ttu-id="bf5cc-118">Wenn die Abfrage einer `List`-Auflistung zugewiesen wird.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-118">When the query is assigned to a `List` collection.</span></span>

- <span data-ttu-id="bf5cc-119">Wenn die <xref:System.Data.Services.Client.DataServiceQuery%601.Execute%2A>-Methode oder die <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A>-Methode explizit aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-119">When the <xref:System.Data.Services.Client.DataServiceQuery%601.Execute%2A> or <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A> method is explicitly called.</span></span>

- <span data-ttu-id="bf5cc-120">Wenn ein LINQ-Abfrageausführungsoperator wie <xref:System.Linq.Enumerable.First%2A> oder <xref:System.Linq.Enumerable.Single%2A> aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-120">When a LINQ query execution operator, such as <xref:System.Linq.Enumerable.First%2A> or <xref:System.Linq.Enumerable.Single%2A> is called.</span></span>

<span data-ttu-id="bf5cc-121">Wenn die folgende Abfrage ausgeführt wird, gibt sie alle `Customers`-Entitäten im Northwind-Datendienst zurück:</span><span class="sxs-lookup"><span data-stu-id="bf5cc-121">The following query, when it is executed, returns all `Customers` entities in the Northwind data service:</span></span>

[!code-csharp[Astoria Northwind Client#GetAllCustomersSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#getallcustomersspecific)]
[!code-vb[Astoria Northwind Client#GetAllCustomersSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#getallcustomersspecific)]

<span data-ttu-id="bf5cc-122">Weitere Informationen finden Sie unter Gewusst [wie: Ausführen von Datendienst Abfragen](how-to-execute-data-service-queries-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="bf5cc-122">For more information, see [How to: Execute Data Service Queries](how-to-execute-data-service-queries-wcf-data-services.md).</span></span>

<span data-ttu-id="bf5cc-123">Der [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] Client unterstützt Abfragen für spät gebundene Objekte, z. b. bei Verwendung des *dynamischen* Typs C#in.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-123">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client supports queries for late-bound objects, such as when you use the *dynamic* type in C#.</span></span> <span data-ttu-id="bf5cc-124">Aus Leistungsgründen sollten für den Datendienst jedoch immer stark typisierte Abfragen verfasst werden.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-124">However, for performance reasons you should always compose strongly-typed queries against the data service.</span></span> <span data-ttu-id="bf5cc-125">Der <xref:System.Tuple>-Typ und dynamische Objekte werden nicht vom Client unterstützt.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-125">The <xref:System.Tuple> type and dynamic objects are not supported by the client.</span></span>

## <a name="linq-queries"></a><span data-ttu-id="bf5cc-126">LINQ-Abfragen</span><span class="sxs-lookup"><span data-stu-id="bf5cc-126">LINQ Queries</span></span>

<span data-ttu-id="bf5cc-127">Da die <xref:System.Data.Services.Client.DataServiceQuery%601>-Klasse die von LINQ definierte <xref:System.Linq.IQueryable%601> Schnittstelle implementiert, kann die [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]-Client Bibliothek LINQ-Abfragen für entitätenmengendaten in einen URI transformieren, der einen für eine Datendienst Ressource ausgewerteten Abfrage Ausdruck darstellt.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-127">Because the <xref:System.Data.Services.Client.DataServiceQuery%601> class implements the <xref:System.Linq.IQueryable%601> interface defined by LINQ, the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library is able to transform LINQ queries against entity set data into a URI that represents a query expression evaluated against a data service resource.</span></span> <span data-ttu-id="bf5cc-128">Das folgende Beispiel ist eine LINQ-Abfrage, die der vorherigen <xref:System.Data.Services.Client.DataServiceQuery%601>-Abfrage entspricht, die `Orders` mit Frachtkosten von mehr als $30 zurückgibt und die Ergebnisse nach den Frachtkosten sortiert:</span><span class="sxs-lookup"><span data-stu-id="bf5cc-128">The following example is a LINQ query that is equivalent to the previous <xref:System.Data.Services.Client.DataServiceQuery%601> that returns `Orders` that have a freight cost of more than $30 and orders the results by the freight cost:</span></span>

[!code-csharp[Astoria Northwind Client#AddQueryOptionsLinqSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addqueryoptionslinqspecific)]
[!code-vb[Astoria Northwind Client#AddQueryOptionsLinqSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addqueryoptionslinqspecific)]

<span data-ttu-id="bf5cc-129">Diese LINQ-Abfrage wird in den folgenden Abfrage-URI übersetzt, der für den auf Northwind basierenden [Schnellstart](quickstart-wcf-data-services.md) -Datendienst ausgeführt wird:</span><span class="sxs-lookup"><span data-stu-id="bf5cc-129">This LINQ query is translated into the following query URI that is executed against the Northwind-based [quickstart](quickstart-wcf-data-services.md) data service:</span></span>

```http
http://localhost:12345/Northwind.svc/Orders?Orderby=ShippedDate&?filter=Freight gt 30
```

> [!NOTE]
> <span data-ttu-id="bf5cc-130">Die Gruppe von Abfragen, die in der LINQ-Syntax ausgedrückt werden kann, ist umfangreicher als bei der von Datendiensten verwendeten REST-basierten (Representational State Transfer) URI-Syntax.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-130">The set of queries expressible in the LINQ syntax is broader than those enabled in the representational state transfer (REST)-based URI syntax that is used by data services.</span></span> <span data-ttu-id="bf5cc-131">Wenn die Abfrage keinem URI im Zieldatendienst zugeordnet werden kann, wird eine Ausnahme vom Typ <xref:System.NotSupportedException> ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-131">A <xref:System.NotSupportedException> is raised when the query cannot be mapped to a URI in the target data service.</span></span>

<span data-ttu-id="bf5cc-132">Weitere Informationen finden Sie unter [LINQ-Überlegungen](linq-considerations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="bf5cc-132">For more information, see [LINQ Considerations](linq-considerations-wcf-data-services.md).</span></span>

## <a name="adding-query-options"></a><span data-ttu-id="bf5cc-133">Hinzufügen von Abfrageoptionen</span><span class="sxs-lookup"><span data-stu-id="bf5cc-133">Adding Query Options</span></span>

<span data-ttu-id="bf5cc-134">Datendienstabfragen unterstützen alle Abfrageoptionen, die in [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-134">Data service queries support all the query options that [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]s provides.</span></span> <span data-ttu-id="bf5cc-135">Sie rufen die <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A>-Methode auf, um einer <xref:System.Data.Services.Client.DataServiceQuery%601>-Instanz Abfrageoptionen hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-135">You call the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method to append query options to a <xref:System.Data.Services.Client.DataServiceQuery%601> instance.</span></span> <span data-ttu-id="bf5cc-136"><xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> gibt eine neue <xref:System.Data.Services.Client.DataServiceQuery%601>-Instanz zurück, die der ursprünglichen Abfrage entspricht, aber die neuen Abfrageoptionen enthält.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-136"><xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> returns a new <xref:System.Data.Services.Client.DataServiceQuery%601> instance that is equivalent to the original query but with the new query option set.</span></span> <span data-ttu-id="bf5cc-137">Wenn die folgende Abfrage ausgeführt wird, gibt sie `Orders`-Objekte zurück, die nach dem `Freight`-Wert gefiltert und in absteigender Reihenfolge nach dem Wert von `OrderID` sortiert werden:</span><span class="sxs-lookup"><span data-stu-id="bf5cc-137">The following query, when executed, returns `Orders` that are filtered by the `Freight` value and ordered by the `OrderID`, descending:</span></span>

[!code-csharp[Astoria Northwind Client#AddQueryOptionsSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addqueryoptionsspecific)]
[!code-vb[Astoria Northwind Client#AddQueryOptionsSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addqueryoptionsspecific)]

<span data-ttu-id="bf5cc-138">Sie können die `$orderby`-Abfrageoption verwenden, um eine Abfrage auf der Grundlage einer einzelnen Eigenschaft sowohl zu sortieren als auch zu filtern, wie im folgenden Beispiel, in dem die zurückgegebenen `Orders`-Objekte anhand des Werts der `Freight`-Eigenschaft gefiltert und sortiert werden:</span><span class="sxs-lookup"><span data-stu-id="bf5cc-138">You can use the `$orderby` query option to both order and filter a query based on a single property, as in the following example that filters and orders the returned `Orders` objects based on the value of the `Freight` property:</span></span>

[!code-csharp[Astoria Northwind Client#OrderWithFilter](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#orderwithfilter)]
[!code-vb[Astoria Northwind Client#OrderWithFilter](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#orderwithfilter)]

<span data-ttu-id="bf5cc-139">Sie können die <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A>-Methode aufrufen, um nacheinander komplexe Abfrageausdrücke zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-139">You can call the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method consecutively to construct complex query expressions.</span></span> <span data-ttu-id="bf5cc-140">Weitere Informationen finden Sie unter Gewusst [wie: Hinzufügen von Abfrage Optionen zu einer Datendienst Abfrage](how-to-add-query-options-to-a-data-service-query-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="bf5cc-140">For more information, see [How to: Add Query Options to a Data Service Query](how-to-add-query-options-to-a-data-service-query-wcf-data-services.md).</span></span>

<span data-ttu-id="bf5cc-141">Abfrageoptionen sind eine weitere Möglichkeit, die syntaktischen Komponenten einer LINQ-Abfrage auszudrücken.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-141">Query options give you another way to express the syntactic components of a LINQ query.</span></span> <span data-ttu-id="bf5cc-142">Weitere Informationen finden Sie unter [LINQ-Überlegungen](linq-considerations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="bf5cc-142">For more information, see [LINQ Considerations](linq-considerations-wcf-data-services.md).</span></span>

> [!NOTE]
> <span data-ttu-id="bf5cc-143">Die `$select`-Abfrageoption kann einem Abfrage-URI nicht mit der <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A>-Methode hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-143">The `$select` query option cannot be added to a query URI by using the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method.</span></span> <span data-ttu-id="bf5cc-144">Es wird empfohlen, die <xref:System.Linq.Enumerable.Select%2A>-LINQ-Methode zu verwenden, damit der Client die `$select`-Abfrageoption im Anforderungs-URI generiert.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-144">We recommend that you use the LINQ <xref:System.Linq.Enumerable.Select%2A> method to have the client generate the `$select` query option in the request URI.</span></span>

<a name="executingQueries"></a>

## <a name="client-versus-server-execution"></a><span data-ttu-id="bf5cc-145">Clientausführung und Serverausführung</span><span class="sxs-lookup"><span data-stu-id="bf5cc-145">Client versus Server Execution</span></span>

<span data-ttu-id="bf5cc-146">Der Client führt eine Abfrage in zwei Teilen aus.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-146">The client executes a query in two parts.</span></span> <span data-ttu-id="bf5cc-147">Nach Möglichkeit werden Ausdrücke in einer Abfrage zuerst auf dem Client ausgewertet, und anschließend wird eine URI-basierte Abfrage generiert und zur Auswertung anhand der Daten im Dienst an den Datendienst gesendet.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-147">Whenever possible, expressions in a query are first evaluated on the client, and then a URI-based query is generated and sent to the data service for evaluation against data in the service.</span></span> <span data-ttu-id="bf5cc-148">Betrachten Sie die folgende LINQ-Abfrage:</span><span class="sxs-lookup"><span data-stu-id="bf5cc-148">Consider the following LINQ query:</span></span>

[!code-csharp[Astoria Northwind Client#LinqQueryClientEvalSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqqueryclientevalspecific)]
[!code-vb[Astoria Northwind Client#LinqQueryClientEvalSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqqueryclientevalspecific)]

<span data-ttu-id="bf5cc-149">In diesem Beispiel wird der Ausdruck `(basePrice – (basePrice * discount))` auf dem Client ausgewertet.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-149">In this example, the expression `(basePrice – (basePrice * discount))` is evaluated on the client.</span></span> <span data-ttu-id="bf5cc-150">Der tatsächliche Abfrage-URI `http://localhost:12345/northwind.svc/Products()?$filter=(UnitPrice gt 90.00M) and substringof('bike',ProductName)`, der an den Datendienst gesendet wird, enthält daher den bereits berechneten Dezimalwert `90` in der Filterklausel.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-150">Because of this, the actual query URI `http://localhost:12345/northwind.svc/Products()?$filter=(UnitPrice gt 90.00M) and substringof('bike',ProductName)` that is sent to the data service contains the already calculated decimal value of `90` in the filter clause.</span></span> <span data-ttu-id="bf5cc-151">Die anderen Teile des Filterausdrucks, einschließlich des untergeordneten Zeichenfolgenausdrucks, werden vom Datendienst ausgewertet.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-151">The other parts of the filtering expression, including the substring expression, are evaluated by the data service.</span></span> <span data-ttu-id="bf5cc-152">Ausdrücke, die auf dem Client ausgewertet werden, folgen Common Language Runtime (CLR)-Semantik, während Ausdrücke, die an den Datendienst gesendet werden, von der Datendienst Implementierung des odata-Protokolls abhängig sind.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-152">Expressions that are evaluated on the client follow common language runtime (CLR) semantics, while expressions sent to the data service rely on the data service implementation of the OData Protocol.</span></span> <span data-ttu-id="bf5cc-153">Diese getrennte Auswertung kann in bestimmten Szenarien zu unerwarteten Ergebnissen führen, z. B. wenn sowohl der Client als auch der Dienst zeitbasierte Auswertungen in unterschiedlichen Zeitzonen ausführen.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-153">You should also be aware of scenarios where this separate evaluation may cause unexpected results, such as when both the client and service perform time-based evaluations in different time zones.</span></span>

## <a name="query-responses"></a><span data-ttu-id="bf5cc-154">Abfrageantworten</span><span class="sxs-lookup"><span data-stu-id="bf5cc-154">Query Responses</span></span>

<span data-ttu-id="bf5cc-155">Wenn die Abfrage <xref:System.Data.Services.Client.DataServiceQuery%601> ausgeführt wird, gibt sie eine <xref:System.Collections.Generic.IEnumerable%601> vom angeforderten Entitätstyp zurück.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-155">When executed, the <xref:System.Data.Services.Client.DataServiceQuery%601> returns an <xref:System.Collections.Generic.IEnumerable%601> of the requested entity type.</span></span> <span data-ttu-id="bf5cc-156">Dieses Abfrageergebnis kann, wie im folgenden Beispiel, in ein <xref:System.Data.Services.Client.QueryOperationResponse%601>-Objekt umgewandelt werden:</span><span class="sxs-lookup"><span data-stu-id="bf5cc-156">This query result can be cast to a <xref:System.Data.Services.Client.QueryOperationResponse%601> object, as in the following example:</span></span>

[!code-csharp[Astoria Northwind Client#GetResponseSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#getresponsespecific)]
[!code-vb[Astoria Northwind Client#GetResponseSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#getresponsespecific)]

<span data-ttu-id="bf5cc-157">Die Entitätstypinstanzen, die Entitäten im Datendienst darstellen, werden von einem Prozess mit dem Namen Objektmaterialisierung auf dem Client erstellt.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-157">The entity type instances that represent entities in the data service are created on the client by a process called object materialization.</span></span> <span data-ttu-id="bf5cc-158">Weitere Informationen finden Sie unter [Objektmaterialisierung](object-materialization-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="bf5cc-158">For more information, see [Object Materialization](object-materialization-wcf-data-services.md).</span></span> <span data-ttu-id="bf5cc-159">Das <xref:System.Data.Services.Client.QueryOperationResponse%601>-Objekt implementiert <xref:System.Collections.Generic.IEnumerable%601>, um Zugriff auf die Ergebnisse der Abfrage zu bieten.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-159">The <xref:System.Data.Services.Client.QueryOperationResponse%601> object implements <xref:System.Collections.Generic.IEnumerable%601> to provide access to the results of the query.</span></span>

<span data-ttu-id="bf5cc-160">Der <xref:System.Data.Services.Client.QueryOperationResponse%601> verfügt auch über die folgenden Member, die es Ihnen ermöglichen, auf weitere Informationen zu einem Abfrageergebnis zuzugreifen:</span><span class="sxs-lookup"><span data-stu-id="bf5cc-160">The <xref:System.Data.Services.Client.QueryOperationResponse%601> also has the following members that enable you to access additional information about a query result:</span></span>

- <span data-ttu-id="bf5cc-161"><xref:System.Data.Services.Client.OperationResponse.Error%2A>- ruft einen vom Vorgang ausgelösten Fehler ab, sofern ein Fehler aufgetreten sind.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-161"><xref:System.Data.Services.Client.OperationResponse.Error%2A> - gets an error thrown by the operation, if any has occurred.</span></span>

- <span data-ttu-id="bf5cc-162"><xref:System.Data.Services.Client.OperationResponse.Headers%2A>- enthält die Sammlung der mit der Abfrageantwort verbundenen HTTP-Antwortheader.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-162"><xref:System.Data.Services.Client.OperationResponse.Headers%2A> - contains the collection of HTTP response headers associated with the query response.</span></span>

- <span data-ttu-id="bf5cc-163"><xref:System.Data.Services.Client.QueryOperationResponse.Query%2A> - ruft die ursprüngliche <xref:System.Data.Services.Client.DataServiceQuery%601>-Abfrage ab, welche die <xref:System.Data.Services.Client.QueryOperationResponse%601>-Antwort erzeugte.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-163"><xref:System.Data.Services.Client.QueryOperationResponse.Query%2A> - gets the original <xref:System.Data.Services.Client.DataServiceQuery%601> that generated the <xref:System.Data.Services.Client.QueryOperationResponse%601>.</span></span>

- <span data-ttu-id="bf5cc-164"><xref:System.Data.Services.Client.OperationResponse.StatusCode%2A> - ruft den HTTP-Antwortcode für die Abfrageantwort ab.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-164"><xref:System.Data.Services.Client.OperationResponse.StatusCode%2A> - gets the HTTP response code for the query response.</span></span>

- <span data-ttu-id="bf5cc-165"><xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A>- ruft die Gesamtzahl der Entitäten ab, die in der Entitätenmenge enthalten war, wenn die <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A>-Methode für <xref:System.Data.Services.Client.DataServiceQuery%601> aufgerufen wurde.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-165"><xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> - gets the total number of entities in the entity set when the <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> method was called on the <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span>

- <span data-ttu-id="bf5cc-166"><xref:System.Data.Services.Client.QueryOperationResponse.GetContinuation%2A>- gibt ein <xref:System.Data.Services.Client.DataServiceQueryContinuation>-Objekt zurück, das den URI der nächsten Seite mit Ergebnissen enthält.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-166"><xref:System.Data.Services.Client.QueryOperationResponse.GetContinuation%2A> - returns a <xref:System.Data.Services.Client.DataServiceQueryContinuation> object that contains the URI of the next page of results.</span></span>

<span data-ttu-id="bf5cc-167">Standardmäßig gibt [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] nur Daten zurück, die explizit durch den Abfrage-URI ausgewählt werden.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-167">By default, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] only returns data that is explicitly selected by the query URI.</span></span> <span data-ttu-id="bf5cc-168">Dies gibt Ihnen die Möglichkeit, bei Bedarf weitere Daten explizit vom Datendienst zu laden.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-168">This gives you the option to explicitly load additional data from the data service when it is needed.</span></span> <span data-ttu-id="bf5cc-169">Jedes Mal, wenn Daten explizit aus dem Datendienst geladen werden, wird eine Anforderung an den Datendienst gesendet.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-169">A request is sent to the data service each time you explicitly load data from the data service.</span></span> <span data-ttu-id="bf5cc-170">Zu den Daten, die explizit geladen werden können, gehören verknüpfte Entitäten, ausgelagerte Antwortdaten und Binärdatenströme.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-170">Data that can be explicitly loaded includes related entities, paged response data, and binary data streams.</span></span>

> [!NOTE]
> <span data-ttu-id="bf5cc-171">Da ein Datendienst möglicherweise eine ausgelagerte Antwort zurückgibt, empfiehlt es sich, dass die Anwendung das Programmiermuster zur Behandlung ausgelagerter Datendienstantworten verwendet.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-171">Because a data service may return a paged response, we recommend that your application use the programming pattern to handle a paged data service response.</span></span> <span data-ttu-id="bf5cc-172">Weitere Informationen finden Sie unter [Laden von verzögertem Inhalt](loading-deferred-content-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="bf5cc-172">For more information, see [Loading Deferred Content](loading-deferred-content-wcf-data-services.md).</span></span>

<span data-ttu-id="bf5cc-173">Die von einer Abfrage zurückgegebene Datenmenge kann auch durch die Angabe reduziert werden, dass nur bestimmte Eigenschaften einer Entität in der Antwort zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-173">The amount of data returned by a query can also be reduced by specifying that only certain properties of an entity are returned in the response.</span></span> <span data-ttu-id="bf5cc-174">Weitere Informationen finden Sie unter [Abfrage Projektionen](query-projections-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="bf5cc-174">For more information, see [Query Projections](query-projections-wcf-data-services.md).</span></span>

## <a name="getting-a-count-of-the-total-number-of-entities-in-the-set"></a><span data-ttu-id="bf5cc-175">Abrufen der Gesamtanzahl der in der Menge enthaltenen Entitäten</span><span class="sxs-lookup"><span data-stu-id="bf5cc-175">Getting a Count of the Total Number of Entities in the Set</span></span>

<span data-ttu-id="bf5cc-176">In einigen Szenarien ist es hilfreich zu wissen, wie viele Entitäten in einer Entitätenmenge insgesamt enthalten sind, statt nur die von der Abfrage zurückgegebene Anzahl zu kennen.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-176">In some scenarios, it is helpful to know the total number of entities in an entity set and not merely the number returned by the query.</span></span> <span data-ttu-id="bf5cc-177">Rufen Sie die <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A>-Methode für <xref:System.Data.Services.Client.DataServiceQuery%601> auf, um anzufordern, dass die Gesamtanzahl von Entitäten dieser Entitätenmenge in das Abfrageergebnis aufgenommen wird.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-177">Call the <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> method on the <xref:System.Data.Services.Client.DataServiceQuery%601> to request that this total count of entities in the set be included with the query result.</span></span> <span data-ttu-id="bf5cc-178">In diesem Fall gibt die <xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A>-Eigenschaft der zurückgegebenen <xref:System.Data.Services.Client.QueryOperationResponse%601>-Instanz die Gesamtzahl der in der Menge enthaltenen Entitäten zurück.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-178">In this case, the <xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> property of the returned <xref:System.Data.Services.Client.QueryOperationResponse%601> returns the total number of entities in the set.</span></span>

<span data-ttu-id="bf5cc-179">Sie können auch nur die Gesamtanzahl der Entitäten in der Menge als <xref:System.Int32>-Wert oder <xref:System.Int64>-Wert abrufen, indem Sie <xref:System.Linq.Enumerable.Count%2A>-Methode bzw. die <xref:System.Linq.Enumerable.LongCount%2A>-Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-179">You can also get only the total count of entities in the set either as an <xref:System.Int32> or as a <xref:System.Int64> value by calling the <xref:System.Linq.Enumerable.Count%2A> or <xref:System.Linq.Enumerable.LongCount%2A> methods respectively.</span></span> <span data-ttu-id="bf5cc-180">Wenn diese Methoden aufgerufen werden, wird kein <xref:System.Data.Services.Client.QueryOperationResponse%601>-Objekt zurückgegeben. Es wird nur die Anzahl zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-180">When these methods are called, a <xref:System.Data.Services.Client.QueryOperationResponse%601> is not returned; only the count value is returned.</span></span> <span data-ttu-id="bf5cc-181">Weitere Informationen finden Sie unter Gewusst [wie: Bestimmen der Anzahl von Entitäten, die von einer Abfrage zurückgegeben](number-of-entities-returned-by-a-query-wcf.md)werden.</span><span class="sxs-lookup"><span data-stu-id="bf5cc-181">For more information, see [How to: Determine the Number of Entities Returned by a Query](number-of-entities-returned-by-a-query-wcf.md).</span></span>

## <a name="in-this-section"></a><span data-ttu-id="bf5cc-182">In diesem Abschnitt</span><span class="sxs-lookup"><span data-stu-id="bf5cc-182">In This Section</span></span>

- [<span data-ttu-id="bf5cc-183">Abfrageprojektionen</span><span class="sxs-lookup"><span data-stu-id="bf5cc-183">Query Projections</span></span>](query-projections-wcf-data-services.md)

- [<span data-ttu-id="bf5cc-184">Objektmaterialisierung</span><span class="sxs-lookup"><span data-stu-id="bf5cc-184">Object Materialization</span></span>](object-materialization-wcf-data-services.md)

- [<span data-ttu-id="bf5cc-185">Überlegungen zu LINQ</span><span class="sxs-lookup"><span data-stu-id="bf5cc-185">LINQ Considerations</span></span>](linq-considerations-wcf-data-services.md)

- [<span data-ttu-id="bf5cc-186">Vorgehensweise: Ausführen von Datendienstabfragen</span><span class="sxs-lookup"><span data-stu-id="bf5cc-186">How to: Execute Data Service Queries</span></span>](how-to-execute-data-service-queries-wcf-data-services.md)

- [<span data-ttu-id="bf5cc-187">Vorgehensweise: Hinzufügen von Abfrageoptionen zu einer Datendienstabfrage</span><span class="sxs-lookup"><span data-stu-id="bf5cc-187">How to: Add Query Options to a Data Service Query</span></span>](how-to-add-query-options-to-a-data-service-query-wcf-data-services.md)

- [<span data-ttu-id="bf5cc-188">Vorgehensweise: Bestimmen der Anzahl von Entitäten, die von einer Abfrage zurückgegeben werden</span><span class="sxs-lookup"><span data-stu-id="bf5cc-188">How to: Determine the Number of Entities Returned by a Query</span></span>](number-of-entities-returned-by-a-query-wcf.md)

- [<span data-ttu-id="bf5cc-189">Vorgehensweise: Angeben von Clientanmeldeinformationen für eine Datendienstanforderung</span><span class="sxs-lookup"><span data-stu-id="bf5cc-189">How to: Specify Client Credentials for a Data Service Request</span></span>](specify-client-creds-for-a-data-service-request-wcf.md)

- [<span data-ttu-id="bf5cc-190">Vorgehensweise: Festlegen von Headern in der Clientanforderung</span><span class="sxs-lookup"><span data-stu-id="bf5cc-190">How to: Set Headers in the Client Request</span></span>](how-to-set-headers-in-the-client-request-wcf-data-services.md)

- [<span data-ttu-id="bf5cc-191">Vorgehensweise: Projizieren von Abfrageergebnissen</span><span class="sxs-lookup"><span data-stu-id="bf5cc-191">How to: Project Query Results</span></span>](how-to-project-query-results-wcf-data-services.md)

## <a name="see-also"></a><span data-ttu-id="bf5cc-192">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="bf5cc-192">See also</span></span>

- [<span data-ttu-id="bf5cc-193">WCF Data Services-Clientbibliothek</span><span class="sxs-lookup"><span data-stu-id="bf5cc-193">WCF Data Services Client Library</span></span>](wcf-data-services-client-library.md)
