---
title: ICorProfilerInfo3::RequestProfilerDetach-Methode
ms.date: 03/30/2017
api_name:
- ICorProfilerInfo3.RequestProfilerDetach Method
api_location:
- mscorwks.dll
api_type:
- COM
f1_keywords:
- ICorProfilerInfo3::RequestProfilerDetach
helpviewer_keywords:
- RequestProfilerDetach method [.NET Framework profiling]
- ICorProfilerInfo3::RequestProfilerDetach method [.NET Framework profiling]
ms.assetid: ea102e62-0454-4477-bcf3-126773acd184
topic_type:
- apiref
ms.openlocfilehash: 2ea39c94a5a0f3d24d4123d6405115ac75105e26
ms.sourcegitcommit: d8020797a6657d0fbbdff362b80300815f682f94
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/24/2020
ms.locfileid: "95721581"
---
# <a name="icorprofilerinfo3requestprofilerdetach-method"></a><span data-ttu-id="5aa0d-102">ICorProfilerInfo3::RequestProfilerDetach-Methode</span><span class="sxs-lookup"><span data-stu-id="5aa0d-102">ICorProfilerInfo3::RequestProfilerDetach Method</span></span>

<span data-ttu-id="5aa0d-103">Weist das Laufzeitmodul an, den Profiler zu trennen.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-103">Instructs the runtime to detach the profiler.</span></span>  
  
## <a name="syntax"></a><span data-ttu-id="5aa0d-104">Syntax</span><span class="sxs-lookup"><span data-stu-id="5aa0d-104">Syntax</span></span>  
  
```cpp  
HRESULT RequestProfilerDetach(  
   [in] DWORD    dwExpectedCompletionMilliseconds);  
```  
  
## <a name="parameters"></a><span data-ttu-id="5aa0d-105">Parameter</span><span class="sxs-lookup"><span data-stu-id="5aa0d-105">Parameters</span></span>  

 `dwExpectedCompletionMilliseconds`  
 <span data-ttu-id="5aa0d-106">[in] Die Zeitspanne in Millisekunden, die die Common Language Runtime (CLR) warten soll, bevor geprüft wird, ob es sicher ist, den Profiler zu entladen.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-106">[in] The length of time, in milliseconds, the common language runtime (CLR) should wait before checking to see whether it is safe to unload the profiler.</span></span>  
  
## <a name="return-value"></a><span data-ttu-id="5aa0d-107">Rückgabewert</span><span class="sxs-lookup"><span data-stu-id="5aa0d-107">Return Value</span></span>  

 <span data-ttu-id="5aa0d-108">Diese Methode gibt die folgenden spezifischen HRESULTs sowie HRESULT-Fehler zurück, die Methodenfehler anzeigen.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-108">This method returns the following specific HRESULTs as well as HRESULT errors that indicate method failure.</span></span>  
  
|<span data-ttu-id="5aa0d-109">HRESULT</span><span class="sxs-lookup"><span data-stu-id="5aa0d-109">HRESULT</span></span>|<span data-ttu-id="5aa0d-110">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="5aa0d-110">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="5aa0d-111">S_OK</span><span class="sxs-lookup"><span data-stu-id="5aa0d-111">S_OK</span></span>|<span data-ttu-id="5aa0d-112">Die Trennungsanforderung ist gültig, und die Trennprozedur wird jetzt für einen anderen Thread fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-112">The detach request is valid, and the detach procedure is now continuing on another thread.</span></span> <span data-ttu-id="5aa0d-113">Wenn die Trennung vollständig abgeschlossen ist, wird ein `ProfilerDetachSucceeded`-Ereignis ausgegeben.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-113">When the detach is fully complete, a `ProfilerDetachSucceeded` event is issued.</span></span>|  
|<span data-ttu-id="5aa0d-114">E_CORPROF_E_CALLBACK3_REQUIRED</span><span class="sxs-lookup"><span data-stu-id="5aa0d-114">E_CORPROF_E_CALLBACK3_REQUIRED</span></span>|<span data-ttu-id="5aa0d-115">Der Profiler konnte einen [IUnknown:: QueryInterface](/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)) -Versuch für die [ICorProfilerCallback3](icorprofilercallback3-interface.md) -Schnittstelle nicht ausführen, die er implementieren muss, um den Trennvorgang zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-115">The profiler failed an [IUnknown::QueryInterface](/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)) attempt for the [ICorProfilerCallback3](icorprofilercallback3-interface.md) interface, which it must implement to support the detach operation.</span></span> <span data-ttu-id="5aa0d-116">Die Trennung wurde nicht ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-116">Detach was not attempted.</span></span>|  
|<span data-ttu-id="5aa0d-117">CORPROF_E_IMMUTABLE_FLAGS_SET</span><span class="sxs-lookup"><span data-stu-id="5aa0d-117">CORPROF_E_IMMUTABLE_FLAGS_SET</span></span>|<span data-ttu-id="5aa0d-118">Die Trennung ist nicht möglich, da vom Profiler beim Start unveränderliche Flags festgelegt wurden.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-118">Detachment is impossible because the profiler set immutable flags at startup.</span></span> <span data-ttu-id="5aa0d-119">Die Trennung wurde nicht ausgeführt. Der Profiler ist noch vollständig angefügt.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-119">Detachment was not attempted; the profiler is still fully attached.</span></span>|  
|<span data-ttu-id="5aa0d-120">CORPROF_E_IRREVERSIBLE_INSTRUMENTATION_PRESENT</span><span class="sxs-lookup"><span data-stu-id="5aa0d-120">CORPROF_E_IRREVERSIBLE_INSTRUMENTATION_PRESENT</span></span>|<span data-ttu-id="5aa0d-121">Die Trennung ist nicht möglich, da der Profiler instrumentierten MSIL-Code (Microsoft Intermediate Language) oder eingefügte Hooks verwendet hat `enter` / `leave` .</span><span class="sxs-lookup"><span data-stu-id="5aa0d-121">Detachment is impossible because the profiler used instrumented Microsoft intermediate language (MSIL) code, or inserted `enter`/`leave` hooks.</span></span> <span data-ttu-id="5aa0d-122">Die Trennung wurde nicht ausgeführt. Der Profiler ist noch vollständig angefügt.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-122">Detachment was not attempted; the profiler is still fully attached.</span></span><br /><br /> <span data-ttu-id="5aa0d-123">**Hinweis** Instrumentiertes MSIL ist der Code, der vom Profiler mit der [SetILFunctionBody](icorprofilerinfo-setilfunctionbody-method.md) -Methode bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-123">**Note** Instrumented MSIL is code is code that is provided by the profiler using the [SetILFunctionBody](icorprofilerinfo-setilfunctionbody-method.md) method.</span></span>|  
|<span data-ttu-id="5aa0d-124">CORPROF_E_RUNTIME_UNINITIALIZED</span><span class="sxs-lookup"><span data-stu-id="5aa0d-124">CORPROF_E_RUNTIME_UNINITIALIZED</span></span>|<span data-ttu-id="5aa0d-125">Die Common Language Runtime wurde in der verwalteten Anwendung noch nicht initialisiert.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-125">The runtime has not been initialized yet in the managed application.</span></span> <span data-ttu-id="5aa0d-126">(Das heißt, die Laufzeit wurde nicht vollständig geladen.) Dieser Fehlercode kann zurückgegeben werden, wenn die Trennung innerhalb der [ICorProfilerCallback:: Initialize](icorprofilercallback-initialize-method.md) -Methode des Profiler-Rückrufs angefordert wird.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-126">(That is, the runtime has not been fully loaded.) This error code may be returned when detachment is requested inside the profiler callback's [ICorProfilerCallback::Initialize](icorprofilercallback-initialize-method.md) method.</span></span>|  
|<span data-ttu-id="5aa0d-127">CORPROF_E_UNSUPPORTED_CALL_SEQUENCE</span><span class="sxs-lookup"><span data-stu-id="5aa0d-127">CORPROF_E_UNSUPPORTED_CALL_SEQUENCE</span></span>|<span data-ttu-id="5aa0d-128">`RequestProfilerDetach` wurde zu einem nicht unterstützten Zeitpunkt aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-128">`RequestProfilerDetach` was called at an unsupported time.</span></span> <span data-ttu-id="5aa0d-129">Dies tritt auf, wenn die Methode für einen verwalteten Thread aufgerufen wird, nicht jedoch innerhalb einer [ICorProfilerCallback](icorprofilercallback-interface.md) -Methode oder innerhalb einer [ICorProfilerCallback](icorprofilercallback-interface.md) -Methode, die eine Garbage Collection nicht tolerieren kann.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-129">This occurs if the method is called on a managed thread but not from within an [ICorProfilerCallback](icorprofilercallback-interface.md) method or from within an [ICorProfilerCallback](icorprofilercallback-interface.md) method that cannot tolerate a garbage collection.</span></span> <span data-ttu-id="5aa0d-130">Weitere Informationen finden Sie unter [CORPROF_E_UNSUPPORTED_CALL_SEQUENCE HRESULT](corprof-e-unsupported-call-sequence-hresult.md).</span><span class="sxs-lookup"><span data-stu-id="5aa0d-130">For more information, see [CORPROF_E_UNSUPPORTED_CALL_SEQUENCE HRESULT](corprof-e-unsupported-call-sequence-hresult.md).</span></span>|  
  
## <a name="remarks"></a><span data-ttu-id="5aa0d-131">Hinweise</span><span class="sxs-lookup"><span data-stu-id="5aa0d-131">Remarks</span></span>  

 <span data-ttu-id="5aa0d-132">Während der Trennprozedur prüft der Trennthread (der speziell zum Trennen des Profilers erstellte Thread) gelegentlich, ob alle Threads den Code des Profilers verlassen haben.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-132">During the detach procedure, the detach thread (the thread created specifically for detaching the profiler) occasionally checks whether all threads have exited the profiler’s code.</span></span> <span data-ttu-id="5aa0d-133">Der Profiler sollte über den `dwExpectedCompletionMilliseconds`-Parameter eine Schätzung zur Dauer dieses Vorgangs bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-133">The profiler should provide an estimate of how long this should take through the `dwExpectedCompletionMilliseconds` parameter.</span></span> <span data-ttu-id="5aa0d-134">Ein geeigneter Wert ist die typische Zeitspanne, die der Profiler innerhalb einer angegebenen `ICorProfilerCallback*`-Methode benötigt. Dieser Wert sollte nicht kleiner als die Hälfte der maximalen Zeitspanne sein, die der Profiler für die Durchführung erwartet.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-134">A good value to use is the typical amount of time the profiler spends inside any given `ICorProfilerCallback*` method; this value should not be less than half of the maximum amount of time the profiler expects to spend.</span></span>  
  
 <span data-ttu-id="5aa0d-135">Der Trennthread verwendet `dwExpectedCompletionMilliseconds`, um zu entscheiden, wie lange er deaktiviert bleibt, bevor die Prüfung erfolgt, ob der Rückrufcode des Profilers von allen Stapeln geholt wurde.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-135">The detach thread uses `dwExpectedCompletionMilliseconds` to decide how long to sleep before checking whether profiler callback code has been popped off all stacks.</span></span> <span data-ttu-id="5aa0d-136">Obwohl die Details des folgenden Algorithmus in zukünftigen Releases der Common Language Runtime (CLR) möglicherweise geändert werden, veranschaulichen sie eine Möglichkeit, wie `dwExpectedCompletionMilliseconds` zur Ermittlung des sicheren Zeitpunkts für das Entladen des Profilers verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-136">Although the details of the following algorithm may change in future releases of the CLR, it illustrates one way `dwExpectedCompletionMilliseconds` can be used when determining when it is safe to unload the profiler.</span></span> <span data-ttu-id="5aa0d-137">Der Trennthread ist zunächst für `dwExpectedCompletionMilliseconds`-Millisekunden deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-137">The detach thread first sleeps for `dwExpectedCompletionMilliseconds` milliseconds.</span></span> <span data-ttu-id="5aa0d-138">Wenn die CLR nach dem wiederholen im Standbymodus feststellt, dass der Profiler-Rückruf Code weiterhin vorhanden ist, wird der Trenn Thread wieder in den Ruhezustand versetzt, dieses Mal für zweifache `dwExpectedCompletionMilliseconds` Millisekunden.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-138">If, after awakening from the sleep, the CLR finds that profiler callback code is still present, the detach thread sleeps again, this time for two times `dwExpectedCompletionMilliseconds` milliseconds.</span></span> <span data-ttu-id="5aa0d-139">Wenn der Trennthread nach der Aktivierung aus dem zweiten Ruhezustand ermittelt, dass der Profilerrückrufcode weiterhin vorhanden ist, wird der Trennthread für 10 Minuten deaktiviert, bevor eine erneute Prüfung erfolgt.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-139">If, after awakening from this second sleep, the detach thread finds that profiler callback code is still present, it sleeps for 10 minutes before checking again.</span></span> <span data-ttu-id="5aa0d-140">Der Trennthread für die Prüfung alle 10 Minuten erneut aus.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-140">The detach thread continues to recheck every 10 minutes.</span></span>  
  
 <span data-ttu-id="5aa0d-141">Wenn der Profiler für `dwExpectedCompletionMilliseconds` den Wert 0 (null) angibt, verwendet die CLR den Standardwert 5000, d. h. sie führt eine Prüfung nach fünf Sekunden aus, während eine erneute Prüfung nach weiteren 10 Sekunden und anschließend alle 10 Minuten ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="5aa0d-141">If the profiler specifies `dwExpectedCompletionMilliseconds` as 0 (zero), the CLR uses a default value of 5000, which means that it will perform a check after 5 seconds, again after 10 seconds, and then every 10 minutes thereafter.</span></span>  
  
## <a name="requirements"></a><span data-ttu-id="5aa0d-142">Requirements (Anforderungen)</span><span class="sxs-lookup"><span data-stu-id="5aa0d-142">Requirements</span></span>  

 <span data-ttu-id="5aa0d-143">**Plattformen:** Informationen finden Sie unter [Systemanforderungen](../../get-started/system-requirements.md).</span><span class="sxs-lookup"><span data-stu-id="5aa0d-143">**Platforms:** See [System Requirements](../../get-started/system-requirements.md).</span></span>  
  
 <span data-ttu-id="5aa0d-144">**Header:** CorProf.idl, CorProf.h</span><span class="sxs-lookup"><span data-stu-id="5aa0d-144">**Header:** CorProf.idl, CorProf.h</span></span>  
  
 <span data-ttu-id="5aa0d-145">**Bibliothek:** CorGuids.lib</span><span class="sxs-lookup"><span data-stu-id="5aa0d-145">**Library:** CorGuids.lib</span></span>  
  
 <span data-ttu-id="5aa0d-146">**.NET Framework Versionen:**[!INCLUDE[net_current_v40plus](../../../../includes/net-current-v40plus-md.md)]</span><span class="sxs-lookup"><span data-stu-id="5aa0d-146">**.NET Framework Versions:** [!INCLUDE[net_current_v40plus](../../../../includes/net-current-v40plus-md.md)]</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5aa0d-147">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="5aa0d-147">See also</span></span>

- [<span data-ttu-id="5aa0d-148">ICorProfilerInfo3-Schnittstelle</span><span class="sxs-lookup"><span data-stu-id="5aa0d-148">ICorProfilerInfo3 Interface</span></span>](icorprofilerinfo3-interface.md)
- [<span data-ttu-id="5aa0d-149">Profilerstellungsschnittstellen</span><span class="sxs-lookup"><span data-stu-id="5aa0d-149">Profiling Interfaces</span></span>](profiling-interfaces.md)
- [<span data-ttu-id="5aa0d-150">Profilerstellung</span><span class="sxs-lookup"><span data-stu-id="5aa0d-150">Profiling</span></span>](index.md)
