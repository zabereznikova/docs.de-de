---
title: So sucht Common Language Runtime nach Assemblys
description: Erfahren Sie, wie die Common Language Runtime (CLR) die Assemblys, aus denen Ihre Anwendung in .NET besteht, findet und eine Bindung mit ihnen herstellt.
ms.date: 03/30/2017
helpviewer_keywords:
- app.config files, assembly locations
- deploying applications [.NET Framework], assembly locations
- application configuration files, locating assemblies
- .NET Framework application deployment, locating assemblies
- locating assemblies
- assemblies [.NET Framework], location
ms.assetid: 772ac6f4-64d2-4cfb-92fd-58096dcd6c34
ms.openlocfilehash: 4cf1e5787fe2e430d20208d8e79b610e9126c67c
ms.sourcegitcommit: e02d17b2cf9c1258dadda4810a5e6072a0089aee
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 07/01/2020
ms.locfileid: "85622626"
---
# <a name="how-the-runtime-locates-assemblies"></a><span data-ttu-id="eb9a9-103">So sucht Common Language Runtime nach Assemblys</span><span class="sxs-lookup"><span data-stu-id="eb9a9-103">How the Runtime Locates Assemblies</span></span>

<span data-ttu-id="eb9a9-104">Um Ihre .NET Framework-Anwendung erfolgreich bereitstellen zu können, müssen Sie mit dem Verfahren vertraut sein, mit dem die Common Language Runtime die Assemblys sucht und bindet, aus denen Ihre Anwendung zusammengesetzt ist.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-104">To successfully deploy your .NET Framework application, you must understand how the common language runtime locates and binds to the assemblies that make up your application.</span></span> <span data-ttu-id="eb9a9-105">Standardmäßig versucht die Common Language Runtime, die genaue Version einer Assembly einzubinden, mit der die Anwendung erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-105">By default, the runtime attempts to bind with the exact version of an assembly that the application was built with.</span></span> <span data-ttu-id="eb9a9-106">Dieses Standardverhalten kann durch Einstellungen in der Konfigurationsdatei überschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-106">This default behavior can be overridden by configuration file settings.</span></span>

<span data-ttu-id="eb9a9-107">Die Common Language Runtime führt eine Reihe von Schritten aus, um eine Assembly zu finden und einen Assemblyverweis aufzulösen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-107">The common language runtime performs a number of steps when attempting to locate an assembly and resolve an assembly reference.</span></span> <span data-ttu-id="eb9a9-108">Die einzelnen Schritte werden in den folgenden Abschnitten erläutert.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-108">Each step is explained in the following sections.</span></span> <span data-ttu-id="eb9a9-109">Der Begriff "Überprüfung" wird häufig verwendet, um zu beschreiben, wie die Common Language Runtime nach Assemblys sucht. Er bezieht sich auf die Heuristiken, mit denen die Assembly auf Basis ihres Namens und ihrer Kultur gesucht wird.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-109">The term probing is often used when describing how the runtime locates assemblies; it refers to the set of heuristics used to locate the assembly based on its name and culture.</span></span>

> [!NOTE]
> <span data-ttu-id="eb9a9-110">Bindungsinformationen in der Protokolldatei können mit dem [Assembly Binding Log Viewer („Fuslogvw.exe“)](../tools/fuslogvw-exe-assembly-binding-log-viewer.md)angezeigt werden, der im Windows SDK enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-110">You can view binding information in the log file using the [Assembly Binding Log Viewer (Fuslogvw.exe)](../tools/fuslogvw-exe-assembly-binding-log-viewer.md), which is included in the Windows SDK.</span></span>

## <a name="initiating-the-bind"></a><span data-ttu-id="eb9a9-111">Initiieren der Bindung</span><span class="sxs-lookup"><span data-stu-id="eb9a9-111">Initiating the Bind</span></span>

<span data-ttu-id="eb9a9-112">Das Auffinden einer und Binden an eine Assembly beginnt mit dem Versuch der Common Language Runtime, einen Verweis auf eine andere Assembly aufzulösen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-112">The process of locating and binding to an assembly begins when the runtime attempts to resolve a reference to another assembly.</span></span> <span data-ttu-id="eb9a9-113">Dieser Verweis kann statisch oder dynamisch sein.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-113">This reference can be either static or dynamic.</span></span> <span data-ttu-id="eb9a9-114">Der Compiler zeichnet statische Verweise in den Metadaten des Assemblymanifests während der Erstellungszeit auf.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-114">The compiler records static references in the assembly manifest's metadata at build time.</span></span> <span data-ttu-id="eb9a9-115">Dynamische Verweise werden dynamisch erstellt und resultieren aus dem Aufruf verschiedener Methoden, z. B. <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-115">Dynamic references are constructed on the fly as a result of calling various methods, such as <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="eb9a9-116">Die bevorzugte Methode zum Verweisen auf eine Assembly ist die Verwendung eines vollständigen Verweises mit Assemblynamen, -version, -kultur und Token des öffentlichen Schlüssels (falls vorhanden).</span><span class="sxs-lookup"><span data-stu-id="eb9a9-116">The preferred way to reference an assembly is to use a full reference, including the assembly name, version, culture, and public key token (if one exists).</span></span> <span data-ttu-id="eb9a9-117">Diese Informationen werden von der Common Language Runtime bei der Suche nach der Assembly verwendet. Die dabei ausgeführten Schritte werden in diesem Abschnitt weiter unten beschrieben.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-117">The runtime uses this information to locate the assembly, following the steps described later in this section.</span></span> <span data-ttu-id="eb9a9-118">Der von der Common Language Runtime verwendete Auflösungsprozess ist immer gleich, unabhängig davon, ob sich der Verweis auf eine statische oder dynamische Assembly bezieht.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-118">The runtime uses the same resolution process regardless of whether the reference is for a static or dynamic assembly.</span></span>

<span data-ttu-id="eb9a9-119">Sie können auch dynamisch auf eine Assembly verweisen, indem Sie die aufrufende Methode nur unter Angabe partieller Informationen zur Assembly, z. B. des Assemblynamens, bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-119">You can also make a dynamic reference to an assembly by providing the calling method with only partial information about the assembly, such as specifying only the assembly name.</span></span> <span data-ttu-id="eb9a9-120">In diesem Fall wird lediglich das Anwendungsverzeichnis nach der Assembly durchsucht; es erfolgen keine weiteren Überprüfungen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-120">In this case, only the application directory is searched for the assembly, and no other checking occurs.</span></span> <span data-ttu-id="eb9a9-121">Einen partiellen Verweis können Sie mit jeder der verschiedenen Methoden zum Laden von Assemblys erstellen, z. B. mit <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> oder <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-121">You make a partial reference using any of the various methods for loading assemblies such as <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> or <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="eb9a9-122">Mit einer Methode wie <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> können Sie auch einen dynamischen Verweis erstellen und nur partielle Informationen angeben. Dann qualifizieren Sie den Verweis mithilfe des [\<qualifyAssembly>](../configure-apps/file-schema/runtime/qualifyassembly-element.md)-Elements in der Anwendungskonfigurationsdatei.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-122">Finally, you can make a dynamic reference using a method such as <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> and provide only partial information; you then qualify the reference using the [\<qualifyAssembly>](../configure-apps/file-schema/runtime/qualifyassembly-element.md) element in the application configuration file.</span></span> <span data-ttu-id="eb9a9-123">Mit diesem Element können Sie die vollständigen Verweisinformationen (Name, Version, Kultur und ggf. das Token des öffentlichen Schlüssels) in der Anwendungskonfigurationsdatei statt im Code bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-123">This element allows you to provide the full reference information (name, version, culture and, if applicable, the public key token) in your application configuration file instead of in your code.</span></span> <span data-ttu-id="eb9a9-124">Dieses Verfahren sollten Sie anwenden, wenn Sie einen Verweis auf eine Assembly außerhalb des Anwendungsverzeichnisses vollständig qualifizieren oder auf eine Assembly im globalen Assemblycache verweisen möchten, aber gleichzeitig aus praktischen Gründen den vollständigen Verweis in der Konfigurationsdatei statt im Code angeben möchten.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-124">You would use this technique if you wanted to fully qualify a reference to an assembly outside the application directory, or if you wanted to reference an assembly in the global assembly cache but you wanted the convenience of specifying the full reference in the configuration file instead of in your code.</span></span>

> [!NOTE]
> <span data-ttu-id="eb9a9-125">Diesen Typ des partiellen Verweises sollten Sie nicht bei Assemblys verwenden, die für mehrere Anwendungen freigegeben sind.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-125">This type of partial reference should not be used with assemblies that are shared among several applications.</span></span> <span data-ttu-id="eb9a9-126">Da Konfigurationseinstellungen nach Anwendung und nicht nach Assembly erfolgen, müssten bei einer freigegebenen Assembly mit diesem Typ des partiellen Verweises für jede Anwendung, die diese freigegebene Assembly verwendet, die qualifizierenden Informationen in der jeweiligen Konfigurationsdatei enthalten sein.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-126">Because configuration settings are applied per application and not per assembly, a shared assembly using this type of partial reference would require each application using the shared assembly to have the qualifying information in its configuration file.</span></span>

<span data-ttu-id="eb9a9-127">Die Common Language Runtime verwendet die folgenden Schritte, um einen Assemblyverweis aufzulösen:</span><span class="sxs-lookup"><span data-stu-id="eb9a9-127">The runtime uses the following steps to resolve an assembly reference:</span></span>

1. <span data-ttu-id="eb9a9-128">[Bestimmen der korrekten Assemblyversion](#step1) durch Überprüfung anwendbarer Konfigurationsdateien, einschließlich der Anwendungskonfigurationsdatei, der Herausgeberrichtliniendatei und der Computerkonfigurationsdatei.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-128">[Determines the correct assembly version](#step1) by examining applicable configuration files, including the application configuration file, publisher policy file, and machine configuration file.</span></span> <span data-ttu-id="eb9a9-129">Wenn die Konfigurationsdatei auf einem Remotecomputer gespeichert ist, muss die Common Language Runtime zuerst die Anwendungskonfigurationsdatei suchen und herunterladen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-129">If the configuration file is located on a remote machine, the runtime must locate and download the application configuration file first.</span></span>

2. <span data-ttu-id="eb9a9-130">[Überprüfen, ob der Assemblyname bereits zuvor gebunden wurde](#step2) . Ist dies der Fall, wird die zuvor geladene Assembly verwendet.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-130">[Checks whether the assembly name has been bound to before](#step2) and, if so, uses the previously loaded assembly.</span></span> <span data-ttu-id="eb9a9-131">Wenn eine vorherige Anforderung zum Laden der Assembly nicht ausgeführt werden konnte, führt die Anforderung sofort zu einem Fehler, ohne dass versucht wird, die Assembly zu laden.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-131">If a previous request to load the assembly failed, the request is failed immediately without attempting to load the assembly.</span></span>

    > [!NOTE]
    > <span data-ttu-id="eb9a9-132">Das Caching von Assemblybindungsfehlern ist neu in .NET Framework Version 2.0.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-132">The caching of assembly binding failures is new in the .NET Framework version 2.0.</span></span>

3. <span data-ttu-id="eb9a9-133">[Durchsuchen des globalen Assemblycache](#step3).</span><span class="sxs-lookup"><span data-stu-id="eb9a9-133">[Checks the global assembly cache](#step3).</span></span> <span data-ttu-id="eb9a9-134">Wird die Assembly dort gefunden, wird sie von der Common Language Runtime verwendet.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-134">If the assembly is found there, the runtime uses this assembly.</span></span>

4. <span data-ttu-id="eb9a9-135">[Suchen der Assembly](#step4) , wobei folgendermaßen vorgegangen wird:</span><span class="sxs-lookup"><span data-stu-id="eb9a9-135">[Probes for the assembly](#step4) using the following steps:</span></span>

    1. <span data-ttu-id="eb9a9-136">Wenn die Konfiguration und die Herausgeberrichtlinie keine Auswirkung auf den ursprünglichen Verweis haben und die Anforderung zur Bindung mithilfe der <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> -Methode erstellt wurde, sucht die Common Language Runtime nach Hinweisen auf den Speicherort.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-136">If configuration and publisher policy do not affect the original reference and if the bind request was created using the <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> method, the runtime checks for location hints.</span></span>

    2. <span data-ttu-id="eb9a9-137">Wenn eine CodeBase in den Konfigurationsdateien gefunden wurde, wird nur dieser Speicherort überprüft.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-137">If a codebase is found in the configuration files, the runtime checks only this location.</span></span> <span data-ttu-id="eb9a9-138">Wenn die Überprüfung fehlschlägt, wird durch die Common Language Runtime festgelegt, dass die Anforderung zur Bindung fehlgeschlagen ist und keine weitere Überprüfung erfolgt.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-138">If this probe fails, the runtime determines that the binding request failed and no other probing occurs.</span></span>

    3. <span data-ttu-id="eb9a9-139">Überprüfen der Assembly mithilfe von Heuristiken, die im Abschnitt [Überprüfung](#step4)beschrieben sind.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-139">Probes for the assembly using the heuristics described in the [probing section](#step4).</span></span> <span data-ttu-id="eb9a9-140">Wurde die Assembly nach der Überprüfung nicht gefunden, fordert die Common Language Runtime Windows Installer auf, die Assembly zur Verfügung zu stellen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-140">If the assembly is not found after probing, the runtime requests the Windows Installer to provide the assembly.</span></span> <span data-ttu-id="eb9a9-141">Dabei handelt es sich um eine Installation bei Bedarf.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-141">This acts as an install-on-demand feature.</span></span>

        > [!NOTE]
        > <span data-ttu-id="eb9a9-142">Es findet weder eine Versionsüberprüfung von Assemblys ohne starken Namen statt, noch überprüft die Common Language Runtime den globalen Assemblycache nach Assemblys ohne starken Namen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-142">There is no version checking for assemblies without strong names, nor does the runtime check in the global assembly cache for assemblies without strong names.</span></span>

<a name="step1"></a>

## <a name="step-1-examining-the-configuration-files"></a><span data-ttu-id="eb9a9-143">Schritt 1: Untersuchen der Konfigurationsdateien</span><span class="sxs-lookup"><span data-stu-id="eb9a9-143">Step 1: Examining the Configuration Files</span></span>

<span data-ttu-id="eb9a9-144">Das Assemblybindungsverhalten kann auf verschiedenen Ebenen auf Basis von drei XML-Dateien konfiguriert werden:</span><span class="sxs-lookup"><span data-stu-id="eb9a9-144">Assembly binding behavior can be configured at different levels based on three XML files:</span></span>

- <span data-ttu-id="eb9a9-145">Anwendungskonfigurationsdatei</span><span class="sxs-lookup"><span data-stu-id="eb9a9-145">Application configuration file.</span></span>

- <span data-ttu-id="eb9a9-146">Herausgeberrichtliniendatei</span><span class="sxs-lookup"><span data-stu-id="eb9a9-146">Publisher policy file.</span></span>

- <span data-ttu-id="eb9a9-147">Computerkonfigurationsdatei</span><span class="sxs-lookup"><span data-stu-id="eb9a9-147">Machine configuration file.</span></span>

<span data-ttu-id="eb9a9-148">Diese Dateien verwenden dieselbe Syntax und stellen Informationen wie Bindungsumleitungen, den Speicherort des Codes und Bindungsarten für bestimmte Assemblys zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-148">These files follow the same syntax and provide information such as binding redirects, the location of code, and binding modes for particular assemblies.</span></span> <span data-ttu-id="eb9a9-149">Jede Konfigurationsdatei kann ein [\<assemblyBinding>-Element](../configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) enthalten, das den Bindungsprozess umleitet.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-149">Each configuration file can contain an [\<assemblyBinding> element](../configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) that redirects the binding process.</span></span> <span data-ttu-id="eb9a9-150">Zu den untergeordneten Elementen des [\<assemblyBinding>-Elements](../configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) gehört das [\<dependentAssembly>-Element](../configure-apps/file-schema/runtime/dependentassembly-element.md).</span><span class="sxs-lookup"><span data-stu-id="eb9a9-150">The child elements of the [\<assemblyBinding> element](../configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) include the [\<dependentAssembly> element](../configure-apps/file-schema/runtime/dependentassembly-element.md).</span></span> <span data-ttu-id="eb9a9-151">Zu den untergeordneten Elementen des [\<dependentAssembly>-Elements](../configure-apps/file-schema/runtime/dependentassembly-element.md) gehören das [\<assemblyIdentity>-Element](/visualstudio/deployment/assemblyidentity-element-clickonce-deployment), das [\<bindingRedirect>-Element](../configure-apps/file-schema/runtime/bindingredirect-element.md) und das [\<codeBase>-Element](../configure-apps/file-schema/runtime/codebase-element.md).</span><span class="sxs-lookup"><span data-stu-id="eb9a9-151">The children of [\<dependentAssembly> element](../configure-apps/file-schema/runtime/dependentassembly-element.md) include the [\<assemblyIdentity> element](/visualstudio/deployment/assemblyidentity-element-clickonce-deployment), the [\<bindingRedirect> element](../configure-apps/file-schema/runtime/bindingredirect-element.md), and the [\<codeBase> element](../configure-apps/file-schema/runtime/codebase-element.md).</span></span>

> [!NOTE]
> <span data-ttu-id="eb9a9-152">Konfigurationsinformationen sind in den drei Konfigurationsdateien enthalten. Nicht alle Elemente sind auch in allen Konfigurationsdateien gültig.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-152">Configuration information can be found in the three configuration files; not all elements are valid in all configuration files.</span></span> <span data-ttu-id="eb9a9-153">So können sich z. B. Informationen zum Bindungsmodus und privaten Pfad nur in der Anwendungskonfigurationsdatei befinden.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-153">For example, binding mode and private path information can only be in the application configuration file.</span></span> <span data-ttu-id="eb9a9-154">Eine vollständige Liste der Informationen, die in jeder Datei enthalten sind, finden Sie unter [Konfigurieren von Apps mithilfe von Konfigurationsdateien](../configure-apps/index.md).</span><span class="sxs-lookup"><span data-stu-id="eb9a9-154">For a complete list of the information that is contained in each file, see [Configuring Apps by Using Configuration Files](../configure-apps/index.md).</span></span>

### <a name="application-configuration-file"></a><span data-ttu-id="eb9a9-155">Anwendungskonfigurationsdatei</span><span class="sxs-lookup"><span data-stu-id="eb9a9-155">Application Configuration File</span></span>

<span data-ttu-id="eb9a9-156">Im ersten Schritt durchsucht die Common Language Runtime die Anwendungskonfigurationsdatei nach Informationen, die die im Manifest der aufrufenden Assembly gespeicherten Versionsinformationen überschreiben.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-156">First, the common language runtime checks the application configuration file for information that overrides the version information stored in the calling assembly's manifest.</span></span> <span data-ttu-id="eb9a9-157">Die Anwendungskonfigurationsdatei kann mit einer Anwendung bereitgestellt werden, wird aber nicht für die Ausführung der Anwendung benötigt.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-157">The application configuration file can be deployed with an application, but is not required for application execution.</span></span> <span data-ttu-id="eb9a9-158">In der Regel erfolgt der Abruf dieser Datei fast unmittelbar, aber in Fällen, in denen sich die Anwendungsbasis auf einem Remotecomputer befindet, wie z. B. in einem webbasierten Szenario mit Internet Explorer, muss die Konfigurationsdatei heruntergeladen werden.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-158">Usually the retrieval of this file is almost instantaneous, but in situations where the application base is on a remote computer, such as in an Internet Explorer Web-based scenario, the configuration file must be downloaded.</span></span>

<span data-ttu-id="eb9a9-159">Im Fall von ausführbaren Clientdateien befindet sich die Anwendungskonfigurationsdatei im selben Verzeichnis wie die ausführbare Datei der Anwendung und verfügt über denselben Basisnamen wie diese sowie über die Dateierweiterung ".config".</span><span class="sxs-lookup"><span data-stu-id="eb9a9-159">For client executables, the application configuration file resides in the same directory as the application's executable and has the same base name as the executable with a .config extension.</span></span> <span data-ttu-id="eb9a9-160">Die Konfigurationsdatei für "C:\Programme\Myapp\Myapp.exe" ist beispielsweise "C:\Programme\Myapp\Myapp.exe.config". In einem browserbasierten Szenario muss die HTML-Datei das **\<link>** -Element verwenden, um explizit auf die Konfigurationsdatei zu verweisen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-160">For example, the configuration file for C:\Program Files\Myapp\Myapp.exe is C:\Program Files\Myapp\Myapp.exe.config. In a browser-based scenario, the HTML file must use the **\<link>** element to explicitly point to the configuration file.</span></span>

<span data-ttu-id="eb9a9-161">Der folgende Code bietet ein einfaches Beispiel für eine Anwendungskonfigurationsdatei.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-161">The following code provides a simple example of an application configuration file.</span></span> <span data-ttu-id="eb9a9-162">In diesem Beispiel wird der <xref:System.Diagnostics.TextWriterTraceListener> -Auflistung ein <xref:System.Diagnostics.Debug.Listeners%2A> hinzugefügt, um das Aufzeichnen von Debuginformationen in einer Datei zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-162">This example adds a <xref:System.Diagnostics.TextWriterTraceListener> to the <xref:System.Diagnostics.Debug.Listeners%2A> collection to enable recording debug information to a file.</span></span>

```xml
<configuration>
   <system.diagnostics>
      <trace useGlobalLock="false" autoflush="true" indentsize="0">
         <listeners>
            <add name="myListener" type="System.Diagnostics.TextWriterTraceListener, system version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" initializeData="c:\myListener.log" />
         </listeners>
      </trace>
   </system.diagnostics>
</configuration>
```

### <a name="publisher-policy-file"></a><span data-ttu-id="eb9a9-163">Herausgeberrichtliniendatei</span><span class="sxs-lookup"><span data-stu-id="eb9a9-163">Publisher Policy File</span></span>

<span data-ttu-id="eb9a9-164">Im zweiten Schritt überprüft die Common Language Runtime die Herausgeberrichtliniendatei, sofern eine solche vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-164">Second, the runtime examines the publisher policy file, if one exists.</span></span> <span data-ttu-id="eb9a9-165">Herausgeberrichtliniendateien werden von einem Komponentenherausgeber als Fix oder Update an eine freigegebene Komponente verteilt.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-165">Publisher policy files are distributed by a component publisher as a fix or update to a shared component.</span></span> <span data-ttu-id="eb9a9-166">Diese Dateien enthalten Informationen zur Kompatibilität, die vom Herausgeber der freigegebenen Komponente ausgegeben werden. Diese Komponente leitet einen Assemblyverweis an eine neue Version weiter.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-166">These files contain compatibility information issued by the publisher of the shared component that directs an assembly reference to a new version.</span></span> <span data-ttu-id="eb9a9-167">Anders als Anwendungs- und Computerkonfigurationsdateien sind Herausgeberrichtliniendateien in ihren eigenen Assemblys enthalten, die im globalen Assemblycache installiert sein müssen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-167">Unlike application and machine configuration files, publisher policy files are contained in their own assembly that must be installed in the global assembly cache.</span></span>

<span data-ttu-id="eb9a9-168">Es folgt ein Beispiel einer Konfigurationsdatei für Herausgeberrichtlinien:</span><span class="sxs-lookup"><span data-stu-id="eb9a9-168">The following is an example of a Publisher Policy configuration file:</span></span>

```xml
<configuration>
    <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">

            <dependentAssembly>
                <assemblyIdentity name="asm6" publicKeyToken="c0305c36380ba429" />
                <bindingRedirect oldVersion="3.0.0.0" newVersion="2.0.0.0"/>
            </dependentAssembly>

        </assemblyBinding>
    </runtime>
</configuration>
```

<span data-ttu-id="eb9a9-169">Zum Erstellen einer Assembly können Sie das [Al.exe (Assembly Linker)](../tools/al-exe-assembly-linker.md)-Tool mit einem Befehl wie dem Folgenden verwenden:</span><span class="sxs-lookup"><span data-stu-id="eb9a9-169">To create an assembly, you can use the [Al.exe (Assembly Linker)](../tools/al-exe-assembly-linker.md) tool with a command such as the following:</span></span>

```console
Al.exe /link:asm6.exe.config /out:policy.3.0.asm6.dll /keyfile: compatkey.dat /v:3.0.0.0
```

<span data-ttu-id="eb9a9-170">`compatkey.dat` ist eine Schlüsseldatei mit starkem Namen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-170">`compatkey.dat` is a strong-name key file.</span></span> <span data-ttu-id="eb9a9-171">Dieser Befehl erstellt eine Assembly mit starkem Namen, die Sie im globalen Assemblycache einfügen können.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-171">This command creates a strong-named assembly you can place in the global assembly cache.</span></span>

> [!NOTE]
> <span data-ttu-id="eb9a9-172">Herausgeberrichtlinien haben Auswirkungen auf alle Anwendungen, die eine freigegebene Komponente verwenden.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-172">Publisher policy affects all applications that use a shared component.</span></span>

<span data-ttu-id="eb9a9-173">Die Konfigurationsdatei für Herausgeberrichtlinien überschreibt Versionsinformationen, die aus der Anwendung stammen (d. h. aus dem Assemblymanifest oder aus der Anwendungskonfigurationsdatei).</span><span class="sxs-lookup"><span data-stu-id="eb9a9-173">The publisher policy configuration file overrides version information that comes from the application (that is, from the assembly manifest or from the application configuration file).</span></span> <span data-ttu-id="eb9a9-174">Wenn in der Anwendungskonfigurationsdatei keine Anweisung zur Umleitung der im Assemblymanifest angegebenen Version enthalten ist, überschreibt die Herausgeberrichtliniendatei die Version, die im Assemblymanifest angeben ist.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-174">If there is no statement in the application configuration file to redirect the version specified in the assembly manifest, the publisher policy file overrides the version specified in the assembly manifest.</span></span> <span data-ttu-id="eb9a9-175">Enthält die Anwendungskonfigurationsdatei hingegen eine Umleitungsanweisung, überschreibt die Herausgeberrichtlinie die dort angegebene Version und nicht diejenige, die im Manifest angegeben ist.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-175">However, if there is a redirecting statement in the application configuration file, publisher policy overrides that version rather than the one specified in the manifest.</span></span>

<span data-ttu-id="eb9a9-176">Eine Herausgeberrichtliniendatei wird verwendet, wenn eine freigegebene Komponente aktualisiert wird und die neue Version der freigegebenen Komponente von allen Anwendungen übernommen werden soll, die diese Komponente verwenden.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-176">A publisher policy file is used when a shared component is updated and the new version of the shared component should be picked up by all applications using that component.</span></span> <span data-ttu-id="eb9a9-177">Die Einstellungen in der Herausgeberrichtliniendatei überschreiben diejenigen der Anwendungskonfigurationsdatei, es sei denn, diese erzwingt den abgesicherten Modus.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-177">The settings in the publisher policy file override settings in the application configuration file, unless the application configuration file enforces safe mode.</span></span>

#### <a name="safe-mode"></a><span data-ttu-id="eb9a9-178">Abgesicherter Modus</span><span class="sxs-lookup"><span data-stu-id="eb9a9-178">Safe Mode</span></span>
<span data-ttu-id="eb9a9-179">Herausgeberrichtliniendateien werden in der Regel explizit als Teil eines Service Packs oder eines Programmupdates installiert.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-179">Publisher policy files are usually explicitly installed as part of a service pack or program update.</span></span> <span data-ttu-id="eb9a9-180">Wenn Probleme mit der aktualisierten freigegebenen Komponente auftreten sollten, können Sie die Überschreibungen in der Herausgeberrichtliniendatei ignorieren und den abgesicherten Modus verwenden.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-180">If there is any problem with the upgraded shared component, you can ignore the overrides in the publisher policy file using safe mode.</span></span> <span data-ttu-id="eb9a9-181">Der abgesicherte Modus wird vom **\<publisherPolicy apply="yes**&#124;**no"/>** -Element bestimmt, das sich nur in der Anwendungskonfigurationsdatei befindet.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-181">Safe mode is determined by the **\<publisherPolicy apply="yes**&#124;**no"/>** element, located only in the application configuration file.</span></span> <span data-ttu-id="eb9a9-182">Es legt fest, ob die Informationen zur Herausgeberrichtlinienkonfiguration aus dem Bindungsprozess entfernt werden sollten.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-182">It specifies whether the publisher policy configuration information should be removed from the binding process.</span></span>

<span data-ttu-id="eb9a9-183">Der abgesicherte Modus kann auf die gesamte Anwendung oder ausgewählte Assemblys angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-183">Safe mode can be set for the entire application or for selected assemblies.</span></span> <span data-ttu-id="eb9a9-184">Das heißt, Sie können die Richtlinie für alle Assemblys aufheben, aus denen die Anwendung zusammengesetzt ist, oder für einige ausgewählte Assemblys aktivieren.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-184">That is, you can turn off the policy for all assemblies that make up the application, or turn it on for some assemblies but not others.</span></span> <span data-ttu-id="eb9a9-185">Um die Herausgeberrichtlinie selektiv auf Assemblys anzuwenden, aus denen sich eine Anwendung zusammensetzt, legen Sie **\<publisherPolicy apply\=no/>** fest und bestimmen mit dem \<**dependentAssembly**>-Element die Assemblys, die davon betroffen sein sollen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-185">To selectively apply publisher policy to assemblies that make up an application, set **\<publisherPolicy apply\=no/>** and specify which assemblies you want to be affected using the \<**dependentAssembly**> element.</span></span> <span data-ttu-id="eb9a9-186">Um die Herausgeberrichtlinie auf alle Assemblys anzuwenden, legen Sie **\<publisherPolicy apply\=no/>** ohne abhängige Assemblyelemente fest.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-186">To apply publisher policy to all assemblies that make up the application, set **\<publisherPolicy apply\=no/>** with no dependent assembly elements.</span></span> <span data-ttu-id="eb9a9-187">Weitere Informationen zur Konfiguration finden Sie unter [Konfigurieren von Apps mithilfe von Konfigurationsdateien](../configure-apps/index.md).</span><span class="sxs-lookup"><span data-stu-id="eb9a9-187">For more about configuration, see [Configuring Apps by using Configuration Files](../configure-apps/index.md).</span></span>

### <a name="machine-configuration-file"></a><span data-ttu-id="eb9a9-188">Computerkonfigurationsdatei</span><span class="sxs-lookup"><span data-stu-id="eb9a9-188">Machine Configuration File</span></span>
<span data-ttu-id="eb9a9-189">Im dritten Schritt überprüft die Common Language Runtime die Computerkonfigurationsdatei.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-189">Third, the runtime examines the machine configuration file.</span></span> <span data-ttu-id="eb9a9-190">Diese Datei mit dem Namen "Machine.config" befindet sich auf dem lokalen Computer im Unterverzeichnis "Config" des Stammverzeichnisses, in dem die Common Language Runtime installiert ist.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-190">This file, called Machine.config, resides on the local computer in the Config subdirectory of the root directory where the runtime is installed.</span></span> <span data-ttu-id="eb9a9-191">Diese Datei kann von Administratoren verwendet werden, um lokale Assemblybindungsbeschränkungen für diesen Computer festzulegen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-191">This file can be used by administrators to specify assembly binding restrictions that are local to that computer.</span></span> <span data-ttu-id="eb9a9-192">Die Einstellungen in der Computerkonfigurationsdatei haben Vorrang vor allen anderen Konfigurationseinstellungen. Dies bedeutet allerdings nicht, dass sich alle Konfigurationseinstellungen in dieser Datei befinden sollten.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-192">The settings in the machine configuration file take precedence over all other configuration settings; however, this does not mean that all configuration settings should be put in this file.</span></span> <span data-ttu-id="eb9a9-193">Die Version, die in der Administratorrichtliniendatei festgelegt ist, ist endgültig und kann nicht überschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-193">The version determined by the administrator policy file is final, and cannot be overridden.</span></span> <span data-ttu-id="eb9a9-194">Überschreibungen, die in der Datei "Machine.config" festgelegt sind, haben Auswirkungen auf alle Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-194">Overrides specified in the Machine.config file affect all applications.</span></span> <span data-ttu-id="eb9a9-195">Weitere Informationen zu Konfigurationsdateien finden Sie unter [Konfigurieren von Apps mithilfe von Konfigurationsdateien](../configure-apps/index.md).</span><span class="sxs-lookup"><span data-stu-id="eb9a9-195">For more information about configuration files, see [Configuring Apps by using Configuration Files](../configure-apps/index.md).</span></span>

<a name="step2"></a>

## <a name="step-2-checking-for-previously-referenced-assemblies"></a><span data-ttu-id="eb9a9-196">Schritt 2: Suchen nach Assemblys, auf die zuvor verwiesen wurde</span><span class="sxs-lookup"><span data-stu-id="eb9a9-196">Step 2: Checking for Previously Referenced Assemblies</span></span>

<span data-ttu-id="eb9a9-197">Wenn die angeforderte Assembly bereits in vorherigen Aufrufen angefordert wurde, verwendet die Common Language Runtime die Assembly, die bereits geladen ist.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-197">If the requested assembly has also been requested in previous calls, the common language runtime uses the assembly that is already loaded.</span></span> <span data-ttu-id="eb9a9-198">Dies kann sich auf die Namensgebung für Assemblys auswirken, aus denen eine Anwendung zusammengesetzt ist.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-198">This can have ramifications when naming assemblies that make up an application.</span></span> <span data-ttu-id="eb9a9-199">Weitere Informationen zum Benennen von Assemblys finden Sie unter [Assemblynamen](../../standard/assembly/names.md).</span><span class="sxs-lookup"><span data-stu-id="eb9a9-199">For more information about naming assemblies, see [Assembly Names](../../standard/assembly/names.md).</span></span>

<span data-ttu-id="eb9a9-200">Wenn eine vorherige Anforderung für die Assembly nicht ausgeführt werden konnte, führen weitere Anforderungen sofort zu einem Fehler, ohne dass versucht wird, die Assembly zu laden.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-200">If a previous request for the assembly failed, subsequent requests for the assembly are failed immediately without attempting to load the assembly.</span></span> <span data-ttu-id="eb9a9-201">Ab .NET Framework Version 2.0 werden Assemblybindungsfehler zwischengespeichert. Anhand der zwischengespeicherten Informationen wird bestimmt, ob versucht wird, die Assembly zu laden.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-201">Starting with the .NET Framework version 2.0, assembly binding failures are cached, and the cached information is used to determine whether to attempt to load the assembly.</span></span>

> [!NOTE]
> <span data-ttu-id="eb9a9-202">Um zu dem Verhalten der .NET Framework-Versionen 1.0 und 1.1 zurückzukehren, in denen Bindungsfehler nicht zwischengespeichert wurden, nehmen Sie das [\<disableCachingBindingFailures>-Element](../configure-apps/file-schema/runtime/disablecachingbindingfailures-element.md) in Ihre Konfigurationsdatei auf.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-202">To revert to the behavior of the .NET Framework versions 1.0 and 1.1, which did not cache binding failures, include the [\<disableCachingBindingFailures> Element](../configure-apps/file-schema/runtime/disablecachingbindingfailures-element.md) in your configuration file.</span></span>

<a name="step3"></a>

## <a name="step-3-checking-the-global-assembly-cache"></a><span data-ttu-id="eb9a9-203">Schritt 3: Durchsuchen des globalen Assemblycache</span><span class="sxs-lookup"><span data-stu-id="eb9a9-203">Step 3: Checking the Global Assembly Cache</span></span>

<span data-ttu-id="eb9a9-204">Für Assemblys mit starkem Namen wird der Bindungsprozess durch die Überprüfung des globalen Assemblycache fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-204">For strong-named assemblies, the binding process continues by looking in the global assembly cache.</span></span> <span data-ttu-id="eb9a9-205">Im globalen Assemblycache werden Assemblys gespeichert, die von mehreren Anwendungen auf einem Computer verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-205">The global assembly cache stores assemblies that can be used by several applications on a computer.</span></span> <span data-ttu-id="eb9a9-206">Alle Assemblys im globalen Assemblycache müssen einen starken Namen aufweisen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-206">All assemblies in the global assembly cache must have strong names.</span></span>

<a name="step4"></a>

## <a name="step-4-locating-the-assembly-through-codebases-or-probing"></a><span data-ttu-id="eb9a9-207">Schritt 4: Suchen der Assembly mit CodeBases oder durch Überprüfung</span><span class="sxs-lookup"><span data-stu-id="eb9a9-207">Step 4: Locating the Assembly through Codebases or Probing</span></span>

<span data-ttu-id="eb9a9-208">Nachdem die richtige Assemblyversion mithilfe der Informationen aus dem Verweis der aufrufenden Assembly und den Konfigurationsdateien ermittelt worden ist und der globale Assemblycache (nur nach Assemblys mit starkem Namen) überprüft wurde, versucht die Common Language Runtime, die Assembly ausfindig zu machen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-208">After the correct assembly version has been determined by using the information in the calling assembly's reference and in the configuration files, and after it has checked in the global assembly cache (only for strong-named assemblies), the common language runtime attempts to find the assembly.</span></span> <span data-ttu-id="eb9a9-209">Die Suche nach einer Assembly setzt sich aus folgenden Schritten zusammen:</span><span class="sxs-lookup"><span data-stu-id="eb9a9-209">The process of locating an assembly involves the following steps:</span></span>

1. <span data-ttu-id="eb9a9-210">Wird ein [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md)-Element in der Anwendungskonfigurationsdatei gefunden, überprüft die Common Language Runtime den angegebenen Speicherort.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-210">If a [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element is found in the application configuration file, the runtime checks the specified location.</span></span> <span data-ttu-id="eb9a9-211">Wenn eine Übereinstimmung gefunden wird, wird diese Assembly verwendet und es findet keine Überprüfung statt.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-211">If a match is found, that assembly is used and no probing occurs.</span></span> <span data-ttu-id="eb9a9-212">Wird die Assembly dort nicht gefunden, schlägt die Bindungsanforderung fehl.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-212">If the assembly is not found there, the binding request fails.</span></span>

2. <span data-ttu-id="eb9a9-213">Die Common Language Runtime sucht daraufhin nach der Assembly, auf die verwiesen wurde, und wendet dabei die Regeln an, die weiter unten im Abschnitt erläutert sind.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-213">The runtime then probes for the referenced assembly using the rules specified later in this section.</span></span>

> [!NOTE]
> <span data-ttu-id="eb9a9-214">Wenn mehrere Versionen einer Assembly in einem Verzeichnis vorhanden sind und Sie auf eine bestimmte Version dieser Assembly verweisen möchten, müssen Sie das [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md)-Element anstelle des `privatePath`-Attributs des [\<probing>](../configure-apps/file-schema/runtime/probing-element.md)-Elements verwenden.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-214">If you have multiple versions of an assembly in a directory and you want to reference a particular version of that assembly, you must use the [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element instead of the `privatePath` attribute of the [\<probing>](../configure-apps/file-schema/runtime/probing-element.md) element.</span></span> <span data-ttu-id="eb9a9-215">Bei Verwendung des [\<probing>](../configure-apps/file-schema/runtime/probing-element.md)-Elements beendet die Common Language Runtime die Überprüfung beim ersten Auffinden einer Assembly mit dem einfachen Assemblynamen, auf den verwiesen wird, ganz gleich, ob es sich um eine korrekte Übereinstimmung handelt oder nicht.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-215">If you use the [\<probing>](../configure-apps/file-schema/runtime/probing-element.md) element, the runtime stops probing the first time it finds an assembly that matches the simple assembly name referenced, whether it is a correct match or not.</span></span> <span data-ttu-id="eb9a9-216">Bei einer korrekten Übereinstimmung wird diese Assembly verwendet.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-216">If it is a correct match, that assembly is used.</span></span> <span data-ttu-id="eb9a9-217">Wenn es sich nicht um eine korrekte Übereinstimmung handelt, wird die Überprüfung beendet und die Bindung schlägt fehl.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-217">If it is not a correct match, probing stops and binding fails.</span></span>

### <a name="locating-the-assembly-through-codebases"></a><span data-ttu-id="eb9a9-218">Assemblysuche mit CodeBases</span><span class="sxs-lookup"><span data-stu-id="eb9a9-218">Locating the Assembly through Codebases</span></span>

<span data-ttu-id="eb9a9-219">Informationen zur Codebase können über ein [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md)-Element in einer Konfigurationsdatei zur Verfügung gestellt werden.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-219">Codebase information can be provided by using a [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element in a configuration file.</span></span> <span data-ttu-id="eb9a9-220">Diese CodeBase wird stets überprüft, bevor die Common Language Runtime nach der Assembly sucht, auf die verwiesen wird.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-220">This codebase is always checked before the runtime attempts to probe for the referenced assembly.</span></span> <span data-ttu-id="eb9a9-221">Enthält eine Herausgeberrichtliniendatei, in der die Umleitung der endgültigen Version enthalten ist, auch ein [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md)-Element, wird dieses [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md)-Element verwendet.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-221">If a publisher policy file containing the final version redirect also contains a [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element, that [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element is the one that is used.</span></span> <span data-ttu-id="eb9a9-222">Wenn beispielsweise Ihre Anwendungskonfigurationsdatei ein [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md)-Element festlegt, gleichzeitig aber eine Herausgeberrichtliniendatei, die Anwendungsinformationen überschreibt, ebenfalls ein [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md)-Element festlegt, wird das [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md)-Element in der Herausgeberrichtliniendatei verwendet.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-222">For example, if your application configuration file specifies a [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element, and a publisher policy file that is overriding the application information also specifies a [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element, the [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element in the publisher policy file is used.</span></span>

<span data-ttu-id="eb9a9-223">Wenn am Speicherort, der durch das [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md)-Element angegeben ist, keine Übereinstimmung gefunden wird, schlägt die Bindungsanforderung fehl und es werden keine weiteren Schritte ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-223">If no match is found at the location specified by the [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element, the bind request fails and no further steps are taken.</span></span> <span data-ttu-id="eb9a9-224">Wird durch die Common Language Runtime ermittelt, dass eine Assembly den Kriterien der aufrufenden Assembly entspricht, wird diese Assembly verwendet.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-224">If the runtime determines that an assembly matches the calling assembly's criteria, it uses that assembly.</span></span> <span data-ttu-id="eb9a9-225">Wenn die durch das angegebene [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md)-Element festgelegte Datei geladen wird, überprüft die Common Language Runtime, ob Name, Version, Kultur und öffentlicher Schlüssel dem Verweis der aufrufenden Assembly entsprechen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-225">When the file specified by the given [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element is loaded, the runtime checks to make sure that the name, version, culture, and public key match the calling assembly's reference.</span></span>

> [!NOTE]
> <span data-ttu-id="eb9a9-226">Assemblys, auf die verwiesen wird und die sich außerhalb des Stammverzeichnisses der Anwendung befinden, müssen einen starken Namen aufweisen und entweder im globalen Assemblycache installiert sein oder mithilfe des [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md)-Elements angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-226">Referenced assemblies outside the application's root directory must have strong names and must either be installed in the global assembly cache or specified using the [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element.</span></span>

### <a name="locating-the-assembly-through-probing"></a><span data-ttu-id="eb9a9-227">Assemblysuche durch Überprüfung</span><span class="sxs-lookup"><span data-stu-id="eb9a9-227">Locating the Assembly through Probing</span></span>

<span data-ttu-id="eb9a9-228">Wenn sich kein [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md)-Element in der Anwendungskonfigurationsdatei befindet, führt die Common Language Runtime eine Überprüfung für die Assembly anhand von vier Kriterien durch:</span><span class="sxs-lookup"><span data-stu-id="eb9a9-228">If there is no [\<codeBase>](../configure-apps/file-schema/runtime/codebase-element.md) element in the application configuration file, the runtime probes for the assembly using four criteria:</span></span>

- <span data-ttu-id="eb9a9-229">Anwendungsbasis, die der Stammort für die Ausführung der Anwendung ist.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-229">Application base, which is the root location where the application is being executed.</span></span>

- <span data-ttu-id="eb9a9-230">Kultur, die das Kulturattribut der Assembly darstellt, auf die verwiesen wird.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-230">Culture, which is the culture attribute of the assembly being referenced.</span></span>

- <span data-ttu-id="eb9a9-231">Name der Assembly, auf die verwiesen wird.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-231">Name, which is the name of the referenced assembly.</span></span>

- <span data-ttu-id="eb9a9-232">Das `privatePath`-Attribut des [\<probing>](../configure-apps/file-schema/runtime/probing-element.md)-Elements, bei dem es sich um die benutzerdefinierte Liste von Unterverzeichnissen unter dem Stammspeicherort handelt.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-232">The `privatePath` attribute of the [\<probing>](../configure-apps/file-schema/runtime/probing-element.md) element, which is the user-defined list of subdirectories under the root location.</span></span> <span data-ttu-id="eb9a9-233">Dieser Speicherort kann in der Anwendungskonfigurationsdatei und in verwaltetem Code mithilfe der <xref:System.AppDomainSetup.PrivateBinPath?displayProperty=nameWithType>-Eigenschaft für eine Anwendungsdomäne festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-233">This location can be specified in the application configuration file and in managed code using the <xref:System.AppDomainSetup.PrivateBinPath?displayProperty=nameWithType> property for an application domain.</span></span> <span data-ttu-id="eb9a9-234">Im Fall der Festlegung in verwaltetem Code wird zuerst der `privatePath` des verwalteten Codes und daraufhin der in der Anwendungskonfigurationsdatei angegebene Pfad überprüft.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-234">When specified in managed code, the managed code `privatePath` is probed first, followed by the path specified in the application configuration file.</span></span>

#### <a name="probing-the-application-base-and-culture-directories"></a><span data-ttu-id="eb9a9-235">Überprüfen der Anwendungsbasis- und Kulturverzeichnisse</span><span class="sxs-lookup"><span data-stu-id="eb9a9-235">Probing the Application Base and Culture Directories</span></span>

<span data-ttu-id="eb9a9-236">Die Common Language Runtime beginnt mit der Überprüfung immer in der Anwendungsbasis, die entweder eine URL oder das Stammverzeichnis der Anwendung auf einem Computer ist.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-236">The runtime always begins probing in the application's base, which can be either a URL or the application's root directory on a computer.</span></span> <span data-ttu-id="eb9a9-237">Wird die Assembly, auf die verwiesen wird, in der Anwendungsbasis nicht gefunden und stehen keine Informationen zur Kultur bereit, durchsucht die Common Language Runtime alle Unterverzeichnisse mit diesem Assemblynamen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-237">If the referenced assembly is not found in the application base and no culture information is provided, the runtime searches any subdirectories with the assembly name.</span></span> <span data-ttu-id="eb9a9-238">Zu den überprüften Verzeichnissen gehören:</span><span class="sxs-lookup"><span data-stu-id="eb9a9-238">The directories probed include:</span></span>

- <span data-ttu-id="eb9a9-239">[Anwendungsbasis] / [Assemblyname].dll</span><span class="sxs-lookup"><span data-stu-id="eb9a9-239">[application base] / [assembly name].dll</span></span>

- <span data-ttu-id="eb9a9-240">[Anwendungsbasis] / [Assemblyname] / [Assemblyname].dll</span><span class="sxs-lookup"><span data-stu-id="eb9a9-240">[application base] / [assembly name] / [assembly name].dll</span></span>

<span data-ttu-id="eb9a9-241">Wenn für die Assembly, auf die verwiesen wird, Informationen zur Kultur angegeben sind, werden nur die folgenden Verzeichnisse überprüft:</span><span class="sxs-lookup"><span data-stu-id="eb9a9-241">If culture information is specified for the referenced assembly, only the following directories are probed:</span></span>

- <span data-ttu-id="eb9a9-242">[Anwendungsbasis] / [Kultur] / [Assemblyname].dll</span><span class="sxs-lookup"><span data-stu-id="eb9a9-242">[application base] / [culture] / [assembly name].dll</span></span>

- <span data-ttu-id="eb9a9-243">[Anwendungsbasis] / [Kultur] / [Assemblyname] / [Assemblyname].dll</span><span class="sxs-lookup"><span data-stu-id="eb9a9-243">[application base] / [culture] / [assembly name] / [assembly name].dll</span></span>

#### <a name="probing-with-the-privatepath-attribute"></a><span data-ttu-id="eb9a9-244">Überprüfen mit dem privatePath-Attribut</span><span class="sxs-lookup"><span data-stu-id="eb9a9-244">Probing with the privatePath Attribute</span></span>

<span data-ttu-id="eb9a9-245">Zusätzlich zu den Unterverzeichnissen der Kultur und den Unterverzeichnissen mit dem Namen der Assembly, auf die verwiesen wird, überprüft die Common Language Runtime auch Verzeichnisse, die mit dem `privatePath`-Attribut des [\<probing>](../configure-apps/file-schema/runtime/probing-element.md)-Elements angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-245">In addition to the culture subdirectories and the subdirectories named for the referenced assembly, the runtime also probes directories specified using the `privatePath` attribute of the [\<probing>](../configure-apps/file-schema/runtime/probing-element.md) element.</span></span> <span data-ttu-id="eb9a9-246">Die Verzeichnisse, die mit dem `privatePath` -Attribut angegeben werden, müssen Unterverzeichnisse des Stammverzeichnisses der Anwendung sein.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-246">The directories specified using the `privatePath` attribute must be subdirectories of the application's root directory.</span></span> <span data-ttu-id="eb9a9-247">Die überprüften Verzeichnisse unterscheiden sich, je nachdem, ob Informationen zur Kultur in der Anforderung der Assembly enthalten sind, auf die verwiesen wird.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-247">The directories probed vary depending on whether culture information is included in the referenced assembly request.</span></span>

<span data-ttu-id="eb9a9-248">Die Common Language Runtime beendet die Überprüfung beim ersten Auffinden einer Assembly mit dem einfachen Assemblynamen, auf den verwiesen wird, ganz gleich, ob es sich um eine korrekte Übereinstimmung handelt oder nicht.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-248">The runtime stops probing the first time it finds an assembly that matches the simple assembly name referenced, whether it is a correct match or not.</span></span> <span data-ttu-id="eb9a9-249">Bei einer korrekten Übereinstimmung wird diese Assembly verwendet.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-249">If it is a correct match, that assembly is used.</span></span> <span data-ttu-id="eb9a9-250">Wenn es sich nicht um eine korrekte Übereinstimmung handelt, wird die Überprüfung beendet und die Bindung schlägt fehl.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-250">If it is not a correct match, probing stops and binding fails.</span></span>

<span data-ttu-id="eb9a9-251">Wenn Informationen zur Kultur enthalten sind, erfolgt die Überprüfung der folgenden Verzeichnisse:</span><span class="sxs-lookup"><span data-stu-id="eb9a9-251">If culture is included, the following directories are probed:</span></span>

- <span data-ttu-id="eb9a9-252">[Anwendungsbasis] / [bin-Pfad] / [Kultur] / [Assemblyname].dll</span><span class="sxs-lookup"><span data-stu-id="eb9a9-252">[application base] / [binpath] / [culture] / [assembly name].dll</span></span>

- <span data-ttu-id="eb9a9-253">[Anwendungsbasis] / [bin-Pfad] / [Kultur] / [Assemblyname] / [Assemblyname].dll</span><span class="sxs-lookup"><span data-stu-id="eb9a9-253">[application base] / [binpath] / [culture] / [assembly name] / [assembly name].dll</span></span>

<span data-ttu-id="eb9a9-254">Wenn keine Informationen zur Kultur enthalten sind, werden die folgenden Verzeichnisse überprüft:</span><span class="sxs-lookup"><span data-stu-id="eb9a9-254">If culture information is not included, the following directories are probed:</span></span>

- <span data-ttu-id="eb9a9-255">[Anwendungsbasis] / [bin-Pfad] / [Assemblyname].dll</span><span class="sxs-lookup"><span data-stu-id="eb9a9-255">[application base] / [binpath] / [assembly name].dll</span></span>

- <span data-ttu-id="eb9a9-256">[Anwendungsbasis] / [bin-Pfad] / [Assemblyname] / [Assemblyname].dll</span><span class="sxs-lookup"><span data-stu-id="eb9a9-256">[application base] / [binpath] / [assembly name] / [assembly name].dll</span></span>

#### <a name="probing-examples"></a><span data-ttu-id="eb9a9-257">Beispiele einer Überprüfung</span><span class="sxs-lookup"><span data-stu-id="eb9a9-257">Probing Examples</span></span>

<span data-ttu-id="eb9a9-258">Folgende Informationen stehen zur Verfügung:</span><span class="sxs-lookup"><span data-stu-id="eb9a9-258">Given the following information:</span></span>

- <span data-ttu-id="eb9a9-259">Name der Assembly, auf die verwiesen wird: myAssembly</span><span class="sxs-lookup"><span data-stu-id="eb9a9-259">Referenced assembly name: myAssembly</span></span>

- <span data-ttu-id="eb9a9-260">Webanwendungs-Stammverzeichnis: `http://www.code.microsoft.com`</span><span class="sxs-lookup"><span data-stu-id="eb9a9-260">Application root directory: `http://www.code.microsoft.com`</span></span>

- <span data-ttu-id="eb9a9-261">[\<probing>](../configure-apps/file-schema/runtime/probing-element.md)-Element in der Konfigurationsdatei: bin</span><span class="sxs-lookup"><span data-stu-id="eb9a9-261">[\<probing>](../configure-apps/file-schema/runtime/probing-element.md) element in configuration file specifies: bin</span></span>

- <span data-ttu-id="eb9a9-262">Kultur: de</span><span class="sxs-lookup"><span data-stu-id="eb9a9-262">Culture: de</span></span>

<span data-ttu-id="eb9a9-263">Die Common Language Runtime überprüft die folgenden URLs:</span><span class="sxs-lookup"><span data-stu-id="eb9a9-263">The runtime probes the following URLs:</span></span>

- `http://www.code.microsoft.com/de/myAssembly.dll`

- `http://www.code.microsoft.com/de/myAssembly/myAssembly.dll`

- `http://www.code.microsoft.com/bin/de/myAssembly.dll`

- `http://www.code.microsoft.com/bin/de/myAssembly/myAssembly.dll`

##### <a name="multiple-assemblies-with-the-same-name"></a><span data-ttu-id="eb9a9-264">Mehrere Assemblys mit dem gleichen Namen</span><span class="sxs-lookup"><span data-stu-id="eb9a9-264">Multiple Assemblies with the Same Name</span></span>

<span data-ttu-id="eb9a9-265">Das folgende Beispiel zeigt, wie mehrere Assemblys mit dem gleichen Namen konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-265">The following example shows how to configure multiple assemblies with the same name.</span></span>

```xml
<dependentAssembly>
   <assemblyIdentity name="Server" publicKeyToken="c0305c36380ba429" />
   <codeBase version="1.0.0.0" href="v1/Server.dll" />
   <codeBase version="2.0.0.0" href="v2/Server.dll" />
</dependentAssembly>
```

#### <a name="other-locations-probed"></a><span data-ttu-id="eb9a9-266">Weitere überprüfte Speicherorte</span><span class="sxs-lookup"><span data-stu-id="eb9a9-266">Other Locations Probed</span></span>

<span data-ttu-id="eb9a9-267">Der Speicherort einer Assembly kann auch mithilfe des aktuellen Bindungskontexts ermittelt werden.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-267">Assembly location can also be determined using the current binding context.</span></span> <span data-ttu-id="eb9a9-268">Dieses Verfahren kommt besonders häufig bei Verwendung der <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> -Methode und in Szenarien mit COM-Interop zum Einsatz.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-268">This most often occurs when the <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> method is used and in COM interop scenarios.</span></span> <span data-ttu-id="eb9a9-269">Wenn eine Assembly die <xref:System.Reflection.Assembly.LoadFrom%2A> -Methode verwendet, um auf eine andere Assembly zu verweisen, wird der Speicherort der aufrufenden Assembly als Hinweis auf den Speicherort der Assembly angesehen, auf die verwiesen wird.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-269">If an assembly uses the <xref:System.Reflection.Assembly.LoadFrom%2A> method to reference another assembly, the calling assembly's location is considered to be a hint about where to find the referenced assembly.</span></span> <span data-ttu-id="eb9a9-270">Bei gefundener Übereinstimmung wird diese Assembly geladen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-270">If a match is found, that assembly is loaded.</span></span> <span data-ttu-id="eb9a9-271">Besteht keine Übereinstimmung, setzt die Common Language Runtime die Suche mit der entsprechenden Semantik fort und fordert Windows Installer auf, die Assembly zur Verfügung zu stellen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-271">If no match is found, the runtime continues with its search semantics and then queries the Windows Installer to provide the assembly.</span></span> <span data-ttu-id="eb9a9-272">Wenn keine Assembly zur Verfügung gestellt wird, die mit der Bindungsanforderung übereinstimmt, wird eine Ausnahme ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-272">If no assembly is provided that matches the binding request, an exception is thrown.</span></span> <span data-ttu-id="eb9a9-273">Bei der Ausnahme handelt es sich um eine <xref:System.TypeLoadException> in verwaltetem Code, sofern auf einen Typ verwiesen wurde, oder um eine <xref:System.IO.FileNotFoundException> , sofern die geladene Assembly nicht gefunden wurde.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-273">This exception is a <xref:System.TypeLoadException> in managed code if a type was referenced, or a <xref:System.IO.FileNotFoundException> if an assembly being loaded was not found.</span></span>

<span data-ttu-id="eb9a9-274">Wenn beispielsweise „Assembly1“ auf „Assembly2“ verweist und „Assembly1“ von `http://www.code.microsoft.com/utils` heruntergeladen wurde, wird dieser Speicherort als Hinweis auf den Speicherort von „Assembly2.dll“ angesehen.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-274">For example, if Assembly1 references Assembly2 and Assembly1 was downloaded from `http://www.code.microsoft.com/utils`, that location is considered to be a hint about where to find Assembly2.dll.</span></span> <span data-ttu-id="eb9a9-275">Die Runtime sucht in `http://www.code.microsoft.com/utils/Assembly2.dll` und `http://www.code.microsoft.com/utils/Assembly2/Assembly2.dll` nach der Assembly.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-275">The runtime then probes for the assembly in `http://www.code.microsoft.com/utils/Assembly2.dll` and `http://www.code.microsoft.com/utils/Assembly2/Assembly2.dll`.</span></span> <span data-ttu-id="eb9a9-276">Wenn "Assembly2" in keinem der beiden Speicherorte vorhanden ist, wird eine Anfrage an Windows Installer gestellt.</span><span class="sxs-lookup"><span data-stu-id="eb9a9-276">If Assembly2 is not found at either of those locations, the runtime queries the Windows Installer.</span></span>

## <a name="see-also"></a><span data-ttu-id="eb9a9-277">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="eb9a9-277">See also</span></span>

- [<span data-ttu-id="eb9a9-278">Bewährte Methoden für das Laden von Assemblys</span><span class="sxs-lookup"><span data-stu-id="eb9a9-278">Best Practices for Assembly Loading</span></span>](best-practices-for-assembly-loading.md)
- [<span data-ttu-id="eb9a9-279">Bereitstellung</span><span class="sxs-lookup"><span data-stu-id="eb9a9-279">Deployment</span></span>](index.md)
