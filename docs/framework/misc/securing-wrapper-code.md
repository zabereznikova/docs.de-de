---
title: Sichern von Wrappercode
ms.date: 03/30/2017
helpviewer_keywords:
- security [.NET Framework], wrapper code
- wrapper code, securing
- secure coding, wrapper code
- code security, wrapper code
ms.assetid: 1df6c516-5bba-48bd-b450-1070e04b7389
ms.openlocfilehash: 3d38a4d4fd33798cf5987f5ce67305725ad9daec
ms.sourcegitcommit: 9c54866bcbdc49dbb981dd55be9bbd0443837aa2
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 02/14/2020
ms.locfileid: "77215846"
---
# <a name="securing-wrapper-code"></a><span data-ttu-id="7a9e6-102">Sichern von Wrappercode</span><span class="sxs-lookup"><span data-stu-id="7a9e6-102">Securing Wrapper Code</span></span>
[!INCLUDE[net_security_note](../../../includes/net-security-note-md.md)]  
  
 <span data-ttu-id="7a9e6-103">Wrappercode kann vor allem dann, wenn der Wrapper eine höhere Vertrauensstellung als Code besitzt, der ihn verwendet, einen eindeutigen Satz von Sicherheitsrisiken eröffnen.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-103">Wrapper code, especially where the wrapper has higher trust than code that uses it, can open a unique set of security weaknesses.</span></span> <span data-ttu-id="7a9e6-104">Alle Aktionen, die im Auftrag eines Aufrufers vorgenommen werden, bei denen die eingeschränkten Berechtigungen des Aufrufers nicht in der entsprechenden Sicherheitsüberprüfung enthalten sind, stellen eine potenzielle Schwachstelle dar, die ausgenutzt werden kann.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-104">Anything done on behalf of a caller, where the caller's limited permissions are not included in the appropriate security check, is a potential weakness to be exploited.</span></span>  
  
 <span data-ttu-id="7a9e6-105">Aktivieren Sie niemals Aktionen über den Wrapper, die der Aufrufer nicht selbst ausführen könnte.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-105">Never enable something through the wrapper that the caller could not do itself.</span></span> <span data-ttu-id="7a9e6-106">Dies ist besonders riskant, wenn Aktionen ausgeführt werden, die eine eingeschränkte Sicherheitsüberprüfung im Gegensatz zu einer vollständigen Stapelanforderung beinhalten.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-106">This is a special danger when doing something that involves a limited security check, as opposed to a full stack walk demand.</span></span> <span data-ttu-id="7a9e6-107">Wenn Überprüfungen einer Ebene ausgeführt werden, kann das Einfügen des Wrappercodes zwischen dem tatsächlichen Aufrufer und dem betreffenden API-Element leicht bewirken, dass die Sicherheitsüberprüfung erfolgreich ist, obwohl sie es nicht sein sollte. Auf diese Weise wird die Sicherheit geschwächt.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-107">When single-level checks are involved, interposing the wrapper code between the real caller and the API element in question can easily cause the security check to succeed when it should not, thereby weakening security.</span></span>  
  
## <a name="delegates"></a><span data-ttu-id="7a9e6-108">Delegaten</span><span class="sxs-lookup"><span data-stu-id="7a9e6-108">Delegates</span></span>  
 <span data-ttu-id="7a9e6-109">Die Delegatsicherheit unterscheidet sich in den verschiedenen Versionen von .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-109">Delegate security differs between versions of the .NET Framework.</span></span>  <span data-ttu-id="7a9e6-110">Dieser Abschnitt beschreibt das verschiedene Delegatverhalten und die damit verbundenen Sicherheitsüberlegungen.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-110">This section describes the different delegate behaviors and associated security considerations.</span></span>  
  
### <a name="in-version-10-and-11-of-the-net-framework"></a><span data-ttu-id="7a9e6-111">In Version 1.0 und 1.1 von .NET Framework</span><span class="sxs-lookup"><span data-stu-id="7a9e6-111">In version 1.0 and 1.1 of the .NET Framework</span></span>  
 <span data-ttu-id="7a9e6-112">Die Versionen 1.0 und 1.1 von .NET Framework führen die folgenden Sicherheitsaktionen für einen Delegatersteller und einen Delegataufrufer aus.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-112">Version 1.0 and 1.1 of the .NET Framework perform the following security actions against a delegate creator and a delegate caller.</span></span>  
  
- <span data-ttu-id="7a9e6-113">Wenn ein Delegat erstellt wird, werden Sicherheitsverknüpfungsaufrufe für die Zielmethode des Delegaten anhand der Berechtigungen des Delegaterstellers ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-113">When a delegate is created, security link demands on the delegate target method are performed against the grant set of the delegate creator.</span></span>  <span data-ttu-id="7a9e6-114">Wenn die Sicherheitsaktion nicht erfüllt werden kann, führt dies zu einer <xref:System.Security.SecurityException>.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-114">Failure to satisfy the security action results in a <xref:System.Security.SecurityException>.</span></span>  
  
- <span data-ttu-id="7a9e6-115">Wenn der Delegat aufgerufen wird, werden alle vorhandenen Sicherheitsforderungen für den Delegataufrufer ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-115">When the delegate is invoked, any existing security demands on the delegate caller are performed.</span></span>  
  
 <span data-ttu-id="7a9e6-116">Jedes Mal, wenn der Code einen <xref:System.Delegate> von weniger vertrauenswürdigem Code annimmt, der ihn aufrufen kann, müssen Sie sicherstellen, dass Sie den weniger vertrauenswürdigen Code nicht ermöglichen, seine Berechtigungen auszuweiten.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-116">Whenever your code takes a <xref:System.Delegate> from less-trusted code that might call it, make sure that you are not enabling the less-trusted code to escalate its permissions.</span></span> <span data-ttu-id="7a9e6-117">Wenn Sie einen Delegaten annehmen und später verwenden, befindet sich der Code, der den Delegaten erstellt hat, nicht in der Aufrufliste, und seine Berechtigungen werden nicht getestet, wenn Code in oder unter dem Delegaten versucht, einen geschützten Vorgang auszuführen.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-117">If you take a delegate and use it later, the code that created the delegate is not on the call stack and its permissions will not be tested if code in or under the delegate attempts a protected operation.</span></span> <span data-ttu-id="7a9e6-118">Wenn Ihr Code und und der Aufrufercode über höhere Berechtigungen als der Ersteller verfügen, kann der Ersteller den Aufrufpfad orchestrieren, ohne Teil der Aufrufliste zu sein.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-118">If your code and the caller code have higher privileges than the creator, the creator can orchestrate the call path without being part of the call stack.</span></span>  
  
### <a name="in-version-20-and-later-versions-of-the-net-framework"></a><span data-ttu-id="7a9e6-119">In Version 2,0 und höheren Versionen der .NET Framework</span><span class="sxs-lookup"><span data-stu-id="7a9e6-119">In version 2.0 and later versions of the .NET Framework</span></span>  
 <span data-ttu-id="7a9e6-120">Im Gegensatz zu früheren Versionen werden von Version 2,0 und höheren Versionen der .NET Framework Sicherheitsmaßnahmen gegen den Delegatersteller ausgeführt, wenn der Delegat erstellt und aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-120">Unlike previous versions, version 2.0 and later versions of the .NET Framework performs security action against the delegate creator when the delegate is created and called.</span></span>  
  
- <span data-ttu-id="7a9e6-121">Wenn ein Delegat erstellt wird, werden Sicherheitsverknüpfungsaufrufe für die Zielmethode des Delegaten anhand der Berechtigungen des Delegaterstellers ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-121">When a delegate is created, security link demands on the delegate target method are performed against the grant set of the delegate creator.</span></span>  <span data-ttu-id="7a9e6-122">Wenn die Sicherheitsaktion nicht erfüllt werden kann, führt dies zu einer <xref:System.Security.SecurityException>.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-122">Failure to satisfy the security action results in a <xref:System.Security.SecurityException>.</span></span>  
  
- <span data-ttu-id="7a9e6-123">Der Berechtigungssatz des Delegaterstellers wird auch während der Delegaterstellung erfasst und zusammen mit dem Delegaten gespeichert.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-123">The delegate creator's grant set is also captured during delegate creation and stored with the delegate.</span></span>  
  
- <span data-ttu-id="7a9e6-124">Wenn der Delegat aufgerufen wird, wird der erfasste Berechtigungssatz des Delegaterstellers zuerst anhand aller Forderungen im aktuellen Kontext ausgewertet, wenn der Delegatersteller und der Aufrufer zu unterschiedlichen Assemblys gehören.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-124">When the delegate is invoked, the delegate creator's captured grant set is first evaluated against any demands in the current context if the delegate creator and caller belong to different assemblies.</span></span>  <span data-ttu-id="7a9e6-125">Im nächsten Schritt werden alle vorhandenen Sicherheitsforderungen für den Delegataufrufer ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-125">Next, any existing security demands on the delegate caller are performed.</span></span>  
  
## <a name="link-demands-and-wrappers"></a><span data-ttu-id="7a9e6-126">Verknüpfungsaufrufe und Wrapper</span><span class="sxs-lookup"><span data-stu-id="7a9e6-126">Link demands and wrappers</span></span>  
 <span data-ttu-id="7a9e6-127">In der Sicherheitsinfrastruktur wurde ein besonderer Schutzmechanismus mit Verknüpfungsaufrufen verstärkt. Dies stellt jedoch noch immer eine Quelle für potenzielle Schwachstellen in Ihrem Code dar.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-127">A special protection case with link demands has been strengthened in the security infrastructure, but it is still a source of possible weakness in your code.</span></span>  
  
 <span data-ttu-id="7a9e6-128">Wenn voll vertrauenswürdiger Code eine Eigenschaft, ein Ereignis oder eine Methode aufruft, die durch [LinkDemand](link-demands.md)geschützt ist, wird der Aufruf erfolgreich ausgeführt, wenn die **LinkDemand** -Berechtigungsüberprüfung für den Aufrufer erfüllt ist.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-128">If fully trusted code calls a property, event, or method protected by a [LinkDemand](link-demands.md), the call succeeds if the **LinkDemand** permission check for the caller is satisfied.</span></span> <span data-ttu-id="7a9e6-129">Wenn der vollständig vertrauenswürdige Code eine Klasse verfügbar macht, die den Namen einer Eigenschaft annimmt und deren **Get** -Zugriffsmethode mithilfe von Reflektion aufruft, ist der Aufruf des **Get** -Accessors auch dann erfolgreich, wenn der Benutzercode nicht über das Recht für den Zugriff auf diese Eigenschaft verfügt.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-129">Additionally, if the fully trusted code exposes a class that takes the name of a property and calls its **get** accessor using reflection, that call to the **get** accessor succeeds even though the user code does not have the right to access this property.</span></span> <span data-ttu-id="7a9e6-130">Dies liegt daran, dass **LinkDemand** nur den unmittelbaren Aufrufer prüft, der voll vertrauenswürdiger Code ist.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-130">This is because the **LinkDemand** checks only the immediate caller, which is the fully trusted code.</span></span> <span data-ttu-id="7a9e6-131">Im Wesentlichen nimmt der vollständig vertrauenswürdige Code einen privilegierten Aufruf im Auftrag von Benutzercode vor, ohne sicherzustellen, dass der Code über die Berechtigung zum Ausführen dieses Aufrufs verfügt.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-131">In essence, the fully trusted code is making a privileged call on behalf of user code without making sure that the user code has the right to make that call.</span></span>  
  
 <span data-ttu-id="7a9e6-132">Um derartige Sicherheitslücken zu vermeiden, erweitert das Common Language Runtime die Überprüfung auf einen vollständigen Stapel Abruf bei jedem indirekten Aufruf einer Methode, eines Konstruktors, einer Eigenschaft oder eines Ereignisses, das durch einen **LinkDemand**geschützt wird.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-132">To help prevent such security holes, the common language runtime extends the check into a full stack-walking demand on any indirect call to a method, constructor, property, or event protected by a **LinkDemand**.</span></span> <span data-ttu-id="7a9e6-133">Dieser Schutz geht zu Lasten der Leistung und ändert die Semantik der Sicherheitsüberprüfung. Für die vollständige Stapelforderung kann ein Fehler auftreten, der bei der schnelleren Überprüfung einer Ebene nicht auftreten würde.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-133">This protection incurs some performance costs and changes the semantics of the security check; the full stack-walk demand might fail where the faster, one-level check would have passed.</span></span>  
  
## <a name="assembly-loading-wrappers"></a><span data-ttu-id="7a9e6-134">Wrapper zum Laden von Assemblys</span><span class="sxs-lookup"><span data-stu-id="7a9e6-134">Assembly loading wrappers</span></span>  
 <span data-ttu-id="7a9e6-135">Mehrere Methoden werden zum Laden von verwaltetem Code verwendet, z. B. <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>. Dabei werden Assemblys mit dem Beweis des Aufrufers geladen.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-135">Several methods used to load managed code, including <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>, load assemblies with the evidence of the caller.</span></span> <span data-ttu-id="7a9e6-136">Wenn Sie eine dieser Methoden in einen Wrapper einschließen, könnte das Sicherheitssystem die Berechtigung Ihres Codes anstelle der Berechtigungen des Aufrufers Ihres Wrappers zum Laden von Assemblys verwenden.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-136">If you wrap any of these methods, the security system could use your code's permission grant, instead of the permissions of the caller to your wrapper, to load the assemblies.</span></span> <span data-ttu-id="7a9e6-137">Sie sollten nicht zulassen, dass wenig vertrauenswürdiger Code anderen Code laden kann, dem höhere Berechtigungen als dem Aufrufer Ihres Wrappers gewährt wurden.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-137">You should not allow less-trusted code to load code that is granted higher permissions than those of the caller to your wrapper.</span></span>  
  
 <span data-ttu-id="7a9e6-138">Jeglicher Code, der eine vollständige Vertrauensstellung oder eine höhere Vertrauensstellung als ein möglicher Aufrufer (einschließlich eines Aufrufers mit Berechtigungen auf Internetebene) aufweist, kann die Sicherheit auf diese Weise herabsetzen.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-138">Any code that has full trust or significantly higher trust than a potential caller (including an Internet-permissions-level caller) could weaken security in this way.</span></span> <span data-ttu-id="7a9e6-139">Wenn Ihr Code über eine öffentliche Methode verfügt, die ein Bytearray annimmt und es an **Assembly. Load**übergibt und dadurch eine Assembly im Auftrag des Aufrufers erstellt, kann dies die Sicherheit unterbrechen.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-139">If your code has a public method that takes a byte array and passes it to **Assembly.Load**, thereby creating an assembly on the caller's behalf, it might break security.</span></span>  
  
 <span data-ttu-id="7a9e6-140">Dieses Problem betrifft die folgenden API-Elemente:</span><span class="sxs-lookup"><span data-stu-id="7a9e6-140">This issue applies to the following API elements:</span></span>  
  
- <xref:System.AppDomain.DefineDynamicAssembly%2A?displayProperty=nameWithType>  
  
- <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>  
  
- <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType>  
  
- <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>  
  
## <a name="demand-vs-linkdemand"></a><span data-ttu-id="7a9e6-141">"Demand" im Vergleich zu "LinkDemand"</span><span class="sxs-lookup"><span data-stu-id="7a9e6-141">Demand vs. LinkDemand</span></span>  
 <span data-ttu-id="7a9e6-142">Die deklarative Sicherheit stellt zwei Arten von Sicherheitsüberprüfungen bereit, die zwar ähnlich sind, jedoch sehr unterschiedliche Überprüfungen ausführen.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-142">Declarative security offers two kinds of security checks that are similar but perform very different checks.</span></span> <span data-ttu-id="7a9e6-143">Sie sollten beide Formen kennen, weil die falsche Auswahl zu schwacher Sicherheit oder Leistungverlusten führen kann.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-143">You should understand both forms because the wrong choice can result in weak security or performance loss.</span></span>  
  
 <span data-ttu-id="7a9e6-144">Die deklarative Sicherheit bietet die folgenden Sicherheitsüberprüfungen:</span><span class="sxs-lookup"><span data-stu-id="7a9e6-144">Declarative security offers the following security checks:</span></span>  
  
- <span data-ttu-id="7a9e6-145"><xref:System.Security.Permissions.SecurityAction.Demand> gibt den Stackwalk für die Codezugriffssicherheit an.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-145"><xref:System.Security.Permissions.SecurityAction.Demand> specifies the code access security stack walk.</span></span> <span data-ttu-id="7a9e6-146">Alle Aufrufer für den Stapel benötigen die angegebene Berechtigung oder Identität, um die Überprüfung zu bestehen.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-146">All callers on the stack must have the specified permission or identity to pass.</span></span> <span data-ttu-id="7a9e6-147">Die **Nachfrage** erfolgt bei jedem Aufruf, da der Stapel möglicherweise unterschiedliche Aufrufer enthält.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-147">**Demand** occurs on every call because the stack might contain different callers.</span></span> <span data-ttu-id="7a9e6-148">Wenn Sie eine Methode wiederholt aufrufen, tritt diese Sicherheitsüberprüfung jedes Mal auf.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-148">If you call a method repeatedly, this security check occurs each time.</span></span> <span data-ttu-id="7a9e6-149">Die **Nachfrage** ist ein guter Schutz vor Lock Angriffen. nicht autorisierter Code, der versucht, ihn zu durchlaufen, wird erkannt.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-149">**Demand** is good protection against luring attacks; unauthorized code trying to get through it will be detected.</span></span>  
  
- <span data-ttu-id="7a9e6-150">[LinkDemand](link-demands.md) erfolgt zum Zeitpunkt der JIT-Kompilierung (Just-in-Time) und überprüft nur den unmittelbaren Aufrufer.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-150">[LinkDemand](link-demands.md) happens at just-in-time (JIT) compilation time and checks only the immediate caller.</span></span> <span data-ttu-id="7a9e6-151">Diese Sicherheitsüberprüfung überprüft nicht den Aufrufer des Aufrufers.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-151">This security check does not check the caller's caller.</span></span> <span data-ttu-id="7a9e6-152">Nachdem diese Überprüfung erfolgreich war, werden unabhängig von der Anzahl der Aufrufe durch den Aufrufer keine weiteren Sicherheitsmaßnahmen ergriffen.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-152">Once this check passes, there is no additional security overhead no matter how many times the caller might call.</span></span> <span data-ttu-id="7a9e6-153">Es besteht jedoch auch kein Schutz vor Lockangriffen.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-153">However, there is also no protection from luring attacks.</span></span> <span data-ttu-id="7a9e6-154">Mit **LinkDemand**kann jeder Code, der den Test übergibt und auf den Code verweist, die Sicherheit beeinträchtigen, da bösartiger Code mithilfe des autorisierten Codes aufgerufen werden kann.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-154">With **LinkDemand**, any code that passes the test and can reference your code can potentially break security by allowing malicious code to call using the authorized code.</span></span> <span data-ttu-id="7a9e6-155">Verwenden Sie daher nicht **LinkDemand** , es sei denn, alle möglichen Schwächen können gründlich vermieden werden.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-155">Therefore, do not use **LinkDemand** unless all the possible weaknesses can be thoroughly avoided.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="7a9e6-156">In den .NET Framework 4 wurden Link Aufrufe durch das <xref:System.Security.SecurityCriticalAttribute>-Attribut in <xref:System.Security.SecurityRuleSet.Level2> Assemblys ersetzt.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-156">In the .NET Framework 4, link demands have been replaced by the <xref:System.Security.SecurityCriticalAttribute> attribute in <xref:System.Security.SecurityRuleSet.Level2> assemblies.</span></span> <span data-ttu-id="7a9e6-157">Der <xref:System.Security.SecurityCriticalAttribute> entspricht einem Link Aufruf für volle Vertrauenswürdigkeit. Sie wirkt sich jedoch auch auf Vererbungs Regeln aus.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-157">The <xref:System.Security.SecurityCriticalAttribute> is equivalent to a link demand for full trust; however, it also affects inheritance rules.</span></span> <span data-ttu-id="7a9e6-158">Weitere Informationen zu dieser Änderung finden Sie unter [Sicherheits transparenter Code, Ebene 2](security-transparent-code-level-2.md).</span><span class="sxs-lookup"><span data-stu-id="7a9e6-158">For more information about this change, see [Security-Transparent Code, Level 2](security-transparent-code-level-2.md).</span></span>  
  
 <span data-ttu-id="7a9e6-159">Die zusätzlichen Vorkehrungen, die bei der Verwendung von **LinkDemand** erforderlich sind, müssen einzeln programmiert werden. das Sicherheitssystem kann bei der Erzwingung helfen.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-159">The extra precautions required when using **LinkDemand** must be programmed individually; the security system can help with enforcement.</span></span> <span data-ttu-id="7a9e6-160">Jeder Fehler stellt ein Sicherheitsrisiko dar.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-160">Any mistake opens a security weakness.</span></span> <span data-ttu-id="7a9e6-161">Der gesamte autorisierte Code, der Ihren Code verwendet, muss für die Implementierung zusätzlicher Sicherheit verantwortlich sein, indem die folgenden Maßnahmen ergriffen werden:</span><span class="sxs-lookup"><span data-stu-id="7a9e6-161">All authorized code that uses your code must be responsible for implementing additional security by doing the following:</span></span>  
  
- <span data-ttu-id="7a9e6-162">Einschränken des Zugriffs des aufrufenden Codes auf die Klasse oder Assembly.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-162">Restricting the calling code's access to the class or assembly.</span></span>  
  
- <span data-ttu-id="7a9e6-163">Verwenden der gleichen Sicherheitsüberprüfungen für den aufrufenden Code, die für den Code verwendet werden, der aufgerufen wird, und Verpflichten seiner Aufrufer zu dieser Überprüfung.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-163">Placing the same security checks on the calling code that appear on the code being called and obligating its callers to do so.</span></span> <span data-ttu-id="7a9e6-164">Wenn Sie z. b. Code schreiben, der eine Methode aufruft, die mit einem **LinkDemand** für die <xref:System.Security.Permissions.SecurityPermission> mit dem angegebenen <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode>-Flag geschützt ist, sollte Ihre Methode für diese Berechtigung auch einen **LinkDemand** (oder eine höhere **Nachfrage**) erstellen.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-164">For example, if you write code that calls a method that is protected with a **LinkDemand** for the <xref:System.Security.Permissions.SecurityPermission> with the <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> flag specified, your method should also make a **LinkDemand** (or **Demand**, which is stronger) for this permission.</span></span> <span data-ttu-id="7a9e6-165">Die Ausnahme ist, wenn Ihr Code die von **LinkDemand**geschützte Methode auf eingeschränkte Weise verwendet, die Sie als sicher festlegen, wenn andere Sicherheitsmechanismen (z. b. Anforderungen) in Ihrem Code verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-165">The exception is if your code uses the **LinkDemand**-protected method in a limited way that you decide is safe, given other security protection mechanisms (such as demands) in your code.</span></span> <span data-ttu-id="7a9e6-166">In diesem Ausnahmefall übernimmt der Aufrufer die Verantwortung für die Herabsetzung des Sicherheitsschutzes des zugrunde liegenden Codes.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-166">In this exceptional case, the caller takes responsibility in weakening the security protection on the underlying code.</span></span>  
  
- <span data-ttu-id="7a9e6-167">Sicherstellen, dass die Aufrufer Ihres Codes den Code nicht veranlassen können, den geschützten Code in ihrem Auftrag aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-167">Ensuring that your code's callers cannot trick your code into calling the protected code on their behalf.</span></span> <span data-ttu-id="7a9e6-168">Dies bedeutet, dass Aufrufer den autorisierten Code nicht zwingen können, bestimmte Parameter an den geschützten Code zu übergeben oder Ergebnisse aus ihm abzurufen.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-168">In other words, callers cannot force the authorized code to pass specific parameters to the protected code, or to get results back from it.</span></span>  
  
### <a name="interfaces-and-link-demands"></a><span data-ttu-id="7a9e6-169">Schnittstellen und Verknüpfungsaufrufe</span><span class="sxs-lookup"><span data-stu-id="7a9e6-169">Interfaces and Link Demands</span></span>  
 <span data-ttu-id="7a9e6-170">Wenn eine virtuelle Methode, eine Eigenschaft oder ein Ereignis mit **LinkDemand** eine Basisklassen Methode überschreibt, muss die Basisklassen Methode auch denselben **LinkDemand** für die überschriebene Methode aufweisen, damit Sie wirksam ist.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-170">If a virtual method, property, or event with **LinkDemand** overrides a base class method, the base class method must also have the same **LinkDemand** for the overridden method in order to be effective.</span></span> <span data-ttu-id="7a9e6-171">Es ist möglich, dass bösartiger Code eine erneute Umwandlung in den Basistyp ausführt und die Methode der Basisklasse aufruft.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-171">It is possible for malicious code to cast back to the base type and call the base class method.</span></span> <span data-ttu-id="7a9e6-172">Beachten Sie außerdem, dass Verknüpfungsaufrufe Assemblys implizit hinzugefügt werden können, für die das Attribut <xref:System.Security.AllowPartiallyTrustedCallersAttribute> nicht auf Assemblyebene festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-172">Also note that link demands can be added implicitly to assemblies that do not have the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> assembly-level attribute.</span></span>  
  
 <span data-ttu-id="7a9e6-173">Eine bewährte Methode besteht darin, Methodenimplementierungen durch Verknüpfungsaufrufen zu schützen, wenn Schnittstellenmethoden ebenfalls Verknüpfungsaufrufe aufweisen.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-173">It is a good practice to protect method implementations with link demands when interface methods also have link demands.</span></span> <span data-ttu-id="7a9e6-174">Beachten Sie hinsichtlich der Verwendung von Verknüpfungsaufrufen mit Schnittstellen Folgendes:</span><span class="sxs-lookup"><span data-stu-id="7a9e6-174">Note the following about using link demands with interfaces:</span></span>  
  
- <span data-ttu-id="7a9e6-175">Wenn Sie einen **LinkDemand** in einer öffentlichen Methode einer Klasse platzieren, die eine Schnittstellen Methode implementiert, wird der **LinkDemand** nicht erzwungen, wenn Sie dann eine Umwandlung in die-Schnittstelle durchführt und die-Methode aufruft.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-175">If you place a **LinkDemand** on a public method of a class that implements an interface method, the **LinkDemand** will not be enforced if you then cast to the interface and call the method.</span></span> <span data-ttu-id="7a9e6-176">Da Sie in diesem Fall mit der-Schnittstelle verknüpft sind, wird nur der **LinkDemand** in der Schnittstelle berücksichtigt.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-176">In this case, because you linked against the interface, only the **LinkDemand** on the interface is honored.</span></span>  
  
 <span data-ttu-id="7a9e6-177">Überprüfen Sie die folgenden Elemente auf Sicherheitsprobleme:</span><span class="sxs-lookup"><span data-stu-id="7a9e6-177">Review the following items for security issues:</span></span>  
  
- <span data-ttu-id="7a9e6-178">Explizite Verknüpfungsaufrufe für Schnittstellenmethoden.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-178">Explicit link demands on interface methods.</span></span> <span data-ttu-id="7a9e6-179">Stellen Sie sicher, dass diese Verknüpfungsaufrufe den erwarteten Schutz bieten.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-179">Make sure these link demands offer the expected protection.</span></span> <span data-ttu-id="7a9e6-180">Ermitteln Sie, ob bösartiger Code mithilfe einer Umwandlung die Verknüpfungsaufrufe wie oben beschrieben umgehen kann.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-180">Determine whether malicious code can use a cast to get around the link demands as described previously.</span></span>  
  
- <span data-ttu-id="7a9e6-181">Virtuelle Methoden mit angewendeten Verknüpfungsaufrufen.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-181">Virtual methods with link demands applied.</span></span>  
  
- <span data-ttu-id="7a9e6-182">Typen und Schnittstellen, die sie implementieren.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-182">Types and the interfaces they implement.</span></span> <span data-ttu-id="7a9e6-183">Diese sollten Verknüpfungsaufrufe einheitlich verwenden.</span><span class="sxs-lookup"><span data-stu-id="7a9e6-183">These should use link demands consistently.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7a9e6-184">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="7a9e6-184">See also</span></span>

- [<span data-ttu-id="7a9e6-185">Richtlinien für das Schreiben von sicherem Code</span><span class="sxs-lookup"><span data-stu-id="7a9e6-185">Secure Coding Guidelines</span></span>](../../standard/security/secure-coding-guidelines.md)
