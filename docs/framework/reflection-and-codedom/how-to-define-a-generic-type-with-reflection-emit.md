---
title: 'Vorgehensweise: Definieren eines generischen Typs mit Reflektionsausgabe'
description: Hier erfahren Sie, wie Sie einen generischen Typ mit Reflexionsausgabe definieren. Erstellen Sie einen generischen Typ mit zwei Typparametern, und wenden Sie Klasseneinschränkungen, Schnittstelleneinschränkungen und mehr an.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- generics [.NET Framework], reflection emit
- generics [.NET Framework], dynamic types
- reflection emit, generic types
ms.assetid: 07d5f01a-7b5b-40ea-9b15-f21561098fe4
ms.openlocfilehash: bf308b07bf4b2a863b9825e7c8d9f412bdb6d1b8
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 09/15/2020
ms.locfileid: "90559212"
---
# <a name="how-to-define-a-generic-type-with-reflection-emit"></a><span data-ttu-id="113c6-104">Vorgehensweise: Definieren eines generischen Typs mit Reflektionsausgabe</span><span class="sxs-lookup"><span data-stu-id="113c6-104">How to: Define a Generic Type with Reflection Emit</span></span>
<span data-ttu-id="113c6-105">In diesem Thema wird gezeigt, wie ein einfacher generischer Typ mit zwei Typparametern erstellt wird, wie Klasseneinschränkungen, Schnittstelleneinschränkungen und bestimmte Einschränkungen für Typparameter angewandt werden und wie Member erstellt werden, die die Typparameter der Klasse als Parametertypen und Rückgabetypen verwenden.</span><span class="sxs-lookup"><span data-stu-id="113c6-105">This topic shows how to create a simple generic type with two type parameters, how to apply class constraints, interface constraints, and special constraints to the type parameters, and how to create members that use the type parameters of the class as parameter types and return types.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="113c6-106">Eine Methode ist nicht generisch, weil sie zu einem generischen Typ gehört und die Typparameter dieses Typs verwendet.</span><span class="sxs-lookup"><span data-stu-id="113c6-106">A method is not generic just because it belongs to a generic type and uses the type parameters of that type.</span></span> <span data-ttu-id="113c6-107">Eine Methode ist nur dann generisch, wenn sie über eine eigene Typparameterliste verfügt.</span><span class="sxs-lookup"><span data-stu-id="113c6-107">A method is generic only if it has its own type parameter list.</span></span> <span data-ttu-id="113c6-108">Die meisten Methoden für generische Typen sind nicht generisch, so auch in diesem Beispiel.</span><span class="sxs-lookup"><span data-stu-id="113c6-108">Most methods on generic types are not generic, as in this example.</span></span> <span data-ttu-id="113c6-109">Ein Beispiel für die Ausgabe einer generischen Methode finden Sie unter [Vorgehensweise: Definieren einer generischen Methode mit Reflektionsausgabe](how-to-define-a-generic-method-with-reflection-emit.md).</span><span class="sxs-lookup"><span data-stu-id="113c6-109">For an example of emitting a generic method, see [How to: Define a Generic Method with Reflection Emit](how-to-define-a-generic-method-with-reflection-emit.md).</span></span>  
  
### <a name="to-define-a-generic-type"></a><span data-ttu-id="113c6-110">So definieren Sie einen generischen Typ</span><span class="sxs-lookup"><span data-stu-id="113c6-110">To define a generic type</span></span>  
  
1. <span data-ttu-id="113c6-111">Definieren Sie eine dynamische Assembly mit der Bezeichnung `GenericEmitExample1`.</span><span class="sxs-lookup"><span data-stu-id="113c6-111">Define a dynamic assembly named `GenericEmitExample1`.</span></span> <span data-ttu-id="113c6-112">In diesem Beispiel wird die Assembly ausgeführt und auf einem Datenträger gespeichert, daher wird <xref:System.Reflection.Emit.AssemblyBuilderAccess.RunAndSave?displayProperty=nameWithType> angegeben.</span><span class="sxs-lookup"><span data-stu-id="113c6-112">In this example, the assembly is executed and saved to disk, so <xref:System.Reflection.Emit.AssemblyBuilderAccess.RunAndSave?displayProperty=nameWithType> is specified.</span></span>  
  
     [!code-cpp[EmitGenericType#2](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#2)]
     [!code-csharp[EmitGenericType#2](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#2)]
     [!code-vb[EmitGenericType#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#2)]  
  
2. <span data-ttu-id="113c6-113">Definieren Sie ein dynamisches Modul.</span><span class="sxs-lookup"><span data-stu-id="113c6-113">Define a dynamic module.</span></span> <span data-ttu-id="113c6-114">Eine Assembly besteht aus ausführbaren Modulen.</span><span class="sxs-lookup"><span data-stu-id="113c6-114">An assembly is made up of executable modules.</span></span> <span data-ttu-id="113c6-115">Der Modulname für eine Assembly mit nur einem Modul ist der gleiche wie der Assemblyname, und der Dateiname ist der Modulname plus eine Erweiterung.</span><span class="sxs-lookup"><span data-stu-id="113c6-115">For a single-module assembly, the module name is the same as the assembly name, and the file name is the module name plus an extension.</span></span>  
  
     [!code-cpp[EmitGenericType#3](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#3)]
     [!code-csharp[EmitGenericType#3](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#3)]
     [!code-vb[EmitGenericType#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#3)]  
  
3. <span data-ttu-id="113c6-116">Definieren Sie eine Klasse.</span><span class="sxs-lookup"><span data-stu-id="113c6-116">Define a class.</span></span> <span data-ttu-id="113c6-117">In diesem Beispiel heißt die Klasse `Sample`.</span><span class="sxs-lookup"><span data-stu-id="113c6-117">In this example, the class is named `Sample`.</span></span>  
  
     [!code-cpp[EmitGenericType#4](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#4)]
     [!code-csharp[EmitGenericType#4](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#4)]
     [!code-vb[EmitGenericType#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#4)]  
  
4. <span data-ttu-id="113c6-118">Definieren Sie die generischen Typparameter von `Sample`, indem Sie ein Array von Zeichenfolgen, das die Namen der Parameter enthält, an die <xref:System.Reflection.Emit.TypeBuilder.DefineGenericParameters%2A?displayProperty=nameWithType>-Methode übergeben.</span><span class="sxs-lookup"><span data-stu-id="113c6-118">Define the generic type parameters of `Sample` by passing an array of strings containing the names of the parameters to the <xref:System.Reflection.Emit.TypeBuilder.DefineGenericParameters%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="113c6-119">Dadurch wird die Klasse zu einem generischen Typ.</span><span class="sxs-lookup"><span data-stu-id="113c6-119">This makes the class a generic type.</span></span> <span data-ttu-id="113c6-120">Der Rückgabewert ist ein Array von <xref:System.Reflection.Emit.GenericTypeParameterBuilder>-Objekten, die Typparameter darstellen, die Sie in Ihrem ausgegebenen Code verwenden können.</span><span class="sxs-lookup"><span data-stu-id="113c6-120">The return value is an array of <xref:System.Reflection.Emit.GenericTypeParameterBuilder> objects representing the type parameters, which can be used in your emitted code.</span></span>  
  
     <span data-ttu-id="113c6-121">Im folgenden Code wird `Sample` zu einem generischen Typ mit den beiden Typparametern `TFirst` und `TSecond` gemacht.</span><span class="sxs-lookup"><span data-stu-id="113c6-121">In the following code, `Sample` becomes a generic type with type parameters `TFirst` and `TSecond`.</span></span> <span data-ttu-id="113c6-122">Damit der Code einfacher zu lesen ist, wird jede <xref:System.Reflection.Emit.GenericTypeParameterBuilder> in einer Variable mit dem gleichen Namen wie dem des Typparameters platziert.</span><span class="sxs-lookup"><span data-stu-id="113c6-122">To make the code easier to read, each <xref:System.Reflection.Emit.GenericTypeParameterBuilder> is placed in a variable with the same name as the type parameter.</span></span>  
  
     [!code-cpp[EmitGenericType#5](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#5)]
     [!code-csharp[EmitGenericType#5](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#5)]
     [!code-vb[EmitGenericType#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#5)]  
  
5. <span data-ttu-id="113c6-123">Fügen Sie den Typparametern besondere Einschränkungen hinzu.</span><span class="sxs-lookup"><span data-stu-id="113c6-123">Add special constraints to the type parameters.</span></span> <span data-ttu-id="113c6-124">In diesem Beispiel wird der Typparameter `TFirst` auf Verweistypen sowie auf Typen beschränkt, die parameterlose Konstruktoren besitzen.</span><span class="sxs-lookup"><span data-stu-id="113c6-124">In this example, type parameter `TFirst` is constrained to types that have parameterless constructors, and to reference types.</span></span>  
  
     [!code-cpp[EmitGenericType#6](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#6)]
     [!code-csharp[EmitGenericType#6](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#6)]
     [!code-vb[EmitGenericType#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#6)]  
  
6. <span data-ttu-id="113c6-125">Fügen Sie den Typparametern bei Bedarf Klassen- und Schnittstelleneinschränkungen hinzu.</span><span class="sxs-lookup"><span data-stu-id="113c6-125">Optionally add class and interface constraints to the type parameters.</span></span> <span data-ttu-id="113c6-126">In diesem Beispiel wird der Typparameter `TFirst` auf Typen beschränkt, die von der Basisklasse abgeleitet wurden, die vom in der Variable `baseType` enthaltenen <xref:System.Type>-Objekt dargestellt wird. Diese implementiert die Schnittstellen, dessen Typen in den Variablen `interfaceA` und `interfaceB` enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="113c6-126">In this example, type parameter `TFirst` is constrained to types that derive from the base class represented by the <xref:System.Type> object contained in the variable `baseType`, and that implement the interfaces whose types are contained in the variables `interfaceA` and `interfaceB`.</span></span> <span data-ttu-id="113c6-127">Das Codebeispiel enthält die Deklaration und die Zuweisung dieser Variablen.</span><span class="sxs-lookup"><span data-stu-id="113c6-127">See the code example for the declaration and assignment of these variables.</span></span>  
  
     [!code-cpp[EmitGenericType#7](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#7)]
     [!code-csharp[EmitGenericType#7](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#7)]
     [!code-vb[EmitGenericType#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#7)]  
  
7. <span data-ttu-id="113c6-128">Definieren Sie ein Feld.</span><span class="sxs-lookup"><span data-stu-id="113c6-128">Define a field.</span></span> <span data-ttu-id="113c6-129">In diesem Beispiel wird der Typ des Felds durch den Typparameter `TFirst` angegeben.</span><span class="sxs-lookup"><span data-stu-id="113c6-129">In this example, the type of the field is specified by type parameter `TFirst`.</span></span> <span data-ttu-id="113c6-130"><xref:System.Reflection.Emit.GenericTypeParameterBuilder> wird von <xref:System.Type> abgeleitet; Sie können also generische Typparameter immer dort benutzen, wo ein Typ verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="113c6-130"><xref:System.Reflection.Emit.GenericTypeParameterBuilder> derives from <xref:System.Type>, so you can use generic type parameters anywhere a type can be used.</span></span>  
  
     [!code-cpp[EmitGenericType#21](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#21)]
     [!code-csharp[EmitGenericType#21](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#21)]
     [!code-vb[EmitGenericType#21](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#21)]  
  
8. <span data-ttu-id="113c6-131">Definieren Sie eine Methode, die die Typparameter des generischen Typs verwendet.</span><span class="sxs-lookup"><span data-stu-id="113c6-131">Define a method that uses the type parameters of the generic type.</span></span> <span data-ttu-id="113c6-132">Beachten Sie, dass solche Methoden nicht generisch sind, es sei denn, sie weisen ihre eigenen Typparameterlisten auf.</span><span class="sxs-lookup"><span data-stu-id="113c6-132">Note that such methods are not generic unless they have their own type parameter lists.</span></span> <span data-ttu-id="113c6-133">Der folgende Code definiert eine `static`-Methode (`Shared` in Visual Basic), die ein Array von `TFirst` akzeptiert und eine `List<TFirst>` (`List(Of TFirst)` in Visual Basic) zurückgibt, die alle Elemente des Arrays enthält.</span><span class="sxs-lookup"><span data-stu-id="113c6-133">The following code defines a `static` method (`Shared` in Visual Basic) that takes an array of `TFirst` and returns a `List<TFirst>` (`List(Of TFirst)` in Visual Basic) containing all the elements of the array.</span></span> <span data-ttu-id="113c6-134">Um diese Methode zu definieren ist es erforderlich, den Typ `List<TFirst>` zu definieren, indem Sie <xref:System.Type.MakeGenericType%2A> auf der generischen Typdefinition `List<T>` aufrufen.</span><span class="sxs-lookup"><span data-stu-id="113c6-134">To define this method, it is necessary to create the type `List<TFirst>` by calling <xref:System.Type.MakeGenericType%2A> on the generic type definition, `List<T>`.</span></span> <span data-ttu-id="113c6-135">(Die `T` wird ausgelassen, wenn Sie den `typeof`-Operator (`GetType` in Visual Basic) verwenden, um die generische Typdefinition zu erhalten.) Der Parametertyp wird mithilfe der <xref:System.Type.MakeArrayType%2A>-Methode erstellt.</span><span class="sxs-lookup"><span data-stu-id="113c6-135">(The `T` is omitted when you use the `typeof` operator (`GetType` in Visual Basic) to get the generic type definition.) The parameter type is created by using the <xref:System.Type.MakeArrayType%2A> method.</span></span>  
  
     [!code-cpp[EmitGenericType#22](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#22)]
     [!code-csharp[EmitGenericType#22](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#22)]
     [!code-vb[EmitGenericType#22](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#22)]  
  
9. <span data-ttu-id="113c6-136">Geben Sie den Methodentext aus.</span><span class="sxs-lookup"><span data-stu-id="113c6-136">Emit the method body.</span></span> <span data-ttu-id="113c6-137">Der Methodentext enthält drei Opcodes, die das Eingabearray auf den Stapel laden, den `List<TFirst>`-Konstruktor aufrufen und zurückgeben, der `IEnumerable<TFirst>` nimmt (was die Eingabeelemente in die Liste lädt), wobei das neue <xref:System.Collections.Generic.List%601>-Objekt auf dem Stapel gelassen wird.</span><span class="sxs-lookup"><span data-stu-id="113c6-137">The method body consists of three opcodes that load the input array onto the stack, call the `List<TFirst>` constructor that takes `IEnumerable<TFirst>` (which does all the work of putting the input elements into the list), and return (leaving the new <xref:System.Collections.Generic.List%601> object on the stack).</span></span> <span data-ttu-id="113c6-138">Der schwierige Teil beim Ausgeben dieses Codes ist es, den Konstruktor abzurufen.</span><span class="sxs-lookup"><span data-stu-id="113c6-138">The difficult part of emitting this code is getting the constructor.</span></span>  
  
     <span data-ttu-id="113c6-139">Die <xref:System.Type.GetConstructor%2A>-Methode wird auf einer <xref:System.Reflection.Emit.GenericTypeParameterBuilder> nicht unterstützt, also ist es nicht möglich, den Konstruktor von `List<TFirst>` direkt zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="113c6-139">The <xref:System.Type.GetConstructor%2A> method is not supported on a <xref:System.Reflection.Emit.GenericTypeParameterBuilder>, so it is not possible to get the constructor of `List<TFirst>` directly.</span></span> <span data-ttu-id="113c6-140">Zunächst ist es erforderlich, den Konstruktor der generischen Typdefinition `List<T>` abzurufen und dann eine Methode aufzurufen, die ihn in den entsprechenden Konstruktor von `List<TFirst>` konvertiert.</span><span class="sxs-lookup"><span data-stu-id="113c6-140">First, it is necessary to get the constructor of the generic type definition `List<T>` and then to call a method that converts it to the corresponding constructor of `List<TFirst>`.</span></span>  
  
     <span data-ttu-id="113c6-141">Der Konstruktor, der für dieses Codebeispiel verwendet wird, nimmt eine `IEnumerable<T>`.</span><span class="sxs-lookup"><span data-stu-id="113c6-141">The constructor used for this code example takes an `IEnumerable<T>`.</span></span> <span data-ttu-id="113c6-142">Beachten Sie, dass dies jedoch nicht die generische Typdefinition der generischen Schnittstelle <xref:System.Collections.Generic.IEnumerable%601> ist. Der Typparameter `T` von `List<T>` muss stattdessen mit dem Typparameter `T` von `IEnumerable<T>` ersetzt werden.</span><span class="sxs-lookup"><span data-stu-id="113c6-142">Note, however, that this is not the generic type definition of the <xref:System.Collections.Generic.IEnumerable%601> generic interface; instead, the type parameter `T` from `List<T>` must be substituted for the type parameter `T` of `IEnumerable<T>`.</span></span> <span data-ttu-id="113c6-143">(Das klingt zunächst etwas kompliziert, da beide Typen über die Typparameter mit dem Namen `T` verfügen.</span><span class="sxs-lookup"><span data-stu-id="113c6-143">(This seems confusing only because both types have type parameters named `T`.</span></span> <span data-ttu-id="113c6-144">Darum verwendet dieses Codebeispiel die Namen `TFirst` und `TSecond`.) Um den Typ des Konstruktorarguments zu erhalten, beginnen Sie mit der generischen Typdefinition `IEnumerable<T>`, und rufen Sie <xref:System.Type.MakeGenericType%2A> mit dem ersten generischen Typparameter von `List<T>` ab.</span><span class="sxs-lookup"><span data-stu-id="113c6-144">That is why this code example uses the names `TFirst` and `TSecond`.) To get the type of the constructor argument, start with the generic type definition `IEnumerable<T>` and call <xref:System.Type.MakeGenericType%2A> with the first generic type parameter of `List<T>`.</span></span> <span data-ttu-id="113c6-145">Die Liste des Konstruktorarguments muss als Array übergeben werden, wobei in diesem Fall nur ein Argument vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="113c6-145">The constructor argument list must be passed as an array, with just one argument in this case.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="113c6-146">Die generische Typdefinition wird als `IEnumerable<>` ausgedrückt, wenn Sie den `typeof`-Operator in C# verwenden. Alternativ als `IEnumerable(Of )`, wenn Sie den `GetType`-Operator in Visual Basic verwenden.</span><span class="sxs-lookup"><span data-stu-id="113c6-146">The generic type definition is expressed as `IEnumerable<>` when you use the `typeof` operator in C#, or `IEnumerable(Of )` when you use the `GetType` operator in Visual Basic.</span></span>  
  
     <span data-ttu-id="113c6-147">Es ist nun möglich, den Konstruktor von `List<T>` abzurufen, indem Sie <xref:System.Type.GetConstructor%2A> auf der generischen Typdefinition aufrufen.</span><span class="sxs-lookup"><span data-stu-id="113c6-147">Now it is possible to get the constructor of `List<T>` by calling <xref:System.Type.GetConstructor%2A> on the generic type definition.</span></span> <span data-ttu-id="113c6-148">Um diesen Konstruktor in den entsprechenden Konstruktor von `List<TFirst>` zu konvertieren, übergeben Sie `List<TFirst>` und den Konstruktor von `List<T>` an die statische <xref:System.Reflection.Emit.TypeBuilder.GetConstructor%28System.Type%2CSystem.Reflection.ConstructorInfo%29?displayProperty=nameWithType>-Methode.</span><span class="sxs-lookup"><span data-stu-id="113c6-148">To convert this constructor to the corresponding constructor of `List<TFirst>`, pass `List<TFirst>` and the constructor from `List<T>` to the static <xref:System.Reflection.Emit.TypeBuilder.GetConstructor%28System.Type%2CSystem.Reflection.ConstructorInfo%29?displayProperty=nameWithType> method.</span></span>  
  
     [!code-cpp[EmitGenericType#23](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#23)]
     [!code-csharp[EmitGenericType#23](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#23)]
     [!code-vb[EmitGenericType#23](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#23)]  
  
10. <span data-ttu-id="113c6-149">Erstellen Sie den Typ, und Speichern Sie die Datei.</span><span class="sxs-lookup"><span data-stu-id="113c6-149">Create the type and save the file.</span></span>  
  
     [!code-cpp[EmitGenericType#8](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#8)]
     [!code-csharp[EmitGenericType#8](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#8)]
     [!code-vb[EmitGenericType#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#8)]  
  
11. <span data-ttu-id="113c6-150">Rufen Sie die Methode auf.</span><span class="sxs-lookup"><span data-stu-id="113c6-150">Invoke the method.</span></span> <span data-ttu-id="113c6-151">`ExampleMethod` ist nicht generisch, jedoch ist der zugehörige Typ generisch. Um also eine <xref:System.Reflection.MethodInfo> zu erhalten, die aufgerufen werden kann, ist es erforderlich, einen erstellten Typ aus der Typdefinition von `Sample` zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="113c6-151">`ExampleMethod` is not generic, but the type it belongs to is generic, so in order to get a <xref:System.Reflection.MethodInfo> that can be invoked it is necessary to create a constructed type from the type definition for `Sample`.</span></span> <span data-ttu-id="113c6-152">Der konstruierte Typ verwendet die `Example`-Klasse, die die Einschränkungen für `TFirst` erfüllt, da es sich hierbei um einen Verweistyp handelt und dieser über einen parameterlosen Standardkonstruktor verfügt, sowie die `ExampleDerived`-Klasse, die die Einschränkungen für `TSecond` erfüllt.</span><span class="sxs-lookup"><span data-stu-id="113c6-152">The constructed type uses the `Example` class, which satisfies the constraints on `TFirst` because it is a reference type and has a default parameterless constructor, and the `ExampleDerived` class which satisfies the constraints on `TSecond`.</span></span> <span data-ttu-id="113c6-153">(Den Code für `ExampleDerived` finden Sie im Beispielcodeabschnitt.) Diese beiden Typen werden an <xref:System.Type.MakeGenericType%2A> übergeben, um den konstruierten Typ zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="113c6-153">(The code for `ExampleDerived` can be found in the example code section.) These two types are passed to <xref:System.Type.MakeGenericType%2A> to create the constructed type.</span></span> <span data-ttu-id="113c6-154">Die <xref:System.Reflection.MethodInfo> wird dann mithilfe der <xref:System.Type.GetMethod%2A>-Methode abgerufen.</span><span class="sxs-lookup"><span data-stu-id="113c6-154">The <xref:System.Reflection.MethodInfo> is then obtained using the <xref:System.Type.GetMethod%2A> method.</span></span>  
  
     [!code-cpp[EmitGenericType#9](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#9)]
     [!code-csharp[EmitGenericType#9](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#9)]
     [!code-vb[EmitGenericType#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#9)]  
  
12. <span data-ttu-id="113c6-155">Der folgende Code erstellt ein Array von `Example`-Objekten, platziert dieses Array in einem Array des Typs <xref:System.Object>, der die Argumente der aufzurufenden Methode darstellt, und übergibt sie an die <xref:System.Reflection.MethodBase.Invoke%28System.Object%2CSystem.Object%5B%5D%29>-Methode.</span><span class="sxs-lookup"><span data-stu-id="113c6-155">The following code creates an array of `Example` objects, places that array in an array of type <xref:System.Object> representing the arguments of the method to be invoked, and passes them to the <xref:System.Reflection.MethodBase.Invoke%28System.Object%2CSystem.Object%5B%5D%29> method.</span></span> <span data-ttu-id="113c6-156">Das erste Argument der <xref:System.Reflection.MethodBase.Invoke%2A>-Methode ist ein NULL-Verweis, da die Methode `static` ist.</span><span class="sxs-lookup"><span data-stu-id="113c6-156">The first argument of the <xref:System.Reflection.MethodBase.Invoke%2A> method is a null reference because the method is `static`.</span></span>  
  
     [!code-cpp[EmitGenericType#10](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#10)]
     [!code-csharp[EmitGenericType#10](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#10)]
     [!code-vb[EmitGenericType#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#10)]  
  
## <a name="example"></a><span data-ttu-id="113c6-157">Beispiel</span><span class="sxs-lookup"><span data-stu-id="113c6-157">Example</span></span>  
 <span data-ttu-id="113c6-158">Das folgende Codebeispiel definiert eine Klasse namens `Sample`, zusammen mit einer Basisklasse und zwei Schnittstellen.</span><span class="sxs-lookup"><span data-stu-id="113c6-158">The following code example defines a class named `Sample`, along with a base class and two interfaces.</span></span> <span data-ttu-id="113c6-159">Das Programm definiert zwei generische Typparameter für `Sample` und wandelt sie in einen generischen Typ um.</span><span class="sxs-lookup"><span data-stu-id="113c6-159">The program defines two generic type parameters for `Sample`, turning it into a generic type.</span></span> <span data-ttu-id="113c6-160">Typparameter sind das Einzige, das einen Typ generisch macht.</span><span class="sxs-lookup"><span data-stu-id="113c6-160">Type parameters are the only thing that makes a type generic.</span></span> <span data-ttu-id="113c6-161">Das Programm stellt dies dar, indem eine Testnachricht vor und nach der Definition der Typparameter angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="113c6-161">The program shows this by displaying a test message before and after the definition of the type parameters.</span></span>  
  
 <span data-ttu-id="113c6-162">Der Typparameter `TSecond` wird auch zur Darstellung von Klassen- und Schnittstelleneinschränkungen verwendet. Hierzu wird die Basisklasse und die Schnittstellen verwendet, und der Typparameter `TFirst` wird zur Darstellung besonderer Einschränkungen verwendet.</span><span class="sxs-lookup"><span data-stu-id="113c6-162">The type parameter `TSecond` is used to demonstrate class and interface constraints, using the base class and interfaces, and the type parameter `TFirst` is used to demonstrate special constraints.</span></span>  
  
 <span data-ttu-id="113c6-163">Das Codebeispiel definiert ein Feld und eine Methode, indem die Typparameter der Klasse für den Feldtyp und für den Parameter sowie den Rückgabetyp der Methode verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="113c6-163">The code example defines a field and a method using the class's type parameters for the field type and for the parameter and return type of the method.</span></span>  
  
 <span data-ttu-id="113c6-164">Nachdem die `Sample`-Klasse erstellt wurde, wird die Methode aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="113c6-164">After the `Sample` class has been created, the method is invoked.</span></span>  
  
 <span data-ttu-id="113c6-165">Das Programm enthält eine Methode, die Informationen über einen generischen Typ auflistet, sowie eine Methode, die die besonderen Einschränkungen für einen Typparameter auflistet.</span><span class="sxs-lookup"><span data-stu-id="113c6-165">The program includes a method that lists information about a generic type, and a method that lists the special constraints on a type parameter.</span></span> <span data-ttu-id="113c6-166">Diese Methoden werden zur Darstellung von Informationen über die abgeschlossene `Sample`-Klasse verwendet.</span><span class="sxs-lookup"><span data-stu-id="113c6-166">These methods are used to display information about the finished `Sample` class.</span></span>  
  
 <span data-ttu-id="113c6-167">Das Programm speichert die abgeschlossenen Module als `GenericEmitExample1.dll` auf dem Datenträger, damit Sie sie mit dem [Ildasm.exe (IL-Disassembler)](../tools/ildasm-exe-il-disassembler.md) öffnen können und die MSIL für die `Sample`-Klasse untersuchen können.</span><span class="sxs-lookup"><span data-stu-id="113c6-167">The program saves the finished module to disk as `GenericEmitExample1.dll`, so you can open it with the [Ildasm.exe (IL Disassembler)](../tools/ildasm-exe-il-disassembler.md) and examine the MSIL for the `Sample` class.</span></span>  
  
 [!code-cpp[EmitGenericType#1](../../../samples/snippets/cpp/VS_Snippets_CLR/EmitGenericType/CPP/source.cpp#1)]
 [!code-csharp[EmitGenericType#1](../../../samples/snippets/csharp/VS_Snippets_CLR/EmitGenericType/CS/source.cs#1)]
 [!code-vb[EmitGenericType#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/EmitGenericType/VB/source.vb#1)]  
  
## <a name="see-also"></a><span data-ttu-id="113c6-168">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="113c6-168">See also</span></span>

- <xref:System.Reflection.Emit.GenericTypeParameterBuilder>
- <span data-ttu-id="113c6-169">[Verwenden der Reflektionsausgabe](/previous-versions/dotnet/netframework-4.0/3y322t50(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="113c6-169">[Using Reflection Emit](/previous-versions/dotnet/netframework-4.0/3y322t50(v=vs.100))</span></span>
- <span data-ttu-id="113c6-170">[Szenarios für die Reflektionsausgabe mit dynamischen Assemblys](/previous-versions/dotnet/netframework-4.0/tt9483fk(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="113c6-170">[Reflection Emit Dynamic Assembly Scenarios](/previous-versions/dotnet/netframework-4.0/tt9483fk(v=vs.100))</span></span>
