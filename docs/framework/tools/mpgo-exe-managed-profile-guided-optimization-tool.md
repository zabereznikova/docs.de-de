---
title: Mpgo.exe (verwaltetes, profilgesteuertes Optimierungstool)
description: Verwenden Sie „Mpgo.exe“, das Tool für die durch verwaltete Profile gesteuerte Optimierung. Mit diesem Tool optimieren Sie native Imageassemblys, die durch den Generator für native Images (Ngen.exe) erstellt wurden.
ms.date: 03/30/2017
helpviewer_keywords:
- Mpgo.exe
- training scenarios, generating profiles with
- Managed Profile Guided Optimization Tool
- Ngen.exe
- Ngen.exe, profilers and native images
ms.assetid: f6976502-a000-4fbe-aaf5-a7aab9ce4ec2
ms.openlocfilehash: 328c085035927b3f271a39a0ea3992dde29f5119
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/26/2020
ms.locfileid: "96279102"
---
# <a name="mpgoexe-managed-profile-guided-optimization-tool"></a><span data-ttu-id="16059-104">Mpgo.exe (verwaltetes, profilgesteuertes Optimierungstool)</span><span class="sxs-lookup"><span data-stu-id="16059-104">Mpgo.exe (Managed Profile Guided Optimization Tool)</span></span>

<span data-ttu-id="16059-105">Das verwaltete, profilgesteuerte Optimierungstool (Managed, Profile Guides Optimization Tool, Mpgo.exe) ist ein Befehlszeilentool, das allgemeine Endbenutzerszenarios verwendet, um die vom [Native Image Generator (Ngen.exe)](ngen-exe-native-image-generator.md) erstellten Assemblys nativer Bilder zu optimieren.</span><span class="sxs-lookup"><span data-stu-id="16059-105">The Managed Profile Guided Optimization Tool (Mpgo.exe) is a command-line tool that uses common end-user scenarios to optimize the native image assemblies that are created by the [Native Image Generator (Ngen.exe)](ngen-exe-native-image-generator.md).</span></span> <span data-ttu-id="16059-106">Mit diesem Tool können Sie Aus- und Weiterbildungsszenarien ausführen, die Profildaten generieren.</span><span class="sxs-lookup"><span data-stu-id="16059-106">This tool enables you to run training scenarios that generate profile data.</span></span> <span data-ttu-id="16059-107">Der [Native Image Generator (Ngen.exe) ](ngen-exe-native-image-generator.md) verwendet diese Daten, um die generierten Anwendungsassemblys nativer Bilder zu optimieren.</span><span class="sxs-lookup"><span data-stu-id="16059-107">The [Native Image Generator (Ngen.exe)](ngen-exe-native-image-generator.md) uses this data to optimize its generated native image application assemblies.</span></span> <span data-ttu-id="16059-108">Ein Aus- und Weiterbildungsszenario ist die Testausführung einer erwarteten Nutzung Ihrer Anwendung.</span><span class="sxs-lookup"><span data-stu-id="16059-108">A training scenario is a trial run of an expected use of your application.</span></span> <span data-ttu-id="16059-109">Mpgo.exe ist in Visual Studio Ultimate 2012 und höheren Versionen verfügbar.</span><span class="sxs-lookup"><span data-stu-id="16059-109">Mpgo.exe is available in Visual Studio Ultimate 2012 and later versions.</span></span> <span data-ttu-id="16059-110">Ab Visual Studio 2013 können Sie Mpgo.exe auch zum Optimieren von Windows 8.x Store-Apps verwenden.</span><span class="sxs-lookup"><span data-stu-id="16059-110">Starting with Visual Studio 2013, you can also use Mpgo.exe to optimize Windows 8.x Store apps.</span></span>

<span data-ttu-id="16059-111">Profilgesteuerte Optimierung verbessert Anwendungsstartzeit, Arbeitsspeicherauslastung (Workingsetgröße) und Durchsatz, indem Daten aus Trainingsszenarien erfasst und verwendet werden, um den Aufbau von systemeigenen Abbildern zu optimieren.</span><span class="sxs-lookup"><span data-stu-id="16059-111">Profile-guided optimization improves application startup time, memory utilization (working set size), and throughput by gathering data from training scenarios and using it to optimize the layout of native images.</span></span>

<span data-ttu-id="16059-112">Wenn Sie Leistungsprobleme bei Startzeit oder Workingsetgröße für Intermediate Language (IL)-Assemblys erkennen, empfehlen wir Ihnen zunächst die Verwendung von Ngen.exe, um Just-in-Time-Kompilierungsaufwände auszuschließen und die gemeinsame Verwendung von Code zu erleichtern.</span><span class="sxs-lookup"><span data-stu-id="16059-112">When you encounter performance issues with startup time and working set size for Intermediate Language (IL) assemblies, we recommend that you first use Ngen.exe to eliminate just-in-time (JIT) compilation costs and to facilitate code sharing.</span></span> <span data-ttu-id="16059-113">Wenn Sie weitere Verbesserungen benötigen, können Sie Mpgo.exe weiter zur Optimierung der Anwendung verwenden.</span><span class="sxs-lookup"><span data-stu-id="16059-113">If you need additional improvements, you can then use Mpgo.exe to further optimize your application.</span></span> <span data-ttu-id="16059-114">Sie können die Leistungsdaten von nicht optimiertem Assemblys systemeigener Abbilder als Baseline verwenden, um die Leistungszuwächse zu ermitteln.</span><span class="sxs-lookup"><span data-stu-id="16059-114">You can use the performance data from the un-optimized native image assemblies as a baseline to evaluate the performance gains.</span></span> <span data-ttu-id="16059-115">Das Verwenden von Mpgo.exe kann möglicherweise zu kürzeren Kaltstartzeiten und einer geringeren Workingsetgröße führen.</span><span class="sxs-lookup"><span data-stu-id="16059-115">Using Mpgo.exe may result in faster cold startup times and a smaller working set size.</span></span> <span data-ttu-id="16059-116">Durch Mpgo.exe werden IL-Assemblys Informationen hinzugefügt, die von Ngen.exe verwendet werden, um optimierte Assemblys von systemeigenen Abbildern zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="16059-116">Mpgo.exe adds information to IL assemblies that Ngen.exe uses to create optimized native image assemblies.</span></span> <span data-ttu-id="16059-117">Weitere Informationen finden Sie im Eintrag [Improving Launch Performance for your Desktop Applications (Verbessern der Startleistung für Desktopanwendungen)](https://devblogs.microsoft.com/dotnet/improving-launch-performance-for-your-desktop-applications/) im .NET-Blog.</span><span class="sxs-lookup"><span data-stu-id="16059-117">For more information, see the entry [Improving Launch Performance for your Desktop Applications](https://devblogs.microsoft.com/dotnet/improving-launch-performance-for-your-desktop-applications/) in the .NET blog.</span></span>

<span data-ttu-id="16059-118">Dieses Tool wird automatisch mit Visual Studio installiert.</span><span class="sxs-lookup"><span data-stu-id="16059-118">This tool is automatically installed with Visual Studio.</span></span> <span data-ttu-id="16059-119">Wenn Sie das Tool ausführen möchten, verwenden Sie die Developer-Eingabeaufforderung für Visual Studio oder die Visual Studio-Eingabeaufforderung in Windows 7 mit Administratoranmeldeinformationen, und geben Sie Folgendes an der Eingabeaufforderung ein.</span><span class="sxs-lookup"><span data-stu-id="16059-119">To run the tool, use the Developer Command Prompt for Visual Studio (or the Visual Studio Command Prompt in Windows 7) with administrator credentials, and type the following at the command prompt.</span></span> <span data-ttu-id="16059-120">Weitere Informationen finden Sie unter [Eingabeaufforderungen](developer-command-prompt-for-vs.md).</span><span class="sxs-lookup"><span data-stu-id="16059-120">For more information, see [Command Prompts](developer-command-prompt-for-vs.md).</span></span>

<span data-ttu-id="16059-121">Für Desktop-Apps:</span><span class="sxs-lookup"><span data-stu-id="16059-121">For desktop apps:</span></span>

```console
mpgo –Scenario <command> [-Import <directory>] –AssemblyList <assembly1>  <assembly2> ... -OutDir <directory> [options]
```

<span data-ttu-id="16059-122">Für Windows 8.x Store-Apps:</span><span class="sxs-lookup"><span data-stu-id="16059-122">For Windows 8.x Store apps:</span></span>

## <a name="syntax"></a><span data-ttu-id="16059-123">Syntax</span><span class="sxs-lookup"><span data-stu-id="16059-123">Syntax</span></span>

```console
mpgo –Scenario <packageName> -AppID <appId> -Timeout <seconds>
```

## <a name="parameters"></a><span data-ttu-id="16059-124">Parameter</span><span class="sxs-lookup"><span data-stu-id="16059-124">Parameters</span></span>

 <span data-ttu-id="16059-125">Groß-/Kleinschreibung wird für alle Argumente von Mpgo.exe ignoriert.</span><span class="sxs-lookup"><span data-stu-id="16059-125">All arguments to Mpgo.exe are case-insensitive.</span></span> <span data-ttu-id="16059-126">Befehlen wird ein Bindestrich vorangestellt.</span><span class="sxs-lookup"><span data-stu-id="16059-126">Commands are prefixed with a dash.</span></span>

> [!NOTE]
> <span data-ttu-id="16059-127">Sie können entweder `–Scenario` oder `–Import` als erforderlichen Befehl verwenden, aber nicht beide Befehle.</span><span class="sxs-lookup"><span data-stu-id="16059-127">You can use either `–Scenario` or `–Import` as a required command, but not both.</span></span> <span data-ttu-id="16059-128">Es wird keiner der erforderlichen Parameter verwendet, wenn Sie die Option `–Reset` angeben.</span><span class="sxs-lookup"><span data-stu-id="16059-128">None of the required parameters are used if you specify the `–Reset` option.</span></span>

|<span data-ttu-id="16059-129">Erforderlicher Parameter</span><span class="sxs-lookup"><span data-stu-id="16059-129">Required parameter</span></span>|<span data-ttu-id="16059-130">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="16059-130">Description</span></span>|
|------------------------|-----------------|
|<span data-ttu-id="16059-131">`-Scenario` \<*command*></span><span class="sxs-lookup"><span data-stu-id="16059-131">`-Scenario` \<*command*></span></span><br /><br /> <span data-ttu-id="16059-132">– oder –</span><span class="sxs-lookup"><span data-stu-id="16059-132">—or—</span></span><br /><br /> <span data-ttu-id="16059-133">`-Scenario` \<*packageName*></span><span class="sxs-lookup"><span data-stu-id="16059-133">`-Scenario` \<*packageName*></span></span><br /><br /> <span data-ttu-id="16059-134">- oder -</span><span class="sxs-lookup"><span data-stu-id="16059-134">-or-</span></span><br /><br /> <span data-ttu-id="16059-135">`-Import` \<*directory*></span><span class="sxs-lookup"><span data-stu-id="16059-135">`-Import` \<*directory*></span></span>|<span data-ttu-id="16059-136">Für Desktop-Apps verwenden Sie `–Scenario` zum Angeben des Befehls zum Ausführen der Anwendung, die Sie optimieren möchten, einschließlich aller Befehlszeilenargumente.</span><span class="sxs-lookup"><span data-stu-id="16059-136">For desktop apps, use `–Scenario` to specify the command to run the application you want to optimize, including any command-line arguments.</span></span> <span data-ttu-id="16059-137">Verwenden Sie drei Elemente von doppelten Anführungszeichen für *Befehl*, wenn es einen Pfad angibt, der Leerzeichen enthält, z.B: `mpgo.exe -scenario """C:\My App\myapp.exe""" -assemblylist """C:\My App\myapp.exe""" -outdir "C:\optimized files"`.</span><span class="sxs-lookup"><span data-stu-id="16059-137">Use three sets of double quotation marks around *command* if it specifies a path that includes spaces; for example: `mpgo.exe -scenario """C:\My App\myapp.exe""" -assemblylist """C:\My App\myapp.exe""" -outdir "C:\optimized files"`.</span></span> <span data-ttu-id="16059-138">Verwenden Sie keine doppelten Anführungszeichen, da sie nicht ordnungsgemäß funktionieren, wenn der *Befehl* Leerzeichen enthält.</span><span class="sxs-lookup"><span data-stu-id="16059-138">Do not use double quotation marks; they will not work correctly if *command* includes spaces.</span></span><br /><br /> <span data-ttu-id="16059-139">- oder -</span><span class="sxs-lookup"><span data-stu-id="16059-139">-or-</span></span><br /><br /> <span data-ttu-id="16059-140">Für Windows 8.x Store-Apps verwenden Sie `–Scenario` zum Angeben des Pakets, für das Sie Profilinformationen generieren möchten.</span><span class="sxs-lookup"><span data-stu-id="16059-140">For Windows 8.x Store apps, use `–Scenario` to specify the package that you want to generate profile information for.</span></span> <span data-ttu-id="16059-141">Wenn Sie den Paketanzeigenamen oder den Paketfamiliennamen anstelle des vollständigen Paketnamens angeben, wählt Mpgo.exe das Paket aus, das mit dem von Ihnen eingegebenen Namen übereinstimmt, sofern nur eine Übereinstimmung vorliegt.</span><span class="sxs-lookup"><span data-stu-id="16059-141">If you specify the package display name or the package family name instead of the full package name, Mpgo.exe will select the package that matches the name you provided if there is only one match.</span></span> <span data-ttu-id="16059-142">Wenn mehrere Pakete mit dem angegebenen Namen übereinstimmen, werden Sie von Mpgo.exe aufgefordert, ein Paket auszuwählen.</span><span class="sxs-lookup"><span data-stu-id="16059-142">If multiple packages match the specified name, Mpgo.exe will prompt you to choose a package.</span></span><br /><br /> <span data-ttu-id="16059-143">– oder –</span><span class="sxs-lookup"><span data-stu-id="16059-143">—or—</span></span><br /><br /> <span data-ttu-id="16059-144">Verwenden Sie `-Import` zum Angeben, dass Optimierungsdaten aus zuvor optimiertem Assemblys zum Optimieren der Assemblys in der `-AssemblyList` verwendet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="16059-144">Use `-Import` to specify that optimization data from previously optimized assemblies should be used to optimize the assemblies in `-AssemblyList`.</span></span> <span data-ttu-id="16059-145">*Verzeichnis* gibt das Verzeichnis an, das die zuvor optimierten Dateien enthält.</span><span class="sxs-lookup"><span data-stu-id="16059-145">*directory* specifies the directory that contains the previously optimized files.</span></span> <span data-ttu-id="16059-146">Die in `–AssemblyList` oder `–AssemblyListFile` angegebenen Assemblys sind die neuen Versionen der mit den Daten aus den importierten Dateien zu optimierenden Assemblys.</span><span class="sxs-lookup"><span data-stu-id="16059-146">The assemblies specified in `–AssemblyList` or `–AssemblyListFile` are the new versions of the assemblies to be optimized using the data from the imported files.</span></span> <span data-ttu-id="16059-147">Das Verwenden der Optimierungsdaten aus früheren Versionen der Assemblys ermöglicht Ihnen die Optimierung neuer Versionen, ohne erneute Ausführung des Szenarios.</span><span class="sxs-lookup"><span data-stu-id="16059-147">Using optimization data from older version of assemblies enables you to optimize newer versions of assemblies without re-running the scenario.</span></span>  <span data-ttu-id="16059-148">Wenn die importierten und die neuen Assemblys jedoch erheblich unterschiedlichen Code enthalten, sind die Optimierungsdaten nicht effektiv.</span><span class="sxs-lookup"><span data-stu-id="16059-148">However, if the imported and target assemblies include significantly different code, the optimization data will be ineffective.</span></span> <span data-ttu-id="16059-149">Die Assemblynamen, die in `–AssemblyList` oder `–AssemblyListFile` angegeben werden, müssen im Verzeichnis vorhanden sein, das durch `–Import`*verzeichnis* angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="16059-149">The assembly names specified in `–AssemblyList` or `–AssemblyListFile` must be present in the directory specified by `–Import`*directory*.</span></span> <span data-ttu-id="16059-150">Verwenden Sie drei Elemente von doppelten Anführungszeichen für *Verzeichnis*, wenn es einen Pfad angibt, der Leerzeichen enthält.</span><span class="sxs-lookup"><span data-stu-id="16059-150">Use three sets of double quotation marks around *directory* if it specifies a path that includes spaces.</span></span><br /><br /> <span data-ttu-id="16059-151">Sie müssen entweder `–Scenario` oder `–Import` angeben, jedoch nicht beide.</span><span class="sxs-lookup"><span data-stu-id="16059-151">You must specify either `–Scenario` or `–Import`, but not both parameters.</span></span>|
|<span data-ttu-id="16059-152">`-OutDir` \<*directory*></span><span class="sxs-lookup"><span data-stu-id="16059-152">`-OutDir` \<*directory*></span></span>|<span data-ttu-id="16059-153">Das Verzeichnis, in dem die optimierten Assemblys gespeichert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="16059-153">The directory in which to place the optimized assemblies.</span></span> <span data-ttu-id="16059-154">Wenn eine Assembly bereits im Ausgabeverzeichnisordner vorhanden ist, wird eine neue Kopie erstellt und eine Indexnummer an den Namen angefügt, beispielsweise „*assemblyname*-1.exe“.</span><span class="sxs-lookup"><span data-stu-id="16059-154">If an assembly already exists in the output directory folder, a new copy is created and an index number is appended to its name; for example: *assemblyname*-1.exe.</span></span> <span data-ttu-id="16059-155">Verwenden Sie doppelte Anführungszeichen um *Verzeichnis*, wenn es einen Pfad angibt, der Leerzeichen enthält.</span><span class="sxs-lookup"><span data-stu-id="16059-155">Use double quotation marks around *directory* if it specifies a path that contains spaces.</span></span>|
|<span data-ttu-id="16059-156">`-AssemblyList` \<*assembly1 assembly2 ...*></span><span class="sxs-lookup"><span data-stu-id="16059-156">`-AssemblyList` \<*assembly1 assembly2 ...*></span></span><br /><br /> <span data-ttu-id="16059-157">– oder –</span><span class="sxs-lookup"><span data-stu-id="16059-157">—or—</span></span><br /><br /> <span data-ttu-id="16059-158">`-AssemblyListFile` \<*file*></span><span class="sxs-lookup"><span data-stu-id="16059-158">`-AssemblyListFile` \<*file*></span></span>|<span data-ttu-id="16059-159">Eine Liste von Assemblys (einschließlich EXE- und DLL-Dateien), getrennt durch Leerzeichen, von denen Sie Profilinformationen sammeln möchten.</span><span class="sxs-lookup"><span data-stu-id="16059-159">A list of assemblies (including .exe and .dll files), separated by spaces, that you want collect profile information about.</span></span> <span data-ttu-id="16059-160">Sie können `C:\Dir\*.dll` oder `*.dll` angeben, um alle Assemblys im festgelegten oder aktuellen Arbeitsverzeichnis auszuwählen.</span><span class="sxs-lookup"><span data-stu-id="16059-160">You can specify `C:\Dir\*.dll` or `*.dll` to select all the assemblies in the designated or current working directory.</span></span> <span data-ttu-id="16059-161">Weitere Informationen finden Sie im Abschnitt Hinweise.</span><span class="sxs-lookup"><span data-stu-id="16059-161">See the Remarks section for more information.</span></span><br /><br /> <span data-ttu-id="16059-162">– oder –</span><span class="sxs-lookup"><span data-stu-id="16059-162">—or—</span></span><br /><br /> <span data-ttu-id="16059-163">Eine Textdatei, die die Liste der Assemblys enthält, von denen Sie Profilinformationen sammeln möchten, muss die Assemblys zeilenweise enthalten.</span><span class="sxs-lookup"><span data-stu-id="16059-163">A text file that contains the list of assemblies you want to collect profile information about, listed one assembly per line.</span></span> <span data-ttu-id="16059-164">Verwenden Sie eine Assemblydateiliste, wenn ein Assemblyname mit einem Bindestrich (-) beginnt oder benennen die Assembly um.</span><span class="sxs-lookup"><span data-stu-id="16059-164">If an assembly name begins with a hyphen (-), use an assembly file list or rename the assembly.</span></span>|
|<span data-ttu-id="16059-165">`-AppID` \<*appId*></span><span class="sxs-lookup"><span data-stu-id="16059-165">`-AppID` \<*appId*></span></span>|<span data-ttu-id="16059-166">Die ID der Anwendung im angegebenen Paket.</span><span class="sxs-lookup"><span data-stu-id="16059-166">The ID of the application in the specified package.</span></span> <span data-ttu-id="16059-167">Wenn Sie den Platzhalter (\*) verwenden, versucht „Mpgo.exe“ die AppIDs im Paket aufzulisten und führt bei einem Fehler ein Fallback auf „\<*package_family_name*>!App“ durch.</span><span class="sxs-lookup"><span data-stu-id="16059-167">If you use the wildcard (\*), Mpgo.exe will try to enumerate the AppIDs in the package and will fall back to \<*package_family_name*>!App if it fails.</span></span> <span data-ttu-id="16059-168">Wenn Sie eine Zeichenfolge mit einem vorangestellten Ausrufezeichen (!) angeben, wird Mpgo.exe den Paketfamiliennamen mit dem übergebenen Argument verketten.</span><span class="sxs-lookup"><span data-stu-id="16059-168">If you specify a string that is prefixed by an exclamation point (!), Mpgo.exe will concatenate the package family name with the argument provided.</span></span>|
|<span data-ttu-id="16059-169">`-Timeout` \<*seconds*></span><span class="sxs-lookup"><span data-stu-id="16059-169">`-Timeout` \<*seconds*></span></span>|<span data-ttu-id="16059-170">Die Zeitspanne, in der die Windows 8.x Store-App ausgeführt werden kann, bevor die App beendet wird.</span><span class="sxs-lookup"><span data-stu-id="16059-170">The amount of time to allow the Windows 8.x Store app to run before the app exits.</span></span>|

|<span data-ttu-id="16059-171">Optionale Parameter</span><span class="sxs-lookup"><span data-stu-id="16059-171">Optional parameter</span></span>|<span data-ttu-id="16059-172">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="16059-172">Description</span></span>|
|------------------------|-----------------|
|`-64bit`|<span data-ttu-id="16059-173">Instrumentiert die Assemblys für 64-Bit-Systeme.</span><span class="sxs-lookup"><span data-stu-id="16059-173">Instruments the assemblies for 64-bit systems.</span></span>  <span data-ttu-id="16059-174">Sie müssen diesen Parameter für 64-Bit-Assemblys angeben, auch wenn Ihre Assembly sich selbst als 64-Bit deklariert.</span><span class="sxs-lookup"><span data-stu-id="16059-174">You must specify this parameter for 64-bit assemblies, even if your assembly declares itself as 64 bit.</span></span>|
|<span data-ttu-id="16059-175">`-ExeConfig` \<*filename*></span><span class="sxs-lookup"><span data-stu-id="16059-175">`-ExeConfig` \<*filename*></span></span>|<span data-ttu-id="16059-176">Gibt die Konfigurationsdatei an, die in Ihrem Szenario verwendet wird, um Versions- und Loaderinformationen bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="16059-176">Specifies the configuration file that your scenario uses to provide version and loader information.</span></span>|
|`-f`|<span data-ttu-id="16059-177">Erzwingt die Aufnahme der Profildaten in eine binäre Assembly, selbst wenn diese signiert ist.</span><span class="sxs-lookup"><span data-stu-id="16059-177">Forces the inclusion of the profile data in a binary assembly, even if it's signed.</span></span>  <span data-ttu-id="16059-178">Wenn die Assembly signiert ist, muss sie erneut signiert werden, andernfalls kann die Assembly nicht geladen oder ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="16059-178">If the assembly is signed, it must be re-signed; otherwise, the assembly will fail to load and run.</span></span>|
|`-Reset`|<span data-ttu-id="16059-179">Setzt die Umgebung zurück, um so sicherzustellen, dass eine abgebrochene Sitzung zur Profilerstellung keine Assemblys beeinflusst, und wird dann beendet.</span><span class="sxs-lookup"><span data-stu-id="16059-179">Resets the environment to make certain that an aborted profiling session doesn't affect your assemblies, and then quits.</span></span> <span data-ttu-id="16059-180">Die Umgebung wird standardmäßig vor und nach einer Profilerstellungssitzung zurückgesetzt.</span><span class="sxs-lookup"><span data-stu-id="16059-180">The environment is reset by default before and after a profiling session.</span></span>|
|<span data-ttu-id="16059-181">`-Timeout` \<*time in seconds*></span><span class="sxs-lookup"><span data-stu-id="16059-181">`-Timeout` \<*time in seconds*></span></span>|<span data-ttu-id="16059-182">Gibt die Profilerstellungsdauer in Sekunden an.</span><span class="sxs-lookup"><span data-stu-id="16059-182">Specifies the profiling duration in seconds.</span></span> <span data-ttu-id="16059-183">Verwenden Sie einen Wert, der etwas über den beobachteten Startzeiten für GUI-Anwendungen liegt.</span><span class="sxs-lookup"><span data-stu-id="16059-183">Use a value that is slightly more than your observed startup times for GUI applications.</span></span> <span data-ttu-id="16059-184">Am Ende des Timeouts werden die Profildaten erfasst, obwohl die Anwendung weiterhin ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="16059-184">At the end of the time-out period, the profile data is recorded although the application continues to run.</span></span> <span data-ttu-id="16059-185">Wenn Sie diese Option nicht festlegen, wird das Erstellen eines Profils bis zum Beenden der Anwendung fortgesetzt und die Daten dann aufgezeichnet.</span><span class="sxs-lookup"><span data-stu-id="16059-185">If you don't set this option, profiling will continue until application shutdown, at which time the data will be recorded.</span></span>|
|`-LeaveNativeImages`|<span data-ttu-id="16059-186">Gibt an, dass die systemeigenen instrumentierten Abbilder nach dem Ausführen des Szenarios nicht entfernt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="16059-186">Specifies that the instrumented native images shouldn't be removed after running the scenario.</span></span> <span data-ttu-id="16059-187">Diese Option wird hauptsächlich verwendet, wenn Sie die Anwendung abrufen, die Sie für das laufende Szenario angegeben haben.</span><span class="sxs-lookup"><span data-stu-id="16059-187">This option is primarily used when you're getting the application that you specified for the scenario running.</span></span> <span data-ttu-id="16059-188">Es verhindert die Neuerstellung von systemeigenen Abbildern für spätere Ausführungen von Mpgo.exe.</span><span class="sxs-lookup"><span data-stu-id="16059-188">It will prevent the recreation of native images for subsequent runs of Mpgo.exe.</span></span> <span data-ttu-id="16059-189">Wenn Sie die Ausführung der Anwendung abgeschlossen haben, sind bei Angabe dieser Option möglicherweise verwaiste systemeigene Abbilder im Cache vorhanden.</span><span class="sxs-lookup"><span data-stu-id="16059-189">When you have finished running your application, there may be orphaned native images in the cache if you specify this option.</span></span> <span data-ttu-id="16059-190">Führen Sie in diesem Fall „Mpgo.exe“ mit demselben Szenario und Assemblys erneut aus und verwenden Sie dabei den `–RemoveNativeImages`-Parameter, um diese systemeigenen Abbilder zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="16059-190">In this case, run Mpgo.exe with the same scenario and assembly list and use the `–RemoveNativeImages` parameter to remove these native images.</span></span>|
|`-RemoveNativeImages`|<span data-ttu-id="16059-191">Bereinigt eine Ausführung mit der Angabe `–LeaveNativeImages`.</span><span class="sxs-lookup"><span data-stu-id="16059-191">Cleans up from a run where `–LeaveNativeImages` was specified.</span></span> <span data-ttu-id="16059-192">Wenn Sie `-RemoveNativeImages` angeben, werden von „Mpgo.exe“ alle Argumente außer `-64bit` und `–AssemblyList` ignoriert, alle instrumentierten systemeigenen Abbilder entfernt und das Programm beendet.</span><span class="sxs-lookup"><span data-stu-id="16059-192">If you specify `-RemoveNativeImages`, Mpgo.exe ignores any arguments except `-64bit` and `–AssemblyList`, and exits after removing all instrumented native images.</span></span>|

## <a name="remarks"></a><span data-ttu-id="16059-193">Hinweise</span><span class="sxs-lookup"><span data-stu-id="16059-193">Remarks</span></span>

 <span data-ttu-id="16059-194">Sie können sowohl `–AssemblyList` and `- AssemblyListFile` mehrmals in der Befehlszeile verwenden.</span><span class="sxs-lookup"><span data-stu-id="16059-194">You can use both `–AssemblyList` and `- AssemblyListFile` multiple times on the command line.</span></span>

 <span data-ttu-id="16059-195">Wenn Sie keine vollständigen Pfadnamen bei der Angabe der Assemblys angeben, sucht Mpgo.exe im aktuellen Verzeichnis.</span><span class="sxs-lookup"><span data-stu-id="16059-195">If you do not specify full path names when specifying assemblies, Mpgo.exe looks in the current directory.</span></span> <span data-ttu-id="16059-196">Wenn Sie einen falschen Pfad angeben, wird von Mpgo.exe eine Fehlermeldung ausgegeben, jedoch mit der Generierung der Daten für andere Assemblys fortgefahren.</span><span class="sxs-lookup"><span data-stu-id="16059-196">If you specify an incorrect path, Mpgo.exe displays an error message but continues to generate data for other assemblies.</span></span> <span data-ttu-id="16059-197">Wenn Sie eine Assembly angeben, die nicht während des Trainingsszenarios geladen wurde, werden keine Trainingsdaten für diese Assembly generiert.</span><span class="sxs-lookup"><span data-stu-id="16059-197">If you specify an assembly that is not loaded during the training scenario, no training data is generated for that assembly.</span></span>

 <span data-ttu-id="16059-198">Wenn sich eine Assembly aus der Liste im globalen Assemblycache befindet, wird sie nicht aktualisiert, um die Profilinformationen zu enthalten.</span><span class="sxs-lookup"><span data-stu-id="16059-198">If an assembly in the list is in the global assembly cache, it will not be updated to contain the profile information.</span></span>  <span data-ttu-id="16059-199">Entfernen Sie sie aus dem globalen Assemblycache zum Erfassen von Profilinformationen.</span><span class="sxs-lookup"><span data-stu-id="16059-199">Remove it from the global assembly cache to collect profile information.</span></span>

 <span data-ttu-id="16059-200">Die Verwendung von Ngen.exe und von Mpgo.exe wird nur für große verwaltete Anwendungen empfohlen, da der Vorteil vorkompilierter systemeigener Abbilder in der Regel nur deutlich wird, wenn ein erheblicher Anteil an JIT-Kompilierung zur Laufzeit eingespart wird.</span><span class="sxs-lookup"><span data-stu-id="16059-200">The use of Ngen.exe and Mpgo.exe is recommended only for large managed applications, because the benefit of precompiled native images is typically seen only when it eliminates significant JIT compilation at run time.</span></span> <span data-ttu-id="16059-201">„mpgo.exe“ mit "Hello World"-Anwendungen auszuführen, die kein sehr umfangreiches Workingset aufweisen, bringt keine Vorteile. Möglicherweise kann „mpgo.exe“ sogar keine Profildaten erfassen.</span><span class="sxs-lookup"><span data-stu-id="16059-201">Running Mpgo.exe on "Hello World" style applications that aren’t working-set intensive will not provide any benefits, and Mpgo.exe may even fail to gather profile data.</span></span>

> [!NOTE]
> <span data-ttu-id="16059-202">Ngen.exe und Mpgo.exe werden für ASP.NET-Anwendungen und Windows Communication Foundation (WCF)-Dienste nicht empfohlen.</span><span class="sxs-lookup"><span data-stu-id="16059-202">Ngen.exe and Mpgo.exe are not recommended for ASP.NET applications and Windows Communication Foundation (WCF) services.</span></span>

## <a name="to-use-mpgoexe"></a><span data-ttu-id="16059-203">So verwenden Sie Mpgo.exe</span><span class="sxs-lookup"><span data-stu-id="16059-203">To Use Mpgo.exe</span></span>

1. <span data-ttu-id="16059-204">Verwenden Sie einen Computer, auf dem Visual Studio Ultimate 2012 und Ihre Anwendung installiert ist.</span><span class="sxs-lookup"><span data-stu-id="16059-204">Use a computer that has the Visual Studio Ultimate 2012 and your application installed.</span></span>

2. <span data-ttu-id="16059-205">Führen Sie Mpgo.exe als Administrator mit den erforderlichen Parametern aus.</span><span class="sxs-lookup"><span data-stu-id="16059-205">Run Mpgo.exe as an administrator with the necessary parameters.</span></span>  <span data-ttu-id="16059-206">Beispielbefehle finden Sie im nächsten Abschnitt.</span><span class="sxs-lookup"><span data-stu-id="16059-206">See the next section for sample commands.</span></span>

     <span data-ttu-id="16059-207">Die optimierten Intermediate Language (IL)- Assemblys werden in dem Ordner erstellt, der durch den `–OutDir`-Parameter angegeben wird (in den Beispielen ist dies der Ordner `C:\Optimized` ).</span><span class="sxs-lookup"><span data-stu-id="16059-207">The optimized intermediate language (IL) assemblies are created in the folder specified by the `–OutDir` parameter (in the examples, this is the `C:\Optimized` folder).</span></span>

3. <span data-ttu-id="16059-208">Ersetzen Sie die für Ngen.exe verwendeten IL-Assemblys mit den neuen IL-Assemblys, die die Profilinformationen von dem Verzeichnis enthalten, das mit `–OutDir` angegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="16059-208">Replace the IL assemblies you used for Ngen.exe  with the new IL assemblies that contain the profile information from the directory specified by `–OutDir`.</span></span>

4. <span data-ttu-id="16059-209">Das Anwendungssetup (mithilfe der von Mpgo.exe bereitgestellten Abbilder) installiert optimierte systemeigene Abbilder.</span><span class="sxs-lookup"><span data-stu-id="16059-209">The application setup (using the images provided by Mpgo.exe) will install optimized native images.</span></span>

## <a name="suggested-workflow"></a><span data-ttu-id="16059-210">Workflowvorschläge</span><span class="sxs-lookup"><span data-stu-id="16059-210">Suggested Workflow</span></span>

1. <span data-ttu-id="16059-211">Erstellen Sie einen Satz optimierter IL-Assemblys, indem Sie Mpgo.exe mit dem `–Scenario`-Parameter verwenden.</span><span class="sxs-lookup"><span data-stu-id="16059-211">Create a set of optimized IL assemblies by using Mpgo.exe with the `–Scenario` parameter.</span></span>

2. <span data-ttu-id="16059-212">Fügen Sie der Quellcodeverwaltung die optimierten IL-Assemblys hinzu.</span><span class="sxs-lookup"><span data-stu-id="16059-212">Check the optimized IL assemblies into source control.</span></span>

3. <span data-ttu-id="16059-213">Im Buildprozess rufen Sie Mpgo.exe mit dem `–Import`-Parameter als Postbuildschritt auf, um optimierte IL-Abbilder zu generieren, die „Ngen.exe“ übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="16059-213">In the build process, call Mpgo.exe with the `–Import` parameter as a post-build step to generate optimized IL images to pass to Ngen.exe.</span></span>

 <span data-ttu-id="16059-214">Dieser Prozess stellt sicher, dass alle Assemblys optimierte Daten haben.</span><span class="sxs-lookup"><span data-stu-id="16059-214">This process ensures that all assemblies have optimization data.</span></span> <span data-ttu-id="16059-215">Durch häufiges Einchecken aktualisierter optimierter Assemblys (Schritte 1 und 2) werden die Leistungszahlen für die gesamte Produktentwicklung konsistenter.</span><span class="sxs-lookup"><span data-stu-id="16059-215">If you check in updated optimized assemblies (steps 1 and 2) more frequently, the performance numbers will be more consistent throughout product development.</span></span>

## <a name="using-mpgoexe-from-visual-studio"></a><span data-ttu-id="16059-216">Verwenden von Mpgo.exe in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="16059-216">Using Mpgo.exe from Visual Studio</span></span>

 <span data-ttu-id="16059-217">Sie können Mpgo.exe von Visual Studio (siehe den Artikel [Vorgehensweise: Angeben von Buildereignissen (C#)](/visualstudio/ide/how-to-specify-build-events-csharp)) mit den folgenden Einschränkungen ausführen:</span><span class="sxs-lookup"><span data-stu-id="16059-217">You can run Mpgo.exe from Visual Studio (see the article [How to: Specify Build Events (C#)](/visualstudio/ide/how-to-specify-build-events-csharp)) with the following restrictions:</span></span>

- <span data-ttu-id="16059-218">Sie können Pfade in Anführungszeichen nicht mit nachgestellten Schrägstrichen verwenden, da Visual Studio-Makros standardmäßig nachgestellte Schrägstriche verwenden.</span><span class="sxs-lookup"><span data-stu-id="16059-218">You cannot use quoted paths with trailing slash marks, because Visual Studio macros also use trailing slash marks by default.</span></span> <span data-ttu-id="16059-219">(`–OutDir "C:\Output Folder\"` ist zum Beispiel ungültig.) Um diese Einschränkung zu umgehen, können Sie den nachgestellten Schrägstrich mit einem Escapezeichen versehen.</span><span class="sxs-lookup"><span data-stu-id="16059-219">(For example, `–OutDir "C:\Output Folder\"` is invalid.) To work around this restriction, you can escape the trailing slash.</span></span> <span data-ttu-id="16059-220">(Verwenden Sie stattdessen z. B. `-OutDir "$(OutDir)\"`.)</span><span class="sxs-lookup"><span data-stu-id="16059-220">(For example, use `-OutDir "$(OutDir)\"` instead.)</span></span>

- <span data-ttu-id="16059-221">Standardmäßig befindet sich Mpgo.exe nicht im Visual Studio-Buildpfad.</span><span class="sxs-lookup"><span data-stu-id="16059-221">By default, Mpgo.exe is not on the Visual Studio build path.</span></span> <span data-ttu-id="16059-222">Sie müssen entweder Visual Studio den Pfad hinzufügen oder auf der Mpgo-Befehlszeile den vollständigen Pfad angeben.</span><span class="sxs-lookup"><span data-stu-id="16059-222">You must either add the path to Visual Studio or specify the full path on the Mpgo command line.</span></span> <span data-ttu-id="16059-223">Sie können entweder `–Scenario` oder `–Import` als Parameter im Postbuildereignis in Visual Studio angeben.</span><span class="sxs-lookup"><span data-stu-id="16059-223">You can use either the `–Scenario` or the `–Import` parameter in the post-build event in Visual Studio.</span></span> <span data-ttu-id="16059-224">Der typische Vorgang ist jedoch die einmalige Verwendung von `–Scenario` über eine Visual Studio Developer-Eingabeaufforderung. Dann wird `–Import` verwendet, um die optimierten Assemblys nach den einzelnen Builds zu aktualisieren. Beispiel: `"C:\Program Files\Microsoft Visual Studio 11.0\Team Tools\Performance Tools\mpgo.exe" -import "$(OutDir)tmp" -assemblylist "$(TargetPath)" -outdir "$(OutDir)\"`.</span><span class="sxs-lookup"><span data-stu-id="16059-224">However, the typical process is to use `–Scenario` one time from a Developer Command Prompt for Visual Studio, and then use `–Import` to update the optimized assemblies after each build; for example:  `"C:\Program Files\Microsoft Visual Studio 11.0\Team Tools\Performance Tools\mpgo.exe" -import "$(OutDir)tmp" -assemblylist "$(TargetPath)" -outdir "$(OutDir)\"`.</span></span>

<a name="samples"></a>

## <a name="examples"></a><span data-ttu-id="16059-225">Beispiele</span><span class="sxs-lookup"><span data-stu-id="16059-225">Examples</span></span>

 <span data-ttu-id="16059-226">Der folgende Mpgo.exe-Befehl aus einer Developer-Eingabeaufforderung für Visual Studio optimiert eine Steuer-Anwendung:</span><span class="sxs-lookup"><span data-stu-id="16059-226">The following Mpgo.exe command from a Developer Command Prompt for Visual Studio optimizes a tax application:</span></span>

```console
mpgo –scenario "C:\MyApp\MyTax.exe /params par" –AssemblyList Mytax.dll MyTaxUtil2011.dll –OutDir C:\Optimized –TimeOut 15
```

 <span data-ttu-id="16059-227">Der folgende Mpgo.exe-Befehl optimiert eine Sound-Anwendung:</span><span class="sxs-lookup"><span data-stu-id="16059-227">The following Mpgo.exe command optimizes a sound application:</span></span>

```console
mpgo –scenario "C:\MyApp\wav2wma.exe –input song1.wav –output song1.wma" –AssemblyList transcode.dll –OutDir C:\Optimized –TimeOut 15
```

 <span data-ttu-id="16059-228">Der folgende Mpgo.exe-Befehl verwendet Daten aus zuvor optimierten Assemblys, um spätere Versionen der Assemblys zu optimieren:</span><span class="sxs-lookup"><span data-stu-id="16059-228">The following Mpgo.exe command uses data from previously optimized assemblies to optimize newer versions of the assemblies:</span></span>

```console
mpgo.exe -import "C:\Optimized" -assemblylist "C:\MyApp\MyTax.dll" "C:\MyApp\MyTaxUtil2011.dll" -outdir C:\ReOptimized
```

## <a name="see-also"></a><span data-ttu-id="16059-229">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="16059-229">See also</span></span>

- [<span data-ttu-id="16059-230">Ngen.exe (Native Image Generator)</span><span class="sxs-lookup"><span data-stu-id="16059-230">Ngen.exe (Native Image Generator)</span></span>](ngen-exe-native-image-generator.md)
- [<span data-ttu-id="16059-231">Eingabeaufforderungen</span><span class="sxs-lookup"><span data-stu-id="16059-231">Command Prompts</span></span>](developer-command-prompt-for-vs.md)
- [<span data-ttu-id="16059-232">Improving Launch Performance for your Desktop Applications (Verbessern der Startleistung für Desktopanwendungen)</span><span class="sxs-lookup"><span data-stu-id="16059-232">Improving Launch Performance for your Desktop Applications</span></span>](https://devblogs.microsoft.com/dotnet/improving-launch-performance-for-your-desktop-applications/)
- [<span data-ttu-id="16059-233">Übersicht: Leistungsverbesserungen in .NET Framework 4.5</span><span class="sxs-lookup"><span data-stu-id="16059-233">An Overview of Performance Improvements in .NET Framework 4.5</span></span>](/archive/msdn-magazine/2012/april/clr-an-overview-of-performance-improvements-in-net-4-5)
