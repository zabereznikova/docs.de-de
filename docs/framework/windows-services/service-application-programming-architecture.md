---
title: Programmierarchitektur für Dienstanwendungen
description: Hier erfahren Sie mehr über die Programmierarchitektur für Dienstanwendungen. Windows-Dienstanwendungen basieren auf einer Klasse, die von System.ServiceProcess.ServiceBase erbt.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- ServiceController components, programming architecture
- ServiceBase class, service states
- Windows Service applications, code model
- services, programming architecture
- ServiceController class
- services, states
- ServiceProcessInstaller class, service application code model
- Windows Service applications, states
ms.assetid: 83230026-d068-4174-97ff-e264c896eb2f
ms.openlocfilehash: 386311228abb08600acc249e80702c724c137900
ms.sourcegitcommit: 97405ed212f69b0a32faa66a5d5fae7e76628b68
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/01/2020
ms.locfileid: "91609264"
---
# <a name="service-application-programming-architecture"></a><span data-ttu-id="e28fe-104">Programmierarchitektur für Dienstanwendungen</span><span class="sxs-lookup"><span data-stu-id="e28fe-104">Service Application Programming Architecture</span></span>
<span data-ttu-id="e28fe-105">Windows-Dienstanwendungen basieren auf einer Klasse, die aus der Klasse <xref:System.ServiceProcess.ServiceBase?displayProperty=nameWithType> erbt.</span><span class="sxs-lookup"><span data-stu-id="e28fe-105">Windows Service applications are based on a class that inherits from the <xref:System.ServiceProcess.ServiceBase?displayProperty=nameWithType> class.</span></span> <span data-ttu-id="e28fe-106">Wenn Sie das Verhalten Ihres Diensts bestimmen möchten, können Sie Methoden aus dieser Klasse außer Kraft setzen und ihre Funktionen definieren.</span><span class="sxs-lookup"><span data-stu-id="e28fe-106">You override methods from this class and define functionality for them to determine how your service behaves.</span></span>  
  
 <span data-ttu-id="e28fe-107">Folgende Klassen sind wesentlich in die Diensterstellung eingebunden:</span><span class="sxs-lookup"><span data-stu-id="e28fe-107">The main classes involved in service creation are:</span></span>  
  
- <span data-ttu-id="e28fe-108"><xref:System.ServiceProcess.ServiceBase?displayProperty=nameWithType>: Beim Erstellen eines Diensts setzen Sie Methoden aus der Klasse <xref:System.ServiceProcess.ServiceBase> außer Kraft und definieren den Code, um zu bestimmen, wie Ihr Dienst in dieser geerbten Klasse funktioniert.</span><span class="sxs-lookup"><span data-stu-id="e28fe-108"><xref:System.ServiceProcess.ServiceBase?displayProperty=nameWithType> — You override methods from the <xref:System.ServiceProcess.ServiceBase> class when creating a service and define the code to determine how your service functions in this inherited class.</span></span>  
  
- <span data-ttu-id="e28fe-109"><xref:System.ServiceProcess.ServiceProcessInstaller?displayProperty=nameWithType> und <xref:System.ServiceProcess.ServiceInstaller?displayProperty=nameWithType>: Mithilfe dieser Klassen lässt sich Ihr Dienst installieren und deinstallieren.</span><span class="sxs-lookup"><span data-stu-id="e28fe-109"><xref:System.ServiceProcess.ServiceProcessInstaller?displayProperty=nameWithType> and <xref:System.ServiceProcess.ServiceInstaller?displayProperty=nameWithType> —You use these classes to install and uninstall your service.</span></span>  
  
 <span data-ttu-id="e28fe-110">Darüber hinaus kann die Klasse <xref:System.ServiceProcess.ServiceController> für die Bearbeitung des Diensts selbst verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="e28fe-110">In addition, a class named <xref:System.ServiceProcess.ServiceController> can be used to manipulate the service itself.</span></span> <span data-ttu-id="e28fe-111">Diese Klasse ist nicht in die Erstellung eines Diensts eingebunden, kann jedoch für das Starten und Beenden des Diensts, für die Übergabe von Befehlen und für die Rückgabe einer Reihe von Enumerationen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="e28fe-111">This class is not involved in the creation of a service, but can be used to start and stop the service, pass commands to it, and return a series of enumerations.</span></span>  
  
## <a name="defining-your-services-behavior"></a><span data-ttu-id="e28fe-112">Definieren des Verhaltens Ihres Diensts</span><span class="sxs-lookup"><span data-stu-id="e28fe-112">Defining Your Service's Behavior</span></span>  
 <span data-ttu-id="e28fe-113">In Ihrer Dienstklasse setzen Sie die Funktionen der Basisklasse außer Kraft, die bestimmen, was geschieht, wenn der Status Ihres Diensts im Dienststeuerungs-Manager geändert wird.</span><span class="sxs-lookup"><span data-stu-id="e28fe-113">In your service class, you override base class functions that determine what happens when the state of your service is changed in the Services Control Manager.</span></span> <span data-ttu-id="e28fe-114">Die Klasse <xref:System.ServiceProcess.ServiceBase> macht folgende Methoden verfügbar, die Sie außer Kraft setzen können, um benutzerdefiniertes Verhalten hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="e28fe-114">The <xref:System.ServiceProcess.ServiceBase> class exposes the following methods, which you can override to add custom behavior.</span></span>  
  
|<span data-ttu-id="e28fe-115">Methode</span><span class="sxs-lookup"><span data-stu-id="e28fe-115">Method</span></span>|<span data-ttu-id="e28fe-116">Grund für die Außerkraftsetzung</span><span class="sxs-lookup"><span data-stu-id="e28fe-116">Override to</span></span>|  
|------------|-----------------|  
|<xref:System.ServiceProcess.ServiceBase.OnStart%2A>|<span data-ttu-id="e28fe-117">Angabe, welche Maßnahmen ergriffen werden sollten, wenn Ihr Dienst ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="e28fe-117">Indicate what actions should be taken when your service starts running.</span></span> <span data-ttu-id="e28fe-118">Sie müssen in dieser Prozedur Code schreiben, damit Ihr Dienst sinnvolle Arbeit leistet.</span><span class="sxs-lookup"><span data-stu-id="e28fe-118">You must write code in this procedure for your service to perform useful work.</span></span>|  
|<xref:System.ServiceProcess.ServiceBase.OnPause%2A>|<span data-ttu-id="e28fe-119">Angabe, was geschehen soll, wenn Ihr Dienst angehalten wird.</span><span class="sxs-lookup"><span data-stu-id="e28fe-119">Indicate what should happen when your service is paused.</span></span>|  
|<xref:System.ServiceProcess.ServiceBase.OnStop%2A>|<span data-ttu-id="e28fe-120">Angabe, was geschehen soll, wenn Ihr Dienst beendet wird.</span><span class="sxs-lookup"><span data-stu-id="e28fe-120">Indicate what should happen when your service stops running.</span></span>|  
|<xref:System.ServiceProcess.ServiceBase.OnContinue%2A>|<span data-ttu-id="e28fe-121">Angabe, was geschehen soll, wenn Ihr Dienst wieder aufgenommen wird und normal funktioniert, nachdem er angehalten wurde.</span><span class="sxs-lookup"><span data-stu-id="e28fe-121">Indicate what should happen when your service resumes normal functioning after being paused.</span></span>|  
|<xref:System.ServiceProcess.ServiceBase.OnShutdown%2A>|<span data-ttu-id="e28fe-122">Angabe, was unmittelbar vor dem Herunterfahren Ihres Systems geschehen soll, wenn Ihr Dienst zu diesem Zeitpunkt ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="e28fe-122">Indicate what should happen just prior to your system shutting down, if your service is running at that time.</span></span>|  
|<xref:System.ServiceProcess.ServiceBase.OnCustomCommand%2A>|<span data-ttu-id="e28fe-123">Angabe, was geschehen soll, wenn Ihr Dienst einen benutzerdefinierten Befehl empfängt.</span><span class="sxs-lookup"><span data-stu-id="e28fe-123">Indicate what should happen when your service receives a custom command.</span></span> <span data-ttu-id="e28fe-124">Weitere Informationen zu benutzerdefinierten Befehlen finden Sie auf MSDN Online.</span><span class="sxs-lookup"><span data-stu-id="e28fe-124">For more information on custom commands, see MSDN online.</span></span>|  
|<xref:System.ServiceProcess.ServiceBase.OnPowerEvent%2A>|<span data-ttu-id="e28fe-125">Angabe, wie der Dienst reagieren soll, wenn ein Energieverwaltungsereignis empfangen wird, wie z.B. ein niedriger Akkustand oder ein ausgesetzter Vorgang.</span><span class="sxs-lookup"><span data-stu-id="e28fe-125">Indicate how the service should respond when a power management event is received, such as a low battery or suspended operation.</span></span>|  
  
> [!NOTE]
> <span data-ttu-id="e28fe-126">Diese Methoden stellen Status dar, die der Dienst in seiner Lebensdauer durchläuft: Er geht von einem Status in den nächsten über.</span><span class="sxs-lookup"><span data-stu-id="e28fe-126">These methods represent states that the service moves through in its lifetime; the service transitions from one state to the next.</span></span> <span data-ttu-id="e28fe-127">So wird der Dienst niemals auf den Befehl <xref:System.ServiceProcess.ServiceBase.OnContinue%2A> reagieren, bevor nicht <xref:System.ServiceProcess.ServiceBase.OnStart%2A> aufgerufen wurde.</span><span class="sxs-lookup"><span data-stu-id="e28fe-127">For example, you will never get the service to respond to an <xref:System.ServiceProcess.ServiceBase.OnContinue%2A> command before <xref:System.ServiceProcess.ServiceBase.OnStart%2A> has been called.</span></span>  
  
 <span data-ttu-id="e28fe-128">Es gibt einige andere Eigenschaften und Methoden, die von Interesse sind.</span><span class="sxs-lookup"><span data-stu-id="e28fe-128">There are several other properties and methods that are of interest.</span></span> <span data-ttu-id="e28fe-129">Dazu gehören:</span><span class="sxs-lookup"><span data-stu-id="e28fe-129">These include:</span></span>  
  
- <span data-ttu-id="e28fe-130">Die Methode <xref:System.ServiceProcess.ServiceBase.Run%2A> in der Klasse <xref:System.ServiceProcess.ServiceBase>.</span><span class="sxs-lookup"><span data-stu-id="e28fe-130">The <xref:System.ServiceProcess.ServiceBase.Run%2A> method on the <xref:System.ServiceProcess.ServiceBase> class.</span></span> <span data-ttu-id="e28fe-131">Dies ist der Haupteinstiegspunkt für den Dienst.</span><span class="sxs-lookup"><span data-stu-id="e28fe-131">This is the main entry point for the service.</span></span> <span data-ttu-id="e28fe-132">Wenn Sie einen Dienst mit der Windows-Dienstvorlage erstellen, wird Code in die Methode `Main` Ihrer Anwendung eingefügt, um den Dienst auszuführen.</span><span class="sxs-lookup"><span data-stu-id="e28fe-132">When you create a service using the Windows Service template, code is inserted in your application's `Main` method to run the service.</span></span> <span data-ttu-id="e28fe-133">Dieser Code sieht wie folgt aus:</span><span class="sxs-lookup"><span data-stu-id="e28fe-133">This code looks like this:</span></span>  
  
     [!code-csharp[VbRadconService#6](../../../samples/snippets/csharp/VS_Snippets_VBCSharp/VbRadconService/CS/MyNewService.cs#6)]
     [!code-vb[VbRadconService#6](../../../samples/snippets/visualbasic/VS_Snippets_VBCSharp/VbRadconService/VB/MyNewService.vb#6)]  
  
    > [!NOTE]
    > <span data-ttu-id="e28fe-134">In diesen Beispielen wird ein Array vom Typ <xref:System.ServiceProcess.ServiceBase> verwendet, in das jeder Dienst hinzugefügt werden kann, den Ihre App enthält. Anschließend können sämtliche Dienste zusammen ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="e28fe-134">These examples use an array of type <xref:System.ServiceProcess.ServiceBase>, into which each service your application contains can be added, and then all of the services can be run together.</span></span> <span data-ttu-id="e28fe-135">Wenn Sie nur einen Dienst erstellen, empfiehlt es sich jedoch, nicht das Array zu verwenden, sondern einfach ein neues Objekt zu deklarieren, das aus <xref:System.ServiceProcess.ServiceBase> erbt, und dieses Objekt auszuführen.</span><span class="sxs-lookup"><span data-stu-id="e28fe-135">If you are only creating a single service, however, you might choose not to use the array and simply declare a new object inheriting from <xref:System.ServiceProcess.ServiceBase> and then run it.</span></span> <span data-ttu-id="e28fe-136">Ein Beispiel finden Sie unter [Gewusst wie: Programmgesteuertes Schreiben von Diensten](how-to-write-services-programmatically.md).</span><span class="sxs-lookup"><span data-stu-id="e28fe-136">For an example, see [How to: Write Services Programmatically](how-to-write-services-programmatically.md).</span></span>  
  
- <span data-ttu-id="e28fe-137">Eine Reihe von Eigenschaften in der Klasse <xref:System.ServiceProcess.ServiceBase>.</span><span class="sxs-lookup"><span data-stu-id="e28fe-137">A series of properties on the <xref:System.ServiceProcess.ServiceBase> class.</span></span> <span data-ttu-id="e28fe-138">Mit diesen Eigenschaften wird bestimmt, welche Methoden in Ihrem Dienst aufgerufen werden können.</span><span class="sxs-lookup"><span data-stu-id="e28fe-138">These determine what methods can be called on your service.</span></span> <span data-ttu-id="e28fe-139">Wenn die Eigenschaft <xref:System.ServiceProcess.ServiceBase.CanStop%2A> beispielsweise auf `true` festgelegt wird, kann die Methode <xref:System.ServiceProcess.ServiceBase.OnStop%2A> in Ihrem Dienst aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="e28fe-139">For example, when the <xref:System.ServiceProcess.ServiceBase.CanStop%2A> property is set to `true`, the <xref:System.ServiceProcess.ServiceBase.OnStop%2A> method on your service can be called.</span></span> <span data-ttu-id="e28fe-140">Wenn die Eigenschaft <xref:System.ServiceProcess.ServiceBase.CanPauseAndContinue%2A> auf `true` festgelegt wird, können die Methoden <xref:System.ServiceProcess.ServiceBase.OnPause%2A> und <xref:System.ServiceProcess.ServiceBase.OnContinue%2A> aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="e28fe-140">When the <xref:System.ServiceProcess.ServiceBase.CanPauseAndContinue%2A> property is set to `true`, the <xref:System.ServiceProcess.ServiceBase.OnPause%2A> and <xref:System.ServiceProcess.ServiceBase.OnContinue%2A> methods can be called.</span></span> <span data-ttu-id="e28fe-141">Wenn Sie eine dieser Eigenschaften auf `true` festlegen, sollten Sie anschließend die Verarbeitung für die zugeordneten Methoden außer Kraft setzen und definieren.</span><span class="sxs-lookup"><span data-stu-id="e28fe-141">When you set one of these properties to `true`, you should then override and define processing for the associated methods.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="e28fe-142">Ihr Dienst muss mindestens <xref:System.ServiceProcess.ServiceBase.OnStart%2A> und <xref:System.ServiceProcess.ServiceBase.OnStop%2A> außer Kraft setzen, um hilfreich zu sein.</span><span class="sxs-lookup"><span data-stu-id="e28fe-142">Your service must override at least <xref:System.ServiceProcess.ServiceBase.OnStart%2A> and <xref:System.ServiceProcess.ServiceBase.OnStop%2A> to be useful.</span></span>  
  
 <span data-ttu-id="e28fe-143">Sie können auch die Komponente <xref:System.ServiceProcess.ServiceController> verwenden, um mit dem vorhandenen Dienst zu kommunizieren und sein Verhalten zu steuern.</span><span class="sxs-lookup"><span data-stu-id="e28fe-143">You can also use a component called the <xref:System.ServiceProcess.ServiceController> to communicate with and control the behavior of an existing service.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e28fe-144">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="e28fe-144">See also</span></span>

- [<span data-ttu-id="e28fe-145">Einführung in Windows-Dienstanwendungen</span><span class="sxs-lookup"><span data-stu-id="e28fe-145">Introduction to Windows Service Applications</span></span>](introduction-to-windows-service-applications.md)
- [<span data-ttu-id="e28fe-146">How to: Erstellen von Windows-Diensten</span><span class="sxs-lookup"><span data-stu-id="e28fe-146">How to: Create Windows Services</span></span>](how-to-create-windows-services.md)
