---
title: 'C#-Tutorial: Verwenden von Datensatztypen'
description: In diesem Tutorial erfahren Sie, wie Sie Datensatztypen verwenden, Hierarchien von Datensätzen erstellen und wann Datensätze anstelle von Klassen verwendet werden sollten.
ms.date: 11/12/2020
ms.openlocfilehash: 8a2cb6966ab4f93432723fd6f82618efa86b26aa
ms.sourcegitcommit: 34968a61e9bac0f6be23ed6ffb837f52d2390c85
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/17/2020
ms.locfileid: "94688556"
---
# <a name="create-record-types"></a><span data-ttu-id="82519-103">Erstellen von Datensatztypen</span><span class="sxs-lookup"><span data-stu-id="82519-103">Create record types</span></span>

<span data-ttu-id="82519-104">Mit C# 9 wurden *Datensätze* eingeführt. Dabei handelt es sich um einen neuen Verweistyp, den Sie anstelle von Klassen oder Strukturen erstellen können.</span><span class="sxs-lookup"><span data-stu-id="82519-104">C# 9 introduces *records*, a new reference type that you can create instead of classes or structs.</span></span> <span data-ttu-id="82519-105">Datensätze unterscheiden sich insofern von Klassen, dass Datensatztypen *wertbasierte Gleichheit* verwenden.</span><span class="sxs-lookup"><span data-stu-id="82519-105">Records are distinct from classes in that record types use *value-based equality*.</span></span> <span data-ttu-id="82519-106">Zwei Variablen eines Datensatztyps sind gleich, wenn die Datensatztypdefinitionen identisch sind und wenn die Werte in beiden Datensätzen für alle Felder identisch sind.</span><span class="sxs-lookup"><span data-stu-id="82519-106">Two variables of a record type are equal if the record type definitions are identical, and if for every field, the values in both records are equal.</span></span> <span data-ttu-id="82519-107">Zwei Variablen eines Klassentyps sind identisch, wenn die Objekte, auf die verwiesen wird, denselben Klassentyp aufweisen und die Variablen auf dasselbe Objekt verweisen.</span><span class="sxs-lookup"><span data-stu-id="82519-107">Two variables of a class type are equal if the objects referred to are the same class type and the variables refer to the same object.</span></span> <span data-ttu-id="82519-108">Die wertbasierte Gleichheit impliziert andere Funktionen, die Sie wahrscheinlich in Datensatztypen benötigen.</span><span class="sxs-lookup"><span data-stu-id="82519-108">Value-based equality implies other capabilities you'll probably want in record types.</span></span> <span data-ttu-id="82519-109">Der Compiler generiert viele dieser Member, wenn Sie `record` anstelle von `class` deklarieren.</span><span class="sxs-lookup"><span data-stu-id="82519-109">The compiler generates many of those members when you declare a `record` instead of a `class`.</span></span>

<span data-ttu-id="82519-110">In diesem Tutorial lernen Sie Folgendes:</span><span class="sxs-lookup"><span data-stu-id="82519-110">In this tutorial, you'll learn how to:</span></span>

> [!div class="checklist"]
>
> - <span data-ttu-id="82519-111">Wann Sie `class` oder `record` deklarieren sollten</span><span class="sxs-lookup"><span data-stu-id="82519-111">Decide if you should declare a `class` or a `record`.</span></span>
> - <span data-ttu-id="82519-112">Deklarieren von Datensatztypen und Datensatztypen mit fester Breite</span><span class="sxs-lookup"><span data-stu-id="82519-112">Declare record types and positional record types.</span></span>
> - <span data-ttu-id="82519-113">Ersetzen Ihrer Methoden für vom Compiler generierte Methoden in Datensätzen</span><span class="sxs-lookup"><span data-stu-id="82519-113">Substitute your methods for compiler generated methods in records.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="82519-114">Voraussetzungen</span><span class="sxs-lookup"><span data-stu-id="82519-114">Prerequisites</span></span>

<span data-ttu-id="82519-115">Sie müssen Ihren Computer zur Ausführung von .NET 5 oder höher einrichten, einschließlich des Compilers von C# 9.0 oder höher.</span><span class="sxs-lookup"><span data-stu-id="82519-115">You’ll need to set up your machine to run .NET 5 or later, including the C# 9.0 or later compiler.</span></span> <span data-ttu-id="82519-116">Der C# 9.0-Compiler steht ab [Visual Studio 2019 Version 16.8](https://visualstudio.microsoft.com/vs) oder mit dem [.NET 5.0 SDK](https://dotnet.microsoft.com/download) zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="82519-116">The C# 9.0 compiler is available starting with [Visual Studio 2019 version 16.8](https://visualstudio.microsoft.com/vs) or the [.NET 5.0 SDK](https://dotnet.microsoft.com/download).</span></span>

## <a name="characteristics-of-records"></a><span data-ttu-id="82519-117">Charakteristiken von Datensätzen</span><span class="sxs-lookup"><span data-stu-id="82519-117">Characteristics of records</span></span>

<span data-ttu-id="82519-118">Sie definieren einen *Datensatz*, indem Sie einen Typ mit dem Schlüsselwort `record` deklarieren, anstatt mit dem Schlüsselwort `class` oder `struct`.</span><span class="sxs-lookup"><span data-stu-id="82519-118">You define a *record* by declaring a type with the `record` keyword, instead of the `class` or `struct` keyword.</span></span> <span data-ttu-id="82519-119">Ein Datensatz ist ein Verweistyp und unterliegt der Semantik der wertbasierten Gleichheit.</span><span class="sxs-lookup"><span data-stu-id="82519-119">A record is a reference type and follows value-based equality semantics.</span></span> <span data-ttu-id="82519-120">Zum Erzwingen der Wertsemantik generiert der Compiler mehrere Methoden für Ihren Datensatztyp:</span><span class="sxs-lookup"><span data-stu-id="82519-120">To enforce value semantics, the compiler generates several methods for your record type:</span></span>

- <span data-ttu-id="82519-121">Eine Überschreibung von <xref:System.Object.Equals(System.Object)?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="82519-121">An override of <xref:System.Object.Equals(System.Object)?displayProperty=nameWithType>.</span></span>
- <span data-ttu-id="82519-122">Eine virtuelle `Equals`-Methode, deren Parameter der Datensatztyp ist</span><span class="sxs-lookup"><span data-stu-id="82519-122">A virtual `Equals` method whose parameter is the record type.</span></span>
- <span data-ttu-id="82519-123">Eine Überschreibung von <xref:System.Object.GetHashCode?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="82519-123">An override of <xref:System.Object.GetHashCode?displayProperty=nameWithType>.</span></span>
- <span data-ttu-id="82519-124">Methoden für `operator ==` und `operator !=`</span><span class="sxs-lookup"><span data-stu-id="82519-124">Methods for `operator ==` and `operator !=`.</span></span>
- <span data-ttu-id="82519-125">Datensatztypen implementieren <xref:System.IEquatable%601?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="82519-125">Record types implement <xref:System.IEquatable%601?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="82519-126">Darüber hinaus stellen Datensätze eine Überschreibung von <xref:System.Object.ToString?displayProperty=nameWithType> bereit.</span><span class="sxs-lookup"><span data-stu-id="82519-126">In addition, records provide an override of <xref:System.Object.ToString?displayProperty=nameWithType>.</span></span> <span data-ttu-id="82519-127">Der Compiler synthetisiert Methoden zum Anzeigen von Datensätzen mit <xref:System.Object.ToString?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="82519-127">The compiler synthesizes methods for displaying records using <xref:System.Object.ToString?displayProperty=nameWithType>.</span></span> <span data-ttu-id="82519-128">Diese Member untersuchen Sie, während Sie Code für dieses Tutorial schreiben.</span><span class="sxs-lookup"><span data-stu-id="82519-128">You'll explore those members as you write the code for this tutorial.</span></span> <span data-ttu-id="82519-129">Datensätze unterstützen `with`-Ausdrücke, um nicht destruktive Änderungen von Datensätzen zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="82519-129">Records support `with` expressions to enable non-destructive mutation of records.</span></span>

<span data-ttu-id="82519-130">Sie können auch *Datensätze mit fester Breite* mithilfe einer kürzeren Syntax deklarieren.</span><span class="sxs-lookup"><span data-stu-id="82519-130">You can also declare *positional records* using a more concise syntax.</span></span> <span data-ttu-id="82519-131">Der Compiler synthetisiert mehr Methoden für Sie, wenn Sie Datensätze mit fester Breite deklarieren:</span><span class="sxs-lookup"><span data-stu-id="82519-131">The compiler synthesizes more methods for you when you declare positional records:</span></span>

- <span data-ttu-id="82519-132">Ein primärer Konstruktor, dessen Parameter mit den Parametern mit fester Breite der Datensatzdeklaration übereinstimmen</span><span class="sxs-lookup"><span data-stu-id="82519-132">A primary constructor whose parameters match the positional parameters on the record declaration.</span></span>
- <span data-ttu-id="82519-133">Öffentliche init-only-Eigenschaften für jeden Parameter eines primären Konstruktors</span><span class="sxs-lookup"><span data-stu-id="82519-133">Public init-only properties for each parameter of a primary constructor.</span></span>
- <span data-ttu-id="82519-134">Eine `Deconstruct`-Methode zum Extrahieren von Eigenschaften aus dem Datensatz</span><span class="sxs-lookup"><span data-stu-id="82519-134">A `Deconstruct` method to extract properties from the record.</span></span>

## <a name="build-temperature-data"></a><span data-ttu-id="82519-135">Erstellen von Temperaturdaten</span><span class="sxs-lookup"><span data-stu-id="82519-135">Build temperature data</span></span>

<span data-ttu-id="82519-136">Daten und Statistiken gehören zu den Szenarios, in denen Sie Datensätze verwenden sollten.</span><span class="sxs-lookup"><span data-stu-id="82519-136">Data and statistics are among the scenarios where you'll want to use records.</span></span> <span data-ttu-id="82519-137">Für dieses Tutorial erstellen Sie eine Anwendung, die *Wärmesummen* für verschiedene Verwendungszwecke berechnet.</span><span class="sxs-lookup"><span data-stu-id="82519-137">For this tutorial, you'll build an application that computes *degree days* for different uses.</span></span> <span data-ttu-id="82519-138">*Wärmesummen* sind ein Maß für Temperaturwerte über einen gewissen Zeitraum von Tagen, Wochen oder Monaten.</span><span class="sxs-lookup"><span data-stu-id="82519-138">*Degree days* are a measure of heat (or lack of heat) over a period of days, weeks, or months.</span></span> <span data-ttu-id="82519-139">Wärmesummen verfolgen den Energieverbrauch und prognostizieren diesen.</span><span class="sxs-lookup"><span data-stu-id="82519-139">Degree days track and predict energy usage.</span></span> <span data-ttu-id="82519-140">Eine größere Anzahl von Tagen mit hohen Temperaturen führt zu erhöhter Nutzung von Klimaanlagen, während eine größere Anzahl von Tagen mit niedrigen Temperaturen zu erhöhter Nutzung von Heizkörpern führt.</span><span class="sxs-lookup"><span data-stu-id="82519-140">More hotter days means more air conditioning, and more colder days means more furnace usage.</span></span> <span data-ttu-id="82519-141">Wärmesummen werden für die Verwaltung der Pflanzenpopulation verwendet.</span><span class="sxs-lookup"><span data-stu-id="82519-141">Degree days help manage plant populations.</span></span> <span data-ttu-id="82519-142">Mit dem Wechsel der Jahreszeiten korrelieren Wärmesummen mit dem Wachstum von Pflanzen.</span><span class="sxs-lookup"><span data-stu-id="82519-142">Degree days correlate to plant growth as the seasons change.</span></span> <span data-ttu-id="82519-143">Wärmesummen werden außerdem zur Nachverfolgung von Tierwanderungen für Spezies verwendet, die sich dem Klima entsprechend bewegen.</span><span class="sxs-lookup"><span data-stu-id="82519-143">Degree days help track animal migrations for species that travel to match climate.</span></span>

<span data-ttu-id="82519-144">Die Formel basiert auf der Durchschnittstemperatur eines jeweiligen Tages und einer Baselinetemperatur.</span><span class="sxs-lookup"><span data-stu-id="82519-144">The formula is based on the mean temperature on a given day and a baseline temperature.</span></span> <span data-ttu-id="82519-145">Zum Berechnen von Wärmesummen über Zeit benötigen Sie die Höchst- und Mindesttemperaturen für jeden Tag eines Zeitraums.</span><span class="sxs-lookup"><span data-stu-id="82519-145">To compute degree days over time, you'll need the high and low temperature each day for a period of time.</span></span> <span data-ttu-id="82519-146">Im Folgenden beginnen Sie mit der Erstellung einer neuen Anwendung.</span><span class="sxs-lookup"><span data-stu-id="82519-146">Let's start by creating a new application.</span></span> <span data-ttu-id="82519-147">Erstellen Sie eine neue Konsolenanwendung.</span><span class="sxs-lookup"><span data-stu-id="82519-147">Make a new console application.</span></span> <span data-ttu-id="82519-148">Erstellen Sie einen neuen Datensatztyp in einer neuen Datei namens „DailyTemperature.cs“:</span><span class="sxs-lookup"><span data-stu-id="82519-148">Create a new record type in a new file named "DailyTemperature.cs":</span></span>

:::code language="csharp" source="snippets/record-types/InterimSteps.cs" ID="DailyRecord":::

<span data-ttu-id="82519-149">Mit dem obigen Code wird ein *Datensatz mit fester Breite* definiert.</span><span class="sxs-lookup"><span data-stu-id="82519-149">The preceding code defines a *positional record*.</span></span> <span data-ttu-id="82519-150">Sie haben einen Verweistyp erstellt, der zwei Eigenschaften umfasst: `HighTemp` und `LowTemp`.</span><span class="sxs-lookup"><span data-stu-id="82519-150">You've created a reference type that contains two properties: `HighTemp`, and `LowTemp`.</span></span> <span data-ttu-id="82519-151">Bei diesen Eigenschaften handelt es sich um *init-only-Eigenschaften*, d. h., sie können im Konstruktor oder mithilfe eines Eigenschafteninitialisierers festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="82519-151">Those properties are *init only properties*, meaning they can be set in the constructor or using a property initializer.</span></span> <span data-ttu-id="82519-152">Der Typ `DailyTemperature` verfügt ebenfalls über einen *primären Konstruktor*, der über zwei Parameter verfügt, die den zwei Eigenschaften entsprechen.</span><span class="sxs-lookup"><span data-stu-id="82519-152">The `DailyTemperature` type also has a *primary constructor* that has two parameters that match the two properties.</span></span> <span data-ttu-id="82519-153">Sie verwenden den primären Konstruktor zum Initialisieren eines `DailyTemperature`-Datensatzes:</span><span class="sxs-lookup"><span data-stu-id="82519-153">You use the primary constructor to initialize a `DailyTemperature` record:</span></span>

:::code language="csharp" source="snippets/record-types/Program.cs" ID="DeclareData":::

<span data-ttu-id="82519-154">Sie können Ihre eigenen Eigenschaften oder Methoden zu Datensätzen hinzufügen, dazu zählen auch Datensätze mit fester Breite.</span><span class="sxs-lookup"><span data-stu-id="82519-154">You can add your own properties or methods to records, including positional records.</span></span> <span data-ttu-id="82519-155">Sie müssen die Durchschnittstemperatur für jeden Tag berechnen.</span><span class="sxs-lookup"><span data-stu-id="82519-155">You'll need to compute the mean temperature for each day.</span></span> <span data-ttu-id="82519-156">Diese Eigenschaft können Sie zum Datensatz `DailyTemperature` hinzufügen:</span><span class="sxs-lookup"><span data-stu-id="82519-156">You can add that property to the `DailyTemperature` record:</span></span>

:::code language="csharp" source="snippets/record-types/DailyTemperature.cs" ID="TemperatureRecord":::

<span data-ttu-id="82519-157">Als Nächstes stellen Sie sicher, dass Sie diese Daten verwenden können.</span><span class="sxs-lookup"><span data-stu-id="82519-157">Let's make sure you can use this data.</span></span> <span data-ttu-id="82519-158">Fügen Sie der `Main`-Methode den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="82519-158">Add the following code to your `Main` method:</span></span>

```csharp
foreach (var item in data)
    Console.WriteLine(item);
```

<span data-ttu-id="82519-159">Führen Sie Ihre Anwendung aus. Daraufhin sollte Ihnen eine Ausgabe angezeigt werden, die der folgenden Anzeige ähnelt (einige Zeilen wurden aus Platzgründen entfernt):</span><span class="sxs-lookup"><span data-stu-id="82519-159">Run your application, and you'll see output that looks similar to the following display (several rows removed for space):</span></span>

```dotnetcli
DailyTemperature { HighTemp = 57, LowTemp = 30, Mean = 43.5 }
DailyTemperature { HighTemp = 60, LowTemp = 35, Mean = 47.5 }


DailyTemperature { HighTemp = 80, LowTemp = 60, Mean = 70 }
DailyTemperature { HighTemp = 85, LowTemp = 66, Mean = 75.5 }
```

<span data-ttu-id="82519-160">Der obige Code zeigt die Ausgabe der Überschreibung von `ToString` an, die vom Compiler synthetisiert wurde.</span><span class="sxs-lookup"><span data-stu-id="82519-160">The preceding code shows the output from the override of `ToString` synthesized by the compiler.</span></span> <span data-ttu-id="82519-161">Wenn Sie einen anderen Text verwenden möchten, können Sie Ihre eigene Version von `ToString` schreiben.</span><span class="sxs-lookup"><span data-stu-id="82519-161">If you prefer different text, you can write your own version of `ToString`.</span></span> <span data-ttu-id="82519-162">Dies hindert den Compiler daran, eine Version für Sie zu synthetisieren.</span><span class="sxs-lookup"><span data-stu-id="82519-162">That prevents the compiler from synthesizing a version for you.</span></span>

## <a name="compute-degree-days"></a><span data-ttu-id="82519-163">Berechnen von Wärmesummen</span><span class="sxs-lookup"><span data-stu-id="82519-163">Compute degree days</span></span>

<span data-ttu-id="82519-164">Zum Berechnen der Wärmesummen verwenden Sie die Differenz zwischen einer Baselinetemperatur und einer Durchschnittstemperatur für einen Tag.</span><span class="sxs-lookup"><span data-stu-id="82519-164">To compute degree days, you take the difference from a baseline temperature and the mean temperature on a given day.</span></span> <span data-ttu-id="82519-165">Zum Berechnen der Wärmesumme über Zeit entfernen Sie alle Tage, an denen die Durchschnittstemperatur unterhalb der Baselinetemperatur liegt.</span><span class="sxs-lookup"><span data-stu-id="82519-165">To measure heat over time, you discard any days where the mean temperature is below the baseline.</span></span> <span data-ttu-id="82519-166">Zum Berechnen der Kältesumme über Zeit entfernen Sie alle Tage, an denen die Durchschnittstemperatur über der Baselinetemperatur liegt.</span><span class="sxs-lookup"><span data-stu-id="82519-166">To measure cold over time, you discard any days where the mean temperature is above the baseline.</span></span> <span data-ttu-id="82519-167">Beispielsweise verwenden die USA 65 F als Baselinetemperatur für Wärme- und Kältesummen.</span><span class="sxs-lookup"><span data-stu-id="82519-167">For example, the U.S. uses 65F as the base for both heating  and cooling degree days.</span></span> <span data-ttu-id="82519-168">Bei dieser Temperatur ist weder Heizung noch Kühlung erforderlich.</span><span class="sxs-lookup"><span data-stu-id="82519-168">That's the temperature where no heating or cooling is needed.</span></span> <span data-ttu-id="82519-169">Ein Tag mit einer Durchschnittstemperatur von 70 F weist eine Kältesumme von „5“und eine Wärmesumme von „0“ auf.</span><span class="sxs-lookup"><span data-stu-id="82519-169">If a day has a mean temperature of 70F, that day is 5 cooling degree days and 0 heating degree days.</span></span> <span data-ttu-id="82519-170">Wenn die Durchschnittstemperatur also 55 F entspricht, weist der Tag dementsprechend eine Wärmesumme von „10“ und eine Kältesumme von „0“ auf.</span><span class="sxs-lookup"><span data-stu-id="82519-170">Conversely, if the mean temperature is 55F, that day is 10 heating degree days and 0 cooling degree days.</span></span>

<span data-ttu-id="82519-171">Sie können diese Formeln in Form einer kleinen Hierarchie aus Datensatztypen ausdrücken: ein abstrakter Temperatursummentyp und zwei konkrete Typen für Wärmesummen und Kältesummen.</span><span class="sxs-lookup"><span data-stu-id="82519-171">You can express these formulas as a small hierarchy of record types: an abstract degree day type and two concrete types for heating degree days and cooling degree days.</span></span> <span data-ttu-id="82519-172">Bei diesen Typen kann es sich außerdem um Datensätze mit fester Breite handeln.</span><span class="sxs-lookup"><span data-stu-id="82519-172">These types can also be positional records.</span></span> <span data-ttu-id="82519-173">Sie verwenden eine Baselinetemperatur und eine Reihe täglicher Temperaturdatensätze als Argumente für den primären Konstruktor:</span><span class="sxs-lookup"><span data-stu-id="82519-173">They take a baseline temperature and a sequence of daily temperature records as arguments to the primary constructor:</span></span>

:::code language="csharp" source="snippets/record-types/InterimSteps.cs" ID="DegreeDaysRecords":::

<span data-ttu-id="82519-174">Der abstrakte Datensatz `DegreeDays` ist die gemeinsame Basisklasse für die beiden Datensätze `HeatingDegreeDays` und `CoolingDegreeDays`.</span><span class="sxs-lookup"><span data-stu-id="82519-174">The abstract `DegreeDays` record is the shared base class for both the `HeatingDegreeDays` and `CoolingDegreeDays` records.</span></span> <span data-ttu-id="82519-175">Die primären Konstruktordeklarationen der abgeleiteten Datensätze zeigen, wie die Initialisierung des Basisdatensatzes verwaltet wird.</span><span class="sxs-lookup"><span data-stu-id="82519-175">The primary constructor declarations on the derived records show how to manage base record initialization.</span></span> <span data-ttu-id="82519-176">Ihr abgeleiteter Datensatz deklariert Parameter für alle Parameter im primären Konstruktor des Basisdatensatzes.</span><span class="sxs-lookup"><span data-stu-id="82519-176">Your derived record declares parameters for all the parameters in the base record primary constructor.</span></span> <span data-ttu-id="82519-177">Der Basisdatensatz deklariert und initialisiert diese Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="82519-177">The base record declares and initializes those properties.</span></span> <span data-ttu-id="82519-178">Der abgeleitete Datensatz blendet diese nicht aus. Stattdessen erstellt und initialisiert er nur Eigenschaften für Parameter, die nicht in seinem Basisdatensatz deklariert sind.</span><span class="sxs-lookup"><span data-stu-id="82519-178">The derived record doesn't hide them, but only creates and initializes properties for parameters that aren't declared in its base record.</span></span> <span data-ttu-id="82519-179">In diesem Beispiel fügen die abgeleiteten Datensätze keine neuen primären Konstruktorparameter hinzu.</span><span class="sxs-lookup"><span data-stu-id="82519-179">In this example, the derived records don't add new primary constructor parameters.</span></span> <span data-ttu-id="82519-180">Testen Sie Ihren Code, indem Sie den folgenden Code zu Ihrer `Main`-Methode hinzufügen:</span><span class="sxs-lookup"><span data-stu-id="82519-180">Test your code by adding the following code to your `Main` method:</span></span>

:::code language="csharp" source="snippets/record-types/Program.cs" ID="HeatingAndCooling":::

<span data-ttu-id="82519-181">Daraufhin sollte eine Ausgabe ähnlich der folgenden angezeigt werden:</span><span class="sxs-lookup"><span data-stu-id="82519-181">You'll get output like the following display:</span></span>

```dotnetcli
HeatingDegreeDays { BaseTemperature = 65, TempRecords = record_types.DailyTemperature[], DegreeDays = 85 }
CoolingDegreeDays { BaseTemperature = 65, TempRecords = record_types.DailyTemperature[], DegreeDays = 71.5 }
```

## <a name="define-compiler-synthesized-methods"></a><span data-ttu-id="82519-182">Definieren von durch den Compiler synthetisierten Methoden</span><span class="sxs-lookup"><span data-stu-id="82519-182">Define compiler-synthesized methods</span></span>

<span data-ttu-id="82519-183">Ihr Code berechnet die korrekte Anzahl von Wärme- und Kältesummen über den Zeitraum.</span><span class="sxs-lookup"><span data-stu-id="82519-183">Your code calculates the correct number of heating and cooling degree days over that period of time.</span></span> <span data-ttu-id="82519-184">Jedoch veranschaulicht dieses Beispiel, wieso Sie einige der synthetisierten Methoden durch Datensätze ersetzen sollten.</span><span class="sxs-lookup"><span data-stu-id="82519-184">But this example shows why you may want to replace some of the synthesized methods for records.</span></span> <span data-ttu-id="82519-185">Mit Ausnahme der Clone-Methode können Sie Ihre eigene Version von beliebigen durch den Compiler synthetisierten Methoden in einem Datensatztyp deklarieren.</span><span class="sxs-lookup"><span data-stu-id="82519-185">You can declare your own version of any of the compiler-synthesized methods in a record type except the clone method.</span></span> <span data-ttu-id="82519-186">Die Clone-Methode verfügt über einen vom Compiler generierten Namen, und Sie können keine andere Implementierung bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="82519-186">The clone method has a compiler generated name and you cannot provide a different implementation.</span></span> <span data-ttu-id="82519-187">Die synthetisierten Methoden umfassen einen Kopierkonstruktor, die Member der <xref:System.IEquatable%601?displayProperty=nameWithType>-Schnittstelle, Gleichheits- und Ungleichheitstests sowie <xref:System.Object.GetHashCode>.</span><span class="sxs-lookup"><span data-stu-id="82519-187">These synthesized methods include a copy constructor, the members of the <xref:System.IEquatable%601?displayProperty=nameWithType> interface, equality and inequality tests, and <xref:System.Object.GetHashCode>.</span></span> <span data-ttu-id="82519-188">Zu diesem Zweck synthetisieren Sie `PrintMembers`.</span><span class="sxs-lookup"><span data-stu-id="82519-188">For this purpose, you'll synthesize `PrintMembers`.</span></span> <span data-ttu-id="82519-189">Sie könnten auch Ihre eigene Version von `ToString` deklarieren, jedoch stellt `PrintMembers` eine bessere Option für Vererbungsszenarios dar.</span><span class="sxs-lookup"><span data-stu-id="82519-189">You could also declare your own `ToString`, but `PrintMembers` provides a better option for inheritance scenarios.</span></span> <span data-ttu-id="82519-190">Die Signatur muss mit der synthetisierten Methode übereinstimmen, wenn Sie Ihre eigene Version einer synthetisierten Methode verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="82519-190">To provide your own version of a synthesized method, the signature must match the synthesized method.</span></span>

<span data-ttu-id="82519-191">Das Element `TempRecords` in der Konsolenausgabe ist nicht nützlich.</span><span class="sxs-lookup"><span data-stu-id="82519-191">The `TempRecords` element in the console output isn't useful.</span></span> <span data-ttu-id="82519-192">Es zeigt den Typ an, erfüllt aber sonst keinen Zweck.</span><span class="sxs-lookup"><span data-stu-id="82519-192">It displays the type, but nothing else.</span></span> <span data-ttu-id="82519-193">Sie können dieses Verhalten ändern, indem Sie Ihre eigene Implementierung der synthetisierten `PrintMembers`-Methode angeben.</span><span class="sxs-lookup"><span data-stu-id="82519-193">You can change this behavior by providing your own implementation of the synthesized `PrintMembers` method.</span></span> <span data-ttu-id="82519-194">Die Signatur hängt von den Modifizierern ab, die auf die `record`-Deklaration angewendet werden:</span><span class="sxs-lookup"><span data-stu-id="82519-194">The signature depends on modifiers applied to the `record` declaration:</span></span>

- <span data-ttu-id="82519-195">Wenn ein Datensatztyp `sealed` ist, lautet die Signatur `private bool PrintMembers(StringBuilder builder);`.</span><span class="sxs-lookup"><span data-stu-id="82519-195">If a record type is `sealed`, the signature is `private bool PrintMembers(StringBuilder builder);`</span></span>
- <span data-ttu-id="82519-196">Wenn ein Datensatztyp nicht `sealed` ist und von `object` abgeleitet wird (d. h., er deklariert keinen Basisdatensatz), lautet die Signatur `protected virtual bool PrintMembers(StringBuilder builder);`.</span><span class="sxs-lookup"><span data-stu-id="82519-196">If a record type isn't `sealed` and derives from `object` (that is, it doesn't declare a base record), the signature is `protected virtual bool PrintMembers(StringBuilder builder);`</span></span>
- <span data-ttu-id="82519-197">Wenn ein Datensatztyp nicht `sealed` ist und von einem anderen Datensatz abgeleitet wird, lautet die Signatur `protected override bool PrintMembers(StringBuilder builder);`.</span><span class="sxs-lookup"><span data-stu-id="82519-197">If a record type isn't `sealed` and derives from another record, the signature is `protected override bool PrintMembers(StringBuilder builder);`</span></span>

<span data-ttu-id="82519-198">Diese Regeln sind am einfachsten zu verstehen, wenn Sie den Zweck von `PrintMembers` verstehen.</span><span class="sxs-lookup"><span data-stu-id="82519-198">These rules are easiest to comprehend through understanding the purpose of `PrintMembers`.</span></span> <span data-ttu-id="82519-199">`PrintMembers` fügt Informationen zu jeder Eigenschaft in einem Datensatztyp zu einer Zeichenfolge hinzu.</span><span class="sxs-lookup"><span data-stu-id="82519-199">`PrintMembers` adds information about each property in a record type to a string.</span></span> <span data-ttu-id="82519-200">Der Vertrag erfordert, dass Basisdatensätze ihre Member zur Anzeige hinzufügen, und geht davon aus, dass abgeleitete Member ihre Member hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="82519-200">The contract requires base records to add their members to the display and assumes derived members will add their members.</span></span> <span data-ttu-id="82519-201">Jeder Datensatztyp synthetisiert eine `ToString`-Überschreibung, die dem folgenden Beispiel für `HeatingDegreeDays` ähnelt:</span><span class="sxs-lookup"><span data-stu-id="82519-201">Each record type synthesizes a `ToString` override that looks similar to the following example for `HeatingDegreeDays`:</span></span>

```csharp
public override string ToString()
{
    StringBuilder stringBuilder = new StringBuilder();
    stringBuilder.Append("HeatingDegreeDays");
    stringBuilder.Append(" { ");
    if (PrintMembers(stringBuilder))
    {
        stringBuilder.Append(" ");
    }
    stringBuilder.Append("}");
    return stringBuilder.ToString();
}
```

<span data-ttu-id="82519-202">Sie deklarieren eine `PrintMembers`-Methode im Datensatz `DegreeDays`, der den Typ der Sammlung nicht ausgibt:</span><span class="sxs-lookup"><span data-stu-id="82519-202">You declare a `PrintMembers` method in the `DegreeDays` record that doesn't print the type of the collection:</span></span>

:::code language="csharp" source="snippets/record-types/DegreeDays.cs" ID="AddPrintMembers":::

<span data-ttu-id="82519-203">Die Signatur deklariert eine `virtual protected`-Methode entsprechend der Version des Compilers.</span><span class="sxs-lookup"><span data-stu-id="82519-203">The signature declares a `virtual protected` method to match the compiler's version.</span></span> <span data-ttu-id="82519-204">Sie müssen sich keine Sorgen darüber machen, dass Sie die falschen Zugriffsmethoden verwenden, da die Sprache die richtige Signatur erzwingt.</span><span class="sxs-lookup"><span data-stu-id="82519-204">Don't worry if you get the accessors wrong; the language enforces the correct signature.</span></span> <span data-ttu-id="82519-205">Wenn Sie die richtigen Modifizierer für synthetisierte Methoden vergessen, gibt der Compiler Warnungen oder Fehler aus, die Sie dabei unterstützen, die richtige Signatur zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="82519-205">If you forget the correct modifiers for any synthesized method, the compiler issues warnings or errors that help you get the right signature.</span></span>

## <a name="non-destructive-mutation"></a><span data-ttu-id="82519-206">Nicht destruktive Änderungen</span><span class="sxs-lookup"><span data-stu-id="82519-206">Non-destructive mutation</span></span>

<span data-ttu-id="82519-207">Die synthetisierten Member in einem Datensatz mit fester Breite ändern den Zustand des Datensatzes nicht.</span><span class="sxs-lookup"><span data-stu-id="82519-207">The synthesized members in a positional record don't modify the state of the record.</span></span> <span data-ttu-id="82519-208">Das Ziel besteht darin, dass Sie unveränderliche Datensätze einfacher erstellen können.</span><span class="sxs-lookup"><span data-stu-id="82519-208">The goal is that you can more easily create immutable records.</span></span> <span data-ttu-id="82519-209">Sehen Sie sich noch einmal die vorherigen Deklarationen für `HeatingDegreeDays` und `CoolingDegreeDays` an.</span><span class="sxs-lookup"><span data-stu-id="82519-209">Look again at the preceding declarations for `HeatingDegreeDays` and `CoolingDegreeDays`.</span></span> <span data-ttu-id="82519-210">Die hinzugefügten Member führen Berechnungen der Werte für den Datensatz durch, ändern aber nicht den Zustand.</span><span class="sxs-lookup"><span data-stu-id="82519-210">The members added perform computations on the values for the record, but don't mutate state.</span></span> <span data-ttu-id="82519-211">Datensätze mit fester Breite vereinfachen das Erstellen unveränderlicher Verweistypen.</span><span class="sxs-lookup"><span data-stu-id="82519-211">Positional records make it easier for you to create immutable reference types.</span></span>

<span data-ttu-id="82519-212">Das Erstellen unveränderlicher Verweistypen impliziert, dass Sie nicht destruktive Änderungen verwenden sollten.</span><span class="sxs-lookup"><span data-stu-id="82519-212">Creating immutable reference types means you'll want to use non-destructive mutation.</span></span> <span data-ttu-id="82519-213">Sie erstellen neue Datensatzinstanzen mit [`with`-Ausdrücken](../../language-reference/operators/with-expression.md), die den vorhandenen Datensatzinstanzen ähneln.</span><span class="sxs-lookup"><span data-stu-id="82519-213">You  create new record instances that are similar to existing record instances using [`with` expressions](../../language-reference/operators/with-expression.md).</span></span> <span data-ttu-id="82519-214">Diese Ausdrücke sind eine Kopierkonstruktion mit zusätzlichen Zuweisungen, die die Kopie ändern.</span><span class="sxs-lookup"><span data-stu-id="82519-214">These expressions are a copy construction with additional assignments that modify the copy.</span></span> <span data-ttu-id="82519-215">Das Ergebnis ist eine neue Datensatzinstanz, bei der alle Eigenschaften aus dem vorhandenen Datensatz kopiert und optional geändert wurden.</span><span class="sxs-lookup"><span data-stu-id="82519-215">The result is a new record instance where each property has been copied from the existing record and optionally modified.</span></span> <span data-ttu-id="82519-216">Der ursprüngliche Datensatz bleibt unverändert.</span><span class="sxs-lookup"><span data-stu-id="82519-216">The original record is unchanged.</span></span>

<span data-ttu-id="82519-217">Als Nächstes fügen Sie zur Veranschaulichung von `with`-Ausdrücken einige Features zu Ihrem Programm hinzu.</span><span class="sxs-lookup"><span data-stu-id="82519-217">Let's add a couple features to your program that demonstrate `with` expressions.</span></span> <span data-ttu-id="82519-218">Zuerst erstellen Sie einen neuen Datensatz zum Berechnen steigender Wärmesummen mithilfe derselben Daten.</span><span class="sxs-lookup"><span data-stu-id="82519-218">First, let's create a new record to compute growing degree days using the same data.</span></span> <span data-ttu-id="82519-219">Für *steigende Wärmesummen* werden in der Regel 41 F als Baselinetemperatur verwendet und sie messen Temperaturen über der Baseline.</span><span class="sxs-lookup"><span data-stu-id="82519-219">*Growing degree days* typically uses 41F as the baseline and measures temperatures above the baseline.</span></span> <span data-ttu-id="82519-220">Sie können einen neuen Datensatz erstellen, der `coolingDegreeDays` ähnelt, aber eine andere Baselinetemperatur verwendet, um dieselben Daten zu verwenden:</span><span class="sxs-lookup"><span data-stu-id="82519-220">To use the same data, you can create a new record that is similar to the `coolingDegreeDays`, but with a different base temperature:</span></span>

:::code language="csharp" source="snippets/record-types/Program.cs" ID="GrowingDegreeDays":::

<span data-ttu-id="82519-221">Sie können die Anzahl der berechneten Temperaturen mit den generierten Zahlen mit einer höheren Baselinetemperatur vergleichen.</span><span class="sxs-lookup"><span data-stu-id="82519-221">You can compare the number of degrees computed to the numbers generated with a higher baseline temperature.</span></span> <span data-ttu-id="82519-222">Denken Sie daran, dass Datensätze *Verweistypen* sind und dass es sich bei diesen Kopien um flache Kopien handelt.</span><span class="sxs-lookup"><span data-stu-id="82519-222">Remember that records are *reference types* and these copies are shallow copies.</span></span> <span data-ttu-id="82519-223">Das Array für die Daten wird nicht kopiert, aber beide Datensätze beziehen sich auf dieselben Daten.</span><span class="sxs-lookup"><span data-stu-id="82519-223">The array for the data isn't copied, but both records refer to the same data.</span></span> <span data-ttu-id="82519-224">Dies ist in einem anderen Szenario von Vorteil.</span><span class="sxs-lookup"><span data-stu-id="82519-224">That fact is an advantage in one other scenario.</span></span> <span data-ttu-id="82519-225">Bei steigenden Wärmesummen ist es nützlich, die Gesamtsumme der letzten fünf Tage zu überwachen.</span><span class="sxs-lookup"><span data-stu-id="82519-225">For growing degree days, it's useful to keep track of the total for the previous 5 days.</span></span> <span data-ttu-id="82519-226">Mithilfe von `with`-Ausdrücken können Sie neue Datensätze mit anderen Quelldaten erstellen.</span><span class="sxs-lookup"><span data-stu-id="82519-226">You can create new records with different source data using `with` expressions.</span></span> <span data-ttu-id="82519-227">Mit dem folgenden Code wird eine Sammlung dieser Akkumulationen erstellt, und anschließend werden die Werte angezeigt:</span><span class="sxs-lookup"><span data-stu-id="82519-227">The following code builds a collection of these accumulations, then displays the values:</span></span>

:::code language="csharp" source="snippets/record-types/Program.cs" ID="RunningFiveDayTotal":::

<span data-ttu-id="82519-228">Sie können auch `with`-Ausdrücke verwenden, um Kopien von Datensätzen zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="82519-228">You can also use `with` expressions to create copies of records.</span></span> <span data-ttu-id="82519-229">Geben Sie keine Eigenschaften zwischen den geschweiften Klammern für den `with`-Ausdruck an.</span><span class="sxs-lookup"><span data-stu-id="82519-229">Don't specify any properties between the braces for the `with` expression.</span></span> <span data-ttu-id="82519-230">Das bedeutet, eine Kopie wird erstellt und es werden keine Eigenschaften geändert:</span><span class="sxs-lookup"><span data-stu-id="82519-230">That means create a copy, and don't change any properties:</span></span>

```csharp
var growingDegreeDaysCopy = growingDegreeDays with { };
```

<span data-ttu-id="82519-231">Führen Sie die fertiggestellte Anwendung aus, um die Ergebnisse anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="82519-231">Run the finished application to see the results.</span></span>

## <a name="summary"></a><span data-ttu-id="82519-232">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="82519-232">Summary</span></span>

<span data-ttu-id="82519-233">In diesem Tutorial wurden verschiedene Aspekte von Datensätzen vorgestellt.</span><span class="sxs-lookup"><span data-stu-id="82519-233">This tutorial showed several aspects of records.</span></span> <span data-ttu-id="82519-234">Datensätze bieten eine präzise Syntax für Verweistypen, bei dem der grundlegende Zweck das Speichern von Daten ist.</span><span class="sxs-lookup"><span data-stu-id="82519-234">Records provide concise syntax for reference types where the fundamental use is storing data.</span></span> <span data-ttu-id="82519-235">Bei objektorientierten Klassen ist der grundlegende Zweck die Definition von Zuständigkeiten.</span><span class="sxs-lookup"><span data-stu-id="82519-235">For object-oriented classes, the fundamental use is defining responsibilities.</span></span> <span data-ttu-id="82519-236">Im Mittelpunkt dieses Tutorials standen *Datensätze mit fester Breite*, für die Sie eine präzise Syntax zum Deklarieren der init-only-Eigenschaften für einen Datensatz verwenden können.</span><span class="sxs-lookup"><span data-stu-id="82519-236">This tutorial focused on *positional records*, where you can use a concise syntax to declare the init-only properties for a record.</span></span> <span data-ttu-id="82519-237">Der Compiler synthetisiert einige Member des Datensatzes zum Kopieren und Vergleichen der Datensätze.</span><span class="sxs-lookup"><span data-stu-id="82519-237">The compiler synthesizes several members of the record for copying and comparing records.</span></span> <span data-ttu-id="82519-238">Sie können beliebige andere Member hinzufügen, die Sie für Ihre Datensatztypen benötigen.</span><span class="sxs-lookup"><span data-stu-id="82519-238">You can add any other members you need for your record types.</span></span> <span data-ttu-id="82519-239">Sie können unveränderliche Datensatztypen erstellen und sich gewiss sein, das kein vom Compiler generierter Member den Zustand ändern würde.</span><span class="sxs-lookup"><span data-stu-id="82519-239">You can create immutable record types knowing that none of the compiler-generated members would mutate state.</span></span> <span data-ttu-id="82519-240">Für Datensätze mit fester Breite vereinfachen `with`-Ausdrücke die Unterstützung nicht destruktiver Änderungen.</span><span class="sxs-lookup"><span data-stu-id="82519-240">For positional records, `with` expressions make it easy to support non-destructive mutation.</span></span>

<span data-ttu-id="82519-241">Datensätze bieten eine weitere Möglichkeit zum Definieren von Typen.</span><span class="sxs-lookup"><span data-stu-id="82519-241">Records add another way to define types.</span></span> <span data-ttu-id="82519-242">Sie können `class`-Definitionen zum Erstellen von objektorientierten Hierarchien verwenden, die sich auf die Zuständigkeiten und das Verhalten von Objekten konzentrieren.</span><span class="sxs-lookup"><span data-stu-id="82519-242">You use `class` definitions to create object-oriented hierarchies that focus on the responsibilities and behavior of objects.</span></span> <span data-ttu-id="82519-243">Sie können `struct`-Typen für Datenstrukturen erstellen, die Daten speichern und klein genug für effiziente Kopiervorgänge sind.</span><span class="sxs-lookup"><span data-stu-id="82519-243">You create `struct` types for data structures that store data and are small enough to copy efficiently.</span></span> <span data-ttu-id="82519-244">Wenn Sie wertbasierte Gleichheit und Vergleiche sowie Verweisvariablen verwenden, aber keine Werte kopieren möchten, können Sie Datensätze erstellen.</span><span class="sxs-lookup"><span data-stu-id="82519-244">You create records when you want value-based equality and comparison, don't want to copy values, and want to use reference variables.</span></span>

<span data-ttu-id="82519-245">Vollständige Beschreibungen der Datensätze finden Sie in der [Spezifikation empfohlener Datensatztypen](~/_csharplang/proposals/csharp-9.0/records.md).</span><span class="sxs-lookup"><span data-stu-id="82519-245">You can learn the complete description of records by reading the [proposed record type specification](~/_csharplang/proposals/csharp-9.0/records.md).</span></span>
