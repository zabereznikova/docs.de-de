---
title: Objektorientiertes Programmieren (C#)
description: C# bietet vollständige Unterstützung für objektorientierte Programmierung, einschließlich Abstraktion, Kapselung, Vererbung und Polymorphie.
ms.date: 09/30/2020
ms.openlocfilehash: 4ae31e18fcd88870f511e77bb0c555f35394fd1b
ms.sourcegitcommit: 34968a61e9bac0f6be23ed6ffb837f52d2390c85
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/17/2020
ms.locfileid: "94687993"
---
# <a name="object-oriented-programming-c"></a><span data-ttu-id="a0f48-103">Objektorientiertes Programmieren (C#)</span><span class="sxs-lookup"><span data-stu-id="a0f48-103">Object-Oriented programming (C#)</span></span>

<span data-ttu-id="a0f48-104">C# ist eine objektorientierte Programmiersprache.</span><span class="sxs-lookup"><span data-stu-id="a0f48-104">C# is an object-oriented language.</span></span> <span data-ttu-id="a0f48-105">Die folgenden vier bei der objektorientierten Programmierung eingesetzten Verfahren sind besonders wichtig:</span><span class="sxs-lookup"><span data-stu-id="a0f48-105">Four of the key techniques used in object-oriented programming are:</span></span>

- <span data-ttu-id="a0f48-106">*Abstraktion* bedeutet, dass die unnötigen Details von Typconsumern ausgeblendet werden.</span><span class="sxs-lookup"><span data-stu-id="a0f48-106">*Abstraction* means hiding the unnecessary details from type consumers.</span></span>
- <span data-ttu-id="a0f48-107">*Kapselung* bedeutet, dass eine Gruppe verwandter Eigenschaften, Methoden sowie anderer Member als eine Einheit bzw. ein Objekt behandelt wird.</span><span class="sxs-lookup"><span data-stu-id="a0f48-107">*Encapsulation* means that a group of related properties, methods, and other members are treated as a single unit or object.</span></span>
- <span data-ttu-id="a0f48-108">*Vererbung* beschreibt die Fähigkeit, neue Klassen basierend auf einer vorhandenen Klasse zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="a0f48-108">*Inheritance* describes the ability to create new classes based on an existing class.</span></span>
- <span data-ttu-id="a0f48-109">*Polymorphismus* bedeutet, dass Sie mehrere Klassen untereinander austauschen können, obwohl jede Klasse dieselben Eigenschaften oder Methoden auf unterschiedliche Art und Weise implementiert.</span><span class="sxs-lookup"><span data-stu-id="a0f48-109">*Polymorphism* means that you can have multiple classes that can be used interchangeably, even though each class implements the same properties or methods in different ways.</span></span>

<span data-ttu-id="a0f48-110">Im vorherigen Tutorial [Einführung in Klassen](introduction-to-classes.md) wurden sowohl *Abstraktion* als auch *Kapselung* vorgestellt.</span><span class="sxs-lookup"><span data-stu-id="a0f48-110">In the preceding tutorial, [introduction to classes](introduction-to-classes.md) you saw both *abstraction* and *encapsulation*.</span></span> <span data-ttu-id="a0f48-111">Die `BankAccount`-Klasse hat eine Abstraktion für das Konzept eines Bankkontos bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="a0f48-111">The `BankAccount` class provided an abstraction for the concept of a bank account.</span></span> <span data-ttu-id="a0f48-112">Sie können ihre Implementierung ändern, ohne den Code zu beeinflussen, in dem die `BankAccount`-Klasse verwendet wurde.</span><span class="sxs-lookup"><span data-stu-id="a0f48-112">You could modify its implementation without affecting any of the code that used the `BankAccount` class.</span></span> <span data-ttu-id="a0f48-113">Sowohl die `BankAccount`- als auch die `Transaction`-Klasse bieten eine Kapselung der Komponenten, die zum Beschreiben dieser Konzepte im Code erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="a0f48-113">Both the `BankAccount` and `Transaction` classes provide encapsulation of the components needed to describe those concepts in code.</span></span>

<span data-ttu-id="a0f48-114">In diesem Tutorial wird die Anwendung so erweitert, dass *Vererbung* und *Polymorphie* zum Hinzufügen neuer Features verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="a0f48-114">In this tutorial, you'll extend that application to make use of *inheritance* and *polymorphism* to add new features.</span></span> <span data-ttu-id="a0f48-115">Außerdem werden Sie der `BankAccount`-Klasse Features hinzufügen und dabei die Verfahren *Abstraktion* und *Kapselung* einsetzen, die Sie im vorherigen Tutorial kennengelernt haben.</span><span class="sxs-lookup"><span data-stu-id="a0f48-115">You'll also add features to the `BankAccount` class, taking advantage of the *abstraction* and *encapsulation* techniques you learned in the preceding tutorial.</span></span>

## <a name="create-different-types-of-accounts"></a><span data-ttu-id="a0f48-116">Erstellen unterschiedlicher Kontotypen</span><span class="sxs-lookup"><span data-stu-id="a0f48-116">Create different types of accounts</span></span>

<span data-ttu-id="a0f48-117">Nach der Erstellung dieses Programms erhalten Sie Anforderungen zum Hinzufügen von Features.</span><span class="sxs-lookup"><span data-stu-id="a0f48-117">After building this program, you get requests to add features to it.</span></span> <span data-ttu-id="a0f48-118">Dies funktioniert hervorragend, solange nur ein Bankkontotyp vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="a0f48-118">It works great in the situation where there is only one bank account type.</span></span> <span data-ttu-id="a0f48-119">Im Laufe der Zeit ändern sich die Anforderungen, und entsprechende Kontotypen werden erforderlich:</span><span class="sxs-lookup"><span data-stu-id="a0f48-119">Over time, needs change, and related account types are requested:</span></span>

- <span data-ttu-id="a0f48-120">Ein zinsbringendes Konto, auf dem sich am Ende jedes Monats Zinsen ansammeln.</span><span class="sxs-lookup"><span data-stu-id="a0f48-120">An interest earning account that accrues interest at the end of each month.</span></span>
- <span data-ttu-id="a0f48-121">Eine Kreditlinie, die einen negativen Saldo aufweisen kann, für die aber ggf. monatliche Zinskosten anfallen.</span><span class="sxs-lookup"><span data-stu-id="a0f48-121">A line of credit that can have a negative balance, but when there's a balance, there's an interest charge each month.</span></span>
- <span data-ttu-id="a0f48-122">Ein Prepaid-Geschenkkartenkonto, in das einmal eingezahlt wird und von dem nur ausgezahlt werden kann.</span><span class="sxs-lookup"><span data-stu-id="a0f48-122">A pre-paid gift card account that starts with a single deposit, and only can be paid off.</span></span> <span data-ttu-id="a0f48-123">Dies kann zu Beginn jedes Monats einmal aufgefüllt werden.</span><span class="sxs-lookup"><span data-stu-id="a0f48-123">It can be refilled once at the start of each month.</span></span>

<span data-ttu-id="a0f48-124">All diese unterschiedlichen Konten ähneln der `BankAccount`-Klasse, die im vorherigen Tutorial definiert wurde.</span><span class="sxs-lookup"><span data-stu-id="a0f48-124">All of these different accounts are similar to `BankAccount` class defined in the earlier tutorial.</span></span> <span data-ttu-id="a0f48-125">Sie können den betreffenden Code kopieren, die Klassen umbenennen und Änderungen vornehmen.</span><span class="sxs-lookup"><span data-stu-id="a0f48-125">You could copy that code, rename the classes, and make modifications.</span></span> <span data-ttu-id="a0f48-126">Dieses Verfahren würde kurzfristig funktionieren, aber im Laufe der Zeit mehr Arbeit verursachen.</span><span class="sxs-lookup"><span data-stu-id="a0f48-126">That technique would work in the short term, but it would be more work over time.</span></span> <span data-ttu-id="a0f48-127">Änderungen müssten über alle betroffenen Klassen kopiert werden.</span><span class="sxs-lookup"><span data-stu-id="a0f48-127">Any changes would be copied across all the affected classes.</span></span>

<span data-ttu-id="a0f48-128">Stattdessen können Sie neue Bankkontotypen erstellen, die Methoden und Daten von der `BankAccount`-Klasse erben, die im vorherigen Tutorial erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="a0f48-128">Instead, you can create new bank account types that inherit methods and data from the `BankAccount` class created in the preceding tutorial.</span></span> <span data-ttu-id="a0f48-129">Diese neuen Klassen können die `BankAccount`-Klasse durch das spezifische Verhalten erweitern, das für den jeweiligen Typ erforderlich ist:</span><span class="sxs-lookup"><span data-stu-id="a0f48-129">These new classes can extend the `BankAccount` class with the specific behavior needed for each type:</span></span>

```csharp
public class InterestEarningAccount : BankAccount
{
}

public class LineOfCreditAccount : BankAccount
{
}

public class GiftCardAccount : BankAccount
{
}
```

<span data-ttu-id="a0f48-130">Jede dieser Klassen *erbt* das gemeinsame Verhalten von der gemeinsamen *Basisklasse*, der `BankAccount`-Klasse.</span><span class="sxs-lookup"><span data-stu-id="a0f48-130">Each of these classes *inherits* the shared behavior from their shared *base class*, the `BankAccount` class.</span></span> <span data-ttu-id="a0f48-131">Schreiben Sie die Implementierungen für neue und andere Funktionen in jede der *abgeleiteten Klassen*.</span><span class="sxs-lookup"><span data-stu-id="a0f48-131">Write the implementations for new and different functionality in each of the *derived classes*.</span></span>  <span data-ttu-id="a0f48-132">Diese abgeleiteten Klassen verfügen bereits über das gesamte Verhalten, das in der `BankAccount`-Klasse definiert ist.</span><span class="sxs-lookup"><span data-stu-id="a0f48-132">These derived classes already have all the behavior defined in the `BankAccount` class.</span></span>

<span data-ttu-id="a0f48-133">Es empfiehlt sich, jede neue Klasse in einer anderen Quelldatei zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="a0f48-133">It's a good practice to create each new class in a different source file.</span></span> <span data-ttu-id="a0f48-134">In [Visual Studio](https://visualstudio.com) können Sie mit der rechten Maustaste auf das Projekt klicken und *Klasse hinzufügen* auswählen, um eine neue Klasse in einer neuen Datei hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="a0f48-134">In [Visual Studio](https://visualstudio.com), you can right-click on the project, and select *add class* to add a new class in a new file.</span></span> <span data-ttu-id="a0f48-135">Wählen Sie in [Visual Studio Code](https://code.visualstudio.com) die Option *Datei* und dann *Neu* aus, um eine neue Quelldatei zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="a0f48-135">In [Visual Studio Code](https://code.visualstudio.com), select *File* then *New* to create a new source file.</span></span> <span data-ttu-id="a0f48-136">Benennen Sie in beiden Tools die Datei entsprechend dem Klassennamen um: *InterestEarningAccount.cs*, *LineOfCreditAccount.cs* und *GiftCardAccount.cs*.</span><span class="sxs-lookup"><span data-stu-id="a0f48-136">In either tool, name the file to match the class: *InterestEarningAccount.cs*, *LineOfCreditAccount.cs*, and *GiftCardAccount.cs*.</span></span>

<span data-ttu-id="a0f48-137">Wenn Sie die Klassen wie im obigen Beispiel gezeigt erstellen, werden Sie feststellen, dass keine der abgeleiteten Klassen kompiliert wird.</span><span class="sxs-lookup"><span data-stu-id="a0f48-137">When you create the classes as shown in the preceding sample, you'll find that none of your derived classes compile.</span></span> <span data-ttu-id="a0f48-138">Ein Konstruktor ist für die Initialisierung eines Objekts verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="a0f48-138">A constructor is responsible for initializing an object.</span></span> <span data-ttu-id="a0f48-139">Der Konstruktor einer abgeleiteten Klasse muss die abgeleitete Klasse initialisieren und Anweisungen dazu bereitstellen, wie das in der abgeleiteten Klasse enthaltene Basisklassenobjekt zu initialisieren ist.</span><span class="sxs-lookup"><span data-stu-id="a0f48-139">A derived class constructor must initialize the derived class, and provide instructions on how to initialize the base class object included in the derived class.</span></span> <span data-ttu-id="a0f48-140">Die ordnungsgemäße Initialisierung erfolgt normalerweise ohne zusätzlichen Code.</span><span class="sxs-lookup"><span data-stu-id="a0f48-140">The proper initialization normally happens without any extra code.</span></span> <span data-ttu-id="a0f48-141">Die `BankAccount`-Klasse deklariert einen öffentlichen Konstruktor mit der folgenden Signatur:</span><span class="sxs-lookup"><span data-stu-id="a0f48-141">The `BankAccount` class declares one public constructor with the following signature:</span></span>

```csharp
public BankAccount(string name, decimal initialBalance)
```

<span data-ttu-id="a0f48-142">Der Compiler generiert keinen Standardkonstruktor, wenn Sie selbst einen Konstruktor definieren.</span><span class="sxs-lookup"><span data-stu-id="a0f48-142">The compiler doesn't generate a default constructor when you define a constructor yourself.</span></span> <span data-ttu-id="a0f48-143">Dies bedeutet, dass jede abgeleitete Klasse diesen Konstruktor explizit aufrufen muss.</span><span class="sxs-lookup"><span data-stu-id="a0f48-143">That means each derived class must explicitly call this constructor.</span></span> <span data-ttu-id="a0f48-144">Sie deklarieren einen Konstruktor, der Argumente an den Basisklassenkonstruktor übergeben kann.</span><span class="sxs-lookup"><span data-stu-id="a0f48-144">You declare a constructor that can pass arguments to the base class constructor.</span></span>  <span data-ttu-id="a0f48-145">Der folgende Code zeigt den Konstruktor für `InterestEarningAccount`:</span><span class="sxs-lookup"><span data-stu-id="a0f48-145">The following code shows the constructor for the `InterestEarningAccount`:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/InterestEarningAccount.cs" ID="DerivedConstructor":::

<span data-ttu-id="a0f48-146">Die Parameter für diesen neuen Konstruktor entsprechen dem Parametertyp und den Namen des Basisklassenkonstruktors.</span><span class="sxs-lookup"><span data-stu-id="a0f48-146">The parameters to this new constructor match the parameter type and names of the base class constructor.</span></span> <span data-ttu-id="a0f48-147">Verwenden Sie die `: base()`-Syntax, um einen Aufruf an einen Basisklassenkonstruktor anzugeben.</span><span class="sxs-lookup"><span data-stu-id="a0f48-147">You use the `: base()` syntax to indicate a call to a base class constructor.</span></span> <span data-ttu-id="a0f48-148">Einige Klassen definieren mehrere Konstruktoren, und mit dieser Syntax können Sie den aufzurufenden Basisklassenkonstruktor auswählen.</span><span class="sxs-lookup"><span data-stu-id="a0f48-148">Some classes define multiple constructors, and this syntax enables you to pick which base class constructor you call.</span></span> <span data-ttu-id="a0f48-149">Nachdem Sie die Konstruktoren aktualisiert haben, können Sie den Code für die einzelnen abgeleiteten Klassen entwickeln.</span><span class="sxs-lookup"><span data-stu-id="a0f48-149">Once you've updated the constructors, you can develop the code for each of the derived classes.</span></span> <span data-ttu-id="a0f48-150">Die Anforderungen für die neuen Klassen können wie folgt angegeben werden:</span><span class="sxs-lookup"><span data-stu-id="a0f48-150">The requirements for the new classes can be stated as follows:</span></span>

- <span data-ttu-id="a0f48-151">Ein zinsbringendes Konto:</span><span class="sxs-lookup"><span data-stu-id="a0f48-151">An interest earning account:</span></span>
  - <span data-ttu-id="a0f48-152">Erhält eine Gutschrift von 2 % des Saldos am Monatsende.</span><span class="sxs-lookup"><span data-stu-id="a0f48-152">Will get a credit of 2% of the month-ending-balance.</span></span>
- <span data-ttu-id="a0f48-153">Eine Kreditlinie:</span><span class="sxs-lookup"><span data-stu-id="a0f48-153">A line of credit:</span></span>
  - <span data-ttu-id="a0f48-154">Kann einen negativen Saldo aufweisen, aber als absoluter Wert die Kreditlinie nicht überschreiten.</span><span class="sxs-lookup"><span data-stu-id="a0f48-154">Can have a negative balance, but not be greater in absolute value than the credit limit.</span></span>
  - <span data-ttu-id="a0f48-155">Es fallen monatlich Zinsgebühren an, wenn der Saldo am Monatsende nicht 0 ist.</span><span class="sxs-lookup"><span data-stu-id="a0f48-155">Will incur an interest charge each month where the end of month balance isn't 0.</span></span>
  - <span data-ttu-id="a0f48-156">Für jede Abbuchung, die die Kreditlinie überschreitet, wird eine Gebühr erhoben.</span><span class="sxs-lookup"><span data-stu-id="a0f48-156">Will incur a fee on each withdrawal that goes over the credit limit.</span></span>
- <span data-ttu-id="a0f48-157">Ein Geschenkkartenkonto:</span><span class="sxs-lookup"><span data-stu-id="a0f48-157">A gift card account:</span></span>
  - <span data-ttu-id="a0f48-158">Kann einmal monatlich am letzten Tag des Monats mit einem angegebenen Betrag aufgefüllt werden.</span><span class="sxs-lookup"><span data-stu-id="a0f48-158">Can be refilled with a specified amount once each month, on the last day of the month.</span></span>

<span data-ttu-id="a0f48-159">Sie sehen, dass alle drei Kontotypen über eine Aktion verfügen, die am Ende jedes Monats stattfindet.</span><span class="sxs-lookup"><span data-stu-id="a0f48-159">You can see that all three of these account types have an action that takes places at the end of each month.</span></span> <span data-ttu-id="a0f48-160">Jeder Kontotyp führt jedoch unterschiedliche Aufgaben aus.</span><span class="sxs-lookup"><span data-stu-id="a0f48-160">However, each account type does different tasks.</span></span> <span data-ttu-id="a0f48-161">Sie verwenden *Polymorphie*, um diesen Code zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="a0f48-161">You use *polymorphism* to implement this code.</span></span> <span data-ttu-id="a0f48-162">Erstellen Sie eine einzelne `virtual`-Methode in der `BankAccount`-Klasse:</span><span class="sxs-lookup"><span data-stu-id="a0f48-162">Create a single `virtual` method in the `BankAccount` class:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/BankAccount.cs" ID="DeclareMonthEndTransactions":::

<span data-ttu-id="a0f48-163">Der obige Code zeigt, wie Sie mit dem `virtual`-Schlüsselwort eine Methode in der Basisklasse deklarieren, für die eine abgeleitete Klasse eine andere Implementierung bereitstellen kann.</span><span class="sxs-lookup"><span data-stu-id="a0f48-163">The preceding code shows how you use the `virtual` keyword to declare a method in the base class that a derived class may provide a different implementation for.</span></span> <span data-ttu-id="a0f48-164">Bei einer `virtual`-Methode handelt es sich um eine Methode, bei der jede abgeleitete Klasse eine Neuimplementierung auswählen kann.</span><span class="sxs-lookup"><span data-stu-id="a0f48-164">A `virtual` method is a method where any derived class may choose to reimplement.</span></span> <span data-ttu-id="a0f48-165">Die abgeleiteten Klassen verwenden das `override`-Schlüsselwort, um die neue Implementierung zu definieren.</span><span class="sxs-lookup"><span data-stu-id="a0f48-165">The derived classes use the `override` keyword to define the new implementation.</span></span> <span data-ttu-id="a0f48-166">Dieser Vorgang wird normalerweise als „Überschreiben der Basisklassenimplementierung“ bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="a0f48-166">Typically you refer to this as "overriding the base class implementation".</span></span> <span data-ttu-id="a0f48-167">Das `virtual`-Schlüsselwort gibt an, dass abgeleitete Klassen das Verhalten außer Kraft setzen können.</span><span class="sxs-lookup"><span data-stu-id="a0f48-167">The `virtual` keyword specifies that derived classes may override the behavior.</span></span> <span data-ttu-id="a0f48-168">Sie können auch `abstract`-Methoden deklarieren, bei denen abgeleitete Klassen das Verhalten außer Kraft setzen müssen.</span><span class="sxs-lookup"><span data-stu-id="a0f48-168">You can also declare `abstract` methods where derived classes must override the behavior.</span></span> <span data-ttu-id="a0f48-169">Die Basisklasse stellt keine Implementierung für eine `abstract`-Methode bereit.</span><span class="sxs-lookup"><span data-stu-id="a0f48-169">The base class does not provide an implementation for an `abstract` method.</span></span> <span data-ttu-id="a0f48-170">Als nächstes müssen Sie die Implementierung für zwei der neu erstellten Klassen definieren.</span><span class="sxs-lookup"><span data-stu-id="a0f48-170">Next, you need to define the implementation for two of the new classes you've created.</span></span> <span data-ttu-id="a0f48-171">Beginnen Sie mit dem `InterestEarningAccount`:</span><span class="sxs-lookup"><span data-stu-id="a0f48-171">Start with the `InterestEarningAccount`:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/InterestEarningAccount.cs" ID="ApplyMonthendInterest":::

<span data-ttu-id="a0f48-172">Fügen Sie dem `LineOfCreditAccount` folgenden Code hinzu.</span><span class="sxs-lookup"><span data-stu-id="a0f48-172">Add the following code to the `LineOfCreditAccount`.</span></span> <span data-ttu-id="a0f48-173">Der Code negiert den Saldo, um eine positive Zinsgebühr zu berechnen, die vom Konto abgebucht wird:</span><span class="sxs-lookup"><span data-stu-id="a0f48-173">The code negates the balance to compute a positive interest charge that is withdrawn from the account:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/LineOfCreditAccount.cs" ID="ApplyMonthendInterest":::

<span data-ttu-id="a0f48-174">Für die `GiftCardAccount`-Klasse sind zwei Änderungen erforderlich, um die Funktion am Monatsende zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="a0f48-174">The `GiftCardAccount` class needs two changes to implement its month-end functionality.</span></span> <span data-ttu-id="a0f48-175">Ändern Sie zunächst den Konstruktor so, dass er einen optionalen Betrag enthält, der monatlich hinzugefügt werden soll:</span><span class="sxs-lookup"><span data-stu-id="a0f48-175">First, modify the constructor to include an optional amount to add each month:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/GiftCardAccount.cs" ID="GiftCardAccountConstruction":::

<span data-ttu-id="a0f48-176">Der Konstruktor stellt einen Standardwert für den `monthlyDeposit`-Wert bereit, sodass Aufrufer keine `0` eingeben müssen, wenn keine monatliche Einzahlung erfolgt.</span><span class="sxs-lookup"><span data-stu-id="a0f48-176">The constructor provides a default value for the `monthlyDeposit` value so callers can omit a `0` for no monthly deposit.</span></span> <span data-ttu-id="a0f48-177">Überschreiben Sie als nächstes die `PerformMonthEndTransactions`-Methode, um die monatliche Einzahlung hinzuzufügen, falls sie im Konstruktor auf einen Wert ungleich 0 festgelegt wurde:</span><span class="sxs-lookup"><span data-stu-id="a0f48-177">Next, override the `PerformMonthEndTransactions` method to add the monthly deposit, if it was set to a non-zero value in the constructor:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/GiftCardAccount.cs" ID="AddMonthlyDeposit":::

<span data-ttu-id="a0f48-178">Durch die Überschreibung wird die im Konstruktor festgelegte monatliche Einzahlung angewendet.</span><span class="sxs-lookup"><span data-stu-id="a0f48-178">The override applies the monthly deposit set in the constructor.</span></span> <span data-ttu-id="a0f48-179">Fügen Sie der `Main`-Methode den folgenden Code hinzu, um diese Änderungen für das `GiftCardAccount` und das `InterestEarningAccount` zu testen:</span><span class="sxs-lookup"><span data-stu-id="a0f48-179">Add the following code to the `Main` method to test these changes for the `GiftCardAccount` and the `InterestEarningAccount`:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/Program.cs" ID="FirstTests":::

<span data-ttu-id="a0f48-180">Überprüfen Sie die Ergebnisse.</span><span class="sxs-lookup"><span data-stu-id="a0f48-180">Verify the results.</span></span> <span data-ttu-id="a0f48-181">Fügen Sie jetzt einen ähnlichen Testcode für das `LineOfCreditAccount` hinzu:</span><span class="sxs-lookup"><span data-stu-id="a0f48-181">Now, add a similar set of test code for the `LineOfCreditAccount`:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/Program.cs" ID="TestLineOfCredit":::

<span data-ttu-id="a0f48-182">Wenn Sie den vorangehenden Code hinzufügen und das Programm ausführen, wird in etwa folgender Fehler angezeigt:</span><span class="sxs-lookup"><span data-stu-id="a0f48-182">When you add the preceding code and run the program, you'll see something like the following error:</span></span>

```console
Unhandled exception. System.ArgumentOutOfRangeException: Amount of deposit must be positive (Parameter 'amount')
   at OOProgramming.BankAccount.MakeDeposit(Decimal amount, DateTime date, String note) in BankAccount.cs:line 42
   at OOProgramming.BankAccount..ctor(String name, Decimal initialBalance) in BankAccount.cs:line 31
   at OOProgramming.LineOfCreditAccount..ctor(String name, Decimal initialBalance) in LineOfCreditAccount.cs:line 9
   at OOProgramming.Program.Main(String[] args) in Program.cs:line 29
```

> [!NOTE]
> <span data-ttu-id="a0f48-183">Die tatsächliche Ausgabe enthält den vollständigen Pfad zum Ordner mit dem Projekt.</span><span class="sxs-lookup"><span data-stu-id="a0f48-183">The actual output includes the full path to the folder with the project.</span></span> <span data-ttu-id="a0f48-184">Die Ordnernamen wurden zur Kürzung ausgelassen.</span><span class="sxs-lookup"><span data-stu-id="a0f48-184">The folder names were omitted for brevity.</span></span> <span data-ttu-id="a0f48-185">Abhängig von Ihrem Codeformat können auch die Zeilennummern leicht abweichen.</span><span class="sxs-lookup"><span data-stu-id="a0f48-185">Also, depending on your code format, the line numbers may be slightly different.</span></span>

<span data-ttu-id="a0f48-186">Dieser Code verursacht einen Fehler, weil `BankAccount` von einem Anfangssaldo größer als 0 ausgeht.</span><span class="sxs-lookup"><span data-stu-id="a0f48-186">This code fails because the `BankAccount` assumes that the initial balance must be greater than 0.</span></span> <span data-ttu-id="a0f48-187">Eine weitere Annahme in der `BankAccount`-Klasse besteht darin, dass der Saldo nicht negativ sein kann.</span><span class="sxs-lookup"><span data-stu-id="a0f48-187">Another assumption baked into the `BankAccount` class is that the balance can't go negative.</span></span> <span data-ttu-id="a0f48-188">Stattdessen wird jede Abbuchung, die das Konto überzieht, abgelehnt.</span><span class="sxs-lookup"><span data-stu-id="a0f48-188">Instead, any withdrawal that overdraws the account is rejected.</span></span> <span data-ttu-id="a0f48-189">Beide Annahmen müssen geändert werden.</span><span class="sxs-lookup"><span data-stu-id="a0f48-189">Both of those assumptions need to change.</span></span> <span data-ttu-id="a0f48-190">Das Kreditlinienkonto beginnt bei 0 und weist im Allgemeinen einen negativen Saldo auf.</span><span class="sxs-lookup"><span data-stu-id="a0f48-190">The line of credit account starts at 0, and generally will have a negative balance.</span></span> <span data-ttu-id="a0f48-191">Wenn ein Kunde zu viel Geld aufnimmt, fällt zudem eine Gebühr an.</span><span class="sxs-lookup"><span data-stu-id="a0f48-191">Also, if a customer borrows too much money, they incur a fee.</span></span> <span data-ttu-id="a0f48-192">Die Transaktion wird akzeptiert, sie kostet lediglich mehr.</span><span class="sxs-lookup"><span data-stu-id="a0f48-192">The transaction is accepted, it just costs more.</span></span> <span data-ttu-id="a0f48-193">Die erste Regel kann implementiert werden, indem Sie dem `BankAccount`-Konstruktor, der den Mindestsaldo angibt, ein optionales Argument hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="a0f48-193">The first rule can be implemented by adding an optional argument to the `BankAccount` constructor that specifies the minimum balance.</span></span> <span data-ttu-id="a0f48-194">Der Standardwert ist `0`.</span><span class="sxs-lookup"><span data-stu-id="a0f48-194">The default is `0`.</span></span> <span data-ttu-id="a0f48-195">Die zweite Regel erfordert einen Mechanismus, der es abgeleiteten Klassen ermöglicht, den Standardalgorithmus zu ändern.</span><span class="sxs-lookup"><span data-stu-id="a0f48-195">The second rule requires a mechanism that enables derived classes to modify the default algorithm.</span></span> <span data-ttu-id="a0f48-196">In gewisser Hinsicht fragt die Basisklasse beim abgeleiteten Typ ab, was bei einer Überziehung geschehen soll.</span><span class="sxs-lookup"><span data-stu-id="a0f48-196">In a sense, the base class "asks" the derived type what should happen when there's an overdraft.</span></span> <span data-ttu-id="a0f48-197">Das Standardverhalten besteht darin, die Transaktion durch Auslösen einer Ausnahme abzulehnen.</span><span class="sxs-lookup"><span data-stu-id="a0f48-197">The default behavior is to reject the transaction by throwing an exception.</span></span>

<span data-ttu-id="a0f48-198">Fügen wir zuerst einen zweiten Konstruktor hinzu, der einen optionalen `minimumBalance`-Parameter enthält.</span><span class="sxs-lookup"><span data-stu-id="a0f48-198">Let's start by adding a second constructor that includes an optional `minimumBalance` parameter.</span></span> <span data-ttu-id="a0f48-199">Dieser neue Konstruktor führt alle Aktionen aus, die vom vorhandenen Konstruktor durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="a0f48-199">This new constructor does all the actions done by the existing constructor.</span></span> <span data-ttu-id="a0f48-200">Außerdem legt er die Eigenschaft des Mindestsaldos fest.</span><span class="sxs-lookup"><span data-stu-id="a0f48-200">Also, it sets the minimum balance property.</span></span> <span data-ttu-id="a0f48-201">Sie könnten den Text des vorhandenen Konstruktors kopieren.</span><span class="sxs-lookup"><span data-stu-id="a0f48-201">You could copy the body of the existing constructor.</span></span> <span data-ttu-id="a0f48-202">Dies bedeutet jedoch, dass in Zukunft zwei Stellen geändert werden müssen.</span><span class="sxs-lookup"><span data-stu-id="a0f48-202">but that means two locations to change in the future.</span></span> <span data-ttu-id="a0f48-203">Stattdessen können Sie die *Konstruktorverkettung* verwenden, sodass ein Konstruktor einen anderen aufruft.</span><span class="sxs-lookup"><span data-stu-id="a0f48-203">Instead, you can use *constructor chaining* to have one constructor call another.</span></span> <span data-ttu-id="a0f48-204">Der folgende Code zeigt die beiden Konstruktoren und das neue zusätzliche Feld:</span><span class="sxs-lookup"><span data-stu-id="a0f48-204">The following code shows the two constructors and the new additional field:</span></span>

 :::code language="csharp" source="./snippets/object-oriented-programming/BankAccount.cs" ID="ConstructorModifications":::

<span data-ttu-id="a0f48-205">Der obige Code zeigt zwei neue Verfahren.</span><span class="sxs-lookup"><span data-stu-id="a0f48-205">The preceding code shows two new techniques.</span></span> <span data-ttu-id="a0f48-206">Erstens ist das Feld `minimumBalance` als `readonly` markiert.</span><span class="sxs-lookup"><span data-stu-id="a0f48-206">First, the `minimumBalance` field is marked as `readonly`.</span></span> <span data-ttu-id="a0f48-207">Somit kann der Wert nach Erstellen des Objekts nicht mehr geändert werden.</span><span class="sxs-lookup"><span data-stu-id="a0f48-207">That means the value cannot be changed after the object is constructed.</span></span> <span data-ttu-id="a0f48-208">Nach dem Erstellen von `BankAccount` kann `minimumBalance` nicht mehr geändert werden.</span><span class="sxs-lookup"><span data-stu-id="a0f48-208">Once a `BankAccount` is created, the `minimumBalance` can't change.</span></span> <span data-ttu-id="a0f48-209">Zweitens verwendet der Konstruktor, der zwei Parameter akzeptiert, `: this(name, initialBalance, 0) { }` als Implementierung.</span><span class="sxs-lookup"><span data-stu-id="a0f48-209">Second, the constructor that takes two parameters uses `: this(name, initialBalance, 0) { }` as its implementation.</span></span> <span data-ttu-id="a0f48-210">Der `: this()`-Ausdruck ruft den anderen Konstruktor auf – den Konstruktor mit drei Parametern.</span><span class="sxs-lookup"><span data-stu-id="a0f48-210">The `: this()` expression calls the other constructor, the one with three parameters.</span></span> <span data-ttu-id="a0f48-211">Durch dieses Verfahren können Sie auch dann eine einzige Implementierung für die Initialisierung eines Objekts verwenden, wenn im Clientcode einer von vielen Konstruktoren ausgewählt werden kann.</span><span class="sxs-lookup"><span data-stu-id="a0f48-211">This technique allows you to have a single implementation for initializing an object even though client code can choose one of many constructors.</span></span>

<span data-ttu-id="a0f48-212">Diese Implementierung ruft `MakeDeposit` nur dann auf, wenn der anfängliche Saldo größer als `0`ist.</span><span class="sxs-lookup"><span data-stu-id="a0f48-212">This implementation calls `MakeDeposit` only if the initial balance is greater than `0`.</span></span> <span data-ttu-id="a0f48-213">Dadurch wird die Regel beibehalten, dass Einzahlungen positiv sein müssen, und dennoch ermöglicht, dass das Kreditkonto bei einem Saldo von `0` geöffnet bleibt.</span><span class="sxs-lookup"><span data-stu-id="a0f48-213">That preserves the rule that deposits must be positive, yet lets the credit account open with a `0` balance.</span></span>

<span data-ttu-id="a0f48-214">Da die `BankAccount`-Klasse jetzt ein schreibgeschütztes Feld für den Mindestsaldo aufweist, besteht die letzte Änderung darin, den festen Code `0` in der `MakeWithdrawal`-Methode in `minimumBalance` zu ändern:</span><span class="sxs-lookup"><span data-stu-id="a0f48-214">Now that the `BankAccount` class has a read-only field for the minimum balance, the final change is to change the hard code `0` to `minimumBalance` in the `MakeWithdrawal` method:</span></span>

```csharp
if (Balance - amount < minimumBalance)
```

<span data-ttu-id="a0f48-215">Nach Erweiterung der `BankAccount`-Klasse können Sie den `LineOfCreditAccount`-Konstruktor so ändern, dass er den neuen Basiskonstruktor aufruft, wie im folgenden Code gezeigt:</span><span class="sxs-lookup"><span data-stu-id="a0f48-215">After extending the `BankAccount` class, you can modify the `LineOfCreditAccount` constructor to call the new base constructor, as shown in the following code:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/LineOfCreditAccount.cs" ID="ConstructLineOfCredit":::

<span data-ttu-id="a0f48-216">Beachten Sie, dass der `LineOfCreditAccount`-Konstruktor das Vorzeichen des Parameters `creditLimit` ändert, sodass er der Bedeutung des Parameters `minimumBalance` entspricht.</span><span class="sxs-lookup"><span data-stu-id="a0f48-216">Notice that the `LineOfCreditAccount` constructor changes the sign of the `creditLimit` parameter so it matches the meaning of the `minimumBalance` parameter.</span></span>

## <a name="different-overdraft-rules"></a><span data-ttu-id="a0f48-217">Verschiedene Regeln für Überziehung</span><span class="sxs-lookup"><span data-stu-id="a0f48-217">Different overdraft rules</span></span>

<span data-ttu-id="a0f48-218">Das letzte hinzuzufügende Feature ermöglicht es dem `LineOfCreditAccount`, für das Überziehen des Kreditlimits eine Gebühr zu erheben, statt die Transaktion abzulehnen.</span><span class="sxs-lookup"><span data-stu-id="a0f48-218">The last feature to add enables the `LineOfCreditAccount` to charge a fee for going over the credit limit instead of refusing the transaction.</span></span>

<span data-ttu-id="a0f48-219">Ein Verfahren besteht darin, eine virtuelle Funktion zu definieren, in der das erforderliche Verhalten implementiert wird.</span><span class="sxs-lookup"><span data-stu-id="a0f48-219">One technique is to define a virtual function where you implement the required behavior.</span></span> <span data-ttu-id="a0f48-220">Die `BankAccount`-Klasse gestaltet die `MakeWithdrawal`-Methode in zwei Methoden um.</span><span class="sxs-lookup"><span data-stu-id="a0f48-220">The `BankAccount` class refactors the `MakeWithdrawal` method into two methods.</span></span> <span data-ttu-id="a0f48-221">Die neue Methode führt die angegebene Aktion aus, wenn der Saldo durch die Abbuchung unter den Mindestbetrag fällt.</span><span class="sxs-lookup"><span data-stu-id="a0f48-221">The new method does the specified action when the withdrawal takes the balance below the minimum.</span></span> <span data-ttu-id="a0f48-222">Die vorhandene `MakeWithdrawal`-Methode enthält den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="a0f48-222">The existing `MakeWithdrawal` method has the following code:</span></span>

```csharp
public void MakeWithdrawal(decimal amount, DateTime date, string note)
{
    if (amount <= 0)
    {
        throw new ArgumentOutOfRangeException(nameof(amount), "Amount of withdrawal must be positive");
    }
    if (Balance - amount < minimumBalance)
    {
        throw new InvalidOperationException("Not sufficient funds for this withdrawal");
    }
    var withdrawal = new Transaction(-amount, date, note);
    allTransactions.Add(withdrawal);
}
```

<span data-ttu-id="a0f48-223">Ersetzen Sie den Code durch folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="a0f48-223">Replace it with the following code:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/BankAccount.cs" ID="RefactoredMakeWithdrawal":::

<span data-ttu-id="a0f48-224">Die hinzugefügte Methode ist `protected`, was bedeutet, dass sie nur von abgeleiteten Klassen aufgerufen werden kann.</span><span class="sxs-lookup"><span data-stu-id="a0f48-224">The added method is `protected`, which means that it can be called only from derived classes.</span></span> <span data-ttu-id="a0f48-225">Diese Deklaration verhindert, dass die Methode von anderen Clients aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="a0f48-225">That declaration prevents other clients from calling the method.</span></span> <span data-ttu-id="a0f48-226">Zudem ist sie `virtual`, damit abgeleitete Klassen das Verhalten ändern können.</span><span class="sxs-lookup"><span data-stu-id="a0f48-226">It's also `virtual` so that derived classes can change the behavior.</span></span> <span data-ttu-id="a0f48-227">Der Rückgabetyp ist eine `Transaction?`.</span><span class="sxs-lookup"><span data-stu-id="a0f48-227">The return type is a `Transaction?`.</span></span> <span data-ttu-id="a0f48-228">Die `?`-Anmerkung gibt an, dass die Methode `null` zurückgeben darf.</span><span class="sxs-lookup"><span data-stu-id="a0f48-228">The `?` annotation indicates that the method may return `null`.</span></span> <span data-ttu-id="a0f48-229">Fügen Sie im `LineOfCreditAccount` die folgende Implementierung hinzu, damit bei Überschreiten des Abbuchungslimits eine Gebühr erhoben wird:</span><span class="sxs-lookup"><span data-stu-id="a0f48-229">Add the following implementation in the `LineOfCreditAccount` to charge a fee when the withdrawal limit is exceeded:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/LineOfCreditAccount.cs" ID="AddOverdraftFee":::

<span data-ttu-id="a0f48-230">Die Außerkraftsetzung gibt bei Überziehen des Kontos eine Gebührentransaktion zurück.</span><span class="sxs-lookup"><span data-stu-id="a0f48-230">The override returns a fee transaction when the account is overdrawn.</span></span> <span data-ttu-id="a0f48-231">Wenn die Abbuchung den Grenzwert nicht überschreitet, gibt die Methode eine `null`-Transaktion zurück.</span><span class="sxs-lookup"><span data-stu-id="a0f48-231">If the withdrawal doesn't go over the limit, the method returns a `null` transaction.</span></span> <span data-ttu-id="a0f48-232">Dies bedeutet, dass keine Gebühren erhoben werden.</span><span class="sxs-lookup"><span data-stu-id="a0f48-232">That indicates there's no fee.</span></span> <span data-ttu-id="a0f48-233">Testen Sie diese Änderungen, indem Sie der `Main`-Methode in der `Program`-Klasse den folgenden Code hinzufügen:</span><span class="sxs-lookup"><span data-stu-id="a0f48-233">Test these changes by adding the following code to your `Main` method in the `Program` class:</span></span>

:::code language="csharp" source="./snippets/object-oriented-programming/Program.cs" ID="TestLineOfCredit":::

<span data-ttu-id="a0f48-234">Führen Sie das Programm aus, und überprüfen Sie die Ergebnisse.</span><span class="sxs-lookup"><span data-stu-id="a0f48-234">Run the program, and check the results.</span></span>

## <a name="summary"></a><span data-ttu-id="a0f48-235">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="a0f48-235">Summary</span></span>

<span data-ttu-id="a0f48-236">Wenn Sie nicht weiterkommen, sehen Sie sich die Quelle für dieses Tutorial [in unserem GitHub-Repository](https://github.com/dotnet/docs/tree/master/docs/csharp/tutorials/intro-to-csharp/snippets/object-oriented-programming) an.</span><span class="sxs-lookup"><span data-stu-id="a0f48-236">If you got stuck, you can see the source for this tutorial [in our GitHub repo](https://github.com/dotnet/docs/tree/master/docs/csharp/tutorials/intro-to-csharp/snippets/object-oriented-programming).</span></span>

<span data-ttu-id="a0f48-237">In diesem Tutorial wurden viele Verfahren vorgestellt, die bei der objektorientierten Programmierung verwendet werden:</span><span class="sxs-lookup"><span data-stu-id="a0f48-237">This tutorial demonstrated many of the techniques used in Object-Oriented programming:</span></span>

- <span data-ttu-id="a0f48-238">Sie haben *Abstraktion* eingesetzt, als Sie in jeder Klasse viele Details als `private` festgelegt haben.</span><span class="sxs-lookup"><span data-stu-id="a0f48-238">You used *Abstraction* when you kept many details `private` in each class.</span></span>
- <span data-ttu-id="a0f48-239">Sie haben *Kapselung* verwendet, als Sie Klassen für jeden der verschiedenen Kontotypen definiert haben.</span><span class="sxs-lookup"><span data-stu-id="a0f48-239">You used *Encapsulation* when you defined classes for each of the different account types.</span></span> <span data-ttu-id="a0f48-240">Diese Klassen beschreiben das Verhalten für den jeweiligen Kontotyp.</span><span class="sxs-lookup"><span data-stu-id="a0f48-240">Those classes described the behavior for that type of account.</span></span>
- <span data-ttu-id="a0f48-241">Sie haben *Vererbung* verwendet, als Sie die bereits in der `BankAccount`-Klasse erstellte Implementierung genutzt haben, um Code zu sparen.</span><span class="sxs-lookup"><span data-stu-id="a0f48-241">You used *Inheritance* when you leveraged the implementation already created in the `BankAccount` class to save code.</span></span>
- <span data-ttu-id="a0f48-242">Sie haben *Polymorphie* eingesetzt, indem Sie `virtual`-Methoden erstellt haben, die von abgeleiteten Klassen überschrieben werden können, um ein bestimmtes Verhalten für den jeweiligen Kontotyp zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="a0f48-242">You used *Polymorphism* when you created `virtual` methods that derived classes could override to create specific behavior for that account type.</span></span>

<span data-ttu-id="a0f48-243">Herzlichen Glückwunsch! Sie haben unsere Tutorials zur Einführung in C# vollständig abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="a0f48-243">Congratulations, you've finished all of our introduction to C# tutorials.</span></span> <span data-ttu-id="a0f48-244">Wenn Sie mehr erfahren möchten, sehen Sie sich weitere [Tutorials](../index.md) an.</span><span class="sxs-lookup"><span data-stu-id="a0f48-244">To learn more, try more of our [tutorials](../index.md).</span></span>
