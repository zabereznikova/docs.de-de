---
title: switch-Ausdruck – C#-Referenz
description: Erfahren Sie, wie Sie den C#-Ausdruck „switch“ für einen Musterabgleich und die Selbstprüfung von Daten verwenden.
ms.date: 01/14/2021
ms.openlocfilehash: 55fef8d351b178fd0ec23847e81e6c56eb1367b0
ms.sourcegitcommit: 3a8f1979a98c6c19217a1930e0af5908988eb8ba
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 01/16/2021
ms.locfileid: "98536085"
---
# <a name="switch-expression-c-reference"></a><span data-ttu-id="ca660-103">switch-Ausdruck (C#-Referenz)</span><span class="sxs-lookup"><span data-stu-id="ca660-103">switch expression (C# reference)</span></span>

<span data-ttu-id="ca660-104">Im vorliegenden Artikel wird der in C# 8.0 eingeführte `switch`-Ausdruck vorgestellt.</span><span class="sxs-lookup"><span data-stu-id="ca660-104">This article covers the `switch` expression, introduced in C# 8.0.</span></span> <span data-ttu-id="ca660-105">Informationen zur `switch`-Anweisung finden Sie im Artikel zur [`switch`-Anweisung](../keywords/switch.md) im Abschnitt zu den [Anweisungen](../keywords/index.md).</span><span class="sxs-lookup"><span data-stu-id="ca660-105">For information on the `switch` statement, see the article on the [`switch` statement](../keywords/switch.md) in the [statements](../keywords/index.md) section.</span></span>

## <a name="basic-example"></a><span data-ttu-id="ca660-106">Einfaches Beispiel</span><span class="sxs-lookup"><span data-stu-id="ca660-106">Basic example</span></span>

<span data-ttu-id="ca660-107">Der `switch`-Ausdruck stellt eine ähnliche Semantik wie `switch` im Kontext eines Ausdrucks bereit.</span><span class="sxs-lookup"><span data-stu-id="ca660-107">The `switch` expression provides for `switch`-like semantics in an expression context.</span></span> <span data-ttu-id="ca660-108">Er bietet eine kompakte Syntax, wenn die switch-Verzweigungsarme einen Wert generieren.</span><span class="sxs-lookup"><span data-stu-id="ca660-108">It provides a concise syntax when the switch arms produce a value.</span></span> <span data-ttu-id="ca660-109">Das folgende Beispiel zeigt die Struktur eines switch-Ausdrucks.</span><span class="sxs-lookup"><span data-stu-id="ca660-109">The following example shows the structure of a switch expression.</span></span> <span data-ttu-id="ca660-110">Die Werte aus einem `enum` zur Darstellung visueller Richtungen in einer Onlinekarte entsprechen der jeweiligen Himmelsrichtung:</span><span class="sxs-lookup"><span data-stu-id="ca660-110">It translates values from an `enum` representing visual directions in an online map to the corresponding cardinal direction:</span></span>

:::code language="csharp" source="snippets/shared/SwitchExpressions.cs" id="SnippetBasicStructure":::

<span data-ttu-id="ca660-111">Das vorstehende Beispiel zeigt die grundlegenden Elemente eines switch-Ausdrucks:</span><span class="sxs-lookup"><span data-stu-id="ca660-111">The preceding sample shows the basic elements of a switch expression:</span></span>

- <span data-ttu-id="ca660-112">*range-Ausdruck*: Das vorstehende Beispiel verwendet die Variable `direction` als Bereichsausdruck.</span><span class="sxs-lookup"><span data-stu-id="ca660-112">The *range expression*: The preceding example uses the variable `direction` as the range expression.</span></span>
- <span data-ttu-id="ca660-113">*switch-Ausdrucksverzweigungsarme*: Jeder Verzweigungsarm des switch-Ausdrucks enthält ein *Muster*, einen optionalen *case-Wächter*, das `=>`-Token und einen *Ausdruck*.</span><span class="sxs-lookup"><span data-stu-id="ca660-113">The *switch expression arms*: Each switch expression arm contains a *pattern*, an optional *case guard*, the `=>` token, and an *expression*.</span></span>

<span data-ttu-id="ca660-114">Das Ergebnis des *switch-Ausdrucks* ist der Wert des Ausdrucks des ersten *switch-Ausdrucksverzweigungsarms*, dessen *Muster* mit dem des *Bereichsausdrucks* übereinstimmt, und bei dem der *case-Wächter* (sofern vorhanden) als `true` ausgewertet wird.</span><span class="sxs-lookup"><span data-stu-id="ca660-114">The result of the *switch expression* is the value of the expression of the first *switch expression arm* whose *pattern* matches the *range expression* and whose *case guard*, if present, evaluates to `true`.</span></span> <span data-ttu-id="ca660-115">Der *Ausdruck* auf der rechten Seite des `=>`-Tokens kann keine Ausdrucksanweisung sein.</span><span class="sxs-lookup"><span data-stu-id="ca660-115">The *expression* on the right of the `=>` token can't be an expression statement.</span></span>

<span data-ttu-id="ca660-116">Die *switch-Ausdrucksverzweigungsarme* werden in der Textreihenfolge ausgewertet.</span><span class="sxs-lookup"><span data-stu-id="ca660-116">The *switch expression arms* are evaluated in text order.</span></span> <span data-ttu-id="ca660-117">Der Compiler gibt einen Fehler aus, wenn ein niedrigerer *switch-Ausdrucksverzweigungsarm* nicht ausgewählt werden kann, weil ein höherer *switch-Ausdrucksverzweigungsarm* allen Werten entspricht.</span><span class="sxs-lookup"><span data-stu-id="ca660-117">The compiler issues an error when a lower *switch expression arm* can't be chosen because a higher *switch expression arm* matches all its values.</span></span>

## <a name="patterns-and-case-guards"></a><span data-ttu-id="ca660-118">Muster und case-Wächter</span><span class="sxs-lookup"><span data-stu-id="ca660-118">Patterns and case guards</span></span>

<span data-ttu-id="ca660-119">Viele Muster werden in Verzweigungsarmen von switch-Ausdrücken unterstützt.</span><span class="sxs-lookup"><span data-stu-id="ca660-119">Many patterns are supported in switch expression arms.</span></span> <span data-ttu-id="ca660-120">Das Beispiel oben verwendet ein *Konstantenmuster*.</span><span class="sxs-lookup"><span data-stu-id="ca660-120">The preceding example uses a *constant pattern*.</span></span> <span data-ttu-id="ca660-121">Ein *Konstantenmuster* vergleicht den Bereichsausdruck mit einem Wert.</span><span class="sxs-lookup"><span data-stu-id="ca660-121">A *constant pattern* compares the range expression to a value.</span></span> <span data-ttu-id="ca660-122">Dieser Wert muss eine Kompilierzeitkonstante sein.</span><span class="sxs-lookup"><span data-stu-id="ca660-122">That value must be a compile-time constant.</span></span> <span data-ttu-id="ca660-123">Ein *Typmuster* vergleicht den Bereichsausdruck mit einem bekannten Typ.</span><span class="sxs-lookup"><span data-stu-id="ca660-123">The *type pattern* compares the range expression to a known type.</span></span> <span data-ttu-id="ca660-124">Das folgende Beispiel ruft das dritte Element aus einer Sequenz ab.</span><span class="sxs-lookup"><span data-stu-id="ca660-124">The following example retrieves the third element from a sequence.</span></span> <span data-ttu-id="ca660-125">Basierend auf dem Typ der Sequenz werden unterschiedliche Methoden verwendet:</span><span class="sxs-lookup"><span data-stu-id="ca660-125">It uses different methods based on the type of the sequence:</span></span>

:::code language="csharp" source="snippets/shared/SwitchExpressions.cs" id="SnippetTypePattern":::

<span data-ttu-id="ca660-126">Muster können rekursiv sein. Hierbei testet ein Muster einen Typ, und wenn dieser Typ übereinstimmt, gleicht das Muster einen oder mehrere Eigenschaftswerte des Bereichsausdrucks ab.</span><span class="sxs-lookup"><span data-stu-id="ca660-126">Patterns can be recursive, where a pattern tests a type, and if that type matches, the pattern matches one or more property values on the range expression.</span></span> <span data-ttu-id="ca660-127">Sie können rekursive Muster verwenden, um das vorstehende Beispiel zu erweitern.</span><span class="sxs-lookup"><span data-stu-id="ca660-127">You can use recursive patterns to extend the preceding example.</span></span> <span data-ttu-id="ca660-128">Sie fügen switch-Ausdrucksverzweigungsarme für Arrays hinzu, die weniger als 3 Elemente umfassen.</span><span class="sxs-lookup"><span data-stu-id="ca660-128">You add switch expression arms for arrays that have fewer than 3 elements.</span></span> <span data-ttu-id="ca660-129">Rekursive Muster werden im folgenden Beispiel gezeigt:</span><span class="sxs-lookup"><span data-stu-id="ca660-129">Recursive patterns are shown in the following example:</span></span>

:::code language="csharp" source="snippets/shared/SwitchExpressions.cs" id="SnippetRecursivePattern":::

<span data-ttu-id="ca660-130">Rekursive Muster können Eigenschaften des Bereichsausdrucks untersuchen, aber keinen arbiträren Code ausführen.</span><span class="sxs-lookup"><span data-stu-id="ca660-130">Recursive patterns can examine properties of the range expression, but can't execute arbitrary code.</span></span> <span data-ttu-id="ca660-131">Sie können den in einer `when`-Klausel angegebenen *case-Wächter* verwenden, um ähnliche Überprüfungen für andere Sequenztypen bereitzustellen:</span><span class="sxs-lookup"><span data-stu-id="ca660-131">You can use a *case guard*, specified in a `when` clause, to provide similar checks for other sequence types:</span></span>

:::code language="csharp" source="snippets/shared/SwitchExpressions.cs" id="SnippetGuardCase":::

<span data-ttu-id="ca660-132">Schließlich können Sie das `_`-Muster und das `null`-Muster hinzufügen, um Argumente abzufangen, die nicht über einen anderen switch-Ausdrucksverzweigungsarm verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="ca660-132">Finally, you can add the `_` pattern and the `null` pattern to catch arguments that aren't processed by any other switch expression arm.</span></span> <span data-ttu-id="ca660-133">So wird der switch-Ausdruck *umfassend ausgeschöpft*, d. h. es werden alle möglichen Werte des Bereichsausdrucks behandelt.</span><span class="sxs-lookup"><span data-stu-id="ca660-133">That makes the switch expression *exhaustive*, meaning any possible value of the range expression is handled.</span></span> <span data-ttu-id="ca660-134">Das folgende Beispiel fügt diese Ausdrucksverzweigungsarme hinzu:</span><span class="sxs-lookup"><span data-stu-id="ca660-134">The following example adds those expression arms:</span></span>

:::code language="csharp" source="snippets/shared/SwitchExpressions.cs" id="SnippetExhaustive":::

<span data-ttu-id="ca660-135">Das vorstehende Beispiel fügt ein `null`-Muster hinzu und ändert das `IEnumerable<T>`-Muster in ein `_`-Muster.</span><span class="sxs-lookup"><span data-stu-id="ca660-135">The preceding example adds a `null` pattern, and changes the `IEnumerable<T>` type pattern to a `_` pattern.</span></span> <span data-ttu-id="ca660-136">Das `null`-Muster bietet eine NULL-Überprüfung als switch-Ausdrucksverzweigungsarm.</span><span class="sxs-lookup"><span data-stu-id="ca660-136">The `null` pattern provides a null check as a switch expression arm.</span></span> <span data-ttu-id="ca660-137">Der Ausdruck für diesen Verzweigungsarm löst eine <xref:System.ArgumentNullException> aus.</span><span class="sxs-lookup"><span data-stu-id="ca660-137">The expression for that arm throws an <xref:System.ArgumentNullException>.</span></span> <span data-ttu-id="ca660-138">Das `_`-Muster gleicht alle Eingaben ab, die nicht durch vorherige Verzweigungsarme abgeglichen wurden.</span><span class="sxs-lookup"><span data-stu-id="ca660-138">The `_` pattern matches all inputs that haven't been matched by previous arms.</span></span> <span data-ttu-id="ca660-139">Es muss nach der `null`-Überprüfung eingefügt werden, weil es ansonsten die `null`-Eingaben abgleichen würde.</span><span class="sxs-lookup"><span data-stu-id="ca660-139">It must come after the `null` check, or it would match `null` inputs.</span></span>

## <a name="non-exhaustive-switch-expressions"></a><span data-ttu-id="ca660-140">Unvollständige switch-Ausdrücke</span><span class="sxs-lookup"><span data-stu-id="ca660-140">Non-exhaustive switch expressions</span></span>

<span data-ttu-id="ca660-141">Wenn keines der switch-Ausdrucksmuster ein Argument abfängt, löst die Runtime eine Ausnahme aus.</span><span class="sxs-lookup"><span data-stu-id="ca660-141">If none of a switch expression's patterns catches an argument, the runtime throws an exception.</span></span> <span data-ttu-id="ca660-142">In .NET Core 3.0 und höher ist die Ausnahme eine <xref:System.Runtime.CompilerServices.SwitchExpressionException?displayProperty=nameWithType>-Klasse.</span><span class="sxs-lookup"><span data-stu-id="ca660-142">In .NET Core 3.0 and later versions, the exception is a <xref:System.Runtime.CompilerServices.SwitchExpressionException?displayProperty=nameWithType>.</span></span> <span data-ttu-id="ca660-143">Im .NET Framework ist die Ausnahme eine <xref:System.InvalidOperationException>-Klasse.</span><span class="sxs-lookup"><span data-stu-id="ca660-143">In .NET Framework, the exception is an <xref:System.InvalidOperationException>.</span></span>

## <a name="see-also"></a><span data-ttu-id="ca660-144">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="ca660-144">See also</span></span>

- [<span data-ttu-id="ca660-145">C#-Spezifikationsvorschlag für rekursive Muster</span><span class="sxs-lookup"><span data-stu-id="ca660-145">C# language spec proposal for recursive patterns</span></span>](~/_csharplang/proposals/csharp-8.0/patterns.md#switch-expression)
- [<span data-ttu-id="ca660-146">C#-Referenz</span><span class="sxs-lookup"><span data-stu-id="ca660-146">C# reference</span></span>](../index.md)
- [<span data-ttu-id="ca660-147">C#-Operatoren und -Ausdrücke</span><span class="sxs-lookup"><span data-stu-id="ca660-147">C# operators and expressions</span></span>](index.md)
- [<span data-ttu-id="ca660-148">Mustervergleich</span><span class="sxs-lookup"><span data-stu-id="ca660-148">Pattern matching</span></span>](../../pattern-matching.md)
