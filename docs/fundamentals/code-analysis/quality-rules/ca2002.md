---
title: 'CA2002: keine Sperre für Objekte mit schwacher Identität (Code Analyse)'
description: 'Weitere Informationen zur Code Analyse Regel CA2002: keine Sperre für Objekte mit schwacher Identität'
ms.date: 01/31/2018
ms.topic: reference
f1_keywords:
- DoNotLockOnObjectsWithWeakIdentity
- CA2002
helpviewer_keywords:
- CA2002
- DoNotLockOnObjectsWithWeakIdentity
author: gewarren
ms.author: gewarren
dev_langs:
- CSharp
- VB
ms.openlocfilehash: 411aec5bb2ea5e90ab8234efe95be3155818253c
ms.sourcegitcommit: a6bd4cad438fe479cbd112eae10f2cd449f06e40
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 10/08/2020
ms.locfileid: "96591923"
---
# <a name="ca2002-do-not-lock-on-objects-with-weak-identity"></a><span data-ttu-id="5315d-103">CA2002: Auf Objekten mit schwacher Identität nicht sperren.</span><span class="sxs-lookup"><span data-stu-id="5315d-103">CA2002: Do not lock on objects with weak identity</span></span>

| | <span data-ttu-id="5315d-104">Wert</span><span class="sxs-lookup"><span data-stu-id="5315d-104">Value</span></span> |
|-|-|
| <span data-ttu-id="5315d-105">**Regel-ID**</span><span class="sxs-lookup"><span data-stu-id="5315d-105">**Rule ID**</span></span> |<span data-ttu-id="5315d-106">CA2002</span><span class="sxs-lookup"><span data-stu-id="5315d-106">CA2002</span></span>|
| <span data-ttu-id="5315d-107">**Kategorie**</span><span class="sxs-lookup"><span data-stu-id="5315d-107">**Category**</span></span> |<span data-ttu-id="5315d-108">Microsoft.Reliability</span><span class="sxs-lookup"><span data-stu-id="5315d-108">Microsoft.Reliability</span></span>|
| <span data-ttu-id="5315d-109">**Behebung ist unterbrechend oder nicht unterbrechend**</span><span class="sxs-lookup"><span data-stu-id="5315d-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="5315d-110">Nicht unterbrechend</span><span class="sxs-lookup"><span data-stu-id="5315d-110">Non-breaking</span></span>|

## <a name="cause"></a><span data-ttu-id="5315d-111">Ursache</span><span class="sxs-lookup"><span data-stu-id="5315d-111">Cause</span></span>

<span data-ttu-id="5315d-112">Ein Thread versucht, eine Sperre für ein Objekt zu erhalten, das eine schwache Identität aufweist.</span><span class="sxs-lookup"><span data-stu-id="5315d-112">A thread attempts to acquire a lock on an object that has a weak identity.</span></span>

## <a name="rule-description"></a><span data-ttu-id="5315d-113">Regelbeschreibung</span><span class="sxs-lookup"><span data-stu-id="5315d-113">Rule description</span></span>

<span data-ttu-id="5315d-114">Ein Objekt hat eine schwache Identität, wenn ein Zugriff darauf über Grenzen von Anwendungsdomänen hinweg möglich ist.</span><span class="sxs-lookup"><span data-stu-id="5315d-114">An object is said to have a weak identity when it can be directly accessed across application domain boundaries.</span></span> <span data-ttu-id="5315d-115">Ein Thread, der eine Sperre für ein Objekt zu erhalten versucht, das über eine schwache Identität verfügt, kann durch einen zweiten Thread in einer anderen Anwendungsdomäne blockiert werden, der eine Sperre für das gleiche Objekt besitzt.</span><span class="sxs-lookup"><span data-stu-id="5315d-115">A thread that tries to acquire a lock on an object that has a weak identity can be blocked by a second thread in a different application domain that has a lock on the same object.</span></span>

<span data-ttu-id="5315d-116">Die folgenden Typen haben eine schwache Identität und werden durch die Regel gekennzeichnet:</span><span class="sxs-lookup"><span data-stu-id="5315d-116">The following types have a weak identity and are flagged by the rule:</span></span>

- <xref:System.String>

- <span data-ttu-id="5315d-117">Arrays von Werttypen, einschließlich ganzzahliger [Typen](../../../csharp/language-reference/builtin-types/integral-numeric-types.md), Gleit [Komma Typen](../../../csharp/language-reference/builtin-types/floating-point-numeric-types.md)und <xref:System.Boolean> .</span><span class="sxs-lookup"><span data-stu-id="5315d-117">Arrays of value types, including [integral types](../../../csharp/language-reference/builtin-types/integral-numeric-types.md), [floating-point types](../../../csharp/language-reference/builtin-types/floating-point-numeric-types.md), and <xref:System.Boolean>.</span></span>

- <xref:System.MarshalByRefObject>

- <xref:System.ExecutionEngineException>

- <xref:System.OutOfMemoryException>

- <xref:System.StackOverflowException>

- <xref:System.Reflection.MemberInfo>

- <xref:System.Reflection.ParameterInfo>

- <xref:System.Threading.Thread>

- <span data-ttu-id="5315d-118">[this](../../../csharp/language-reference/keywords/this.md) -oder [Me](../../../visual-basic/programming-guide/program-structure/me-my-mybase-and-myclass.md) -Objekt</span><span class="sxs-lookup"><span data-stu-id="5315d-118">[this](../../../csharp/language-reference/keywords/this.md) or [Me](../../../visual-basic/programming-guide/program-structure/me-my-mybase-and-myclass.md) object</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="5315d-119">Behandeln von Verstößen</span><span class="sxs-lookup"><span data-stu-id="5315d-119">How to fix violations</span></span>

<span data-ttu-id="5315d-120">Um einen Verstoß gegen diese Regel zu beheben, verwenden Sie ein Objekt aus einem Typ, der nicht in der Liste im Abschnitt Beschreibung enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="5315d-120">To fix a violation of this rule, use an object from a type that is not in the list in the Description section.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="5315d-121">Wann sollten Warnungen unterdrückt werden?</span><span class="sxs-lookup"><span data-stu-id="5315d-121">When to suppress warnings</span></span>

<span data-ttu-id="5315d-122">Es ist sicher, die Warnung zu unterdrücken, wenn das gesperrte Objekt `this` oder ist `Me` und die Sichtbarkeit des selbst Objekt Typs privat oder intern ist, und die Instanz kann nicht mithilfe eines beliebigen öffentlichen Verweises aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="5315d-122">It is safe to suppress the warning if the locked object is `this` or `Me` and the visibility of the self object type is private or internal, and the instance is not accessible using any public reference.</span></span>

<span data-ttu-id="5315d-123">Andernfalls sollten Sie keine Warnung aus dieser Regel unterdrücken.</span><span class="sxs-lookup"><span data-stu-id="5315d-123">Otherwise, do not suppress a warning from this rule.</span></span>

## <a name="related-rules"></a><span data-ttu-id="5315d-124">Verwandte Regeln</span><span class="sxs-lookup"><span data-stu-id="5315d-124">Related rules</span></span>

[<span data-ttu-id="5315d-125">CA2213: Verwerfbare Felder verwerfen.</span><span class="sxs-lookup"><span data-stu-id="5315d-125">CA2213: Disposable fields should be disposed</span></span>](ca2213.md)

## <a name="example"></a><span data-ttu-id="5315d-126">Beispiel</span><span class="sxs-lookup"><span data-stu-id="5315d-126">Example</span></span>

<span data-ttu-id="5315d-127">Das folgende Beispiel zeigt einige Objekt Sperren, die gegen die Regel verstoßen.</span><span class="sxs-lookup"><span data-stu-id="5315d-127">The following example shows some object locks that violate the rule.</span></span>

:::code language="vb" source="snippets/vb/all-rules/ca2002-do-not-lock-on-objects-with-weak-identity_1.vb":::

:::code language="csharp" source="snippets/csharp/all-rules/ca2002.cs" id="snippet1":::

## <a name="see-also"></a><span data-ttu-id="5315d-128">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="5315d-128">See also</span></span>

- <xref:System.Threading.Monitor>
- <xref:System.AppDomain>
- [<span data-ttu-id="5315d-129">Lock-Anweisung (c#)</span><span class="sxs-lookup"><span data-stu-id="5315d-129">lock Statement (C#)</span></span>](../../../csharp/language-reference/keywords/lock-statement.md)
- [<span data-ttu-id="5315d-130">SyncLock-Anweisung (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="5315d-130">SyncLock Statement (Visual Basic)</span></span>](../../../visual-basic/language-reference/statements/synclock-statement.md)
