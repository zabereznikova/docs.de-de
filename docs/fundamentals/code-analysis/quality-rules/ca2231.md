---
title: 'CA2231: Überladen des Gleichheits Operators beim Überschreiben von ValueType. gleich (Code Analyse)'
description: 'Weitere Informationen zur Code Analyse Regel CA2231: Überladungs Operator ist gleich beim Überschreiben von ValueType. ist gleich'
ms.date: 03/11/2019
ms.topic: reference
f1_keywords:
- OverloadOperatorEqualsOnOverridingValueTypeEquals
- CA2231
- OverrideOperatorEqualsOnOverridingValueTypeEquals
helpviewer_keywords:
- OverloadOperatorEqualsOnOverridingValueTypeEquals
- CA2231
author: gewarren
ms.author: gewarren
dev_langs:
- CSharp
- VB
ms.openlocfilehash: 21749589f68ae536745586bb43b22ef883a1b8b2
ms.sourcegitcommit: 2e4adc490c1d2a705a0592b295d606b10b9f51f1
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/25/2020
ms.locfileid: "96590709"
---
# <a name="ca2231-overload-operator-equals-on-overriding-valuetypeequals"></a>CA2231: Überladen Sie den Gleichheitsoperator beim Überschreiben von ValueType.Equals.

| | Wert |
|-|-|
| **Regel-ID** |CA2231|
| **Kategorie** |Microsoft. Usage|
| **Behebung ist unterbrechend oder nicht unterbrechend** |Nicht unterbrechend|

## <a name="cause"></a>Ursache

Ein Werttyp überschreibt, <xref:System.Object.Equals%2A?displayProperty=fullName> aber implementiert den Gleichheits Operator nicht.

Standardmäßig betrachtet diese Regel nur extern sichtbare Typen, aber dies ist [konfigurierbar](#configurability).

## <a name="rule-description"></a>Regelbeschreibung

In den meisten Programmiersprachen gibt es keine Standard Implementierung des Gleichheits Operators (= =) für Werttypen. Wenn Ihre Programmiersprache Operator Überladungen unterstützt, sollten Sie die Implementierung des Gleichheits Operators in Erwägung gezogen. Das Verhalten sollte mit dem von identisch sein <xref:System.Object.Equals%2A> .

Der Standard Gleichheits Operator kann nicht in einer überladenen Implementierung des Gleichheits Operators verwendet werden. Dies führt zu einem Stapelüberlauf. Um den Gleichheits Operator zu implementieren, verwenden Sie die Object. gleich-Methode in der Implementierung. Zum Beispiel:

```vb
If (Object.ReferenceEquals(left, Nothing)) Then
    Return Object.ReferenceEquals(right, Nothing)
Else
    Return left.Equals(right)
End If
```

```csharp
if (Object.ReferenceEquals(left, null))
    return Object.ReferenceEquals(right, null);
return left.Equals(right);
```

## <a name="how-to-fix-violations"></a>Behandeln von Verstößen

Um einen Verstoß gegen diese Regel zu beheben, implementieren Sie den Gleichheits Operator.

## <a name="when-to-suppress-warnings"></a>Wann sollten Warnungen unterdrückt werden?

Es ist sicher, eine Warnung aus dieser Regel zu unterdrücken. Es wird jedoch empfohlen, nach Möglichkeit den Gleichheits Operator anzugeben.

## <a name="configurability"></a>Konfigurierbarkeit

Sie können basierend auf ihrer Barrierefreiheit konfigurieren, für welche Teile Ihrer Codebasis diese Regel ausgeführt werden soll. Um z. b. anzugeben, dass die Regel nur für die nicht öffentliche API-Oberfläche ausgeführt werden soll, fügen Sie das folgende Schlüssel-Wert-Paar in eine *Editor config* -Datei in Ihrem Projekt ein:

```ini
dotnet_code_quality.ca2231.api_surface = private, internal
```

Sie können diese Option nur für diese Regel, für alle Regeln oder für alle Regeln in dieser Kategorie (Verwendung) konfigurieren. Weitere Informationen finden Sie unter [Konfigurationsoptionen für die Code Qualitäts Regel](../code-quality-rule-options.md).

## <a name="example"></a>Beispiel

Im folgenden Beispiel wird ein Typ definiert, der gegen diese Regel verstößt:

:::code language="csharp" source="snippets/csharp/all-rules/ca2231.cs" id="snippet1":::

## <a name="related-rules"></a>Verwandte Regeln

- [CA1046: Gleichheitsoperator für Referenztypen nicht überladen.](ca1046.md)
- [CA2225: Operatorüberladungen weisen benannte Alternativen auf.](ca2225.md)
- [CA2226: Operatoren sollten symmetrische Überladungen aufweisen.](ca2226.md)

## <a name="see-also"></a>Siehe auch

- <xref:System.Object.Equals%2A?displayProperty=fullName>
