---
title: 'CA1815: Überschreiben von Gleichheits-und-Operatoren für Werttypen (Code Analyse)'
description: 'Informationen zur Code Analyse Regel CA1815: Überschreiben von Gleichheits-und Gleichheits Operatoren für Werttypen'
ms.date: 03/11/2019
ms.topic: reference
f1_keywords:
- CA1815
- OverrideEqualsAndOperatorEqualsOnValueTypes
helpviewer_keywords:
- OverrideEqualsAndOperatorEqualsOnValueTypes
- CA1815
author: gewarren
ms.author: gewarren
ms.openlocfilehash: 73801bc444f6a4d0db7ca6c5968ce55f44e2cb6e
ms.sourcegitcommit: 2e4adc490c1d2a705a0592b295d606b10b9f51f1
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/25/2020
ms.locfileid: "96591422"
---
# <a name="ca1815-override-equals-and-operator-equals-on-value-types"></a>CA1815: Equals und Gleichheitsoperator für Werttypen überschreiben.

| | Wert |
|-|-|
| **Regel-ID** |CA1815|
| **Kategorie** |Microsoft. Performance|
| **Behebung ist unterbrechend oder nicht unterbrechend** |Nicht unterbrechend|

## <a name="cause"></a>Ursache

Ein Werttyp überschreibt <xref:System.Object.Equals%2A?displayProperty=fullName> den Gleichheits Operator (= =) nicht oder implementiert ihn nicht. Diese Regel überprüft keine Enumerationen.

Standardmäßig betrachtet diese Regel nur extern sichtbare Typen, aber dies ist [konfigurierbar](#configurability).

## <a name="rule-description"></a>Regelbeschreibung

Bei Werttypen verwendet die geerbte Implementierung von <xref:System.Object.Equals%2A> die Reflektionsbibliothek und vergleicht den Inhalt aller Felder. Reflection ist rechenintensiv, und das Überprüfen eines jeden Felds auf Gleichheit ist eventuell unnötig. Wenn Sie davon ausgehen, dass Benutzer Instanzen vergleichen oder sortieren oder Sie als Hash Tabellenschlüssel verwenden, sollte der Werttyp implementieren <xref:System.Object.Equals%2A> . Wenn Ihre Programmiersprache Operatorüberladung unterstützt, sollten Sie ebenso eine Implementierung der Gleichheits- und Ungleichheitsoperatoren bereitstellen.

## <a name="how-to-fix-violations"></a>Behandeln von Verstößen

Um einen Verstoß gegen diese Regel zu beheben, stellen Sie eine Implementierung von bereit <xref:System.Object.Equals%2A> . Implementieren Sie den Gleichheits Operator, wenn dies möglich ist.

## <a name="when-to-suppress-warnings"></a>Wann sollten Warnungen unterdrückt werden?

Es ist sicher, eine Warnung aus dieser Regel zu unterdrücken, wenn Instanzen des Werttyps nicht miteinander verglichen werden.

## <a name="configurability"></a>Konfigurierbarkeit

Sie können basierend auf ihrer Barrierefreiheit konfigurieren, für welche Teile Ihrer Codebasis diese Regel ausgeführt werden soll. Um z. b. anzugeben, dass die Regel nur für die nicht öffentliche API-Oberfläche ausgeführt werden soll, fügen Sie das folgende Schlüssel-Wert-Paar in eine *Editor config* -Datei in Ihrem Projekt ein:

```ini
dotnet_code_quality.ca1815.api_surface = private, internal
```

Sie können diese Option nur für diese Regel, für alle Regeln oder für alle Regeln in dieser Kategorie (Leistung) konfigurieren. Weitere Informationen finden Sie unter [Konfigurationsoptionen für die Code Qualitäts Regel](../code-quality-rule-options.md).

## <a name="example"></a>Beispiel

Der folgende Code zeigt eine Struktur (Werttyp), die gegen diese Regel verstößt:

:::code language="csharp" source="snippets/csharp/all-rules/ca1815.cs" id="snippet1":::

Im folgenden Code wird der vorherige Verstoß durch Überschreiben <xref:System.ValueType.Equals%2A?displayProperty=fullName> und Implementieren der Gleichheits Operatoren (= =,! =) korrigiert:

:::code language="csharp" source="snippets/csharp/all-rules/ca1815.cs" id="snippet2":::

## <a name="related-rules"></a>Verwandte Regeln

- [CA2231: Überladen Sie den Gleichheitsoperator beim Überschreiben von ValueType.Equals.](ca2231.md)
- [CA2226: Operatoren sollten symmetrische Überladungen aufweisen.](ca2226.md)

## <a name="see-also"></a>Siehe auch

- <xref:System.Object.Equals%2A?displayProperty=fullName>
