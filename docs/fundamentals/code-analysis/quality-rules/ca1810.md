---
title: 'CA1810: statische Felder von Verweis Typen Inline initialisieren (Code Analyse)'
description: 'Weitere Informationen zu Code Analyse Regeln CA1810: statische Felder für Verweis Typen Inline initialisieren'
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- InitializeReferenceTypeStaticFieldsInline
- CA1810
helpviewer_keywords:
- InitializeReferenceTypeStaticFieldsInline
- CA1810
author: gewarren
ms.author: gewarren
dev_langs:
- CSharp
- VB
ms.openlocfilehash: 4e9d9c640db652627dd799574516a6b8e3ee0954
ms.sourcegitcommit: a6bd4cad438fe479cbd112eae10f2cd449f06e40
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 10/08/2020
ms.locfileid: "96591903"
---
# <a name="ca1810-initialize-reference-type-static-fields-inline"></a>CA1810: Statische Felder von Referenztypen inline initialisieren.

| | Wert |
|-|-|
| **Regel-ID** |CA1810|
| **Kategorie** |Microsoft. Performance|
| **Behebung ist unterbrechend oder nicht unterbrechend** |Nicht unterbrechend|

## <a name="cause"></a>Ursache

Ein Verweistyp deklariert einen expliziten statischen Konstruktor.

## <a name="rule-description"></a>Regelbeschreibung

Wenn ein Typ einen expliziten statischen Konstruktor deklariert, überprüft der JIT-Compiler (Just in Time) jede statische Methode und jeden Instanzenkonstruktor des Typs. Dadurch wird sichergestellt, dass der statische Konstruktor zuvor aufgerufen wurde. Die statische Initialisierung wird ausgelöst, wenn auf einen statischen Member zugegriffen wird oder wenn eine Instanz des Typs erstellt wird. Die statische Initialisierung wird jedoch nicht ausgelöst, wenn Sie eine Variable des Typs deklarieren, aber nicht verwenden. Dies kann wichtig sein, wenn die Initialisierung den globalen Zustand ändert.

Wenn alle statischen Daten inline initialisiert werden und ein expliziter statischer Konstruktor nicht deklariert ist, fügen Microsoft Intermediate Language (MSIL) `beforefieldinit` -Compiler das-Flag und einen impliziten statischen Konstruktor, der die statischen Daten initialisiert, in die MSIL-Typdefinition ein. Wenn der JIT-Compiler auf das- `beforefieldinit` Flag trifft, werden die statischen Konstruktorüberprüfungen meistens nicht hinzugefügt. Die statische Initialisierung wird garantiert zu einem bestimmten Zeitpunkt ausgeführt, bevor auf statische Felder zugegriffen wird, jedoch nicht, bevor eine statische Methode oder ein Instanzkonstruktor aufgerufen wird. Beachten Sie, dass die statische Initialisierung jederzeit erfolgen kann, nachdem eine Variable vom Typ deklariert wurde.

Durch die Überprüfung statischer Konstruktoren kann die Leistung herabgesetzt werden. Häufig wird ein statischer Konstruktor nur zum Initialisieren statischer Felder verwendet. in diesem Fall müssen Sie nur sicherstellen, dass die statische Initialisierung vor dem ersten Zugriff eines statischen Felds erfolgt. Das `beforefieldinit` Verhalten ist für diese und die meisten anderen Typen geeignet. Sie ist nur ungeeignet, wenn die statische Initialisierung den globalen Zustand beeinflusst und eine der folgenden Punkte zutrifft:

- Die Auswirkung auf den globalen Status ist aufwendig und ist nicht erforderlich, wenn der Typ nicht verwendet wird.

- Auf die globalen Zustands Effekte kann ohne Zugriff auf statische Felder des Typs zugegriffen werden.

## <a name="how-to-fix-violations"></a>Behandeln von Verstößen

Um einen Verstoß gegen diese Regel zu beheben, initialisieren Sie alle statischen Daten nach deren Deklaration und entfernen den statischen Konstruktor.

## <a name="when-to-suppress-warnings"></a>Wann sollten Warnungen unterdrückt werden?

Es ist sicher, eine Warnung aus dieser Regel zu unterdrücken, wenn die Leistung nicht relevant ist. oder, wenn globale Zustandsänderungen, die durch die statische Initialisierung verursacht werden, aufwendig sind oder garantiert werden müssen, bevor eine statische Methode des Typs aufgerufen oder eine Instanz des Typs erstellt wird.

## <a name="example"></a>Beispiel

Das folgende Beispiel zeigt einen Typ, `StaticConstructor` , der gegen die Regel verstößt, und einen Typ, `NoStaticConstructor` , der den statischen Konstruktor durch Inline Initialisierung ersetzt, um die Regel zu erfüllen.

:::code language="csharp" source="snippets/csharp/all-rules/ca1810.cs" id="snippet1":::

:::code language="vb" source="snippets/vb/all-rules/ca1810-initialize-reference-type-static-fields-inline_1.vb":::

Beachten Sie, dass das- `beforefieldinit` Flag für die MSIL-Definition für die-Klasse hinzugefügt wird `NoStaticConstructor` .

```il
.class public auto ansi StaticConstructor
extends [mscorlib]System.Object
{
} // end of class StaticConstructor

.class public auto ansi beforefieldinit NoStaticConstructor
extends [mscorlib]System.Object
{
} // end of class NoStaticConstructor
```

## <a name="related-rules"></a>Verwandte Regeln

- [CA2207: Statische Felder für Werttyp inline initialisieren.](ca2207.md)
