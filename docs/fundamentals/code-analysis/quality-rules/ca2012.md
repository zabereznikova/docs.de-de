---
title: 'CA2012: valuetasks ordnungsgemäß verwenden (Code Analyse)'
description: 'Informationen zur Code Analyse Regel CA2012: Verwenden Sie valuetasks ordnungsgemäß.'
ms.date: 06/18/2020
ms.topic: reference
f1_keywords:
- UseValueTasksCorrectly
- CA2012
helpviewer_keywords:
- UseValueTasksCorrectly
- CA2012
author: stephentoub
ms.author: stoub
ms.openlocfilehash: 0bd2a2b18f61f6024b4231b0188f386e292d9f65
ms.sourcegitcommit: 2e4adc490c1d2a705a0592b295d606b10b9f51f1
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/25/2020
ms.locfileid: "96590726"
---
# <a name="ca2012-use-valuetasks-correctly"></a><span data-ttu-id="f0f86-103">CA2012: Verwenden Sie ValueTasks ordnungsgemäß.</span><span class="sxs-lookup"><span data-stu-id="f0f86-103">CA2012: Use ValueTasks correctly</span></span>

| | <span data-ttu-id="f0f86-104">Wert</span><span class="sxs-lookup"><span data-stu-id="f0f86-104">Value</span></span> |
|-|-|
| <span data-ttu-id="f0f86-105">**Regel-ID**</span><span class="sxs-lookup"><span data-stu-id="f0f86-105">**Rule ID**</span></span> |<span data-ttu-id="f0f86-106">CA2012</span><span class="sxs-lookup"><span data-stu-id="f0f86-106">CA2012</span></span>|
| <span data-ttu-id="f0f86-107">**Kategorie**</span><span class="sxs-lookup"><span data-stu-id="f0f86-107">**Category**</span></span> |<span data-ttu-id="f0f86-108">Microsoft.Reliability</span><span class="sxs-lookup"><span data-stu-id="f0f86-108">Microsoft.Reliability</span></span>|
| <span data-ttu-id="f0f86-109">**Behebung ist unterbrechend oder nicht unterbrechend**</span><span class="sxs-lookup"><span data-stu-id="f0f86-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="f0f86-110">Nicht unterbrechend</span><span class="sxs-lookup"><span data-stu-id="f0f86-110">Non-breaking</span></span>|

## <a name="cause"></a><span data-ttu-id="f0f86-111">Ursache</span><span class="sxs-lookup"><span data-stu-id="f0f86-111">Cause</span></span>

<span data-ttu-id="f0f86-112">Eine- <xref:System.Threading.Tasks.ValueTask> Instanz, die von einem Element Aufruf zurückgegeben wird, wird auf eine Weise verwendet, die zu Ausnahmen, Beschädigungen oder einer schlechten Leistung führen kann.</span><span class="sxs-lookup"><span data-stu-id="f0f86-112">A <xref:System.Threading.Tasks.ValueTask> instance returned from a member invocation is used in a way that could lead to exceptions, corruption, or poor performance.</span></span>

## <a name="rule-description"></a><span data-ttu-id="f0f86-113">Regelbeschreibung</span><span class="sxs-lookup"><span data-stu-id="f0f86-113">Rule description</span></span>

<span data-ttu-id="f0f86-114"><xref:System.Threading.Tasks.ValueTask> Instanzen, die von Element aufrufen zurückgegeben werden, sollen direkt gewartet werden.</span><span class="sxs-lookup"><span data-stu-id="f0f86-114"><xref:System.Threading.Tasks.ValueTask> instances returned from member invocations are intended to be directly awaited.</span></span>  <span data-ttu-id="f0f86-115">Versucht, eine valuetask mehrmals zu verwenden oder direkt auf das Ergebnis zuzugreifen, bevor es als abgeschlossen bezeichnet wird, kann zu einer Ausnahme oder Beschädigung führen.</span><span class="sxs-lookup"><span data-stu-id="f0f86-115">Attempts to consume a ValueTask multiple times or to directly access one's result before it's known to be completed may result in an exception or corruption.</span></span>  <span data-ttu-id="f0f86-116">Das ignorieren einer solchen valuetask ist wahrscheinlich ein Hinweis auf einen Funktionsfehler und kann die Leistung beeinträchtigen.</span><span class="sxs-lookup"><span data-stu-id="f0f86-116">Ignoring such a ValueTask is likely an indication of a functional bug and may degrade performance.</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="f0f86-117">Behandeln von Verstößen</span><span class="sxs-lookup"><span data-stu-id="f0f86-117">How to fix violations</span></span>

<span data-ttu-id="f0f86-118">Im Allgemeinen sollten valuetasks direkt gewartet werden, anstatt verworfen oder an anderen Speicherorten wie lokalen Variablen oder Feldern gespeichert zu werden.</span><span class="sxs-lookup"><span data-stu-id="f0f86-118">In general, ValueTasks should be directly awaited rather than discarded or stored into other locations like local variables or fields.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="f0f86-119">Wann sollten Warnungen unterdrückt werden?</span><span class="sxs-lookup"><span data-stu-id="f0f86-119">When to suppress warnings</span></span>

<span data-ttu-id="f0f86-120">Für valuetasks, die von beliebigen Member-aufrufen zurückgegeben werden, muss der Aufrufer davon ausgehen, dass die valuetask nur einmal (z. b. erwartet) verarbeitet werden muss.</span><span class="sxs-lookup"><span data-stu-id="f0f86-120">For ValueTasks returned from arbitrary member calls, the caller needs to assume that the ValueTask must be consumed (e.g. awaited) once and only once.</span></span>  <span data-ttu-id="f0f86-121">Wenn der Entwickler jedoch auch das aufgerufene Element steuert und umfassende Kenntnisse über die Implementierung hat, weiß der Entwickler möglicherweise, dass es sicher ist, die Warnung zu unterdrücken, z. b. wenn die Rückgabe valuetask immer ein-Objekt umschließt <xref:System.Threading.Tasks.Task> .</span><span class="sxs-lookup"><span data-stu-id="f0f86-121">However, if the developer also controls the member being invoked and has complete knowledge of its implementation, the developer may know it's safe to suppress the warning, for example, if the return ValueTask always wraps a <xref:System.Threading.Tasks.Task> object.</span></span>

## <a name="see-also"></a><span data-ttu-id="f0f86-122">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="f0f86-122">See also</span></span>

- [<span data-ttu-id="f0f86-123">Zuverlässigkeitsregeln</span><span class="sxs-lookup"><span data-stu-id="f0f86-123">Reliability rules</span></span>](reliability-warnings.md)
