---
title: 'CA2247: Argument, das an den TaskCompletionSource-Konstruktor übergeben wurde, sollte die taskkreationoptions-Enumeration anstelle der TaskContinuationOptions-Enumeration (Code Analyse) sein.'
description: 'Weitere Informationen über die Code Analyse Regel CA2247: das an den TaskCompletionSource-Konstruktor übergeben Argument sollte die taskkreationoptions-Enumeration anstelle der TaskContinuationOptions-Enumeration sein.'
ms.date: 05/16/2020
ms.topic: reference
f1_keywords:
- DoNotCreateTaskCompletionSourceWithWrongArguments
- CA2247
helpviewer_keywords:
- DoNotCreateTaskCompletionSourceWithWrongArguments
- CA2247
author: stephentoub
ms.author: stoub
ms.openlocfilehash: 594476616cddb87b64af4b874f62723cb0a97e4c
ms.sourcegitcommit: 2e4adc490c1d2a705a0592b295d606b10b9f51f1
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/25/2020
ms.locfileid: "96590657"
---
# <a name="ca2247-argument-passed-to-taskcompletionsource-constructor-should-be-taskcreationoptions-enum-instead-of-taskcontinuationoptions-enum"></a><span data-ttu-id="a31fc-103">CA2247: Anstelle einer TaskContinuationOptions-Enumeration muss eine TaskCreationOptions-Enumeration als Argument an den TaskCompletionSource-Konstruktor übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="a31fc-103">CA2247: Argument passed to TaskCompletionSource constructor should be TaskCreationOptions enum instead of TaskContinuationOptions enum</span></span>

| | <span data-ttu-id="a31fc-104">Wert</span><span class="sxs-lookup"><span data-stu-id="a31fc-104">Value</span></span> |
|-|-|
| <span data-ttu-id="a31fc-105">**Regel-ID**</span><span class="sxs-lookup"><span data-stu-id="a31fc-105">**Rule ID**</span></span> |<span data-ttu-id="a31fc-106">CA2247</span><span class="sxs-lookup"><span data-stu-id="a31fc-106">CA2247</span></span>|
| <span data-ttu-id="a31fc-107">**Kategorie**</span><span class="sxs-lookup"><span data-stu-id="a31fc-107">**Category**</span></span> |<span data-ttu-id="a31fc-108">Microsoft. Usage</span><span class="sxs-lookup"><span data-stu-id="a31fc-108">Microsoft.Usage</span></span>|
| <span data-ttu-id="a31fc-109">**Behebung ist unterbrechend oder nicht unterbrechend**</span><span class="sxs-lookup"><span data-stu-id="a31fc-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="a31fc-110">Nicht unterbrechend</span><span class="sxs-lookup"><span data-stu-id="a31fc-110">Non-breaking</span></span>|

## <a name="cause"></a><span data-ttu-id="a31fc-111">Ursache</span><span class="sxs-lookup"><span data-stu-id="a31fc-111">Cause</span></span>

<span data-ttu-id="a31fc-112">Erstellen eines `System.Threading.Tasks.TaskCompletionSource` mit einem <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=fullName> Enumerationswert anstelle eines <xref:System.Threading.Tasks.TaskCreationOptions?displayProperty=fullName> Enumerationswerts.</span><span class="sxs-lookup"><span data-stu-id="a31fc-112">Constructing a `System.Threading.Tasks.TaskCompletionSource` with a <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=fullName> enum value rather than a <xref:System.Threading.Tasks.TaskCreationOptions?displayProperty=fullName> enum value.</span></span>
<span data-ttu-id="a31fc-113">Verwenden der- <xref:System.Object.ReferenceEquals%2A?displayProperty=fullName> Methode, um einen oder mehrere Werttypen auf Gleichheit zu testen.</span><span class="sxs-lookup"><span data-stu-id="a31fc-113">Using <xref:System.Object.ReferenceEquals%2A?displayProperty=fullName> method to test one or more value types for equality.</span></span>

## <a name="rule-description"></a><span data-ttu-id="a31fc-114">Regelbeschreibung</span><span class="sxs-lookup"><span data-stu-id="a31fc-114">Rule description</span></span>

<span data-ttu-id="a31fc-115">Der TaskCompletionSource-Typ verfügt über einen Konstruktor, der einen Enumerationswert annimmt <xref:System.Threading.Tasks.TaskCreationOptions?displayProperty=fullName> , und einen anderen Konstruktor, der einen akzeptiert <xref:System.Object> .</span><span class="sxs-lookup"><span data-stu-id="a31fc-115">The TaskCompletionSource type has a constructor that accepts a <xref:System.Threading.Tasks.TaskCreationOptions?displayProperty=fullName> enum value, and another constructor that accepts a <xref:System.Object>.</span></span>  <span data-ttu-id="a31fc-116"><xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=fullName> <xref:System.Threading.Tasks.TaskCreationOptions?displayProperty=fullName> Wenn Sie anstelle eines <xref:System.Object> Enumerationswerts versehentlich einen Enumerationswert übergeben, führt dies dazu, dass der-basierte Konstruktor aufgerufen wird: er wird kompiliert und ausgeführt, aber nicht das beabsichtigte Verhalten.</span><span class="sxs-lookup"><span data-stu-id="a31fc-116">Accidentally passing a <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=fullName> enum value instead of a <xref:System.Threading.Tasks.TaskCreationOptions?displayProperty=fullName> enum value will result in calling the <xref:System.Object>-based constructor: it will compile and run, but it will not have the intended behavior.</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="a31fc-117">Behandeln von Verstößen</span><span class="sxs-lookup"><span data-stu-id="a31fc-117">How to fix violations</span></span>

<span data-ttu-id="a31fc-118">Um die Verletzung zu beheben, ersetzen Sie den <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=fullName> Enumerationswert durch den entsprechenden Enumerationswert <xref:System.Threading.Tasks.TaskCreationOptions?displayProperty=fullName> .</span><span class="sxs-lookup"><span data-stu-id="a31fc-118">To fix the violation, replace the <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=fullName> enum value with the corresponding <xref:System.Threading.Tasks.TaskCreationOptions?displayProperty=fullName> enum value.</span></span>

```csharp
    // Violation
    var tcs = new TaskCompletionSource<int>(TaskContinuationOptions.RunContinuationsAsynchronously);

    // Fixed
    var tcs = new TaskCompletionSource<int>(TaskCreationOptions.RunContinuationsAsynchronously);
```

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="a31fc-119">Wann sollten Warnungen unterdrückt werden?</span><span class="sxs-lookup"><span data-stu-id="a31fc-119">When to suppress warnings</span></span>

<span data-ttu-id="a31fc-120">Ein Verstoß gegen diese Regel hebt fast immer einen Fehler im aufrufenden Code hervor, sodass sich der Code nicht wie der beabsichtigte Entwickler verhält, wobei TaskCompletionSource die angegebene Option effektiv ignoriert.</span><span class="sxs-lookup"><span data-stu-id="a31fc-120">A violation of this rule almost always highlights a bug in the calling code, such that the code will not behave as the developer intended, with the TaskCompletionSource effectively ignoring the specified option.</span></span>  <span data-ttu-id="a31fc-121">Die Warnung kann nur dann sicher unterdrückt werden, wenn der Entwickler tatsächlich eine geschachtelte <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=fullName> als Objekt Zustands Argument an TaskCompletionSource übergeben wollte.</span><span class="sxs-lookup"><span data-stu-id="a31fc-121">The only time it is safe to suppress the warning is if the developer actually intended to pass a boxed <xref:System.Threading.Tasks.TaskContinuationOptions?displayProperty=fullName> as the object state argument to the TaskCompletionSource.</span></span>

## <a name="see-also"></a><span data-ttu-id="a31fc-122">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="a31fc-122">See also</span></span>

- [<span data-ttu-id="a31fc-123">Nutzungsregeln</span><span class="sxs-lookup"><span data-stu-id="a31fc-123">Usage rules</span></span>](usage-warnings.md)
