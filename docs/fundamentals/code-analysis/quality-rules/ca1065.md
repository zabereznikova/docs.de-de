---
title: 'CA1065: keine Ausnahmen an unerwarteten Speicherorten (Code Analyse)'
description: 'Weitere Informationen zur Code Analyse Regel CA1065: keine Ausnahmen an unerwarteten Speicherorten'
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- CA1065
- DoNotRaiseExceptionsInUnexpectedLocations
helpviewer_keywords:
- DoNotRaiseExceptionsInUnexpectedLocations
- CA1065
author: gewarren
ms.author: gewarren
ms.openlocfilehash: ab1c49127c45fdf730c717f1e2ba8652e2723ace
ms.sourcegitcommit: 2e4adc490c1d2a705a0592b295d606b10b9f51f1
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/25/2020
ms.locfileid: "96591558"
---
# <a name="ca1065-do-not-raise-exceptions-in-unexpected-locations"></a><span data-ttu-id="96cac-103">CA1065: Keine Ausnahmen an unerwarteten Speicherorten auslösen.</span><span class="sxs-lookup"><span data-stu-id="96cac-103">CA1065: Do not raise exceptions in unexpected locations</span></span>

| | <span data-ttu-id="96cac-104">Wert</span><span class="sxs-lookup"><span data-stu-id="96cac-104">Value</span></span> |
|-|-|
| <span data-ttu-id="96cac-105">**Regel-ID**</span><span class="sxs-lookup"><span data-stu-id="96cac-105">**Rule ID**</span></span> |<span data-ttu-id="96cac-106">CA1065</span><span class="sxs-lookup"><span data-stu-id="96cac-106">CA1065</span></span>|
| <span data-ttu-id="96cac-107">**Kategorie**</span><span class="sxs-lookup"><span data-stu-id="96cac-107">**Category**</span></span> |<span data-ttu-id="96cac-108">Microsoft. Design</span><span class="sxs-lookup"><span data-stu-id="96cac-108">Microsoft.Design</span></span>|
| <span data-ttu-id="96cac-109">**Behebung ist unterbrechend oder nicht unterbrechend**</span><span class="sxs-lookup"><span data-stu-id="96cac-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="96cac-110">Nicht unterbrechend</span><span class="sxs-lookup"><span data-stu-id="96cac-110">Non-breaking</span></span>|

## <a name="cause"></a><span data-ttu-id="96cac-111">Ursache</span><span class="sxs-lookup"><span data-stu-id="96cac-111">Cause</span></span>

<span data-ttu-id="96cac-112">Eine Methode, von der das Auslösen von Ausnahmen nicht erwartet wird, löst eine Ausnahme aus.</span><span class="sxs-lookup"><span data-stu-id="96cac-112">A method that is not expected to throw exceptions throws an exception.</span></span>

## <a name="rule-description"></a><span data-ttu-id="96cac-113">Regelbeschreibung</span><span class="sxs-lookup"><span data-stu-id="96cac-113">Rule description</span></span>

<span data-ttu-id="96cac-114">Methoden, für die keine Ausnahmen ausgelöst werden, können wie folgt kategorisiert werden:</span><span class="sxs-lookup"><span data-stu-id="96cac-114">Methods that are not expected to throw exceptions can be categorized as follows:</span></span>

- <span data-ttu-id="96cac-115">Get-Methoden der Eigenschaft</span><span class="sxs-lookup"><span data-stu-id="96cac-115">Property Get Methods</span></span>

- <span data-ttu-id="96cac-116">Ereigniszugriffsmethoden</span><span class="sxs-lookup"><span data-stu-id="96cac-116">Event Accessor Methods</span></span>

- <span data-ttu-id="96cac-117">Gleichheits Methoden</span><span class="sxs-lookup"><span data-stu-id="96cac-117">Equals Methods</span></span>

- <span data-ttu-id="96cac-118">GetHashCode-Methoden</span><span class="sxs-lookup"><span data-stu-id="96cac-118">GetHashCode Methods</span></span>

- <span data-ttu-id="96cac-119">Methoden mit dem Methoden Satz</span><span class="sxs-lookup"><span data-stu-id="96cac-119">ToString Methods</span></span>

- <span data-ttu-id="96cac-120">Statische Konstruktoren</span><span class="sxs-lookup"><span data-stu-id="96cac-120">Static Constructors</span></span>

- <span data-ttu-id="96cac-121">Finalizer</span><span class="sxs-lookup"><span data-stu-id="96cac-121">Finalizers</span></span>

- <span data-ttu-id="96cac-122">Verwerfen von Methoden</span><span class="sxs-lookup"><span data-stu-id="96cac-122">Dispose Methods</span></span>

- <span data-ttu-id="96cac-123">Gleichheitsoperatoren</span><span class="sxs-lookup"><span data-stu-id="96cac-123">Equality Operators</span></span>

- <span data-ttu-id="96cac-124">Implizite Umwandlungs Operatoren</span><span class="sxs-lookup"><span data-stu-id="96cac-124">Implicit Cast Operators</span></span>

<span data-ttu-id="96cac-125">In den folgenden Abschnitten werden diese Methoden Typen erörtert.</span><span class="sxs-lookup"><span data-stu-id="96cac-125">The following sections discuss these method types.</span></span>

### <a name="property-get-methods"></a><span data-ttu-id="96cac-126">Get-Methoden der Eigenschaft</span><span class="sxs-lookup"><span data-stu-id="96cac-126">Property Get Methods</span></span>

<span data-ttu-id="96cac-127">Eigenschaften sind im Grunde intelligente Felder.</span><span class="sxs-lookup"><span data-stu-id="96cac-127">Properties are basically smart fields.</span></span> <span data-ttu-id="96cac-128">Daher sollten Sie sich so weit wie möglich wie ein Feld Verhalten.</span><span class="sxs-lookup"><span data-stu-id="96cac-128">Therefore, they should behave like a field as much as possible.</span></span> <span data-ttu-id="96cac-129">Felder lösen keine Ausnahmen aus, und keine der Eigenschaften sollte angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="96cac-129">Fields don't throw exceptions and neither should properties.</span></span> <span data-ttu-id="96cac-130">Wenn Sie über eine Eigenschaft verfügen, die eine Ausnahme auslöst, sollten Sie eine Methode erstellen.</span><span class="sxs-lookup"><span data-stu-id="96cac-130">If you have a property that throws an exception, consider making it a method.</span></span>

<span data-ttu-id="96cac-131">Die folgenden Ausnahmen können von einer Get-Methode der Eigenschaft ausgelöst werden:</span><span class="sxs-lookup"><span data-stu-id="96cac-131">The following exceptions can be thrown from a property get method:</span></span>

- <span data-ttu-id="96cac-132"><xref:System.InvalidOperationException?displayProperty=fullName> und alle Ableitungen (einschließlich <xref:System.ObjectDisposedException?displayProperty=fullName> )</span><span class="sxs-lookup"><span data-stu-id="96cac-132"><xref:System.InvalidOperationException?displayProperty=fullName> and all derivatives (including <xref:System.ObjectDisposedException?displayProperty=fullName>)</span></span>

- <span data-ttu-id="96cac-133"><xref:System.NotSupportedException?displayProperty=fullName> und alle Ableitungen</span><span class="sxs-lookup"><span data-stu-id="96cac-133"><xref:System.NotSupportedException?displayProperty=fullName> and all derivatives</span></span>

- <span data-ttu-id="96cac-134"><xref:System.ArgumentException?displayProperty=fullName> (nur aus indizierten Get-)</span><span class="sxs-lookup"><span data-stu-id="96cac-134"><xref:System.ArgumentException?displayProperty=fullName> (only from indexed get)</span></span>

- <span data-ttu-id="96cac-135"><xref:System.Collections.Generic.KeyNotFoundException> (nur aus indizierten Get-)</span><span class="sxs-lookup"><span data-stu-id="96cac-135"><xref:System.Collections.Generic.KeyNotFoundException> (only from indexed get)</span></span>

### <a name="event-accessor-methods"></a><span data-ttu-id="96cac-136">Ereigniszugriffsmethoden</span><span class="sxs-lookup"><span data-stu-id="96cac-136">Event Accessor Methods</span></span>

<span data-ttu-id="96cac-137">Ereignisaccessoren sollten einfache Vorgänge sein, die keine Ausnahmen auslösen.</span><span class="sxs-lookup"><span data-stu-id="96cac-137">Event accessors should be simple operations that don't throw exceptions.</span></span> <span data-ttu-id="96cac-138">Ein Ereignis sollte keine Ausnahme auslösen, wenn Sie versuchen, einen Ereignishandler hinzuzufügen oder zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="96cac-138">An event should not throw an exception when you try to add or remove an event handler.</span></span>

<span data-ttu-id="96cac-139">Die folgenden Ausnahmen können von einem Ereignis Accessor ausgelöst werden:</span><span class="sxs-lookup"><span data-stu-id="96cac-139">The following exceptions can be thrown from an event accessor:</span></span>

- <span data-ttu-id="96cac-140"><xref:System.InvalidOperationException?displayProperty=fullName> und alle Ableitungen (einschließlich <xref:System.ObjectDisposedException?displayProperty=fullName> )</span><span class="sxs-lookup"><span data-stu-id="96cac-140"><xref:System.InvalidOperationException?displayProperty=fullName> and all derivatives (including <xref:System.ObjectDisposedException?displayProperty=fullName>)</span></span>

- <span data-ttu-id="96cac-141"><xref:System.NotSupportedException?displayProperty=fullName> und alle Ableitungen</span><span class="sxs-lookup"><span data-stu-id="96cac-141"><xref:System.NotSupportedException?displayProperty=fullName> and all derivatives</span></span>

- <span data-ttu-id="96cac-142"><xref:System.ArgumentException> und Ableitungen</span><span class="sxs-lookup"><span data-stu-id="96cac-142"><xref:System.ArgumentException> and derivatives</span></span>

### <a name="equals-methods"></a><span data-ttu-id="96cac-143">Gleichheits Methoden</span><span class="sxs-lookup"><span data-stu-id="96cac-143">Equals Methods</span></span>

<span data-ttu-id="96cac-144">Die folgenden **Gleichheits** Methoden sollten keine Ausnahmen auslösen:</span><span class="sxs-lookup"><span data-stu-id="96cac-144">The following **Equals** methods should not throw exceptions:</span></span>

- <xref:System.Object.Equals%2A?displayProperty=fullName>

- <xref:System.IEquatable%601.Equals%2A>

<span data-ttu-id="96cac-145">Eine **Gleichheits** Methode sollte oder zurückgeben, `true` `false` anstatt eine Ausnahme auszulösen.</span><span class="sxs-lookup"><span data-stu-id="96cac-145">An **Equals** method should return `true` or `false` instead of throwing an exception.</span></span> <span data-ttu-id="96cac-146">Wenn z. b. gleich zwei nicht übereinstimmende Typen weitergegeben werden, sollten Sie nur zurückgeben, `false` anstatt eine auszulösen <xref:System.ArgumentException> .</span><span class="sxs-lookup"><span data-stu-id="96cac-146">For example, if Equals is passed two mismatched types it should just return `false` instead of throwing an <xref:System.ArgumentException>.</span></span>

### <a name="gethashcode-methods"></a><span data-ttu-id="96cac-147">GetHashCode-Methoden</span><span class="sxs-lookup"><span data-stu-id="96cac-147">GetHashCode Methods</span></span>

<span data-ttu-id="96cac-148">Die folgenden **GetHashCode** -Methoden sollten normalerweise keine Ausnahmen auslösen:</span><span class="sxs-lookup"><span data-stu-id="96cac-148">The following **GetHashCode** methods should usually not throw exceptions:</span></span>

- <xref:System.Object.GetHashCode%2A>

- <xref:System.Collections.IEqualityComparer.GetHashCode%2A>

<span data-ttu-id="96cac-149">**GetHashCode** sollte immer einen Wert zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="96cac-149">**GetHashCode** should always return a value.</span></span> <span data-ttu-id="96cac-150">Andernfalls können Sie Elemente in der Hash Tabelle verlieren.</span><span class="sxs-lookup"><span data-stu-id="96cac-150">Otherwise, you can lose items in the hash table.</span></span>

<span data-ttu-id="96cac-151">Die Versionen von **GetHashCode** , die ein Argument annehmen, können eine auslösen <xref:System.ArgumentException> .</span><span class="sxs-lookup"><span data-stu-id="96cac-151">The versions of **GetHashCode** that take an argument can throw an <xref:System.ArgumentException>.</span></span> <span data-ttu-id="96cac-152">**Object. GetHashCode** sollte jedoch nie eine Ausnahme auslösen.</span><span class="sxs-lookup"><span data-stu-id="96cac-152">However, **Object.GetHashCode** should never throw an exception.</span></span>

### <a name="tostring-methods"></a><span data-ttu-id="96cac-153">Methoden mit dem Methoden Satz</span><span class="sxs-lookup"><span data-stu-id="96cac-153">ToString Methods</span></span>

<span data-ttu-id="96cac-154">Der Debugger verwendet <xref:System.Object.ToString%2A?displayProperty=fullName> , um Informationen zu Objekten im Zeichen folgen Format anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="96cac-154">The debugger uses <xref:System.Object.ToString%2A?displayProperty=fullName> to help display information about objects in string format.</span></span> <span data-ttu-id="96cac-155">Daher sollte die Objekt **Zeichenfolge** den Status eines Objekts nicht ändern und keine Ausnahmen auslösen.</span><span class="sxs-lookup"><span data-stu-id="96cac-155">Therefore, **ToString** should not change the state of an object, and it shouldn't throw exceptions.</span></span>

### <a name="static-constructors"></a><span data-ttu-id="96cac-156">Statische Konstruktoren</span><span class="sxs-lookup"><span data-stu-id="96cac-156">Static Constructors</span></span>

<span data-ttu-id="96cac-157">Das Auslösen von Ausnahmen von einem statischen Konstruktor bewirkt, dass der Typ in der aktuellen Anwendungsdomäne unbrauchbar ist.</span><span class="sxs-lookup"><span data-stu-id="96cac-157">Throwing exceptions from a static constructor causes the type to be unusable in the current application domain.</span></span> <span data-ttu-id="96cac-158">Sie sollten einen guten Grund (z. b. ein Sicherheitsproblem) zum Auslösen einer Ausnahme von einem statischen Konstruktor haben.</span><span class="sxs-lookup"><span data-stu-id="96cac-158">You should have a good reason (such as a security issue) for throwing an exception from a static constructor.</span></span>

### <a name="finalizers"></a><span data-ttu-id="96cac-159">Finalizer</span><span class="sxs-lookup"><span data-stu-id="96cac-159">Finalizers</span></span>

<span data-ttu-id="96cac-160">Das Auslösen einer Ausnahme von einem Finalizer bewirkt, dass die CLR schnell ausfällt, was den Prozess aufreißt.</span><span class="sxs-lookup"><span data-stu-id="96cac-160">Throwing an exception from a finalizer causes the CLR to fail fast, which tears down the process.</span></span> <span data-ttu-id="96cac-161">Daher sollte das Auslösen von Ausnahmen in einem Finalizer immer vermieden werden.</span><span class="sxs-lookup"><span data-stu-id="96cac-161">Therefore, throwing exceptions in a finalizer should always be avoided.</span></span>

### <a name="dispose-methods"></a><span data-ttu-id="96cac-162">Verwerfen von Methoden</span><span class="sxs-lookup"><span data-stu-id="96cac-162">Dispose Methods</span></span>

<span data-ttu-id="96cac-163">Eine <xref:System.IDisposable.Dispose%2A?displayProperty=fullName> Methode sollte keine Ausnahme auslösen.</span><span class="sxs-lookup"><span data-stu-id="96cac-163">A <xref:System.IDisposable.Dispose%2A?displayProperty=fullName> method should not throw an exception.</span></span> <span data-ttu-id="96cac-164">"Verwerfen" wird häufig als Teil der Bereinigungs Logik in einer- `finally` Klausel aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="96cac-164">Dispose is often called as part of the cleanup logic in a `finally` clause.</span></span> <span data-ttu-id="96cac-165">Daher zwingt das explizite Auslösen einer Ausnahme von verwerfen den Benutzer, eine Ausnahmebehandlung in der-Klausel hinzuzufügen `finally` .</span><span class="sxs-lookup"><span data-stu-id="96cac-165">Therefore, explicitly throwing an exception from Dispose forces the user to add exception handling inside the `finally` clause.</span></span>

<span data-ttu-id="96cac-166">Der verwerfen **(false)** -Codepfad sollte nie Ausnahmen auslösen, da der Löschvorgang fast immer von einem Finalizer aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="96cac-166">The **Dispose(false)** code path should never throw exceptions, because Dispose is almost always called from a finalizer.</span></span>

### <a name="equality-operators--"></a><span data-ttu-id="96cac-167">Gleichheits Operatoren (= =,! =)</span><span class="sxs-lookup"><span data-stu-id="96cac-167">Equality Operators (==, !=)</span></span>

<span data-ttu-id="96cac-168">Like-Methoden sollten Gleichheits Operatoren entweder `true` oder zurückgeben `false` und sollten keine Ausnahmen auslösen.</span><span class="sxs-lookup"><span data-stu-id="96cac-168">Like Equals methods, equality operators should return either `true` or `false`, and should not throw exceptions.</span></span>

### <a name="implicit-cast-operators"></a><span data-ttu-id="96cac-169">Implizite Umwandlungs Operatoren</span><span class="sxs-lookup"><span data-stu-id="96cac-169">Implicit Cast Operators</span></span>

<span data-ttu-id="96cac-170">Da der Benutzer häufig nicht weiß, dass ein impliziter Umwandlungs Operator aufgerufen wurde, wird eine vom impliziten Umwandlungs Operator ausgelöste Ausnahme nicht erwartet.</span><span class="sxs-lookup"><span data-stu-id="96cac-170">Because the user is often unaware that an implicit cast operator has been called, an exception thrown by the implicit cast operator is unexpected.</span></span> <span data-ttu-id="96cac-171">Daher sollten keine Ausnahmen von impliziten Umwandlungs Operatoren ausgelöst werden.</span><span class="sxs-lookup"><span data-stu-id="96cac-171">Therefore, no exceptions should be thrown from implicit cast operators.</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="96cac-172">Behandeln von Verstößen</span><span class="sxs-lookup"><span data-stu-id="96cac-172">How to fix violations</span></span>

<span data-ttu-id="96cac-173">Ändern Sie für Eigenschaften Getter die Logik, sodass keine Ausnahme mehr ausgelöst werden muss, oder ändern Sie die-Eigenschaft in eine-Methode.</span><span class="sxs-lookup"><span data-stu-id="96cac-173">For property getters, either change the logic so that it no longer has to throw an exception, or change the property into a method.</span></span>

<span data-ttu-id="96cac-174">Ändern Sie für alle anderen zuvor aufgelisteten Methoden Typen die Logik so, dass Sie keine Ausnahme mehr auslösen muss.</span><span class="sxs-lookup"><span data-stu-id="96cac-174">For all other method types listed previously, change the logic so that it no longer must throw an exception.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="96cac-175">Wann sollten Warnungen unterdrückt werden?</span><span class="sxs-lookup"><span data-stu-id="96cac-175">When to suppress warnings</span></span>

<span data-ttu-id="96cac-176">Wenn die Verletzung durch eine Ausnahme Deklaration statt einer ausgelösten Ausnahme verursacht wurde, ist es sicher, eine Warnung aus dieser Regel zu unterdrücken.</span><span class="sxs-lookup"><span data-stu-id="96cac-176">If the violation was caused by an exception declaration instead of a thrown exception, it is safe to suppress a warning from this rule.</span></span>

## <a name="related-rules"></a><span data-ttu-id="96cac-177">Verwandte Regeln</span><span class="sxs-lookup"><span data-stu-id="96cac-177">Related rules</span></span>

- [<span data-ttu-id="96cac-178">CA2219: Keine Ausnahmen in Ausnahmeklauseln auslösen.</span><span class="sxs-lookup"><span data-stu-id="96cac-178">CA2219: Do not raise exceptions in exception clauses</span></span>](ca2219.md)

## <a name="see-also"></a><span data-ttu-id="96cac-179">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="96cac-179">See also</span></span>

- [<span data-ttu-id="96cac-180">Entwurfsregeln</span><span class="sxs-lookup"><span data-stu-id="96cac-180">Design rules</span></span>](design-warnings.md)
