---
title: Threads und Threading
description: Hier erfahren Sie mehr über Threading (Prozesse und Threads), wann Sie mehrere Threads verwenden können und wie Sie Multithreading verwenden können, um die Reaktionsfähigkeit oder den Durchsatz in .NET zu erhöhen.
ms.date: 11/08/2018
helpviewer_keywords:
- multiple threads
- threading [.NET]
- threading [.NET], multiple threads
ms.assetid: 5baac3aa-e603-4fa6-9f89-0f2c1084e6b1
ms.openlocfilehash: 20550b597e27c75f00d16528871007988dd6b885
ms.sourcegitcommit: 965a5af7918acb0a3fd3baf342e15d511ef75188
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/18/2020
ms.locfileid: "94819538"
---
# <a name="threads-and-threading"></a><span data-ttu-id="346ae-103">Threads und Threading</span><span class="sxs-lookup"><span data-stu-id="346ae-103">Threads and threading</span></span>

<span data-ttu-id="346ae-104">Mit Multithreading können Sie die Reaktionsfähigkeit Ihrer Anwendung und deren Durchsatz erhöhen, falls Ihre Anwendung in einem Multiprozessor- oder Multicoresystem ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="346ae-104">Multithreading allows you to increase the responsiveness of your application and, if your application runs on a multiprocessor or multi-core system, increase its throughput.</span></span>

## <a name="processes-and-threads"></a><span data-ttu-id="346ae-105">Prozesse und Threads</span><span class="sxs-lookup"><span data-stu-id="346ae-105">Processes and threads</span></span>

<span data-ttu-id="346ae-106">Ein *Prozess* ist ein ausführendes Programm.</span><span class="sxs-lookup"><span data-stu-id="346ae-106">A *process* is an executing program.</span></span> <span data-ttu-id="346ae-107">Ein Betriebssystem verwendet Prozesse, um Anwendungen voneinander zu trennen, die ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="346ae-107">An operating system uses processes to separate the applications that are being executed.</span></span> <span data-ttu-id="346ae-108">Ein *Thread* ist die grundlegende Einheit, in der ein Betriebssystem die Prozessorzeit belegt.</span><span class="sxs-lookup"><span data-stu-id="346ae-108">A *thread* is the basic unit to which an operating system allocates processor time.</span></span> <span data-ttu-id="346ae-109">Jeder Thread verfügt über eine [Planungspriorität](scheduling-threads.md) und verwaltet eine Reihe von Strukturen, mit denen das System den Threadkontext speichert, bis die Threadausführung angehalten wird.</span><span class="sxs-lookup"><span data-stu-id="346ae-109">Each thread has a [scheduling priority](scheduling-threads.md) and maintains a set of structures the system uses to save the thread context when the thread's execution is paused.</span></span> <span data-ttu-id="346ae-110">Der Threadkontext enthält alle Informationen, die der Thread benötigt, um die Ausführung nahtlos fortzusetzen. Dies schließt auch seine CPU-Register und seinen Stapel ein.</span><span class="sxs-lookup"><span data-stu-id="346ae-110">The thread context includes all the information the thread needs to seamlessly resume execution, including the thread's set of CPU registers and stack.</span></span> <span data-ttu-id="346ae-111">Im Kontext eines Prozesses können mehrere Threads ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="346ae-111">Multiple threads can run in the context of a process.</span></span> <span data-ttu-id="346ae-112">Alle Threads eines Prozesses teilen sich dessen virtuellen Adressraum.</span><span class="sxs-lookup"><span data-stu-id="346ae-112">All threads of a process share its virtual address space.</span></span> <span data-ttu-id="346ae-113">Ein Thread kann einen beliebigen Teil des Programmcodes ausführen, einschließlich der Teile, die aktuell von einem anderen Thread ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="346ae-113">A thread can execute any part of the program code, including parts currently being executed by another thread.</span></span>

> [!NOTE]
> <span data-ttu-id="346ae-114">Mit dem .NET Framework können Anwendungen innerhalb eines Prozesses mithilfe von *Anwendungsdomänen* isoliert werden.</span><span class="sxs-lookup"><span data-stu-id="346ae-114">.NET Framework provides a way to isolate applications within a process with the use of *application domains*.</span></span> <span data-ttu-id="346ae-115">(Anwendungsdomänen sind auf .NET Core nicht verfügbar.) Weitere Informationen finden Sie im Abschnitt [Anwendungsdomänen und Threads](../../framework/app-domains/application-domains.md#application-domains-and-threads) im Artikel [Anwendungsdomänen](../../framework/app-domains/application-domains.md).</span><span class="sxs-lookup"><span data-stu-id="346ae-115">(Application domains are not available on .NET Core.) For more information, see the [Application domains and threads](../../framework/app-domains/application-domains.md#application-domains-and-threads) section of the [Application domains](../../framework/app-domains/application-domains.md) article.</span></span>

<span data-ttu-id="346ae-116">Normalerweise wird ein .NET-Programm mit einem einzelnen Thread gestartet, der oft als *primärer* Thread bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="346ae-116">By default, a .NET program is started with a single thread, often called the *primary* thread.</span></span> <span data-ttu-id="346ae-117">Es kann jedoch zusätzliche Threads erstellen, um Code parallel oder gleichzeitig mit dem primären Thread auszuführen.</span><span class="sxs-lookup"><span data-stu-id="346ae-117">However, it can create additional threads to execute code in parallel or concurrently with the primary thread.</span></span> <span data-ttu-id="346ae-118">Diese Threads werden auch als *Arbeitsthreads* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="346ae-118">These threads are often called *worker* threads.</span></span>

## <a name="when-to-use-multiple-threads"></a><span data-ttu-id="346ae-119">Verwendung mehrerer Threads</span><span class="sxs-lookup"><span data-stu-id="346ae-119">When to use multiple threads</span></span>

<span data-ttu-id="346ae-120">Sie verwenden mehrere Threads, um die Reaktionsfähigkeit Ihrer Anwendung zu erhöhen und um die Vorteile eines Multiprozessor- oder Multicoresystems zu nutzen, die den Anwendungsdurchsatz erhöhen.</span><span class="sxs-lookup"><span data-stu-id="346ae-120">You use multiple threads to increase the responsiveness of your application and to take advantage of a multiprocessor or multi-core system to increase the application's throughput.</span></span>

<span data-ttu-id="346ae-121">Ziehen Sie eine Desktopanwendung in Betracht, in der der primäre Thread für Benutzeroberflächenelemente verantwortlich ist und auf Benutzeraktionen reagiert.</span><span class="sxs-lookup"><span data-stu-id="346ae-121">Consider a desktop application, in which the primary thread is responsible for user interface elements and responds to user actions.</span></span> <span data-ttu-id="346ae-122">Verwenden Sie Arbeitsthreads, um zeitaufwendige Vorgänge durchzuführen, die andernfalls den primären Thread einnehmen würden und so dazu führen würden, dass die Benutzeroberfläche nicht mehr reagiert.</span><span class="sxs-lookup"><span data-stu-id="346ae-122">Use worker threads to perform time-consuming operations that, otherwise, would occupy the primary thread and make the user interface non-responsive.</span></span> <span data-ttu-id="346ae-123">Sie können auch einen dedizierten Thread verwenden, damit die Netzwerk- oder Gerätekommunikation auf eingehende Nachrichten oder Ereignisse besser reagiert.</span><span class="sxs-lookup"><span data-stu-id="346ae-123">You can also use a dedicated thread for network or device communication to be more responsive to incoming messages or events.</span></span>

<span data-ttu-id="346ae-124">Wenn Ihr Programm Vorgänge ausführt, die parallel durchgeführt werden können, kann die Gesamtausführungszeit verringert werden, indem diese Vorgänge in separaten Threads durchgeführt und das Programm auf einem Multiprozessor- oder Multicoresystem ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="346ae-124">If your program performs operations that can be done in parallel, the total execution time can be decreased by performing those operations in separate threads and running the program on a multiprocessor or multi-core system.</span></span> <span data-ttu-id="346ae-125">Auf solch einem System kann die Verwendung von Multithreading den Durchsatz erhöhen und gleichzeitig kann die Reaktionsfähigkeit verbessert werden.</span><span class="sxs-lookup"><span data-stu-id="346ae-125">On such a system, use of multithreading might increase throughput along with the increased responsiveness.</span></span>

## <a name="how-to-use-multithreading-in-net"></a><span data-ttu-id="346ae-126">Verwenden des Multithreadings in .NET</span><span class="sxs-lookup"><span data-stu-id="346ae-126">How to use multithreading in .NET</span></span>

<span data-ttu-id="346ae-127">Ab .NET Framework 4 wird für die Nutzung von Multithreading empfohlen, [Task Parallel Library (TPL)](../parallel-programming/task-parallel-library-tpl.md) und [Parallel LINQ (PLINQ)](../parallel-programming/introduction-to-plinq.md) zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="346ae-127">Starting with .NET Framework 4, the recommended way to utilize multithreading is to use [Task Parallel Library (TPL)](../parallel-programming/task-parallel-library-tpl.md) and [Parallel LINQ (PLINQ)](../parallel-programming/introduction-to-plinq.md).</span></span> <span data-ttu-id="346ae-128">Weitere Informationen finden Sie unter [Parallele Programmierung in .NET](../parallel-programming/index.md).</span><span class="sxs-lookup"><span data-stu-id="346ae-128">For more information, see [Parallel programming](../parallel-programming/index.md).</span></span>

<span data-ttu-id="346ae-129">TPL und PLINQ basieren jeweils auf den <xref:System.Threading.ThreadPool>-Threads.</span><span class="sxs-lookup"><span data-stu-id="346ae-129">Both TPL and PLINQ rely on the <xref:System.Threading.ThreadPool> threads.</span></span> <span data-ttu-id="346ae-130">Die <xref:System.Threading.ThreadPool?displayProperty=nameWithType>-Klasse stellt einer .NET-Anwendung einen Pool von Arbeitsthreads bereit.</span><span class="sxs-lookup"><span data-stu-id="346ae-130">The <xref:System.Threading.ThreadPool?displayProperty=nameWithType> class provides a .NET application with a pool of worker threads.</span></span> <span data-ttu-id="346ae-131">Sie können auch Threadpoolthreads verwenden.</span><span class="sxs-lookup"><span data-stu-id="346ae-131">You can also use thread pool threads.</span></span> <span data-ttu-id="346ae-132">Weitere Informationen finden Sie unter [Der verwaltete Threadpool](the-managed-thread-pool.md).</span><span class="sxs-lookup"><span data-stu-id="346ae-132">For more information, see [The managed thread pool](the-managed-thread-pool.md).</span></span>

<span data-ttu-id="346ae-133">Zum Schluss können Sie die <xref:System.Threading.Thread?displayProperty=nameWithType>-Klasse verwenden, die einen verwalteten Thread darstellt.</span><span class="sxs-lookup"><span data-stu-id="346ae-133">At last, you can use the <xref:System.Threading.Thread?displayProperty=nameWithType> class that represents a managed thread.</span></span> <span data-ttu-id="346ae-134">Weitere Informationen finden Sie unter [Verwenden von Threads und Threading](using-threads-and-threading.md).</span><span class="sxs-lookup"><span data-stu-id="346ae-134">For more information, see [Using threads and threading](using-threads-and-threading.md).</span></span>

<span data-ttu-id="346ae-135">Mehrere Threads müssen möglicherweise auf eine freigegebene Ressource zugreifen.</span><span class="sxs-lookup"><span data-stu-id="346ae-135">Multiple threads might need to access a shared resource.</span></span> <span data-ttu-id="346ae-136">Damit die Ressource nicht beschädigt wird und um Racebedingungen zu vermeiden, müssen Sie den Threadzugriff darauf synchronisieren.</span><span class="sxs-lookup"><span data-stu-id="346ae-136">To keep the resource in a uncorrupted state and avoid race conditions, you must synchronize the thread access to it.</span></span> <span data-ttu-id="346ae-137">Sie sollten ebenso die Interaktion mehrerer Threads koordinieren.</span><span class="sxs-lookup"><span data-stu-id="346ae-137">You also might want to coordinate the interaction of multiple threads.</span></span> <span data-ttu-id="346ae-138">.NET bietet eine Reihe von Typen, mit denen Sie den Zugriff auf eine freigegebene Ressource synchronisieren oder die Threadinteraktion koordinieren können.</span><span class="sxs-lookup"><span data-stu-id="346ae-138">.NET provides a range of types that you can use to synchronize access to a shared resource or coordinate thread interaction.</span></span> <span data-ttu-id="346ae-139">Weitere Informationen finden Sie unter [Übersicht über Synchronisierungsprimitiven](overview-of-synchronization-primitives.md).</span><span class="sxs-lookup"><span data-stu-id="346ae-139">For more information, see [Overview of synchronization primitives](overview-of-synchronization-primitives.md).</span></span>

<span data-ttu-id="346ae-140">Behandeln Sie Ausnahmen in Threads.</span><span class="sxs-lookup"><span data-stu-id="346ae-140">Do handle exceptions in threads.</span></span> <span data-ttu-id="346ae-141">Nicht behandelte Ausnahmen in Threads beenden in der Regel den Prozess.</span><span class="sxs-lookup"><span data-stu-id="346ae-141">Unhandled exceptions in threads generally terminate the process.</span></span> <span data-ttu-id="346ae-142">Weitere Informationen finden Sie unter [Ausnahmen in verwalteten Threads](exceptions-in-managed-threads.md).</span><span class="sxs-lookup"><span data-stu-id="346ae-142">For more information, see [Exceptions in managed threads](exceptions-in-managed-threads.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="346ae-143">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="346ae-143">See also</span></span>

- [<span data-ttu-id="346ae-144">Threadingobjekte und -funktionen</span><span class="sxs-lookup"><span data-stu-id="346ae-144">Threading objects and features</span></span>](threading-objects-and-features.md)
- [<span data-ttu-id="346ae-145">Empfohlene Vorgehensweise für das verwaltete Threading</span><span class="sxs-lookup"><span data-stu-id="346ae-145">Managed threading best practices</span></span>](managed-threading-best-practices.md)
- [<span data-ttu-id="346ae-146">Parallel Processing, Concurrency, and Async Programming in .NET (Parallelverarbeitung, Parallelität und asynchrone Programmierung in .NET)</span><span class="sxs-lookup"><span data-stu-id="346ae-146">Parallel Processing, Concurrency, and Async Programming in .NET</span></span>](../parallel-processing-and-concurrency.md)
- [<span data-ttu-id="346ae-147">About Processes and Threads (Informationen zu Prozessen und Threads)</span><span class="sxs-lookup"><span data-stu-id="346ae-147">About Processes and Threads</span></span>](/windows/desktop/procthread/about-processes-and-threads)
