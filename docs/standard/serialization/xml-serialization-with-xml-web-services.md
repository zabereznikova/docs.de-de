---
title: XML-Serialisierung mit XML-Webdiensten
description: Lernen Sie die XML-Serialisierung als in der Architektur der XML-Webdienste verwendeten Transportmechanismus kennen. Die XML-Serialisierung wird von der XmlSerializer-Klasse ausgeführt.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- XML Web services, XML serialization
- XML serialization, XML Web services
- SOAP, XML serialization
- asmx files
- serialization, SOAP
- XML serialization, attributes
- attributes [.NET], XML serialization
- .asmx files
- encoded XML serialization
- literal XML serialization
- serialization, attributes
ms.assetid: a416192f-8102-458e-bc0a-0b8f3f784da9
ms.openlocfilehash: 5c986162de19c2cb27edf19ff8e9e80798f36117
ms.sourcegitcommit: 74d05613d6c57106f83f82ce8ee71176874ea3f0
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/03/2020
ms.locfileid: "93282366"
---
# <a name="xml-serialization-with-xml-web-services"></a><span data-ttu-id="2b12c-104">XML-Serialisierung mit XML-Webdiensten</span><span class="sxs-lookup"><span data-stu-id="2b12c-104">XML Serialization with XML Web Services</span></span>

<span data-ttu-id="2b12c-105">Bei der XML-Serialisierung handelt es sich um den durch die <xref:System.Xml.Serialization.XmlSerializer>-Klasse ausgeführten Transportmechanismus, der die Grundlage für die Architektur der XML-Webdienste ist.</span><span class="sxs-lookup"><span data-stu-id="2b12c-105">XML serialization is the underlying transport mechanism used in the XML Web services architecture, performed by the <xref:System.Xml.Serialization.XmlSerializer> class.</span></span> <span data-ttu-id="2b12c-106">Zum Steuern des mit einem XML-Webdienst generierten XML-Streams können Sie sowohl die unter [Attribute zur Steuerung der XML-Serialisierung](attributes-that-control-xml-serialization.md) als auch die unter [Attribute zur Steuerung der Serialisierung von codiertem SOAP](attributes-that-control-encoded-soap-serialization.md) aufgelisteten Attribute auf die Klassen, Rückgabewerte, Parameter und Felder einer Datei anwenden, die zum Erstellen eines XML-Webdiensts (ASMX) verwendet wurden.</span><span class="sxs-lookup"><span data-stu-id="2b12c-106">To control the XML generated by an XML Web service, you can apply the attributes listed in both [Attributes That Control XML Serialization](attributes-that-control-xml-serialization.md) and [Attributes That Control Encoded SOAP Serialization](attributes-that-control-encoded-soap-serialization.md) to the classes, return values, parameters, and fields of a file used to create an XML Web service (.asmx).</span></span> <span data-ttu-id="2b12c-107">Weitere Informationen zum Erstellen von XML-Webdiensten finden Sie unter [Erstellen von XML-Webdiensten mit ASP.NET](/previous-versions/dotnet/netframework-4.0/ba0z6a33(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="2b12c-107">For more information about creating an XML Web service, see [XML Web Services Using ASP.NET](/previous-versions/dotnet/netframework-4.0/ba0z6a33(v=vs.100)).</span></span>  
  
## <a name="literal-and-encoded-styles"></a><span data-ttu-id="2b12c-108">Literalformat und codiertes Format</span><span class="sxs-lookup"><span data-stu-id="2b12c-108">Literal and Encoded Styles</span></span>  
 <span data-ttu-id="2b12c-109">Der mit einem XML-Webdienst generierte XML-Stream kann entweder im Literalformat oder codiert formatiert werden, wie unter [Anpassen von SOAP-Nachrichtenformatierungen](/previous-versions/dotnet/netframework-4.0/dkwy2d72(v=vs.100)) beschrieben.</span><span class="sxs-lookup"><span data-stu-id="2b12c-109">The XML generated by an XML Web service can be formatted in either one of two ways, either literal or encoded, as explained in [Customizing SOAP Message Formatting](/previous-versions/dotnet/netframework-4.0/dkwy2d72(v=vs.100)).</span></span> <span data-ttu-id="2b12c-110">Daher wird die XML-Serialisierung durch zwei Gruppen von Attributen gesteuert.</span><span class="sxs-lookup"><span data-stu-id="2b12c-110">Therefore there are two sets of attributes that control XML serialization.</span></span> <span data-ttu-id="2b12c-111">Die unter [Attribute zur Steuerung der XML-Serialisierung](attributes-that-control-xml-serialization.md) aufgelisteten Attribute sind für die Steuerung von XML im Literalformat vorgesehen.</span><span class="sxs-lookup"><span data-stu-id="2b12c-111">The attributes listed in [Attributes That Control XML Serialization](attributes-that-control-xml-serialization.md) are designed to control literal style XML.</span></span> <span data-ttu-id="2b12c-112">Durch die unter [Attribute zur Steuerung der Serialisierung von codiertem SOAP](attributes-that-control-encoded-soap-serialization.md) aufgeführten Attribute wird das codierte Format gesteuert.</span><span class="sxs-lookup"><span data-stu-id="2b12c-112">The attributes listed in [Attributes That Control Encoded SOAP Serialization](attributes-that-control-encoded-soap-serialization.md) control the encoded style.</span></span> <span data-ttu-id="2b12c-113">Durch die gezielte Anwendung dieser Attribute können Sie eine Anwendung so anpassen, dass sie eines dieser Formate oder beide Formate zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="2b12c-113">By selectively applying these attributes, you can tailor an application to return either, or both styles.</span></span> <span data-ttu-id="2b12c-114">Zudem können diese Attribute gegebenenfalls auch auf Rückgabewerte und Parameter angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="2b12c-114">Furthermore, these attributes can be applied (as appropriate) to return values and parameters.</span></span>  
  
### <a name="example-of-using-both-styles"></a><span data-ttu-id="2b12c-115">Beispiel für die Verwendung beider Formate</span><span class="sxs-lookup"><span data-stu-id="2b12c-115">Example of Using Both Styles</span></span>  
 <span data-ttu-id="2b12c-116">Bei der Erstellung eines XML-Webdienstes können Sie beide Sätze von Attributen auf die Methoden anwenden.</span><span class="sxs-lookup"><span data-stu-id="2b12c-116">When you're creating an XML Web service, you can use both sets of attributes on the methods.</span></span> <span data-ttu-id="2b12c-117">Im folgenden Codebeispiel enthält die Klasse `MyService` die beiden XML-Webdienstmethoden `MyLiteralMethod` und `MyEncodedMethod`.</span><span class="sxs-lookup"><span data-stu-id="2b12c-117">In the following code example, the class named `MyService` contains two XML Web service methods, `MyLiteralMethod` and `MyEncodedMethod`.</span></span> <span data-ttu-id="2b12c-118">Beide Methoden führen dieselbe Funktion aus: Zurückgeben einer Instanz der `Order`-Klasse.</span><span class="sxs-lookup"><span data-stu-id="2b12c-118">Both methods perform the same function: returning an instance of the `Order` class.</span></span> <span data-ttu-id="2b12c-119">In der `Order`-Klasse werden sowohl das <xref:System.Xml.Serialization.XmlTypeAttribute>-Attribut als auch das <xref:System.Xml.Serialization.SoapTypeAttribute>-Attribut auf das `OrderID`-Feld angewendet. Für beide Attribute wurden hierbei verschiedene Werte für die `ElementName`-Eigenschaft festgelegt.</span><span class="sxs-lookup"><span data-stu-id="2b12c-119">In the `Order` class, the <xref:System.Xml.Serialization.XmlTypeAttribute> and the <xref:System.Xml.Serialization.SoapTypeAttribute> attributes are both applied to the `OrderID` field, and both attributes have their `ElementName` property set to different values.</span></span>  
  
 <span data-ttu-id="2b12c-120">Um das Beispiel auszuführen, fügen Sie den Code in eine ASMX-Datei ein, und speichern Sie die Datei in einem virtuellen Verzeichnis, das durch Internetinformationsdienste (Internet Information Services, IIS) verwaltet wird.</span><span class="sxs-lookup"><span data-stu-id="2b12c-120">To run the example, paste the code into a file with an .asmx extension, and place the file into a virtual directory managed by Internet Information Services (IIS).</span></span> <span data-ttu-id="2b12c-121">Geben Sie über einen HTML-Browser wie Internet Explorer den Namen des Computers, des virtuellen Verzeichnisses und der Datei ein.</span><span class="sxs-lookup"><span data-stu-id="2b12c-121">From an HTML browser, such as Internet Explorer, type the name of the computer, virtual directory, and file.</span></span>  
  
```vb  
<%@ WebService Language="VB" Class="MyService" %>  
Imports System  
Imports System.Web.Services  
Imports System.Web.Services.Protocols  
Imports System.Xml.Serialization  
Public Class Order  
    ' Both types of attributes can be applied. Depending on which type  
    ' the method used, either one will affect the call.  
    <SoapElement(ElementName:= "EncodedOrderID"), _  
    XmlElement(ElementName:= "LiteralOrderID")> _  
    public OrderID As String  
End Class  
  
Public Class MyService  
    <WebMethod, SoapDocumentMethod> _  
    public Function MyLiteralMethod() As Order
        Dim myOrder As Order = New Order()  
        return myOrder  
    End Function  
    <WebMethod, SoapRpcMethod> _  
    public Function MyEncodedMethod() As Order
        Dim myOrder As Order = New Order()  
        return myOrder  
    End Function  
End Class  
```  
  
```csharp  
<%@ WebService Language="C#" Class="MyService" %>  
using System;  
using System.Web.Services;  
using System.Web.Services.Protocols;  
using System.Xml.Serialization;  
public class Order {  
    // Both types of attributes can be applied. Depending on which type  
    // the method used, either one will affect the call.  
    [SoapElement(ElementName = "EncodedOrderID")]  
    [XmlElement(ElementName = "LiteralOrderID")]  
    public String OrderID;  
}  
public class MyService {  
    [WebMethod][SoapDocumentMethod]  
    public Order MyLiteralMethod(){  
        Order myOrder = new Order();  
        return myOrder;  
    }  
    [WebMethod][SoapRpcMethod]  
    public Order MyEncodedMethod(){  
        Order myOrder = new Order();  
        return myOrder;  
    }  
}  
```  
  
 <span data-ttu-id="2b12c-122">Im folgenden Codebeispiel wird `MyLiteralMethod` aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="2b12c-122">The following code example calls `MyLiteralMethod`.</span></span> <span data-ttu-id="2b12c-123">Der Elementname wird in "LiteralOrderID" geändert.</span><span class="sxs-lookup"><span data-stu-id="2b12c-123">The element name is changed to "LiteralOrderID".</span></span>  
  
```xml  
<?xml version="1.0" encoding="utf-8"?>  
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">  
    <soap:Body>  
        <MyLiteralMethodResponse xmlns="http://tempuri.org/">  
            <MyLiteralMethodResult>  
                <LiteralOrderID>string</LiteralOrderID>  
            </MyLiteralMethodResult>  
        </MyLiteralMethodResponse>  
    </soap:Body>  
</soap:Envelope>  
```  
  
 <span data-ttu-id="2b12c-124">Im folgenden Codebeispiel wird `MyEncodedMethod` aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="2b12c-124">The following code example calls `MyEncodedMethod`.</span></span> <span data-ttu-id="2b12c-125">Der Elementname ist "EncodedOrderID".</span><span class="sxs-lookup"><span data-stu-id="2b12c-125">The element name is "EncodedOrderID".</span></span>  
  
```xml  
<?xml version="1.0" encoding="utf-8"?>  
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:tns="http://tempuri.org/" xmlns:types="http://tempuri.org/encodedTypes" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">  
    <soap:Body soap:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">  
        <tns:MyEncodedMethodResponse>  
            <MyEncodedMethodResult href="#id1" />  
        </tns:MyEncodedMethodResponse>  
        <types:Order id="id1" xsi:type="types:Order">  
            <EncodedOrderID xsi:type="xsd:string">string</EncodedOrderID>  
        </types:Order>  
    </soap:Body>  
</soap:Envelope>  
```  
  
### <a name="applying-attributes-to-return-values"></a><span data-ttu-id="2b12c-126">Anwenden von Attributen auf Rückgabewerte</span><span class="sxs-lookup"><span data-stu-id="2b12c-126">Applying Attributes to Return Values</span></span>  
 <span data-ttu-id="2b12c-127">Sie können auch Attribute für Rückgabewerte anwenden, um Namespace, Elementnamen usw. zu steuern.</span><span class="sxs-lookup"><span data-stu-id="2b12c-127">You can also apply attributes to return values to control the namespace, element name, and so forth.</span></span> <span data-ttu-id="2b12c-128">Im folgenden Codebeispiel wird das `XmlElementAttribute`-Attribut auf den Rückgabewert der `MyLiteralMethod`-Methode angewendet.</span><span class="sxs-lookup"><span data-stu-id="2b12c-128">The following code example applies the `XmlElementAttribute` attribute to the return value of the `MyLiteralMethod` method.</span></span> <span data-ttu-id="2b12c-129">Auf diese Weise können Sie den Namespace und den Elementnamen steuern.</span><span class="sxs-lookup"><span data-stu-id="2b12c-129">Doing so allows you to control the namespace and element name.</span></span>  
  
```vb  
<WebMethod, SoapDocumentMethod> _  
public Function MyLiteralMethod() As _  
<XmlElement(Namespace:="http://www.cohowinery.com", _  
ElementName:= "BookOrder")> _  
Order
    Dim myOrder As Order = New Order()  
    return myOrder  
End Function  
```  
  
```csharp  
[return: XmlElement(Namespace = "http://www.cohowinery.com",  
ElementName = "BookOrder")]  
[WebMethod][SoapDocumentMethod]  
public Order MyLiteralMethod(){  
    Order myOrder = new Order();  
    return myOrder;  
}  
```  
  
 <span data-ttu-id="2b12c-130">Wenn er aufgerufen wird, gibt der Code einen XML-Stream zurück, der dem folgenden Beispiel ähnelt.</span><span class="sxs-lookup"><span data-stu-id="2b12c-130">When invoked, the code returns XML that resembles the following.</span></span>  
  
```xml  
<?xml version="1.0" encoding="utf-8"?>  
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">  
    <soap:Body>  
        <MyLiteralMethodResponse xmlns="http://tempuri.org/">  
            <BookOrder xmlns="http://www.cohowinery.com">  
                <LiteralOrderID>string</LiteralOrderID>  
            </BookOrder>  
        </MyLiteralMethodResponse>  
    </soap:Body>  
</soap:Envelope>  
```  
  
### <a name="attributes-applied-to-parameters"></a><span data-ttu-id="2b12c-131">Auf Parameter angewendete Attribute</span><span class="sxs-lookup"><span data-stu-id="2b12c-131">Attributes Applied to Parameters</span></span>  
 <span data-ttu-id="2b12c-132">Sie können Attribute auch auf Parameter anwenden, um Namespace, Elementnamen usw. anzugeben.</span><span class="sxs-lookup"><span data-stu-id="2b12c-132">You can also apply attributes to parameters to specify namespace, element name and so forth.</span></span> <span data-ttu-id="2b12c-133">Im folgenden Beispiel wird der `MyLiteralMethodResponse`-Methode ein Parameter hinzugefügt und das `XmlAttributeAttribute`-Attribut auf den Parameter angewendet.</span><span class="sxs-lookup"><span data-stu-id="2b12c-133">The following code example adds a parameter to the `MyLiteralMethodResponse` method, and applies the `XmlAttributeAttribute` attribute to the parameter.</span></span> <span data-ttu-id="2b12c-134">Sowohl der Elementname als auch der Namespace werden für den Parameter festgelegt.</span><span class="sxs-lookup"><span data-stu-id="2b12c-134">The element name and namespace are both set for the parameter.</span></span>  
  
```vb  
<WebMethod, SoapDocumentMethod> _  
public Function MyLiteralMethod(<XmlElement _  
("MyOrderID", Namespace:="http://www.microsoft.com")>ID As String) As _  
<XmlElement(Namespace:="http://www.cohowinery.com", _  
ElementName:= "BookOrder")> _  
Order
    Dim myOrder As Order = New Order()  
    myOrder.OrderID = ID  
    return myOrder  
End Function  
```  
  
```csharp  
[return: XmlElement(Namespace = "http://www.cohowinery.com",  
ElementName = "BookOrder")]  
[WebMethod][SoapDocumentMethod]  
public Order MyLiteralMethod([XmlElement("MyOrderID",
Namespace="http://www.microsoft.com")] string ID){  
    Order myOrder = new Order();  
    myOrder.OrderID = ID;  
    return myOrder;  
}
```  
  
 <span data-ttu-id="2b12c-135">Die SOAP-Anforderung sollte etwa folgendermaßen aussehen.</span><span class="sxs-lookup"><span data-stu-id="2b12c-135">The SOAP request would resemble the following.</span></span>  
  
```xml  
<?xml version="1.0" encoding="utf-8"?>  
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">  
    <soap:Body>  
        <MyLiteralMethod xmlns="http://tempuri.org/">  
            <MyOrderID xmlns="http://www.microsoft.com">string</MyOrderID>  
        </MyLiteralMethod>  
    </soap:Body>  
</soap:Envelope>  
```  
  
### <a name="applying-attributes-to-classes"></a><span data-ttu-id="2b12c-136">Anwenden von Attributen auf Klassen</span><span class="sxs-lookup"><span data-stu-id="2b12c-136">Applying Attributes to Classes</span></span>  
 <span data-ttu-id="2b12c-137">Um den Namespace von Elementen zu steuern, die in Beziehung zu Klassen stehen, können Sie je nach Elementtyp `XmlTypeAttribute`, `XmlRootAttribute` und `SoapTypeAttribute` anwenden.</span><span class="sxs-lookup"><span data-stu-id="2b12c-137">If you need to control the namespace of elements that correlate to classes, you can apply `XmlTypeAttribute`, `XmlRootAttribute`, and `SoapTypeAttribute`, as appropriate.</span></span> <span data-ttu-id="2b12c-138">Im folgenden Codebeispiel werden alle drei Attribute auf die `Order`-Klasse angewendet.</span><span class="sxs-lookup"><span data-stu-id="2b12c-138">The following code example applies all three to the `Order` class.</span></span>  
  
```vb  
<XmlType("BigBookService"), _  
SoapType("SoapBookService"), _  
XmlRoot("BookOrderForm")> _  
Public Class Order  
    ' Both types of attributes can be applied. Depending on which  
    ' the method used, either one will affect the call.  
    <SoapElement(ElementName:= "EncodedOrderID"), _  
    XmlElement(ElementName:= "LiteralOrderID")> _  
    public OrderID As String  
End Class  
```  
  
```csharp  
[XmlType("BigBooksService", Namespace = "http://www.cpandl.com")]  
[SoapType("SoapBookService")]  
[XmlRoot("BookOrderForm")]  
public class Order {  
    // Both types of attributes can be applied. Depending on which  
    // the method used, either one will affect the call.  
    [SoapElement(ElementName = "EncodedOrderID")]  
    [XmlElement(ElementName = "LiteralOrderID")]  
    public String OrderID;  
}  
```  
  
 <span data-ttu-id="2b12c-139">Die Auswirkungen der Anwendungen von `XmlTypeAttribute` und `SoapTypeAttribute` werden erkennbar, wenn Sie die Dienstbeschreibung untersuchen. Dies wird im folgenden Codebeispiel gezeigt.</span><span class="sxs-lookup"><span data-stu-id="2b12c-139">The results of applying the `XmlTypeAttribute` and `SoapTypeAttribute` can be seen when you examine the service description, as shown in the following code example.</span></span>  
  
```xml
<s:element name="BookOrderForm" type="s0:BigBookService" />
<s:complexType name="BigBookService">
  <s:sequence>
    <s:element minOccurs="0" maxOccurs="1" name="LiteralOrderID" type="s:string" />
  </s:sequence>

  <s:schema targetNamespace="http://tempuri.org/encodedTypes">
    <s:complexType name="SoapBookService">
      <s:sequence>
        <s:element minOccurs="1" maxOccurs="1" name="EncodedOrderID" type="s:string" />
      </s:sequence>
    </s:complexType>
  </s:schema>
</s:complexType>
```
  
 <span data-ttu-id="2b12c-140">Die Auswirkungen des `XmlRootAttribute`-Attributs werden auch in den HTTP GET- und HTTP POST-Ergebnissen deutlich, wie nachfolgend gezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="2b12c-140">The effect of the `XmlRootAttribute` can also be seen in the HTTP GET and HTTP POST results, as follows.</span></span>  
  
```xml  
<?xml version="1.0" encoding="utf-8"?>  
<BookOrderForm xmlns="http://tempuri.org/">  
    <LiteralOrderID>string</LiteralOrderID>  
</BookOrderForm>  
```  
  
## <a name="see-also"></a><span data-ttu-id="2b12c-141">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="2b12c-141">See also</span></span>

- [<span data-ttu-id="2b12c-142">XML- und SOAP-Serialisierung</span><span class="sxs-lookup"><span data-stu-id="2b12c-142">XML and SOAP Serialization</span></span>](xml-and-soap-serialization.md)
- [<span data-ttu-id="2b12c-143">Attribute zur Steuerung der Serialisierung von codiertem SOAP</span><span class="sxs-lookup"><span data-stu-id="2b12c-143">Attributes That Control Encoded SOAP Serialization</span></span>](attributes-that-control-encoded-soap-serialization.md)
- <span data-ttu-id="2b12c-144">[How to: Serialisieren eines Objekts als einen durch SOAP codierten XML-Stream](how-to-serialize-an-object-as-a-soap-encoded-xml-stream.md).</span><span class="sxs-lookup"><span data-stu-id="2b12c-144">[How to: Serialize an Object as a SOAP-Encoded XML Stream](how-to-serialize-an-object-as-a-soap-encoded-xml-stream.md)</span></span>
- <span data-ttu-id="2b12c-145">[How to: Überschreiben von codierter SOAP-XML-Serialisierung](how-to-override-encoded-soap-xml-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="2b12c-145">[How to: Override Encoded SOAP XML Serialization](how-to-override-encoded-soap-xml-serialization.md)</span></span>
- [<span data-ttu-id="2b12c-146">Einführung in die XML-Serialisierung</span><span class="sxs-lookup"><span data-stu-id="2b12c-146">Introducing XML Serialization</span></span>](introducing-xml-serialization.md)
- <span data-ttu-id="2b12c-147">[How to: Serialisieren eines Objekts](how-to-serialize-an-object.md).</span><span class="sxs-lookup"><span data-stu-id="2b12c-147">[How to: Serialize an Object](how-to-serialize-an-object.md)</span></span>
- <span data-ttu-id="2b12c-148">[How to: Deserialisieren eines Objekts](how-to-deserialize-an-object.md).</span><span class="sxs-lookup"><span data-stu-id="2b12c-148">[How to: Deserialize an Object](how-to-deserialize-an-object.md)</span></span>
