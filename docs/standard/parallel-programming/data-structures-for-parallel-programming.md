---
title: Datenstrukturen für die parallele Programmierung
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- data structures, multi-threading
ms.assetid: bdc82f2f-4754-45a1-a81e-fe2e9c30cef9
ms.openlocfilehash: a2271feae78100940b4ecac3c42c9bfefa7e1769
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 03/15/2020
ms.locfileid: "73123149"
---
# <a name="data-structures-for-parallel-programming"></a><span data-ttu-id="f438d-102">Datenstrukturen für die parallele Programmierung</span><span class="sxs-lookup"><span data-stu-id="f438d-102">Data Structures for Parallel Programming</span></span>
<span data-ttu-id="f438d-103">.NET Framework Version 4 führt mehrere neue Typen ein, die für die parallele Programmierung nützlich sind. Darunter eine Reihe von parallelen Auflistungsklassen, einfache Synchronisierungsprimitiven und Typen für die verzögerte Initialisierung.</span><span class="sxs-lookup"><span data-stu-id="f438d-103">The .NET Framework version 4 introduces several new types that are useful in parallel programming, including a set of concurrent collection classes, lightweight synchronization primitives, and types for lazy initialization.</span></span> <span data-ttu-id="f438d-104">Sie können diese Typen mit jedem Multithreadanwendungscode verwenden, einschließlich der Task Parallel Library und PLINQ.</span><span class="sxs-lookup"><span data-stu-id="f438d-104">You can use these types with any multithreaded application code, including the Task Parallel Library and PLINQ.</span></span>  
  
## <a name="concurrent-collection-classes"></a><span data-ttu-id="f438d-105">Parallele Auflistungsklassen</span><span class="sxs-lookup"><span data-stu-id="f438d-105">Concurrent Collection Classes</span></span>  
 <span data-ttu-id="f438d-106">Die Auflistungsklassen im Namespace <xref:System.Collections.Concurrent?displayProperty=nameWithType> bieten threadsichere Vorgänge für das Hinzufügen und Entfernen. Diese vermeiden Sperren, wo immer dies möglich ist, und setzen differenzierte Sperren ein, wenn Sperren erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="f438d-106">The collection classes in the <xref:System.Collections.Concurrent?displayProperty=nameWithType> namespace provide thread-safe add and remove operations that avoid locks wherever possible and use fine-grained locking where locks are necessary.</span></span> <span data-ttu-id="f438d-107">Im Gegensatz zu Auflistungen, die in den .NET Framework-Versionen 1.0 und 2.0 eingeführt wurden, benötigt die parallele Auflistungsklasse keinen Benutzercode, um beim Zugriff auf Elemente Sperren zu akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="f438d-107">Unlike collections that were introduced in the .NET Framework versions 1.0 and 2.0, a concurrent collection class does not require user code to take any locks when it accesses items.</span></span> <span data-ttu-id="f438d-108">Die parallelen Auflistungsklassen können die Leistung gegenüber Typen wie <xref:System.Collections.ArrayList?displayProperty=nameWithType> und <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> (mit benutzerimplementierter Sperre) in Szenarien, in denen mehrere Threads Elemente aus einer Auflistung hinzufügen und entfernen, erheblich verbessern.</span><span class="sxs-lookup"><span data-stu-id="f438d-108">The concurrent collection classes can significantly improve performance over types such as <xref:System.Collections.ArrayList?displayProperty=nameWithType> and <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> (with user-implemented locking) in scenarios where multiple threads add and remove items from a collection.</span></span>  
  
 <span data-ttu-id="f438d-109">In der folgenden Tabelle sind die neuen parallelen Auflistungsklassen aufgeführt:</span><span class="sxs-lookup"><span data-stu-id="f438d-109">The following table lists the new concurrent collection classes:</span></span>  
  
|<span data-ttu-id="f438d-110">Geben Sie Folgendes ein:</span><span class="sxs-lookup"><span data-stu-id="f438d-110">Type</span></span>|<span data-ttu-id="f438d-111">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="f438d-111">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Collections.Concurrent.BlockingCollection%601?displayProperty=nameWithType>|<span data-ttu-id="f438d-112">Stellt Sperr- und Begrenzungsfunktionen für threadsichere Auflistungen bereit, die <xref:System.Collections.Concurrent.IProducerConsumerCollection%601?displayProperty=nameWithType> implementieren.</span><span class="sxs-lookup"><span data-stu-id="f438d-112">Provides blocking and bounding capabilities for thread-safe collections that implement <xref:System.Collections.Concurrent.IProducerConsumerCollection%601?displayProperty=nameWithType>.</span></span> <span data-ttu-id="f438d-113">Producerthreads werden blockiert, wenn keine Zeitfenster verfügbar sind oder wenn die Auflistung voll ist.</span><span class="sxs-lookup"><span data-stu-id="f438d-113">Producer threads block if no slots are available or if the collection is full.</span></span> <span data-ttu-id="f438d-114">Consumerthreads werden blockiert, wenn die Auflistung leer ist.</span><span class="sxs-lookup"><span data-stu-id="f438d-114">Consumer threads block if the collection is empty.</span></span> <span data-ttu-id="f438d-115">Dieser Typ unterstützt auch nicht blockierenden Zugriff durch Consumer und Producer.</span><span class="sxs-lookup"><span data-stu-id="f438d-115">This type also supports non-blocking access by consumers and producers.</span></span> <span data-ttu-id="f438d-116"><xref:System.Collections.Concurrent.BlockingCollection%601> kann als Basisklasse oder Sicherungsspeicher verwendet werden, um das Blockieren und Binden für jede Auflistungsklasse zu ermöglichen, die <xref:System.Collections.Generic.IEnumerable%601> unterstützt.</span><span class="sxs-lookup"><span data-stu-id="f438d-116"><xref:System.Collections.Concurrent.BlockingCollection%601> can be used as a base class or backing store to provide blocking and bounding for any collection class that supports <xref:System.Collections.Generic.IEnumerable%601>.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentBag%601?displayProperty=nameWithType>|<span data-ttu-id="f438d-117">Eine threadsichere Behälterimplementierung, die skalierbare Vorgänge zum Hinzufügen und Abrufen bietet.</span><span class="sxs-lookup"><span data-stu-id="f438d-117">A thread-safe bag implementation that provides scalable add and get operations.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentDictionary%602?displayProperty=nameWithType>|<span data-ttu-id="f438d-118">Ein paralleler und skalierbarer Wörterbuchtyp</span><span class="sxs-lookup"><span data-stu-id="f438d-118">A concurrent and scalable dictionary type.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentQueue%601?displayProperty=nameWithType>|<span data-ttu-id="f438d-119">Eine parallele und skalierbare FIFO-Warteschlange</span><span class="sxs-lookup"><span data-stu-id="f438d-119">A concurrent and scalable FIFO queue.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentStack%601?displayProperty=nameWithType>|<span data-ttu-id="f438d-120">Ein paralleler und skalierbarer LIFO-Stapel</span><span class="sxs-lookup"><span data-stu-id="f438d-120">A concurrent and scalable LIFO stack.</span></span>|  
  
 <span data-ttu-id="f438d-121">Weitere Informationen finden Sie unter [Threadsichere Auflistungen](../../../docs/standard/collections/thread-safe/index.md).</span><span class="sxs-lookup"><span data-stu-id="f438d-121">For more information, see [Thread-Safe Collections](../../../docs/standard/collections/thread-safe/index.md).</span></span>  
  
## <a name="synchronization-primitives"></a><span data-ttu-id="f438d-122">Synchronisierungsprimitiven</span><span class="sxs-lookup"><span data-stu-id="f438d-122">Synchronization Primitives</span></span>  
 <span data-ttu-id="f438d-123">Die neuen Synchronisierungsprimitiven im <xref:System.Threading?displayProperty=nameWithType>-Namespace ermöglichen eine differenzierte Parallelität und schnellere Leistung durch das Vermeiden ressourcenintensiver Sperrmechanismen in Legacy-Multithreadingcode.</span><span class="sxs-lookup"><span data-stu-id="f438d-123">The new synchronization primitives in the <xref:System.Threading?displayProperty=nameWithType> namespace enable fine-grained concurrency and faster performance by avoiding expensive locking mechanisms found in legacy multithreading code.</span></span> <span data-ttu-id="f438d-124">Für einige neuen Typen, wie z.B. <xref:System.Threading.Barrier?displayProperty=nameWithType> und <xref:System.Threading.CountdownEvent?displayProperty=nameWithType> gibt es in früheren Versionen von .NET Framework keine Entsprechung.</span><span class="sxs-lookup"><span data-stu-id="f438d-124">Some of the new types, such as <xref:System.Threading.Barrier?displayProperty=nameWithType> and <xref:System.Threading.CountdownEvent?displayProperty=nameWithType> have no counterparts in earlier releases of the .NET Framework.</span></span>  
  
 <span data-ttu-id="f438d-125">Die folgende Tabelle enthält die neuen Synchronisierungstypen:</span><span class="sxs-lookup"><span data-stu-id="f438d-125">The following table lists the new synchronization types:</span></span>  
  
|<span data-ttu-id="f438d-126">Geben Sie Folgendes ein:</span><span class="sxs-lookup"><span data-stu-id="f438d-126">Type</span></span>|<span data-ttu-id="f438d-127">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="f438d-127">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Threading.Barrier?displayProperty=nameWithType>|<span data-ttu-id="f438d-128">Ermöglicht mehreren Threads, parallel an einem Algorithmus zu arbeiten, indem ein Punkt bereitgestellt wird, an dem jeder Task seine Ankunft signalisieren und dann blockieren kann, bis einige oder alle Tasks angekommen sind.</span><span class="sxs-lookup"><span data-stu-id="f438d-128">Enables multiple threads to work on an algorithm in parallel by providing a point at which each task can signal its arrival and then block until some or all tasks have arrived.</span></span> <span data-ttu-id="f438d-129">Weitere Informationen finden Sie unter [Barrier](../../../docs/standard/threading/barrier.md).</span><span class="sxs-lookup"><span data-stu-id="f438d-129">For more information, see [Barrier](../../../docs/standard/threading/barrier.md).</span></span>|  
|<xref:System.Threading.CountdownEvent?displayProperty=nameWithType>|<span data-ttu-id="f438d-130">Vereinfacht Fork- und Join-Szenarien durch einen einfachen Rendezvousmechanismus.</span><span class="sxs-lookup"><span data-stu-id="f438d-130">Simplifies fork and join scenarios by providing an easy rendezvous mechanism.</span></span> <span data-ttu-id="f438d-131">Weitere Informationen finden Sie unter [CountdownEvent](../../../docs/standard/threading/countdownevent.md).</span><span class="sxs-lookup"><span data-stu-id="f438d-131">For more information, see [CountdownEvent](../../../docs/standard/threading/countdownevent.md).</span></span>|  
|<xref:System.Threading.ManualResetEventSlim?displayProperty=nameWithType>|<span data-ttu-id="f438d-132">Eine Synchronisierungsprimitive, ähnlich wie <xref:System.Threading.ManualResetEvent?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="f438d-132">A synchronization primitive similar to <xref:System.Threading.ManualResetEvent?displayProperty=nameWithType>.</span></span> <span data-ttu-id="f438d-133"><xref:System.Threading.ManualResetEventSlim> ist einfacher, kann aber nur für prozessinterne Kommunikation verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f438d-133"><xref:System.Threading.ManualResetEventSlim> is lighter-weight but can only be used for intra-process communication.</span></span>|  
|<xref:System.Threading.SemaphoreSlim?displayProperty=nameWithType>|<span data-ttu-id="f438d-134">Eine Synchronisierungsprimitive, die die Anzahl von Threads beschränkt, die parallel auf eine Ressource oder einen Ressourcenpool zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="f438d-134">A synchronization primitive that limits the number of threads that can concurrently access a resource or a pool of resources.</span></span> <span data-ttu-id="f438d-135">Weitere Informationen finden Sie unter [Semaphore und SemaphoreSlim](../../../docs/standard/threading/semaphore-and-semaphoreslim.md).</span><span class="sxs-lookup"><span data-stu-id="f438d-135">For more information, see [Semaphore and SemaphoreSlim](../../../docs/standard/threading/semaphore-and-semaphoreslim.md).</span></span>|  
|<xref:System.Threading.SpinLock?displayProperty=nameWithType>|<span data-ttu-id="f438d-136">Eine gegenseitige Ausschlusssperrprimitive, durch die der Thread, der die Sperre zu erlangen versucht, für eine gewisse Zeit in einer Schleife warten (oder *rotieren*) muss, bevor er sein Quantum liefert.</span><span class="sxs-lookup"><span data-stu-id="f438d-136">A mutual exclusion lock primitive that causes the thread that is trying to acquire the lock to wait in a loop, or *spin*, for a period of time before yielding its quantum.</span></span> <span data-ttu-id="f438d-137">In Szenarien, in denen die Wartezeit für die Sperre nur kurz ist, bietet <xref:System.Threading.SpinLock> eine bessere Leistung als andere Arten von Sperren.</span><span class="sxs-lookup"><span data-stu-id="f438d-137">In scenarios where the wait for the lock is expected to be short, <xref:System.Threading.SpinLock> offers better performance than other forms of locking.</span></span> <span data-ttu-id="f438d-138">Weitere Informationen finden Sie unter [SpinLock](../../../docs/standard/threading/spinlock.md).</span><span class="sxs-lookup"><span data-stu-id="f438d-138">For more information, see [SpinLock](../../../docs/standard/threading/spinlock.md).</span></span>|  
|<xref:System.Threading.SpinWait?displayProperty=nameWithType>|<span data-ttu-id="f438d-139">Ein kleiner, einfacher Typ, der für eine bestimmte Zeit rotiert und schließlich den Thread in einen Wartezustand versetzt, wenn die Schleifenzahl überschritten wird.</span><span class="sxs-lookup"><span data-stu-id="f438d-139">A small, lightweight type that will spin for a specified time and eventually put the thread into a wait state if the spin count is exceeded.</span></span>  <span data-ttu-id="f438d-140">Weitere Informationen finden Sie unter [SpinWait](../../../docs/standard/threading/spinwait.md).</span><span class="sxs-lookup"><span data-stu-id="f438d-140">For more information, see [SpinWait](../../../docs/standard/threading/spinwait.md).</span></span>|  
  
 <span data-ttu-id="f438d-141">Weitere Informationen finden Sie unter:</span><span class="sxs-lookup"><span data-stu-id="f438d-141">For more information, see:</span></span>  
  
- [<span data-ttu-id="f438d-142">Gewusst wie: Synchronisierung auf niedriger Ebene mit SpinLock</span><span class="sxs-lookup"><span data-stu-id="f438d-142">How to: Use SpinLock for Low-Level Synchronization</span></span>](../../../docs/standard/threading/how-to-use-spinlock-for-low-level-synchronization.md)  
  
- <span data-ttu-id="f438d-143">[Gewusst wie: Synchronisieren gleichzeitiger Vorgänge mit einer Barriere](../../../docs/standard/threading/how-to-synchronize-concurrent-operations-with-a-barrier.md)</span><span class="sxs-lookup"><span data-stu-id="f438d-143">[How to: Synchronize Concurrent Operations with a Barrier](../../../docs/standard/threading/how-to-synchronize-concurrent-operations-with-a-barrier.md).</span></span>  
  
## <a name="lazy-initialization-classes"></a><span data-ttu-id="f438d-144">Klassen mit verzögerter Initialisierung</span><span class="sxs-lookup"><span data-stu-id="f438d-144">Lazy Initialization Classes</span></span>  
 <span data-ttu-id="f438d-145">Bei einer verzögerten Initialisierung wird der Speicher für ein Objekt nicht zugewiesen, bis dieser benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="f438d-145">With lazy initialization, the memory for an object is not allocated until it is needed.</span></span> <span data-ttu-id="f438d-146">Eine verzögerte Initialisierung kann zur Verbesserung der Leistung beitragen, indem Objektzuweisungen über die Lebensdauer eines Programms hinweg verteilt werden.</span><span class="sxs-lookup"><span data-stu-id="f438d-146">Lazy initialization can improve performance by spreading object allocations evenly across the lifetime of a program.</span></span> <span data-ttu-id="f438d-147">Sie können die verzögerte Initialisierung für jeden benutzerdefinierten Typ verwenden, indem Sie damit den Typ <xref:System.Lazy%601> umschließen.</span><span class="sxs-lookup"><span data-stu-id="f438d-147">You can enable lazy initialization for any custom type by wrapping the type <xref:System.Lazy%601>.</span></span>  
  
 <span data-ttu-id="f438d-148">Die folgende Tabelle enthält eine Auflistung der Typen für eine verzögerte Initialisierung:</span><span class="sxs-lookup"><span data-stu-id="f438d-148">The following table lists the lazy initialization types:</span></span>  
  
|<span data-ttu-id="f438d-149">Geben Sie Folgendes ein:</span><span class="sxs-lookup"><span data-stu-id="f438d-149">Type</span></span>|<span data-ttu-id="f438d-150">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="f438d-150">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Lazy%601?displayProperty=nameWithType>|<span data-ttu-id="f438d-151">Stellt einfache, threadsichere verzögerte Initialisierung bereit.</span><span class="sxs-lookup"><span data-stu-id="f438d-151">Provides lightweight, thread-safe lazy-initialization.</span></span>|  
|<xref:System.Threading.ThreadLocal%601?displayProperty=nameWithType>|<span data-ttu-id="f438d-152">Stellt einen Wert durch eine verzögerte Initialisierung auf Threadbasis bereit, wobei jeder Thread die Initialisierungsfunktion verzögert aufruft.</span><span class="sxs-lookup"><span data-stu-id="f438d-152">Provides a lazily-initialized value on a per-thread basis, with each thread lazily-invoking the initialization function.</span></span>|  
|<xref:System.Threading.LazyInitializer?displayProperty=nameWithType>|<span data-ttu-id="f438d-153">Stellt statische Methoden bereit, durch die das Zuweisen einer dedizierten Instanz für die verzögerte Initialisierung nicht mehr erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="f438d-153">Provides static methods that avoid the need to allocate a dedicated, lazy-initialization instance.</span></span> <span data-ttu-id="f438d-154">Stattdessen werden Verweise eingesetzt, um sicherzustellen, dass Ziele initialisiert werden, sobald darauf zugegriffen wird.</span><span class="sxs-lookup"><span data-stu-id="f438d-154">Instead, they use references to ensure targets have been initialized as they are accessed.</span></span>|  
  
 <span data-ttu-id="f438d-155">Weitere Informationen finden Sie unter [Verzögerte Initialisierung](../../../docs/framework/performance/lazy-initialization.md).</span><span class="sxs-lookup"><span data-stu-id="f438d-155">For more information, see [Lazy Initialization](../../../docs/framework/performance/lazy-initialization.md).</span></span>  
  
## <a name="aggregate-exceptions"></a><span data-ttu-id="f438d-156">Aggregieren von Ausnahmen</span><span class="sxs-lookup"><span data-stu-id="f438d-156">Aggregate Exceptions</span></span>  
 <span data-ttu-id="f438d-157">Die <xref:System.AggregateException?displayProperty=nameWithType>-Typ kann verwendet werden, um mehrere Ausnahmen zu erfassen, die in separaten Threads parallel ausgelöst und an den Verbindungsthread als eine einzelne Ausnahme zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="f438d-157">The <xref:System.AggregateException?displayProperty=nameWithType> type can be used to capture multiple exceptions that are thrown concurrently on separate threads, and return them to the joining thread as a single exception.</span></span> <span data-ttu-id="f438d-158">Die Typen <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> und <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> sowie PLINQ verwenden hierzu sehr häufig <xref:System.AggregateException>.</span><span class="sxs-lookup"><span data-stu-id="f438d-158">The <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> types and PLINQ use <xref:System.AggregateException> extensively for this purpose.</span></span> <span data-ttu-id="f438d-159">Weitere Informationen finden Sie unter [Ausnahmebehandlung](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md) und unter [Vorgehensweise: Behandeln von Ausnahmen in einer PLINQ-Abfrage](../../../docs/standard/parallel-programming/how-to-handle-exceptions-in-a-plinq-query.md).</span><span class="sxs-lookup"><span data-stu-id="f438d-159">For more information, see [Exception Handling](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md) and [How to: Handle Exceptions in a PLINQ Query](../../../docs/standard/parallel-programming/how-to-handle-exceptions-in-a-plinq-query.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f438d-160">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="f438d-160">See also</span></span>

- <xref:System.Collections.Concurrent?displayProperty=nameWithType>
- <xref:System.Threading?displayProperty=nameWithType>
- [<span data-ttu-id="f438d-161">Parallele Programmierung</span><span class="sxs-lookup"><span data-stu-id="f438d-161">Parallel Programming</span></span>](../../../docs/standard/parallel-programming/index.md)
