---
title: Latenzmodi
ms.date: 03/30/2017
helpviewer_keywords:
- garbage collection, intrusiveness
- garbage collection, latency modes
ms.assetid: 96278bb7-6eab-4612-8594-ceebfc887d81
ms.openlocfilehash: 2e7b30a50e2513c567abf2116ab5495e717a8e22
ms.sourcegitcommit: 965a5af7918acb0a3fd3baf342e15d511ef75188
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/18/2020
ms.locfileid: "94831194"
---
# <a name="latency-modes"></a><span data-ttu-id="93e7b-102">Latenzmodi</span><span class="sxs-lookup"><span data-stu-id="93e7b-102">Latency modes</span></span>

<span data-ttu-id="93e7b-103">Zum Freigeben von Objekten muss der Garbage Collector (GC) alle ausgeführten Threads einer Anwendung beenden.</span><span class="sxs-lookup"><span data-stu-id="93e7b-103">To reclaim objects, the garbage collector (GC) must stop all the executing threads in an application.</span></span> <span data-ttu-id="93e7b-104">Der Zeitraum, in dem der Garbage Collector aktiv ist, wird als dessen *Latenz* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="93e7b-104">The period of time during which the garbage collector is active is referred to as its *latency*.</span></span>

<span data-ttu-id="93e7b-105">In einigen Situationen, z. B. wenn eine Anwendung Daten abruft oder Inhalte anzeigt, kann eine vollständige Garbage Collection zu einem kritischen Zeitpunkt erfolgen und die Leistung beeinträchtigen.</span><span class="sxs-lookup"><span data-stu-id="93e7b-105">In some situations, such as when an application retrieves data or displays content, a full garbage collection can occur at a critical time and impede performance.</span></span> <span data-ttu-id="93e7b-106">Sie können das Ausmaß der Garbage Collection anpassen, indem Sie die <xref:System.Runtime.GCSettings.LatencyMode%2A?displayProperty=nameWithType>-Eigenschaft auf einen der <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType>-Werte festlegen.</span><span class="sxs-lookup"><span data-stu-id="93e7b-106">You can adjust the intrusiveness of the garbage collector by setting the <xref:System.Runtime.GCSettings.LatencyMode%2A?displayProperty=nameWithType> property to one of the <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> values.</span></span>

## <a name="low-latency-settings"></a><span data-ttu-id="93e7b-107">Einstellungen mit geringer Latenz</span><span class="sxs-lookup"><span data-stu-id="93e7b-107">Low latency settings</span></span>

<span data-ttu-id="93e7b-108">Die Verwendung einer Einstellung mit "geringer" Latenz bedeutet, dass der Garbage Collector weniger in Ihre Anwendung eindringt.</span><span class="sxs-lookup"><span data-stu-id="93e7b-108">Using a "low" latency setting means the garbage collector intrudes less in your application.</span></span> <span data-ttu-id="93e7b-109">Die Garbage Collection ist bei der Freigabe von Arbeitsspeicher eher konservativ.</span><span class="sxs-lookup"><span data-stu-id="93e7b-109">Garbage collection is more conservative about reclaiming memory.</span></span>

<span data-ttu-id="93e7b-110">Die <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType>-Enumeration bietet zwei Einstellungen mit geringer Latenz:</span><span class="sxs-lookup"><span data-stu-id="93e7b-110">The <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> enumeration provides two low latency settings:</span></span>

- <span data-ttu-id="93e7b-111">[GCLatencyMode.LowLatency](xref:System.Runtime.GCLatencyMode.LowLatency) unterdrückt Garbage Collections der 2. Generation und führt nur Garbage Collctions der Generationen 0 und 1 durch.</span><span class="sxs-lookup"><span data-stu-id="93e7b-111">[GCLatencyMode.LowLatency](xref:System.Runtime.GCLatencyMode.LowLatency) suppresses generation 2 collections and performs only generation 0 and 1 collections.</span></span> <span data-ttu-id="93e7b-112">Diese Einstellung kann nur für kurze Zeiträume verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="93e7b-112">It can be used only for short periods of time.</span></span> <span data-ttu-id="93e7b-113">Über längere Zeiträume (und wenn auf dem System nicht genügend Arbeitsspeicher vorhanden ist) löst der Garbage Collector eine Auflistung aus, die die Anwendung kurz anhalten und einen zeitkritischen Vorgang unterbrechen kann.</span><span class="sxs-lookup"><span data-stu-id="93e7b-113">Over longer periods, if the system is under memory pressure, the garbage collector will trigger a collection, which can briefly pause the application and disrupt a time-critical operation.</span></span> <span data-ttu-id="93e7b-114">Diese Einstellung ist nur für die Garbage Collection auf Arbeitsstationen verfügbar.</span><span class="sxs-lookup"><span data-stu-id="93e7b-114">This setting is available only for workstation garbage collection.</span></span>

- <span data-ttu-id="93e7b-115">[GCLatencyMode.SustainedLowLatency](xref:System.Runtime.GCLatencyMode.SustainedLowLatency) unterdrückt Garbage Collections der 2. Generation im Vordergrund und führt nur Garbage Collections der Generationen 0 und 1 sowie Collections der Generation 2 im Hintergrund aus.</span><span class="sxs-lookup"><span data-stu-id="93e7b-115">[GCLatencyMode.SustainedLowLatency](xref:System.Runtime.GCLatencyMode.SustainedLowLatency) suppresses foreground generation 2 collections and performs only generation 0, 1, and background generation 2 collections.</span></span> <span data-ttu-id="93e7b-116">Diese Einstellung kann für längere Zeiträume verwendet werden und ist für die Garbage Collection für die Arbeitsstation und für die Garbage Collection auf dem Server verfügbar.</span><span class="sxs-lookup"><span data-stu-id="93e7b-116">It can be used for longer periods of time, and is available for both workstation and server garbage collection.</span></span> <span data-ttu-id="93e7b-117">Diese Einstellung kann nicht verwendet werden, wenn die Garbage Collection im Hintergrund deaktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="93e7b-117">This setting cannot be used if background garbage collection is disabled.</span></span>

<span data-ttu-id="93e7b-118">In Zeiten mit geringer Latenz werden Garbage Collections der Generation 2 unterdrückt, außer wenn Folgendes geschieht:</span><span class="sxs-lookup"><span data-stu-id="93e7b-118">During low latency periods, generation 2 collections are suppressed unless the following occurs:</span></span>

- <span data-ttu-id="93e7b-119">Das System erhält vom Betriebssystem eine Benachrichtigung über unzureichenden Arbeitsspeicher.</span><span class="sxs-lookup"><span data-stu-id="93e7b-119">The system receives a low memory notification from the operating system.</span></span>

- <span data-ttu-id="93e7b-120">Der Anwendungscode initiiert eine Garbage Collection, indem die <xref:System.GC.Collect%2A?displayProperty=nameWithType>-Methode aufgerufen und für den `generation`-Parameter der Wert "2" angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="93e7b-120">Application code induces a collection by calling the <xref:System.GC.Collect%2A?displayProperty=nameWithType> method and specifying 2 for the `generation` parameter.</span></span>

## <a name="scenarios"></a><span data-ttu-id="93e7b-121">Szenarien</span><span class="sxs-lookup"><span data-stu-id="93e7b-121">Scenarios</span></span>

<span data-ttu-id="93e7b-122">In der folgenden Tabelle werden die Anwendungsszenarien für die Verwendung der <xref:System.Runtime.GCLatencyMode>-Werte aufgeführt:</span><span class="sxs-lookup"><span data-stu-id="93e7b-122">The following table lists the application scenarios for using the <xref:System.Runtime.GCLatencyMode> values:</span></span>

|<span data-ttu-id="93e7b-123">Latenzmodus</span><span class="sxs-lookup"><span data-stu-id="93e7b-123">Latency mode</span></span>|<span data-ttu-id="93e7b-124">Anwendungsszenarien</span><span class="sxs-lookup"><span data-stu-id="93e7b-124">Application scenarios</span></span>|
|------------------|---------------------------|
|<xref:System.Runtime.GCLatencyMode.Batch>|<span data-ttu-id="93e7b-125">Für Anwendungen ohne Benutzeroberfläche (UI) oder serverseitige Vorgänge.</span><span class="sxs-lookup"><span data-stu-id="93e7b-125">For applications that have no user interface (UI) or server-side operations.</span></span><br /><br /><span data-ttu-id="93e7b-126">Wenn Garbage Collection im Hintergrund deaktiviert ist, ist dies der Standardmodus für die Garbage Collection auf Arbeitsstationen und Servern.</span><span class="sxs-lookup"><span data-stu-id="93e7b-126">When background garbage collection is disabled, this is the default mode for workstation and server garbage collection.</span></span> <span data-ttu-id="93e7b-127">Der <xref:System.Runtime.GCLatencyMode.Batch>-Modus setzt außerdem die [gcConcurrent](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md)-Einstellung außer Kraft, d.h., er verhindert parallele oder im Hintergrund ausgeführte Garbage Collection.</span><span class="sxs-lookup"><span data-stu-id="93e7b-127"><xref:System.Runtime.GCLatencyMode.Batch> mode also overrides the [gcConcurrent](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) setting, that is, it prevents background or concurrent collections.</span></span>|
|<xref:System.Runtime.GCLatencyMode.Interactive>|<span data-ttu-id="93e7b-128">Für die meisten Anwendungen, die über eine Benutzeroberfläche verfügen.</span><span class="sxs-lookup"><span data-stu-id="93e7b-128">For most applications that have a UI.</span></span><br /><br /><span data-ttu-id="93e7b-129">Dies ist der Standardmodus für die Garbage Collection auf Arbeitsstationen und Servern.</span><span class="sxs-lookup"><span data-stu-id="93e7b-129">This is the default mode for workstation and server garbage collection.</span></span> <span data-ttu-id="93e7b-130">Wenn jedoch eine App gehostet ist, haben die Einstellungen des Hostprozesses für die Garbage Collection Vorrang.</span><span class="sxs-lookup"><span data-stu-id="93e7b-130">However, if an app is hosted, the garbage collector settings of the hosting process take precedence.</span></span>|
|<xref:System.Runtime.GCLatencyMode.LowLatency>|<span data-ttu-id="93e7b-131">Für Anwendungen mit kurzen, zeitkritischen Vorgängen, bei denen Unterbrechungen durch den Garbage Collector störend sein könnten.</span><span class="sxs-lookup"><span data-stu-id="93e7b-131">For applications that have short-term, time-sensitive operations during which interruptions from the garbage collector could be disruptive.</span></span> <span data-ttu-id="93e7b-132">Hierzu gehören beispielsweise Anwendungen, die Animationsrendering oder Datenerfassungsfunktionen ausführen.</span><span class="sxs-lookup"><span data-stu-id="93e7b-132">For example, applications that render animations or data acquisition functions.</span></span>|
|<xref:System.Runtime.GCLatencyMode.SustainedLowLatency>|<span data-ttu-id="93e7b-133">Für Anwendungen mit zeitkritischen Vorgängen über einen möglicherweise längeren Zeitraum, bei denen Unterbrechungen durch den Garbage Collector störend sein könnten.</span><span class="sxs-lookup"><span data-stu-id="93e7b-133">For applications that have time-sensitive operations for a contained but potentially longer duration of time during which interruptions from the garbage collector could be disruptive.</span></span> <span data-ttu-id="93e7b-134">Hierzu gehören beispielsweise Anwendungen, die schnelle Antwortzeiten bei Marktdatenänderungen während der Geschäftszeit erfordern.</span><span class="sxs-lookup"><span data-stu-id="93e7b-134">For example, applications that need quick response times as market data changes during trading hours.</span></span><br /><br /><span data-ttu-id="93e7b-135">Dieser Modus führt im Vergleich zu anderen Modi zu einem größeren verwalteten Heap.</span><span class="sxs-lookup"><span data-stu-id="93e7b-135">This mode results in a larger managed heap size than other modes.</span></span> <span data-ttu-id="93e7b-136">Da der verwaltete Heap nicht komprimiert wird, ist eine stärkere Fragmentierung möglich.</span><span class="sxs-lookup"><span data-stu-id="93e7b-136">Because it does not compact the managed heap, higher fragmentation is possible.</span></span> <span data-ttu-id="93e7b-137">Stellen Sie sicher, dass genügend Arbeitsspeicher verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="93e7b-137">Ensure that sufficient memory is available.</span></span>|

## <a name="guidelines-for-using-low-latency"></a><span data-ttu-id="93e7b-138">Richtlinien für die Verwendung von geringer Latenz</span><span class="sxs-lookup"><span data-stu-id="93e7b-138">Guidelines for using low latency</span></span>

<span data-ttu-id="93e7b-139">Beachten Sie beim Verwenden des [GCLatencyMode.LowLatency](xref:System.Runtime.GCLatencyMode.LowLatency)-Modus die folgenden Richtlinien:</span><span class="sxs-lookup"><span data-stu-id="93e7b-139">When you use [GCLatencyMode.LowLatency](xref:System.Runtime.GCLatencyMode.LowLatency) mode, consider the following guidelines:</span></span>

- <span data-ttu-id="93e7b-140">Halten Sie die Zeiten mit geringer Latenz möglichst kurz.</span><span class="sxs-lookup"><span data-stu-id="93e7b-140">Keep the period of time in low latency as short as possible.</span></span>

- <span data-ttu-id="93e7b-141">Vermeiden Sie es, in Zeiten mit geringer Latenz große Speichermengen zu belegen.</span><span class="sxs-lookup"><span data-stu-id="93e7b-141">Avoid allocating high amounts of memory during low latency periods.</span></span> <span data-ttu-id="93e7b-142">Benachrichtigungen über unzureichenden Arbeitsspeicher können ausgegeben werden, wenn die Garbage Collection weniger Objekte freigibt.</span><span class="sxs-lookup"><span data-stu-id="93e7b-142">Low memory notifications can occur because garbage collection reclaims fewer objects.</span></span>

- <span data-ttu-id="93e7b-143">Minimieren Sie im Modus für geringe Latenz die Anzahl neuer Zuordnungen, insbesondere Zuordnungen für den großen Objektheap und fixierte Objekte.</span><span class="sxs-lookup"><span data-stu-id="93e7b-143">While in the low latency mode, minimize the number of new allocations, in particular allocations onto the large object heap and pinned objects.</span></span>

- <span data-ttu-id="93e7b-144">Achten Sie auf potenziell zuordnende Threads.</span><span class="sxs-lookup"><span data-stu-id="93e7b-144">Be aware of threads that could be allocating.</span></span> <span data-ttu-id="93e7b-145">Weil die Einstellung der <xref:System.Runtime.GCSettings.LatencyMode%2A>-Eigenschaft prozessweit gültig ist, können in jedem zuordnenden Thread <xref:System.OutOfMemoryException>-Ausnahmen generiert werden.</span><span class="sxs-lookup"><span data-stu-id="93e7b-145">Because the <xref:System.Runtime.GCSettings.LatencyMode%2A> property setting is process-wide, <xref:System.OutOfMemoryException> exceptions can be generated on any thread that is allocating.</span></span>

- <span data-ttu-id="93e7b-146">Umschließen (wrappen) Sie den Code für geringe Latenz in eingeschränkten Ausführungsbereichen.</span><span class="sxs-lookup"><span data-stu-id="93e7b-146">Wrap the low latency code in constrained execution regions.</span></span> <span data-ttu-id="93e7b-147">Weitere Informationen finden Sie unter [Eingeschränkte Ausführungsbereiche](../../framework/performance/constrained-execution-regions.md).</span><span class="sxs-lookup"><span data-stu-id="93e7b-147">For more information, see [Constrained execution regions](../../framework/performance/constrained-execution-regions.md).</span></span>

- <span data-ttu-id="93e7b-148">Sie können Garbage Collections der Generation 2 in Zeiten mit geringer Latenz erzwingen, indem Sie die <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%29?displayProperty=nameWithType>-Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="93e7b-148">You can force generation 2 collections during a low latency period by calling the <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%29?displayProperty=nameWithType> method.</span></span>

## <a name="see-also"></a><span data-ttu-id="93e7b-149">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="93e7b-149">See also</span></span>

- <xref:System.GC?displayProperty=nameWithType>
- [<span data-ttu-id="93e7b-150">Induzierte Sammlungen</span><span class="sxs-lookup"><span data-stu-id="93e7b-150">Induced Collections</span></span>](induced.md)
- [<span data-ttu-id="93e7b-151">Garbage Collection</span><span class="sxs-lookup"><span data-stu-id="93e7b-151">Garbage Collection</span></span>](index.md)
