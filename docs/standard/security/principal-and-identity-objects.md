---
title: Principal- und Identitätsobjekte
description: Erfahren Sie mehr über Identitäts Objekte, die Benutzer in .net darstellen. Lesen Sie auch Informationen zu Prinzipal Objekten, die sowohl ein Identitäts Objekt & eine Rolle Kapseln.
ms.date: 07/15/2020
helpviewer_keywords:
- WindowsIdentity objects
- GenericIdentity objects
- GenericPrincipal objects
- identity objects, about identity objects
- security [.NET], identity objects
- principal objects, about principal objects
- security [.NET], principals
- WindowsPrincipal objects
ms.assetid: aa5930ad-f3d7-40aa-b6f6-c6edcd5c64f7
ms.openlocfilehash: cfda506fc29e9a86e97b3c99faf2d4155c894f03
ms.sourcegitcommit: 965a5af7918acb0a3fd3baf342e15d511ef75188
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/18/2020
ms.locfileid: "94824238"
---
# <a name="principal-and-identity-objects"></a><span data-ttu-id="a1779-104">Principal- und Identitätsobjekte</span><span class="sxs-lookup"><span data-stu-id="a1779-104">Principal and Identity Objects</span></span>

> [!NOTE]
> <span data-ttu-id="a1779-105">Dieser Artikel bezieht sich auf Windows.</span><span class="sxs-lookup"><span data-stu-id="a1779-105">This article applies to Windows.</span></span>
>
> <span data-ttu-id="a1779-106">Weitere Informationen zu ASP.net Core finden Sie unter [ASP.net Core Sicherheit](/aspnet/core/security/).</span><span class="sxs-lookup"><span data-stu-id="a1779-106">For information about ASP.NET Core, see [ASP.NET Core Security](/aspnet/core/security/).</span></span>

<span data-ttu-id="a1779-107">Verwalteter Code kann die Identität oder die Rolle eines Prinzipals durch ein- <xref:System.Security.Principal.IPrincipal> Objekt ermitteln, das einen Verweis auf ein <xref:System.Security.Principal.IIdentity> Objekt enthält.</span><span class="sxs-lookup"><span data-stu-id="a1779-107">Managed code can discover the identity or the role of a principal through a <xref:System.Security.Principal.IPrincipal> object, which contains a reference to an <xref:System.Security.Principal.IIdentity> object.</span></span> <span data-ttu-id="a1779-108">Es kann hilfreich sein, Identity- und Principal-Objekte (Identitäts- und Prinzipalobjekte) mit vertrauten Konzepten wie Benutzer- und Gruppenkonten zu vergleichen.</span><span class="sxs-lookup"><span data-stu-id="a1779-108">It might be helpful to compare identity and principal objects to familiar concepts like user and group accounts.</span></span> <span data-ttu-id="a1779-109">In den meisten Netzwerkumgebungen entsprechen Benutzerkonten Personen oder Programmen und Gruppenkonten bestimmten Kategorien von Benutzern sowie den Rechten, die diese haben.</span><span class="sxs-lookup"><span data-stu-id="a1779-109">In most network environments, user accounts represent people or programs, while group accounts represent certain categories of users and the rights they possess.</span></span> <span data-ttu-id="a1779-110">Ebenso stellen .net-Identitäts Objekte Benutzer dar, während Rollen Mitgliedschaften und Sicherheits Kontexte darstellen.</span><span class="sxs-lookup"><span data-stu-id="a1779-110">Similarly, .NET identity objects represent users, while roles represent memberships and security contexts.</span></span> <span data-ttu-id="a1779-111">In .net kapselt das Prinzipal Objekt sowohl ein Identitäts Objekt als auch eine Rolle.</span><span class="sxs-lookup"><span data-stu-id="a1779-111">In .NET, the principal object encapsulates both an identity object and a role.</span></span> <span data-ttu-id="a1779-112">.NET-Anwendungen gewähren dem Prinzipal Rechte auf der Grundlage der Identität oder, üblicherweise der Rollen Mitgliedschaft.</span><span class="sxs-lookup"><span data-stu-id="a1779-112">.NET applications grant rights to the principal based on its identity or, more commonly, its role membership.</span></span>  
  
## <a name="identity-objects"></a><span data-ttu-id="a1779-113">Identitätsobjekte</span><span class="sxs-lookup"><span data-stu-id="a1779-113">Identity Objects</span></span>

<span data-ttu-id="a1779-114">Ein Identitätsobjekt kapselt Informationen über den zu prüfenden Benutzer bzw. die zu prüfende Entität.</span><span class="sxs-lookup"><span data-stu-id="a1779-114">The identity object encapsulates information about the user or entity being validated.</span></span> <span data-ttu-id="a1779-115">Identitätsobjekte enthalten in ihrer einfachsten Form einen Namen und einen Authentifizierungstyp.</span><span class="sxs-lookup"><span data-stu-id="a1779-115">At their most basic level, identity objects contain a name and an authentication type.</span></span> <span data-ttu-id="a1779-116">Der Name kann ein Benutzername oder der Name eines Windows-Kontos sein, und der Authentifizierungstyp kann entweder ein unterstütztes Anmeldeprotokoll, z. B. Kerberos V5, oder ein benutzerdefinierter Wert sein.</span><span class="sxs-lookup"><span data-stu-id="a1779-116">The name can either be a user's name or the name of a Windows account, while the authentication type can be either a supported logon protocol, such as Kerberos V5, or a custom value.</span></span> <span data-ttu-id="a1779-117">.Net definiert ein <xref:System.Security.Principal.GenericIdentity> -Objekt, das für die meisten benutzerdefinierten Anmelde Szenarios verwendet werden kann, und ein spezialisiertere <xref:System.Security.Principal.WindowsIdentity> Objekt, das verwendet werden kann, wenn die Anwendung auf die Windows-Authentifizierung basieren soll.</span><span class="sxs-lookup"><span data-stu-id="a1779-117">.NET defines a <xref:System.Security.Principal.GenericIdentity> object that can be used for most custom logon scenarios and a more specialized <xref:System.Security.Principal.WindowsIdentity> object that can be used when you want your application to rely on Windows authentication.</span></span> <span data-ttu-id="a1779-118">Zusätzlich können Sie eine eigene Identitätsklasse definieren, die benutzerdefinierte Benutzerinformationen kapselt.</span><span class="sxs-lookup"><span data-stu-id="a1779-118">Additionally, you can define your own identity class that encapsulates custom user information.</span></span>  
  
<span data-ttu-id="a1779-119">Die <xref:System.Security.Principal.IIdentity> -Schnittstelle definiert Eigenschaften für den Zugriff auf einen Namen und einen Authentifizierungstyp, z. b. Kerberos V5 oder NTLM.</span><span class="sxs-lookup"><span data-stu-id="a1779-119">The <xref:System.Security.Principal.IIdentity> interface defines properties for accessing a name and an authentication type, such as Kerberos V5 or NTLM.</span></span> <span data-ttu-id="a1779-120">Alle **Identity**-Klassen implementieren die **IIdentity**-Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="a1779-120">All **Identity** classes implement the **IIdentity** interface.</span></span> <span data-ttu-id="a1779-121">Es ist keine Beziehung zwischen einem **Identity**-Objekt und dem Windows NT-Prozesstoken erforderlich, unter dem ein Thread aktuell ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="a1779-121">There is no required relationship between an **Identity** object and the Windows NT process token under which a thread is currently executing.</span></span> <span data-ttu-id="a1779-122">Wenn das **Identity**-Objekt aber ein **WindowsIdentity**-Objekt ist, wird davon ausgegangen, dass die Identität ein Windows NT-Sicherheitstoken darstellt.</span><span class="sxs-lookup"><span data-stu-id="a1779-122">However, if the **Identity** object is a **WindowsIdentity** object, the identity is assumed to represent a Windows NT security token.</span></span>  
  
## <a name="principal-objects"></a><span data-ttu-id="a1779-123">Prinzipalobjekte</span><span class="sxs-lookup"><span data-stu-id="a1779-123">Principal Objects</span></span>

<span data-ttu-id="a1779-124">Ein Prinzipalobjekt stellt den Sicherheitskontext dar, in dem der Code ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="a1779-124">The principal object represents the security context under which code is running.</span></span> <span data-ttu-id="a1779-125">Anwendungen, die rollenbasierte Sicherheit implementieren, gewähren Rechte anhand der Rolle, die einem Prinzipalobjekt zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="a1779-125">Applications that implement role-based security grant rights based on the role associated with a principal object.</span></span> <span data-ttu-id="a1779-126">Ähnlich wie Identitäts Objekte stellt .net ein <xref:System.Security.Principal.GenericPrincipal> -Objekt und ein- <xref:System.Security.Principal.WindowsPrincipal> Objekt bereit.</span><span class="sxs-lookup"><span data-stu-id="a1779-126">Similar to identity objects, .NET provides a <xref:System.Security.Principal.GenericPrincipal> object and a <xref:System.Security.Principal.WindowsPrincipal> object.</span></span> <span data-ttu-id="a1779-127">Sie können auch benutzerdefinierte Prinzipalklassen definieren.</span><span class="sxs-lookup"><span data-stu-id="a1779-127">You can also define your own custom principal classes.</span></span>  
  
<span data-ttu-id="a1779-128">Die- <xref:System.Security.Principal.IPrincipal> Schnittstelle definiert eine Eigenschaft für den Zugriff auf ein zugeordnetes **Identitäts** Objekt sowie eine Methode, um zu bestimmen, ob der vom **Prinzipal** Objekt identifizierte Benutzer ein Mitglied einer bestimmten Rolle ist.</span><span class="sxs-lookup"><span data-stu-id="a1779-128">The <xref:System.Security.Principal.IPrincipal> interface defines a property for accessing an associated **Identity** object as well as a method for determining whether the user identified by the **Principal** object is a member of a given role.</span></span> <span data-ttu-id="a1779-129">Alle **Principal**-Klassen implementieren die **IPrincipal**-Schnittstelle sowie alle zusätzlichen Eigenschaften und Methoden, die erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="a1779-129">All **Principal** classes implement the **IPrincipal** interface as well as any additional properties and methods that are necessary.</span></span> <span data-ttu-id="a1779-130">Die Common Language Runtime stellt z. B. die **WindowsPrincipal**-Klasse bereit, die zusätzliche Funktionen zum Zuordnen von Windows NT- oder Windows 2000-Gruppenmitgliedschaften zu Rollen implementiert.</span><span class="sxs-lookup"><span data-stu-id="a1779-130">For example, the common language runtime provides the **WindowsPrincipal** class, which implements additional functionality for mapping Windows NT or Windows 2000 group membership to roles.</span></span>  
  
<span data-ttu-id="a1779-131">Ein **Prinzipal** Objekt ist an ein Callcenter ( <xref:System.Runtime.Remoting.Messaging.CallContext> )-Objekt in einer Anwendungsdomäne ( <xref:System.AppDomain> ) gebunden.</span><span class="sxs-lookup"><span data-stu-id="a1779-131">A **Principal** object is bound to a call context (<xref:System.Runtime.Remoting.Messaging.CallContext>) object within an application domain (<xref:System.AppDomain>).</span></span> <span data-ttu-id="a1779-132">Mit jeder neuen **AppDomain** wird ein Standardaufrufkontext erstellt, sodass immer ein Aufrufkontext verfügbar ist, um das **Principal**-Objekt zu akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="a1779-132">A default call context is always created with each new **AppDomain**, so there is always a call context available to accept the **Principal** object.</span></span> <span data-ttu-id="a1779-133">Wenn ein neuer Thread erstellt wird, wird für diesen ebenfalls ein neues **CallContext**-Objekt erstellt.</span><span class="sxs-lookup"><span data-stu-id="a1779-133">When a new thread is created, a **CallContext** object is also created for the thread.</span></span> <span data-ttu-id="a1779-134">Der Verweis auf das **Principal**-Objekt wird automatisch aus dem erstellenden Thread in den **CallContext** des neuen Threads kopiert.</span><span class="sxs-lookup"><span data-stu-id="a1779-134">The **Principal** object reference is automatically copied from the creating thread to the new thread's **CallContext**.</span></span> <span data-ttu-id="a1779-135">Wenn die Runtime nicht bestimmen kann, welches **Principal**-Objekt zum Ersteller des Threads gehört, wird die Standardrichtlinie für die Erstellung von **Principal**- und **Identity**-Objekten angewendet.</span><span class="sxs-lookup"><span data-stu-id="a1779-135">If the runtime cannot determine which **Principal** object belongs to the creator of the thread, it follows the default policy for **Principal** and **Identity** object creation.</span></span>  
  
<span data-ttu-id="a1779-136">Eine konfigurierbare anwendungsdomänenspezifische Richtlinie definiert die Regeln, nach denen bestimmt wird, welcher Typ von **Principal**-Objekt einer neuen Anwendungsdomäne zuzuordnen ist.</span><span class="sxs-lookup"><span data-stu-id="a1779-136">A configurable application domain-specific policy defines the rules for deciding what type of **Principal** object to associate with a new application domain.</span></span> <span data-ttu-id="a1779-137">Sofern die Sicherheitsrichtlinie dies zulässt, kann die Runtime **Principal**-Objekte und **Identity**-Objekte erstellen, die das Betriebssystemtoken wiedergeben, das dem aktuellen Ausführungsthread zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="a1779-137">Where security policy permits, the runtime can create **Principal** and **Identity** objects that reflect the operating system token associated with the current thread of execution.</span></span> <span data-ttu-id="a1779-138">Standardmäßig verwendet die Runtime **Principal**-Objekte und **Identity**-Objekte, die nicht authentifizierte Benutzer darstellen.</span><span class="sxs-lookup"><span data-stu-id="a1779-138">By default, the runtime uses **Principal** and **Identity** objects that represent unauthenticated users.</span></span> <span data-ttu-id="a1779-139">Die Runtime erstellt diese **Principal**- und **Identity**-Standardobjekte erst dann, wenn im Code versucht wird, auf diese zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="a1779-139">The runtime does not create these default **Principal** and **Identity** objects until the code attempts to access them.</span></span>  
  
<span data-ttu-id="a1779-140">Vertrauenswürdiger Code, der eine Anwendungsdomäne erstellt, kann die Anwendungsdomänenrichtlinie festlegen, die das Erstellen der **Principal**- und **Identity**-Standardobjekte steuert.</span><span class="sxs-lookup"><span data-stu-id="a1779-140">Trusted code that creates an application domain can set the application domain policy that controls construction of the default **Principal** and **Identity** objects.</span></span> <span data-ttu-id="a1779-141">Diese anwendungsdomänenspezifische Richtlinie gilt für alle Ausführungsthreads in dieser Anwendungsdomäne.</span><span class="sxs-lookup"><span data-stu-id="a1779-141">This application domain-specific policy applies to all execution threads in that application domain.</span></span> <span data-ttu-id="a1779-142">Ein nicht verwalteter, vertrauenswürdiger Host ist von Natur aus in der Lage, diese Richtlinie festzulegen, aber verwalteter Code, der diese Richtlinie festlegt, muss zum <xref:System.Security.Permissions.SecurityPermission?displayProperty=nameWithType> Steuern der Domänen Richtlinie</span><span class="sxs-lookup"><span data-stu-id="a1779-142">An unmanaged, trusted host inherently has the ability to set this policy, but managed code that sets this policy must have the <xref:System.Security.Permissions.SecurityPermission?displayProperty=nameWithType> for controlling domain policy.</span></span>  
  
<span data-ttu-id="a1779-143">Wird ein **Principal**-Objekt zwischen Anwendungsdomänen, aber im selben Prozesses (und daher auf demselben Computer) übertragen, kopiert die Remoteinfrastruktur einen Verweis auf das **Principal**-Objekt, das dem Kontext des Aufrufers zugeordnet ist, in den Kontext des Aufgerufenen.</span><span class="sxs-lookup"><span data-stu-id="a1779-143">When transmitting a **Principal** object across application domains but within the same process (and therefore on the same computer), the remoting infrastructure copies a reference to the **Principal** object associated with the caller's context to the callee's context.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a1779-144">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="a1779-144">See also</span></span>

- [<span data-ttu-id="a1779-145">Vorgehensweise: Erstellen eines WindowsPrincipal-Objekts</span><span class="sxs-lookup"><span data-stu-id="a1779-145">How to: Create a WindowsPrincipal Object</span></span>](how-to-create-a-windowsprincipal-object.md)
- [<span data-ttu-id="a1779-146">Vorgehensweise: Erstellen von GenericPrincipal-Objekten und GenericIdentity-Objekten</span><span class="sxs-lookup"><span data-stu-id="a1779-146">How to: Create GenericPrincipal and GenericIdentity Objects</span></span>](how-to-create-genericprincipal-and-genericidentity-objects.md)
- [<span data-ttu-id="a1779-147">Ersetzen eines Principalobjekts</span><span class="sxs-lookup"><span data-stu-id="a1779-147">Replacing a Principal Object</span></span>](replacing-a-principal-object.md)
- [<span data-ttu-id="a1779-148">Wechseln und Zurücksetzen der Identität</span><span class="sxs-lookup"><span data-stu-id="a1779-148">Impersonating and Reverting</span></span>](impersonating-and-reverting.md)
- [<span data-ttu-id="a1779-149">Rollenbasierte Sicherheit</span><span class="sxs-lookup"><span data-stu-id="a1779-149">Role-Based Security</span></span>](role-based-security.md)
- [<span data-ttu-id="a1779-150">Schlüsselbegriffe der Sicherheit</span><span class="sxs-lookup"><span data-stu-id="a1779-150">Key Security Concepts</span></span>](key-security-concepts.md)
- [<span data-ttu-id="a1779-151">ASP.net Core Sicherheit</span><span class="sxs-lookup"><span data-stu-id="a1779-151">ASP.NET Core Security</span></span>](/aspnet/core/security/)
