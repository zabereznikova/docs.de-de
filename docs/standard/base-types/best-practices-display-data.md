---
title: Bewährte Methoden für das Anzeigen und Beibehalten formatierter Daten in .NET
description: Erfahren Sie, wie Sie numerische und Datumsdaten in .NET-Anwendungen effektiv anzeigen und beibehalten.
ms.date: 05/01/2019
dev_langs:
- csharp
- vb
ms.openlocfilehash: 1748363089a80538a19e91b1955fe9257de39a4e
ms.sourcegitcommit: 965a5af7918acb0a3fd3baf342e15d511ef75188
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/18/2020
ms.locfileid: "94825142"
---
# <a name="best-practices-for-displaying-and-persisting-formatted-data"></a><span data-ttu-id="38cea-103">Bewährte Methoden für das Anzeigen und Beibehalten formatierter Daten</span><span class="sxs-lookup"><span data-stu-id="38cea-103">Best practices for displaying and persisting formatted data</span></span>

<span data-ttu-id="38cea-104">In diesem Artikel wird außerdem untersucht, wie formatierte Daten, z. B. numerische Daten und Datums-/Uhrzeitdaten, für Anzeige und Speicherung behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="38cea-104">This article examines how formatted data, such as numeric data and date-and-time data, is handled for display and for storage.</span></span>

<span data-ttu-id="38cea-105">Verwenden Sie beim Entwickeln mit .NET eine kulturabhängige Formatierung, um Daten, die keine Zeichenfolge sind, z. B. Zahlen und Datumsangaben, auf einer Benutzeroberfläche anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="38cea-105">When you develop with .NET, use culture-sensitive formatting to display non-string data, such as numbers and dates, in a user interface.</span></span> <span data-ttu-id="38cea-106">Verwenden Sie Formatierung mit der [invarianten Kultur](xref:System.Globalization.CultureInfo.InvariantCulture), um für Daten, die keine Zeichenfolge sind, das Zeichenfolgenformat beizubehalten.</span><span class="sxs-lookup"><span data-stu-id="38cea-106">Use formatting with the [invariant culture](xref:System.Globalization.CultureInfo.InvariantCulture) to persist non-string data in string form.</span></span> <span data-ttu-id="38cea-107">Wählen Sie nicht die kulturabhängige Formatierung, um numerische oder Datums-/Uhrzeitdaten im Zeichenfolgenformat beizubehalten.</span><span class="sxs-lookup"><span data-stu-id="38cea-107">Do not use culture-sensitive formatting to persist numeric or date-and-time data in string form.</span></span>

## <a name="displaying-formatted-data"></a><span data-ttu-id="38cea-108">Anzeigen formatierter Daten</span><span class="sxs-lookup"><span data-stu-id="38cea-108">Displaying formatted data</span></span>

<span data-ttu-id="38cea-109">Wenn Sie Benutzern Daten anzeigen, die keine Zeichenfolge sind, z. B. Zahlen sowie Datumsangaben und Zeitangaben, formatieren Sie diese den Kultureinstellungen des Benutzers entsprechend.</span><span class="sxs-lookup"><span data-stu-id="38cea-109">When you display non-string data such as numbers and dates and times to users, format them by using the user's cultural settings.</span></span> <span data-ttu-id="38cea-110">In den folgenden Fällen wird bei Formatierungsvorgängen jeweils standardmäßig die aktuelle Threadkultur verwendet:</span><span class="sxs-lookup"><span data-stu-id="38cea-110">By default, the following all use the current thread culture in formatting operations:</span></span>

- <span data-ttu-id="38cea-111">Bei interpolierten Zeichenfolgen, die von den [C#](../../csharp/language-reference/tokens/interpolated.md)- und [Visual Basic](../../visual-basic/programming-guide/language-features/strings/interpolated-strings.md)-Compilern unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="38cea-111">Interpolated strings supported by the [C#](../../csharp/language-reference/tokens/interpolated.md) and [Visual Basic](../../visual-basic/programming-guide/language-features/strings/interpolated-strings.md) compilers.</span></span>
- <span data-ttu-id="38cea-112">Bei Zeichenfolgenverkettungen, bei denen [C#](../../csharp/language-reference/operators/addition-operator.md#string-concatenation)- oder [Visual Basic](../../visual-basic/programming-guide/language-features/operators-and-expressions/concatenation-operators.md)-Verkettungsoperatoren verwendet werden oder die Methode <xref:System.String.Concat%2A?displayProperty=nameWithType> direkt aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="38cea-112">String concatenation operations that use the [C#](../../csharp/language-reference/operators/addition-operator.md#string-concatenation) or [Visual Basic](../../visual-basic/programming-guide/language-features/operators-and-expressions/concatenation-operators.md) concatenation operators or that call the <xref:System.String.Concat%2A?displayProperty=nameWithType> method directly.</span></span>
- <span data-ttu-id="38cea-113">Die <xref:System.String.Format%2A?displayProperty=nameWithType> -Methode.</span><span class="sxs-lookup"><span data-stu-id="38cea-113">The <xref:System.String.Format%2A?displayProperty=nameWithType> method.</span></span>
- <span data-ttu-id="38cea-114">Bei den `ToString`-Methoden der numerischen Typen sowie der Datums- und Uhrzeittypen.</span><span class="sxs-lookup"><span data-stu-id="38cea-114">The `ToString` methods of the numeric types and the date and time types.</span></span>

<span data-ttu-id="38cea-115">Wenn Sie explizit angeben möchten, dass eine Zeichenfolge unter Verwendung der Konventionen einer bestimmten Kultur oder der [invarianten Kultur](xref:System.Globalization.CultureInfo.InvariantCulture) formatiert werden soll, haben Sie folgende Möglichkeiten:</span><span class="sxs-lookup"><span data-stu-id="38cea-115">To explicitly specify that a string should be formatted by using the conventions of a designated culture or the [invariant culture](xref:System.Globalization.CultureInfo.InvariantCulture), you can do the following:</span></span>

- <span data-ttu-id="38cea-116">Rufen Sie bei Verwendung der Methoden <xref:System.String.Format%2A?displayProperty=nameWithType> und `ToString` eine Überladung mit einem Parameter vom Typ `provider` (beispielsweise <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType> oder <xref:System.DateTime.ToString%28System.IFormatProvider%29?displayProperty=nameWithType>) auf, und übergeben Sie die Eigenschaft <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType>, eine Instanz vom Typ <xref:System.Globalization.CultureInfo>, die die gewünschte Kultur darstellt, oder die Eigenschaft <xref:System.Globalization.CultureInfo.InvariantCulture?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="38cea-116">When using the <xref:System.String.Format%2A?displayProperty=nameWithType> and `ToString` methods, call an overload that has a `provider` parameter, such as <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType> or <xref:System.DateTime.ToString%28System.IFormatProvider%29?displayProperty=nameWithType>, and pass it the <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> property, a <xref:System.Globalization.CultureInfo> instance that represents the desired culture, or the <xref:System.Globalization.CultureInfo.InvariantCulture?displayProperty=nameWithType> property.</span></span>

- <span data-ttu-id="38cea-117">Lassen Sie bei der Verkettung von Zeichenfolgen keine impliziten Konvertierungen durch den Compiler zu.</span><span class="sxs-lookup"><span data-stu-id="38cea-117">For string concatenation, do not allow the compiler to perform any implicit conversions.</span></span> <span data-ttu-id="38cea-118">Rufen Sie stattdessen eine Überladung vom Typ `ToString` mit einem Parameter vom Typ `provider` auf, um eine explizite Konvertierung durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="38cea-118">Instead, perform an explicit conversion by calling a `ToString` overload that has a `provider` parameter.</span></span> <span data-ttu-id="38cea-119">Der Compiler verwendet beispielsweise implizit die aktuelle Kultur, wenn ein Wert vom Typ <xref:System.Double> in folgendem Code in eine Zeichenfolge konvertiert wird:</span><span class="sxs-lookup"><span data-stu-id="38cea-119">For example, the compiler implicitly uses the current culture when converting a <xref:System.Double> value to a string in the following code:</span></span>

  [!code-csharp[Implicit String Conversion](./snippets/best-practices-strings/csharp/tostring/Program.cs#1)]
  [!code-vb[Implicit String Conversion](./snippets/best-practices-strings/vb/tostring/Program.vb#1)]

  <span data-ttu-id="38cea-120">Alternativ können Sie explizit die Kultur angeben, deren Formatierungskonventionen bei der Konvertierung verwendet werden sollen. Rufen Sie hierzu die Methode <xref:System.Double.ToString(System.IFormatProvider)?displayProperty=nameWithType> auf, wie im folgenden Code zu sehen:</span><span class="sxs-lookup"><span data-stu-id="38cea-120">Instead, you can explicitly specify the culture whose formatting conventions are used in the conversion by calling the <xref:System.Double.ToString(System.IFormatProvider)?displayProperty=nameWithType> method, as the following code does:</span></span>

  [!code-csharp[Explicit String Conversion](./snippets/best-practices-strings/csharp/tostring/Program.cs#2)]
  [!code-vb[Implicit String Conversion](./snippets/best-practices-strings/vb/tostring/Program.vb#2)]

- <span data-ttu-id="38cea-121">Weisen Sie für die Zeichenfolgeninterpolation eine interpolierte Zeichenfolge einer Instanz vom Typ <xref:System.FormattableString> (anstatt einer Instanz vom Typ <xref:System.String>) zu.</span><span class="sxs-lookup"><span data-stu-id="38cea-121">For string interpolation, rather than assigning an interpolated string to a <xref:System.String> instance, assign it to a <xref:System.FormattableString>.</span></span> <span data-ttu-id="38cea-122">Anschließend können Sie die Methode <xref:System.FormattableString.ToString?displayProperty=nameWithType> aufrufen, um eine Ergebniszeichenfolge zu erzeugen, die den Konventionen der aktuellen Kultur entspricht, oder die Methode <xref:System.FormattableString.ToString(System.IFormatProvider)?displayProperty=nameWithType>, um eine Ergebniszeichenfolge zu erzeugen, die den Konventionen einer angegebenen Kultur entspricht.</span><span class="sxs-lookup"><span data-stu-id="38cea-122">You can then call its <xref:System.FormattableString.ToString?displayProperty=nameWithType> method produce a result string that reflects the conventions of the current culture, or you can call the <xref:System.FormattableString.ToString(System.IFormatProvider)?displayProperty=nameWithType> method to produce a result string that reflects the conventions of a specified culture.</span></span> <span data-ttu-id="38cea-123">Sie können auch die formatierbare Zeichenfolge an die statische Methode <xref:System.FormattableString.Invariant%2A?displayProperty=nameWithType> übergeben, um eine Ergebniszeichenfolge zu erzeugen, die den Konventionen der invarianten Kultur entspricht.</span><span class="sxs-lookup"><span data-stu-id="38cea-123">You can also pass the formattable string to the static <xref:System.FormattableString.Invariant%2A?displayProperty=nameWithType> method to produce a result string that reflects the conventions of the invariant culture.</span></span> <span data-ttu-id="38cea-124">Dieser Ansatz wird anhand des folgenden Beispiels veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="38cea-124">The following example illustrates this approach.</span></span> <span data-ttu-id="38cea-125">(Bei der Ausgabe des Beispiels wird als aktuelle Kultur „en-US“ verwendet.)</span><span class="sxs-lookup"><span data-stu-id="38cea-125">(The output from the example reflects a current culture of en-US.)</span></span>

  [!code-csharp[String interpolation](./snippets/best-practices-strings/csharp/formattable/Program.cs)]
  [!code-vb[String interpolation](./snippets/best-practices-strings/vb/formattable/Program.vb)]

## <a name="persisting-formatted-data"></a><span data-ttu-id="38cea-126">Beibehalten formatierter Daten</span><span class="sxs-lookup"><span data-stu-id="38cea-126">Persisting formatted data</span></span>

<span data-ttu-id="38cea-127">Sie können Daten, die keine Zeichenfolge sind, entweder als Binärdaten oder als formatierte Daten beibehalten.</span><span class="sxs-lookup"><span data-stu-id="38cea-127">You can persist non-string data either as binary data or as formatted data.</span></span> <span data-ttu-id="38cea-128">Wenn Sie möchten, dass sie als formatierte Daten gespeichert werden, sollten Sie eine Überladung einer Formatierungsmethode aufrufen, die einen `provider` -Parameter einschließt, und dabei die <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> -Eigenschaft übergeben.</span><span class="sxs-lookup"><span data-stu-id="38cea-128">If you choose to save it as formatted data, you should call a formatting method overload that includes a `provider` parameter and pass it the <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="38cea-129">Die invariante Kultur stellt ein konsistentes Format für formatierte Daten bereit, das unabhängig von der Kultur und dem Computers ist.</span><span class="sxs-lookup"><span data-stu-id="38cea-129">The invariant culture provides a consistent format for formatted data that is independent of culture and machine.</span></span> <span data-ttu-id="38cea-130">Im Gegensatz dazu bringt das Beibehalten von Daten, die mit anderen Kulturen als der invarianten Kultur formatiert werden, einige Einschränkungen mit sich:</span><span class="sxs-lookup"><span data-stu-id="38cea-130">In contrast, persisting data that is formatted by using cultures other than the invariant culture has a number of limitations:</span></span>

- <span data-ttu-id="38cea-131">Die Daten sind wahrscheinlich unbrauchbar, wenn sie auf einem System mit einer andere Kultur abgerufen werden oder wenn der Benutzer des aktuellen Systems die aktuelle Kultur ändert und versucht, die Daten abzurufen.</span><span class="sxs-lookup"><span data-stu-id="38cea-131">The data is likely to be unusable if it is retrieved on a system that has a different culture, or if the user of the current system changes the current culture and tries to retrieve the data.</span></span>
- <span data-ttu-id="38cea-132">Die Eigenschaften einer Kultur auf einem bestimmten Computer können von den Standardwerten abweichen.</span><span class="sxs-lookup"><span data-stu-id="38cea-132">The properties of a culture on a specific computer can differ from standard values.</span></span> <span data-ttu-id="38cea-133">Ein Benutzer kann kulturabhängige Anzeigeeinstellungen jederzeit anpassen.</span><span class="sxs-lookup"><span data-stu-id="38cea-133">At any time, a user can customize culture-sensitive display settings.</span></span> <span data-ttu-id="38cea-134">Aufgrund dessen können formatierte Daten, die in einem System gespeichert sind, möglicherweise nicht mehr gelesen werden, wenn der Benutzer die Kultureinstellungen anpasst.</span><span class="sxs-lookup"><span data-stu-id="38cea-134">Because of this, formatted data that is saved on a system may not be readable after the user customizes cultural settings.</span></span> <span data-ttu-id="38cea-135">Die computerübergreifende Portabilität von formatierten Daten wird wahrscheinlich sogar noch eingeschränkter.</span><span class="sxs-lookup"><span data-stu-id="38cea-135">The portability of formatted data across computers is likely to be even more limited.</span></span>
- <span data-ttu-id="38cea-136">Internationale, regionale oder nationale Standards, die die Formatierung von Zahlen oder Datumsangaben und Uhrzeiten regeln, ändern sich mit der Zeit, und diese Änderungen werden in Windows-Betriebssystemupdates integriert.</span><span class="sxs-lookup"><span data-stu-id="38cea-136">International, regional, or national standards that govern the formatting of numbers or dates and times change over time, and these changes are incorporated into Windows operating system updates.</span></span> <span data-ttu-id="38cea-137">Wenn sich die Formatierungskonventionen ändern, können Daten, die anhand früherer Konventionen formatiert wurden, möglicherweise nicht mehr gelesen werden.</span><span class="sxs-lookup"><span data-stu-id="38cea-137">When formatting conventions change, data that was formatted by using the previous conventions may become unreadable.</span></span>

<span data-ttu-id="38cea-138">Das folgende Beispiel veranschaulicht die eingeschränkte Portabilität, die sich aus der Verwendung von kulturabhängiger Formatierung zum Beibehalten von Daten ergibt.</span><span class="sxs-lookup"><span data-stu-id="38cea-138">The following example illustrates the limited portability that results from using culture-sensitive formatting to persist data.</span></span> <span data-ttu-id="38cea-139">In dem Beispiel wird ein Array von Daten- und Uhrzeitwerten in einer Datei gespeichert.</span><span class="sxs-lookup"><span data-stu-id="38cea-139">The example saves an array of date and time values to a file.</span></span> <span data-ttu-id="38cea-140">Diese werden anhand der Konventionen der Kultur Englisch (USA) formatiert.</span><span class="sxs-lookup"><span data-stu-id="38cea-140">These are formatted by using the conventions of the English (United States) culture.</span></span> <span data-ttu-id="38cea-141">Nachdem die aktuelle Threadkultur der Anwendung in Französisch (Schweiz) geändert wird, versucht die Anwendung, die gespeicherten Werte mithilfe der Formatierungskonventionen der aktuellen Kultur zu lesen.</span><span class="sxs-lookup"><span data-stu-id="38cea-141">After the application changes the current thread culture to French (Switzerland), it tries to read the saved values by using the formatting conventions of the current culture.</span></span> <span data-ttu-id="38cea-142">Der Versuch, zwei der Datenelemente zu lesen, löst eine <xref:System.FormatException> -Ausnahme aus, und das Array von Datumsangaben enthält nun zwei falsche Elemente, die <xref:System.DateTime.MinValue>entsprechen.</span><span class="sxs-lookup"><span data-stu-id="38cea-142">The attempt to read two of the data items throws a <xref:System.FormatException> exception, and the array of dates now contains two incorrect elements that are equal to <xref:System.DateTime.MinValue>.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#21](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/persistence.cs#21)]
[!code-vb[Conceptual.Strings.BestPractices#21](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/persistence.vb#21)]

<span data-ttu-id="38cea-143">Wenn Sie jedoch die <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType>-Eigenschaft in den Aufrufen von <xref:System.DateTime.ToString%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType> und <xref:System.DateTime.Parse%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType> durch <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> ersetzen, werden wie in der folgenden Ausgabe gezeigt die beibehaltenen Datums- und Uhrzeitdaten erfolgreich wiederhergestellt:</span><span class="sxs-lookup"><span data-stu-id="38cea-143">However, if you replace the <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> property with <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> in the calls to <xref:System.DateTime.ToString%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType> and <xref:System.DateTime.Parse%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType>, the persisted date and time data is successfully restored, as the following output shows:</span></span>

```console
06.05.1758 21:26
05.05.1818 07:19
22.04.1870 23:54
08.09.1890 06:47
18.02.1905 15:12
```
