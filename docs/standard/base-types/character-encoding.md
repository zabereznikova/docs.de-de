---
title: Verwendung von Zeichencodierungsklassen in .NET
description: Lernen Sie die Verwendung von Zeichencodierungsklassen in .NET kennen.
ms.date: 12/22/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- encoding, understanding
- encoding, choosing
- encoding, fallback strategy
ms.assetid: bf6d9823-4c2d-48af-b280-919c5af66ae9
ms.openlocfilehash: c626e79e7bbcd71c90775df8ee8c4d6570c29125
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 06/02/2020
ms.locfileid: "84290577"
---
# <a name="how-to-use-character-encoding-classes-in-net"></a><span data-ttu-id="ede1e-103">Verwendung von Zeichencodierungsklassen in .NET</span><span class="sxs-lookup"><span data-stu-id="ede1e-103">How to use character encoding classes in .NET</span></span>

<span data-ttu-id="ede1e-104">In diesem Artikel wird erläutert, wie Sie die Klassen verwenden, die .NET für die Codierung und Decodierung von Text unter Verwendung verschiedener Codierungsschemas bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-104">This article explains how to use the classes that .NET provides for encoding and decoding text by using various encoding schemes.</span></span> <span data-ttu-id="ede1e-105">In den Anweisungen in diesem Artikel wird vorausgesetzt, dass Sie die [Einführung in die Zeichencodierung in .NET](character-encoding-introduction.md) gelesen haben.</span><span class="sxs-lookup"><span data-stu-id="ede1e-105">The instructions assume you have read [Introduction to character encoding in .NET](character-encoding-introduction.md).</span></span>

## <a name="encoders-and-decoders"></a><span data-ttu-id="ede1e-106">Encoder und Decoder</span><span class="sxs-lookup"><span data-stu-id="ede1e-106">Encoders and decoders</span></span>

<span data-ttu-id="ede1e-107">.NET stellt Codierungsklassen bereit, die Text mithilfe von Codierungssystemen codieren und decodieren.</span><span class="sxs-lookup"><span data-stu-id="ede1e-107">.NET provides encoding classes that encode and decode text by using various encoding systems.</span></span> <span data-ttu-id="ede1e-108">Beispielsweise beschreibt die Klasse <xref:System.Text.UTF8Encoding> die Regeln für die Codierung in und die Decodierung aus UTF-8.</span><span class="sxs-lookup"><span data-stu-id="ede1e-108">For example, the <xref:System.Text.UTF8Encoding> class describes the rules for encoding to, and decoding from, UTF-8.</span></span> <span data-ttu-id="ede1e-109">.NET verwendet die UTF-16-Codierung (repräsentiert durch die <xref:System.Text.UnicodeEncoding>-Klasse) für `string`-Instanzen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-109">.NET uses UTF-16 encoding (represented by the <xref:System.Text.UnicodeEncoding> class) for `string` instances.</span></span> <span data-ttu-id="ede1e-110">Encoder und Decoder können auch in anderen Codierungsschemas eingesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="ede1e-110">Encoders and decoders are available for other encoding schemes.</span></span>

<span data-ttu-id="ede1e-111">Die Codierung und Decodierung können auch eine Validierung beinhalten.</span><span class="sxs-lookup"><span data-stu-id="ede1e-111">Encoding and decoding can also include validation.</span></span> <span data-ttu-id="ede1e-112">Die <xref:System.Text.UnicodeEncoding>-Klasse prüft z. B. alle `char`-Instanzen im Ersatzzeichenbereich, um sicherzustellen, dass sie in gültigen Ersatzzeichenpaaren vorliegen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-112">For example, the <xref:System.Text.UnicodeEncoding> class checks all `char` instances in the surrogate range to make sure they're in valid surrogate pairs.</span></span> <span data-ttu-id="ede1e-113">Eine Fallbackstrategie legt fest, wie ein Encoder ungültige Zeichen behandelt oder wie ein Decoder ungültige Bytes behandelt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-113">A fallback strategy determines how an encoder handles invalid characters or how a decoder handles invalid bytes.</span></span>

> [!WARNING]
> <span data-ttu-id="ede1e-114">Die .NET-Codierungsklassen bieten eine Möglichkeit, Zeichendaten zu speichern und zu konvertieren.</span><span class="sxs-lookup"><span data-stu-id="ede1e-114">.NET encoding classes provide a way to store and convert character data.</span></span> <span data-ttu-id="ede1e-115">Sie sollten nicht verwendet werden, um Binärdaten im Zeichenfolgenformat zu speichern.</span><span class="sxs-lookup"><span data-stu-id="ede1e-115">They should not be used to store binary data in string form.</span></span> <span data-ttu-id="ede1e-116">Abhängig von der verwendeten Codierung kann das Konvertieren von Binärdaten in das Zeichenfolgenformat mithilfe der Codierungsklassen zu unerwartetem Verhalten und ungenauen oder beschädigten Daten führen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-116">Depending on the encoding used, converting binary data to string format with the encoding classes can introduce unexpected behavior and produce inaccurate or corrupted data.</span></span> <span data-ttu-id="ede1e-117">Um Binärdaten in ein Zeichenfolgenformat zu konvertieren, verwenden Sie die <xref:System.Convert.ToBase64String%2A?displayProperty=nameWithType> -Methode.</span><span class="sxs-lookup"><span data-stu-id="ede1e-117">To convert binary data to a string form, use the <xref:System.Convert.ToBase64String%2A?displayProperty=nameWithType> method.</span></span>

<span data-ttu-id="ede1e-118">Alle Zeichencodierungsklassen in .NET erben von der abstrakten <xref:System.Text.Encoding?displayProperty=nameWithType>-Klasse, die die Funktionen definiert, die für alle Zeichencodierungen gleich sind.</span><span class="sxs-lookup"><span data-stu-id="ede1e-118">All character encoding classes in .NET inherit from the <xref:System.Text.Encoding?displayProperty=nameWithType> class, which is an abstract class that defines the functionality common to all character encodings.</span></span> <span data-ttu-id="ede1e-119">Um auf die einzelnen in .NET implementierten Codierungsobjekte zuzugreifen, gehen Sie wie folgt vor:</span><span class="sxs-lookup"><span data-stu-id="ede1e-119">To access the individual encoding objects implemented in .NET, do the following:</span></span>

- <span data-ttu-id="ede1e-120">Verwenden Sie die statischen Eigenschaften der <xref:System.Text.Encoding>-Klasse, die Objekte zurückgibt, die die in .NET verfügbaren Standardzeichencodierungen darstellen (ASCII, UTF-7, UTF-8, UTF-16 und UTF-32).</span><span class="sxs-lookup"><span data-stu-id="ede1e-120">Use the static properties of the <xref:System.Text.Encoding> class, which return objects that represent the standard character encodings available in .NET (ASCII, UTF-7, UTF-8, UTF-16, and UTF-32).</span></span> <span data-ttu-id="ede1e-121">Zum Beispiel gibt die <xref:System.Text.Encoding.Unicode%2A?displayProperty=nameWithType> -Eigenschaft ein <xref:System.Text.UnicodeEncoding> -Objekt zurück.</span><span class="sxs-lookup"><span data-stu-id="ede1e-121">For example, the <xref:System.Text.Encoding.Unicode%2A?displayProperty=nameWithType> property returns a <xref:System.Text.UnicodeEncoding> object.</span></span> <span data-ttu-id="ede1e-122">Jedes Objekt verwendet einen Ersatzfallback für die Behandlung von Zeichenfolgen, die nicht codiert werden können, und von Bytes, die nicht decodiert werden können.</span><span class="sxs-lookup"><span data-stu-id="ede1e-122">Each object uses replacement fallback to handle strings that it cannot encode and bytes that it cannot decode.</span></span> <span data-ttu-id="ede1e-123">Weitere Informationen finden Sie im Abschnitt [Replacement Fallback](character-encoding.md#Replacement).</span><span class="sxs-lookup"><span data-stu-id="ede1e-123">For more information, see [Replacement fallback](character-encoding.md#Replacement).</span></span>

- <span data-ttu-id="ede1e-124">Rufen Sie den Klassenkonstruktor der Codierung auf.</span><span class="sxs-lookup"><span data-stu-id="ede1e-124">Call the encoding's class constructor.</span></span> <span data-ttu-id="ede1e-125">Objekte für ASCII-, UTF-7-, UTF-8-, UTF-16- und UTF-32-Codierungen können auf diese Weise instanziiert werden.</span><span class="sxs-lookup"><span data-stu-id="ede1e-125">Objects for the ASCII, UTF-7, UTF-8, UTF-16, and UTF-32 encodings can be instantiated in this way.</span></span> <span data-ttu-id="ede1e-126">Standardmäßig verwendet jedes Objekt den Ersatzfallback zur Behandlung von Zeichenfolgen, die nicht codiert werden können, und von Bytes, die nicht decodiert werden können. Sie können aber angeben, dass stattdessen eine Ausnahme ausgelöst werden soll.</span><span class="sxs-lookup"><span data-stu-id="ede1e-126">By default, each object uses replacement fallback to handle strings that it cannot encode and bytes that it cannot decode, but you can specify that an exception should be thrown instead.</span></span> <span data-ttu-id="ede1e-127">Weitere Informationen finden Sie in [Replacement Fallback](character-encoding.md#Replacement) und [Exception Fallback](character-encoding.md#Exception).</span><span class="sxs-lookup"><span data-stu-id="ede1e-127">For more information, see [Replacement fallback](character-encoding.md#Replacement) and [Exception fallback](character-encoding.md#Exception).</span></span>

- <span data-ttu-id="ede1e-128">Rufen Sie den <xref:System.Text.Encoding.%23ctor%28System.Int32%29> -Konstruktor auf, und übergeben Sie eine ganze Zahl, die die Codierung darstellt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-128">Call the <xref:System.Text.Encoding.%23ctor%28System.Int32%29> constructor and pass it an integer that represents the encoding.</span></span> <span data-ttu-id="ede1e-129">Standardcodierungsobjekte verwenden den Ersatzfallback, und Codepage- und DBCS (Doppelbyte-Zeichensatz)-Codierungsobjekte verwenden den Fallback mit ähnlichen Zeichen zur Behandlung von Zeichenfolgen, die nicht codiert werden können, und von Bytes, die nicht decodiert werden können.</span><span class="sxs-lookup"><span data-stu-id="ede1e-129">Standard encoding objects use replacement fallback, and code page and double-byte character set (DBCS) encoding objects use best-fit fallback to handle strings that they cannot encode and bytes that they cannot decode.</span></span> <span data-ttu-id="ede1e-130">Weitere Informationen finden Sie in [Best-Fit Fallback](character-encoding.md#BestFit).</span><span class="sxs-lookup"><span data-stu-id="ede1e-130">For more information, see [Best-fit fallback](character-encoding.md#BestFit).</span></span>

- <span data-ttu-id="ede1e-131">Rufen Sie die <xref:System.Text.Encoding.GetEncoding%2A?displayProperty=nameWithType>-Methode auf, die jede in .NET verfügbare Standard-, Codepage- oder DBCS-Codierung zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-131">Call the <xref:System.Text.Encoding.GetEncoding%2A?displayProperty=nameWithType> method, which returns any standard, code page, or DBCS encoding available in .NET.</span></span> <span data-ttu-id="ede1e-132">Mithilfe von Überladungen können Sie sowohl für den Encoder als auch den Decoder ein Fallbackobjekt angeben.</span><span class="sxs-lookup"><span data-stu-id="ede1e-132">Overloads let you specify a fallback object for both the encoder and the decoder.</span></span>

<span data-ttu-id="ede1e-133">Sie können Informationen über alle in .NET verfügbaren Codierungen abrufen, indem Sie die <xref:System.Text.Encoding.GetEncodings%2A?displayProperty=nameWithType>-Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-133">You can retrieve information about all the encodings available in .NET by calling the <xref:System.Text.Encoding.GetEncodings%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="ede1e-134">.NET unterstützt die in der folgenden Tabelle aufgeführten Zeichencodierungssysteme.</span><span class="sxs-lookup"><span data-stu-id="ede1e-134">.NET supports the character encoding schemes listed in the following table.</span></span>

|<span data-ttu-id="ede1e-135">Codierungsklasse</span><span class="sxs-lookup"><span data-stu-id="ede1e-135">Encoding class</span></span>|<span data-ttu-id="ede1e-136">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="ede1e-136">Description</span></span>|
|--------------|-----------|
|[<span data-ttu-id="ede1e-137">ASCII</span><span class="sxs-lookup"><span data-stu-id="ede1e-137">ASCII</span></span>](xref:System.Text.ASCIIEncoding)|<span data-ttu-id="ede1e-138">Codiert einen begrenzten Bereich von Zeichen mithilfe der unteren sieben Bits eines Bytes.</span><span class="sxs-lookup"><span data-stu-id="ede1e-138">Encodes a limited range of characters by using the lower seven bits of a byte.</span></span> <span data-ttu-id="ede1e-139">Da diese Codierung nur Zeichenwerte von U+0000 bis U+007F unterstützt, ist sie in den meisten Fällen für weltweit einsetzbare Anwendungen nicht geeignet.</span><span class="sxs-lookup"><span data-stu-id="ede1e-139">Because this encoding only supports character values from U+0000 through U+007F, in most cases it is inadequate for internationalized applications.</span></span>|
|[<span data-ttu-id="ede1e-140">UTF-7</span><span class="sxs-lookup"><span data-stu-id="ede1e-140">UTF-7</span></span>](xref:System.Text.UTF7Encoding)|<span data-ttu-id="ede1e-141">Stellt Zeichen als Sequenzen von 7-Bit-ASCII-Zeichen dar.</span><span class="sxs-lookup"><span data-stu-id="ede1e-141">Represents characters as sequences of 7-bit ASCII characters.</span></span> <span data-ttu-id="ede1e-142">Nicht-ASCII-Unicode-Zeichen werden durch eine Escapesequenz von ASCII-Zeichen dargestellt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-142">Non-ASCII Unicode characters are represented by an escape sequence of ASCII characters.</span></span> <span data-ttu-id="ede1e-143">UTF-7 unterstützt Protokolle wie E-Mail und Newsgroup.</span><span class="sxs-lookup"><span data-stu-id="ede1e-143">UTF-7 supports protocols such as email and newsgroup.</span></span> <span data-ttu-id="ede1e-144">UTF-7 ist jedoch nicht besonders sicher oder robust.</span><span class="sxs-lookup"><span data-stu-id="ede1e-144">However, UTF-7 is not particularly secure or robust.</span></span> <span data-ttu-id="ede1e-145">In einigen Fällen kann die Änderung eines Bits die Interpretation einer gesamten UTF-7-Zeichenfolge radikal ändern.</span><span class="sxs-lookup"><span data-stu-id="ede1e-145">In some cases, changing one bit can radically alter the interpretation of an entire UTF-7 string.</span></span> <span data-ttu-id="ede1e-146">In anderen Fällen können verschiedene UTF-7-Zeichenfolgen denselben Text codieren.</span><span class="sxs-lookup"><span data-stu-id="ede1e-146">In other cases, different UTF-7 strings can encode the same text.</span></span> <span data-ttu-id="ede1e-147">Bei Sequenzen, die Nicht-ASCII-Zeichen enthalten, benötigt UTF-7 mehr Speicherplatz als UTF-8, und auch die Codierung/Decodierung erfolgt langsamer.</span><span class="sxs-lookup"><span data-stu-id="ede1e-147">For sequences that include non-ASCII characters, UTF-7 requires more space than UTF-8, and encoding/decoding is slower.</span></span> <span data-ttu-id="ede1e-148">Daher sollten Sie nach Möglichkeit UTF-8 anstelle von UTF-7 verwenden.</span><span class="sxs-lookup"><span data-stu-id="ede1e-148">Consequently, you should use UTF-8 instead of UTF-7 if possible.</span></span>|
|[<span data-ttu-id="ede1e-149">UTF-8</span><span class="sxs-lookup"><span data-stu-id="ede1e-149">UTF-8</span></span>](xref:System.Text.UTF8Encoding)|<span data-ttu-id="ede1e-150">Stellt jeden Unicode-Codepunkt als eine Folge von einem bis vier Bytes dar.</span><span class="sxs-lookup"><span data-stu-id="ede1e-150">Represents each Unicode code point as a sequence of one to four bytes.</span></span> <span data-ttu-id="ede1e-151">UTF-8 unterstützt 8-Bit-Datengrößen und funktioniert mit vielen vorhandenen Betriebssystemen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-151">UTF-8 supports 8-bit data sizes and works well with many existing operating systems.</span></span> <span data-ttu-id="ede1e-152">Im ASCII-Zeichenbereich ist UTF-8 mit der ASCII-Codierung identisch und ermöglicht einen umfangreicheren Zeichensatz.</span><span class="sxs-lookup"><span data-stu-id="ede1e-152">For the ASCII range of characters, UTF-8 is identical to ASCII encoding and allows a broader set of characters.</span></span> <span data-ttu-id="ede1e-153">Für CJK-Skripts (Chinesisch, Japanisch, Koreanisch) können bei UTF-8 jedoch drei Bytes für jedes Zeichen erforderlich sein, sodass größere Datenmengen als bei UTF-16 entstehen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-153">However, for Chinese-Japanese-Korean (CJK) scripts, UTF-8 can require three bytes for each character, and can cause larger data sizes than UTF-16.</span></span> <span data-ttu-id="ede1e-154">Manchmal wird die größere Datenmenge für den CJK-Bereich jedoch durch die Menge an ASCII-Daten, z. B. HTML-Tags, gerechtfertigt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-154">Sometimes the amount of ASCII data, such as HTML tags, justifies the increased size for the CJK range.</span></span>|
|[<span data-ttu-id="ede1e-155">UTF-16</span><span class="sxs-lookup"><span data-stu-id="ede1e-155">UTF-16</span></span>](xref:System.Text.UnicodeEncoding)|<span data-ttu-id="ede1e-156">Stellt jeden Unicode-Codepunkt als Folge von einer oder zwei 16-Bit-Ganzzahlen dar.</span><span class="sxs-lookup"><span data-stu-id="ede1e-156">Represents each Unicode code point as a sequence of one or two 16-bit integers.</span></span> <span data-ttu-id="ede1e-157">Die meisten allgemeinen Unicode-Zeichen erfordern nur einen UTF-16-Codepunkt. Ergänzende Unicode-Zeichen (U+10000 und höher) erfordern allerdings zwei UTF-16-Ersatzzeichen-Codepunkte.</span><span class="sxs-lookup"><span data-stu-id="ede1e-157">Most common Unicode characters require only one UTF-16 code point, although Unicode supplementary characters (U+10000 and greater) require two UTF-16 surrogate code points.</span></span> <span data-ttu-id="ede1e-158">Sowohl Little-Endian- als auch Big-Endian-Bytereihenfolgen werden unterstützt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-158">Both little-endian and big-endian byte orders are supported.</span></span> <span data-ttu-id="ede1e-159">Die UTF-16-Codierung wird von der Common Language Runtime zur Darstellung von <xref:System.Char> -Werten und <xref:System.String> -Werten und vom Windows-Betriebssystem zur Darstellung von `WCHAR` -Werten verwendet.</span><span class="sxs-lookup"><span data-stu-id="ede1e-159">UTF-16 encoding is used by the common language runtime to represent <xref:System.Char> and <xref:System.String> values, and it is used by the Windows operating system to represent `WCHAR` values.</span></span>|
|[<span data-ttu-id="ede1e-160">UTF-32</span><span class="sxs-lookup"><span data-stu-id="ede1e-160">UTF-32</span></span>](xref:System.Text.UTF32Encoding)|<span data-ttu-id="ede1e-161">Stellt jeden Unicode-Codepunkt als 32-Bit-Ganzzahl dar.</span><span class="sxs-lookup"><span data-stu-id="ede1e-161">Represents each Unicode code point as a 32-bit integer.</span></span> <span data-ttu-id="ede1e-162">Sowohl Little-Endian- als auch Big-Endian-Bytereihenfolgen werden unterstützt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-162">Both little-endian and big-endian byte orders are supported.</span></span> <span data-ttu-id="ede1e-163">Die UTF-32-Codierung wird verwendet, wenn Anwendungen das Verhalten mit Ersatzzeichen-Codepunkten der UTF-16-Codierung unter Betriebssystemen vermeiden möchten, bei denen codierter Speicherplatz von zu großer Bedeutung ist.</span><span class="sxs-lookup"><span data-stu-id="ede1e-163">UTF-32 encoding is used when applications want to avoid the surrogate code point behavior of UTF-16 encoding on operating systems for which encoded space is too important.</span></span> <span data-ttu-id="ede1e-164">Einzelne Symbole, die in einer Anzeige gerendert werden, können dennoch mit mehr als einem UTF-32-Zeichen codiert werden.</span><span class="sxs-lookup"><span data-stu-id="ede1e-164">Single glyphs rendered on a display can still be encoded with more than one UTF-32 character.</span></span>|
|<span data-ttu-id="ede1e-165">ANSI/ISO-Codierung</span><span class="sxs-lookup"><span data-stu-id="ede1e-165">ANSI/ISO encoding</span></span>|<span data-ttu-id="ede1e-166">Bietet Unterstützung für eine Vielzahl von Codepages.</span><span class="sxs-lookup"><span data-stu-id="ede1e-166">Provides support for a variety of code pages.</span></span> <span data-ttu-id="ede1e-167">Unter Windows-Betriebssystemen werden Codepages verwendet, um eine bestimmte Sprache oder Sprachgruppe zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-167">On Windows operating systems, code pages are used to support a specific language or group of languages.</span></span> <span data-ttu-id="ede1e-168">Eine Tabelle, in der die von .NET unterstützten Codepages aufgeführt werden, finden Sie unter der <xref:System.Text.Encoding>-Klasse.</span><span class="sxs-lookup"><span data-stu-id="ede1e-168">For a table that lists the code pages supported by .NET, see the <xref:System.Text.Encoding> class.</span></span> <span data-ttu-id="ede1e-169">Sie können ein Codierungsobjekt für eine bestimmte Codepage abrufen, indem Sie die <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> -Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-169">You can retrieve an encoding object for a particular code page by calling the <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="ede1e-170">Eine Codepage enthält 256 Codepunkte und ist nullbasiert.</span><span class="sxs-lookup"><span data-stu-id="ede1e-170">A code page contains 256 code points and is zero-based.</span></span> <span data-ttu-id="ede1e-171">Bei den meisten Codepages stellen die Codepunkte 0 bis 127 den ASCII-Zeichensatz dar. Die Codepunkte 128 bis 255 weichen zwischen den Codepages erheblich voneinander ab.</span><span class="sxs-lookup"><span data-stu-id="ede1e-171">In most code pages, code points 0 through 127 represent the ASCII character set, and code points 128 through 255 differ significantly between code pages.</span></span> <span data-ttu-id="ede1e-172">Die Codepage 1252 enthält beispielsweise die Zeichen für lateinische Schreibsysteme, einschließlich Englisch, Deutsch und Französisch.</span><span class="sxs-lookup"><span data-stu-id="ede1e-172">For example, code page 1252 provides the characters for Latin writing systems, including English, German, and French.</span></span> <span data-ttu-id="ede1e-173">Die letzten 128 Codepunkte der Codepage 1252 enthalten die Akzentzeichen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-173">The last 128 code points in code page 1252 contain the accent characters.</span></span> <span data-ttu-id="ede1e-174">Die Codepage 1253 enthält die Zeichencodes für das griechische Schreibsystem.</span><span class="sxs-lookup"><span data-stu-id="ede1e-174">Code page 1253 provides character codes that are required in the Greek writing system.</span></span> <span data-ttu-id="ede1e-175">Die letzten 128 Codepunkte der Codepage 1253 enthalten die griechischen Zeichen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-175">The last 128 code points in code page 1253 contain the Greek characters.</span></span> <span data-ttu-id="ede1e-176">Daher kann eine auf ANSI-Codepages beruhende Anwendung Griechisch und Deutsch nicht in demselben Textstream speichern, sofern kein Bezeichner eingeschlossen ist, der die referenzierte Codepage angibt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-176">As a result, an application that relies on ANSI code pages cannot store Greek and German in the same text stream unless it includes an identifier that indicates the referenced code page.</span></span>|
|<span data-ttu-id="ede1e-177">DBCS-Codierungen (Double-Byte Character Set, Doppelbyte-Zeichensatz)</span><span class="sxs-lookup"><span data-stu-id="ede1e-177">Double-byte character set (DBCS) encodings</span></span>|<span data-ttu-id="ede1e-178">Unterstützt Sprachen wie Chinesisch, Japanisch und Koreanisch, die mehr als 256 Zeichen enthalten.</span><span class="sxs-lookup"><span data-stu-id="ede1e-178">Supports languages, such as Chinese, Japanese, and Korean, that contain more than 256 characters.</span></span> <span data-ttu-id="ede1e-179">In einem DBCS wird jedes Zeichen durch ein Paar Codepunkte (ein Doppelbyte) dargestellt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-179">In a DBCS, a pair of code points (a double byte) represents each character.</span></span> <span data-ttu-id="ede1e-180">Die <xref:System.Text.Encoding.IsSingleByte%2A?displayProperty=nameWithType> -Eigenschaft gibt für DBCS-Codierungen `false` zurück.</span><span class="sxs-lookup"><span data-stu-id="ede1e-180">The <xref:System.Text.Encoding.IsSingleByte%2A?displayProperty=nameWithType> property returns `false` for DBCS encodings.</span></span> <span data-ttu-id="ede1e-181">Sie können ein Codierungsobjekt für einen bestimmten Doppelbyte-Zeichensatz abrufen, indem Sie die <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> -Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-181">You can retrieve an encoding object for a particular DBCS by calling the <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="ede1e-182">Wenn eine Anwendung DBCS-Daten behandelt, wird das erste Byte eines DBCS-Zeichens (das führende Byte) in Kombination mit dem unmittelbar nachfolgenden Byte verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="ede1e-182">When an application handles DBCS data, the first byte of a DBCS character (the lead byte) is processed in combination with the trail byte that immediately follows it.</span></span> <span data-ttu-id="ede1e-183">Da ein einzelnes Paar von DBCS-Codepunkten je nach Codepage unterschiedliche Zeichen darstellen kann, lässt auch dieses Schema keine Kombination zweier Sprachen wie Japanisch und Chinesisch in einem Datenstream zu.</span><span class="sxs-lookup"><span data-stu-id="ede1e-183">Because a single pair of double-byte code points can represent different characters depending on the code page, this scheme still does not allow for the combination of two languages, such as Japanese and Chinese, in the same data stream.</span></span>|

<span data-ttu-id="ede1e-184">Diese Codierungen ermöglichen Ihnen die Verwendung von Unicode-Zeichen und von Codierungen, die in älteren Anwendungen am häufigsten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="ede1e-184">These encodings enable you to work with Unicode characters as well as with encodings that are most commonly used in legacy applications.</span></span> <span data-ttu-id="ede1e-185">Außerdem können Sie eine benutzerdefinierte Codierung erstellen, indem Sie eine von <xref:System.Text.Encoding> erbende Klasse definieren und deren Member überschreiben.</span><span class="sxs-lookup"><span data-stu-id="ede1e-185">In addition, you can create a custom encoding by defining a class that derives from <xref:System.Text.Encoding> and overriding its members.</span></span>

## <a name="net-core-encoding-support"></a><span data-ttu-id="ede1e-186">.NET Core-Codierungsunterstützung</span><span class="sxs-lookup"><span data-stu-id="ede1e-186">.NET Core encoding support</span></span>

<span data-ttu-id="ede1e-187">Standardmäßig stellt .NET Core keine anderen Codepagecodierungen als Codepage 28591 und Unicode-Codierungen (z.B. UTF-8 und UTF-16) bereit.</span><span class="sxs-lookup"><span data-stu-id="ede1e-187">By default, .NET Core does not make available any code page encodings other than code page 28591 and the Unicode encodings, such as UTF-8 and UTF-16.</span></span> <span data-ttu-id="ede1e-188">Allerdings können Sie Ihrer App die Codepagecodierungen hinzufügen, die in Standard-Windows-Apps verwendet werden, die .NET als Ziel nutzen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-188">However, you can add the code page encodings found in standard Windows apps that target .NET to your app.</span></span> <span data-ttu-id="ede1e-189">Weitere Informationen finden Sie im Thema <xref:System.Text.CodePagesEncodingProvider>.</span><span class="sxs-lookup"><span data-stu-id="ede1e-189">For more information, see the <xref:System.Text.CodePagesEncodingProvider> topic.</span></span>

<a name="Selecting"></a>

## <a name="selecting-an-encoding-class"></a><span data-ttu-id="ede1e-190">Auswählen einer Encoding-Klasse</span><span class="sxs-lookup"><span data-stu-id="ede1e-190">Selecting an Encoding Class</span></span>

<span data-ttu-id="ede1e-191">Wenn Sie die Möglichkeit haben, die von der Anwendung verwendete Codierung auszuwählen, sollten Sie eine Unicode-Codierung verwenden, vorzugsweise <xref:System.Text.UTF8Encoding> oder <xref:System.Text.UnicodeEncoding>.</span><span class="sxs-lookup"><span data-stu-id="ede1e-191">If you have the opportunity to choose the encoding to be used by your application, you should use a Unicode encoding, preferably either <xref:System.Text.UTF8Encoding> or <xref:System.Text.UnicodeEncoding>.</span></span> <span data-ttu-id="ede1e-192">(.NET unterstützt auch eine dritte Unicode-Codierung, <xref:System.Text.UTF32Encoding>.)</span><span class="sxs-lookup"><span data-stu-id="ede1e-192">(.NET also supports a third Unicode encoding, <xref:System.Text.UTF32Encoding>.)</span></span>

<span data-ttu-id="ede1e-193">Wenn Sie eine ASCII-Codierung (<xref:System.Text.ASCIIEncoding>) verwenden möchten, wählen Sie stattdessen <xref:System.Text.UTF8Encoding> .</span><span class="sxs-lookup"><span data-stu-id="ede1e-193">If you are planning to use an ASCII encoding (<xref:System.Text.ASCIIEncoding>), choose <xref:System.Text.UTF8Encoding> instead.</span></span> <span data-ttu-id="ede1e-194">Die beiden Codierungen sind für den ASCII-Zeichensatz identisch. <xref:System.Text.UTF8Encoding> bietet allerdings die folgenden Vorteile:</span><span class="sxs-lookup"><span data-stu-id="ede1e-194">The two encodings are identical for the ASCII character set, but <xref:System.Text.UTF8Encoding> has the following advantages:</span></span>

- <span data-ttu-id="ede1e-195">Alle Unicode-Zeichen können dargestellt werden, während <xref:System.Text.ASCIIEncoding> nur die Unicode-Zeichenwerte zwischen U+0000 und U+007F unterstützt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-195">It can represent every Unicode character, whereas <xref:System.Text.ASCIIEncoding> supports only the Unicode character values between U+0000 and U+007F.</span></span>

- <span data-ttu-id="ede1e-196">Weitere Vorteile sind die Fehlererkennung und die verbesserte Sicherheit.</span><span class="sxs-lookup"><span data-stu-id="ede1e-196">It provides error detection and better security.</span></span>

- <span data-ttu-id="ede1e-197">Die Geschwindigkeit wurde optimiert und sollte schneller sein als jede andere Codierung.</span><span class="sxs-lookup"><span data-stu-id="ede1e-197">It has been tuned to be as fast as possible and should be faster than any other encoding.</span></span> <span data-ttu-id="ede1e-198">Selbst bei Inhalten, bei denen es sich um reine ASCII-Daten handelt, erfolgen mit <xref:System.Text.UTF8Encoding> durchgeführte Operationen schneller als mit <xref:System.Text.ASCIIEncoding>durchgeführte Operationen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-198">Even for content that is entirely ASCII, operations performed with <xref:System.Text.UTF8Encoding> are faster than operations performed with <xref:System.Text.ASCIIEncoding>.</span></span>

<span data-ttu-id="ede1e-199">Sie sollten daher in Erwägung ziehen, <xref:System.Text.ASCIIEncoding> nur für ältere Anwendungen zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="ede1e-199">You should consider using <xref:System.Text.ASCIIEncoding> only for legacy applications.</span></span> <span data-ttu-id="ede1e-200">Allerdings kann <xref:System.Text.UTF8Encoding> auch für ältere Anwendungen aus folgenden Gründen die bessere Wahl sein (ausgehend von den Standardeinstellungen):</span><span class="sxs-lookup"><span data-stu-id="ede1e-200">However, even for legacy applications, <xref:System.Text.UTF8Encoding> might be a better choice for the following reasons (assuming default settings):</span></span>

- <span data-ttu-id="ede1e-201">Wenn die Anwendung Inhalte, die keine reinen ASCII-Daten sind, mit <xref:System.Text.ASCIIEncoding>codiert, wird jedes Nicht-ASCII-Zeichen als Fragezeichen (?) codiert.</span><span class="sxs-lookup"><span data-stu-id="ede1e-201">If your application has content that is not strictly ASCII and encodes it with <xref:System.Text.ASCIIEncoding>, each non-ASCII character encodes as a question mark (?).</span></span> <span data-ttu-id="ede1e-202">Wenn die Anwendung diese Daten anschließend decodiert, gehen die Informationen verloren.</span><span class="sxs-lookup"><span data-stu-id="ede1e-202">If the application then decodes this data, the information is lost.</span></span>

- <span data-ttu-id="ede1e-203">Wenn die Anwendung Inhalte, die keine reinen ASCII-Daten sind, mit <xref:System.Text.UTF8Encoding>codiert und als ASCII-Daten interpretiert, erscheint das Ergebnis unverständlich.</span><span class="sxs-lookup"><span data-stu-id="ede1e-203">If your application has content that is not strictly ASCII and encodes it with <xref:System.Text.UTF8Encoding>, the result seems unintelligible if interpreted as ASCII.</span></span> <span data-ttu-id="ede1e-204">Wenn die Anwendung dann jedoch einen UTF-8-Decoder verwendet, um diese Daten zu decodieren, durchlaufen sie einen erfolgreichen Roundtrip.</span><span class="sxs-lookup"><span data-stu-id="ede1e-204">However, if the application then uses a UTF-8 decoder to decode this data, the data performs a round trip successfully.</span></span>

<span data-ttu-id="ede1e-205">In einer Webanwendung sollten die Zeichen, die als Antwort auf eine Webanforderung an den Client gesendet werden, die auf dem Client verwendete Codierung widerspiegeln.</span><span class="sxs-lookup"><span data-stu-id="ede1e-205">In a web application, characters sent to the client in response to a web request should reflect the encoding used on the client.</span></span> <span data-ttu-id="ede1e-206">In den meisten Fällen sollten Sie die <xref:System.Web.HttpResponse.ContentEncoding%2A?displayProperty=nameWithType> -Eigenschaft auf den Wert festlegen, der von der <xref:System.Web.HttpRequest.ContentEncoding%2A?displayProperty=nameWithType> -Eigenschaft zurückgegeben wird, um Text in der vom Benutzer erwarteten Codierung anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-206">In most cases, you should set the <xref:System.Web.HttpResponse.ContentEncoding%2A?displayProperty=nameWithType> property to the value returned by the <xref:System.Web.HttpRequest.ContentEncoding%2A?displayProperty=nameWithType> property to display text in the encoding that the user expects.</span></span>

<a name="Using"></a>

## <a name="using-an-encoding-object"></a><span data-ttu-id="ede1e-207">Verwenden eines Codierungsobjekts</span><span class="sxs-lookup"><span data-stu-id="ede1e-207">Using an Encoding Object</span></span>

<span data-ttu-id="ede1e-208">Ein Codierer konvertiert eine Zeichenfolge (meistens Unicode-Zeichen) in die numerische Entsprechung (Byte).</span><span class="sxs-lookup"><span data-stu-id="ede1e-208">An encoder converts a string of characters (most commonly, Unicode characters) to its numeric (byte) equivalent.</span></span> <span data-ttu-id="ede1e-209">Beispielsweise können Sie einen ASCII-Encoder verwenden, um Unicode-Zeichen in ASCII zu konvertieren, damit sie in der Konsole angezeigt werden können.</span><span class="sxs-lookup"><span data-stu-id="ede1e-209">For example, you might use an ASCII encoder to convert Unicode characters to ASCII so that they can be displayed at the console.</span></span> <span data-ttu-id="ede1e-210">Um die Konvertierung auszuführen, rufen Sie die <xref:System.Text.Encoding.GetBytes%2A?displayProperty=nameWithType> -Methode auf.</span><span class="sxs-lookup"><span data-stu-id="ede1e-210">To perform the conversion, you call the <xref:System.Text.Encoding.GetBytes%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="ede1e-211">Wenn Sie vor Ausführung der Codierung ermitteln möchten, wie viele Bytes zum Speichern der codierten Zeichen benötigt werden, können Sie die <xref:System.Text.Encoding.GetByteCount%2A> -Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-211">If you want to determine how many bytes are needed to store the encoded characters before performing the encoding, you can call the <xref:System.Text.Encoding.GetByteCount%2A> method.</span></span>

<span data-ttu-id="ede1e-212">Im folgenden Beispiel wird ein einzelnes Bytearray verwendet, um Zeichenfolgen in zwei separaten Vorgängen zu codieren.</span><span class="sxs-lookup"><span data-stu-id="ede1e-212">The following example uses a single byte array to encode strings in two separate operations.</span></span> <span data-ttu-id="ede1e-213">Ein verwalteter Index gibt die Anfangsposition im Bytearray für die nächste Gruppe von ASCII-codierten Bytes an.</span><span class="sxs-lookup"><span data-stu-id="ede1e-213">It maintains an index that indicates the starting position in the byte array for the next set of ASCII-encoded bytes.</span></span> <span data-ttu-id="ede1e-214">Die <xref:System.Text.ASCIIEncoding.GetByteCount%28System.String%29?displayProperty=nameWithType> -Methode wird aufgerufen, um sicherzustellen, dass das Bytearray groß genug für die codierte Zeichenfolge ist.</span><span class="sxs-lookup"><span data-stu-id="ede1e-214">It calls the <xref:System.Text.ASCIIEncoding.GetByteCount%28System.String%29?displayProperty=nameWithType> method to ensure that the byte array is large enough to accommodate the encoded string.</span></span> <span data-ttu-id="ede1e-215">Dann wird die <xref:System.Text.ASCIIEncoding.GetBytes%28System.String%2CSystem.Int32%2CSystem.Int32%2CSystem.Byte%5B%5D%2CSystem.Int32%29?displayProperty=nameWithType> -Methode aufgerufen, um die Zeichen in der Zeichenfolge zu codieren.</span><span class="sxs-lookup"><span data-stu-id="ede1e-215">It then calls the <xref:System.Text.ASCIIEncoding.GetBytes%28System.String%2CSystem.Int32%2CSystem.Int32%2CSystem.Byte%5B%5D%2CSystem.Int32%29?displayProperty=nameWithType> method to encode the characters in the string.</span></span>

[!code-csharp[Conceptual.Encoding#8](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/getbytes1.cs#8)]
[!code-vb[Conceptual.Encoding#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/getbytes1.vb#8)]

<span data-ttu-id="ede1e-216">Ein Decoder konvertiert ein Bytearray, das eine spezifische Zeichencodierung darstellt, in einen Satz von Zeichen, d. h. entweder in ein Zeichenarray oder in eine Zeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="ede1e-216">A decoder converts a byte array that reflects a particular character encoding into a set of characters, either in a character array or in a string.</span></span> <span data-ttu-id="ede1e-217">Um ein Bytearray in ein Zeichenarray zu decodieren, rufen Sie die <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> -Methode auf.</span><span class="sxs-lookup"><span data-stu-id="ede1e-217">To decode a byte array into a character array, you call the <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="ede1e-218">Um ein Bytearray in eine Zeichenfolge zu decodieren, rufen Sie die <xref:System.Text.Encoding.GetString%2A> -Methode auf.</span><span class="sxs-lookup"><span data-stu-id="ede1e-218">To decode a byte array into a string, you call the <xref:System.Text.Encoding.GetString%2A> method.</span></span> <span data-ttu-id="ede1e-219">Wenn Sie vor Ausführung der Decodierung ermitteln möchten, wie viele Zeichen zum Speichern der decodierten Bytes benötigt werden, können Sie die <xref:System.Text.Encoding.GetCharCount%2A> -Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-219">If you want to determine how many characters are needed to store the decoded bytes before performing the decoding, you can call the <xref:System.Text.Encoding.GetCharCount%2A> method.</span></span>

<span data-ttu-id="ede1e-220">Im folgenden Beispiel werden drei Zeichenfolgen codiert und dann in einzelnes Array von Zeichen decodiert.</span><span class="sxs-lookup"><span data-stu-id="ede1e-220">The following example encodes three strings and then decodes them into a single array of characters.</span></span> <span data-ttu-id="ede1e-221">Ein verwalteter Index gibt die Anfangsposition im Zeichenarray für die nächste Gruppe von decodierten Zeichen an.</span><span class="sxs-lookup"><span data-stu-id="ede1e-221">It maintains an index that indicates the starting position in the character array for the next set of decoded characters.</span></span> <span data-ttu-id="ede1e-222">Die <xref:System.Text.ASCIIEncoding.GetCharCount%2A> -Methode wird aufgerufen, um sicherzustellen, dass das Zeichenarray groß genug für alle decodierten Zeichen ist.</span><span class="sxs-lookup"><span data-stu-id="ede1e-222">It calls the <xref:System.Text.ASCIIEncoding.GetCharCount%2A> method to ensure that the character array is large enough to accommodate all the decoded characters.</span></span> <span data-ttu-id="ede1e-223">Dann wird die <xref:System.Text.ASCIIEncoding.GetChars%28System.Byte%5B%5D%2CSystem.Int32%2CSystem.Int32%2CSystem.Char%5B%5D%2CSystem.Int32%29?displayProperty=nameWithType> -Methode aufgerufen, um das Bytearray zu decodieren.</span><span class="sxs-lookup"><span data-stu-id="ede1e-223">It then calls the <xref:System.Text.ASCIIEncoding.GetChars%28System.Byte%5B%5D%2CSystem.Int32%2CSystem.Int32%2CSystem.Char%5B%5D%2CSystem.Int32%29?displayProperty=nameWithType> method to decode the byte array.</span></span>

[!code-csharp[Conceptual.Encoding#9](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/getchars1.cs#9)]
[!code-vb[Conceptual.Encoding#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/getchars1.vb#9)]

<span data-ttu-id="ede1e-224">Die Codierungs- und Decodierungsmethoden einer von <xref:System.Text.Encoding> abgeleiteten Klasse sind für die Behandlung eines vollständigen Satzes von Daten vorgesehen, d. h., alle zu codierenden oder decodierenden Daten werden in einem einzelnen Methodenaufruf angegeben.</span><span class="sxs-lookup"><span data-stu-id="ede1e-224">The encoding and decoding methods of a class derived from <xref:System.Text.Encoding> are designed to work on a complete set of data; that is, all the data to be encoded or decoded is supplied in a single method call.</span></span> <span data-ttu-id="ede1e-225">In einigen Fällen sind Daten jedoch in einem Stream verfügbar, und die zu codierenden und decodierenden Daten sind möglicherweise nur über separate Lesevorgänge verfügbar.</span><span class="sxs-lookup"><span data-stu-id="ede1e-225">However, in some cases, data is available in a stream, and the data to be encoded or decoded may be available only from separate read operations.</span></span> <span data-ttu-id="ede1e-226">Der Codierungs- oder Decodierungsvorgang muss hierbei jeden gespeicherten Zustand aus dem vorherigen Aufruf speichern.</span><span class="sxs-lookup"><span data-stu-id="ede1e-226">This requires the encoding or decoding operation to remember any saved state from its previous invocation.</span></span> <span data-ttu-id="ede1e-227">Methoden von Klassen, die von <xref:System.Text.Encoder> und <xref:System.Text.Decoder> abgeleitet sind, können Codierungs- und Decodierungsvorgänge behandeln, die mehrere Methodenaufrufe umfassen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-227">Methods of classes derived from <xref:System.Text.Encoder> and <xref:System.Text.Decoder> are able to handle encoding and decoding operations that span multiple method calls.</span></span>

<span data-ttu-id="ede1e-228">Ein <xref:System.Text.Encoder> -Objekt für eine bestimmte Codierung ist über die <xref:System.Text.Encoding.GetEncoder%2A?displayProperty=nameWithType> -Eigenschaft dieser Codierung verfügbar.</span><span class="sxs-lookup"><span data-stu-id="ede1e-228">An <xref:System.Text.Encoder> object for a particular encoding is available from that encoding's <xref:System.Text.Encoding.GetEncoder%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="ede1e-229">Ein <xref:System.Text.Decoder> -Objekt für eine bestimmte Codierung ist über die <xref:System.Text.Encoding.GetDecoder%2A?displayProperty=nameWithType> -Eigenschaft dieser Codierung verfügbar.</span><span class="sxs-lookup"><span data-stu-id="ede1e-229">A <xref:System.Text.Decoder> object for a particular encoding is available from that encoding's <xref:System.Text.Encoding.GetDecoder%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="ede1e-230">Bei Decodierungsvorgängen beinhalten die von <xref:System.Text.Decoder> abgeleiteten Klassen eine <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> -Methode, jedoch keine Methode, die <xref:System.Text.Encoding.GetString%2A?displayProperty=nameWithType>entspricht.</span><span class="sxs-lookup"><span data-stu-id="ede1e-230">For decoding operations, note that classes derived from <xref:System.Text.Decoder> include a <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> method, but they do not have a method that corresponds to <xref:System.Text.Encoding.GetString%2A?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="ede1e-231">Das folgende Beispiel veranschaulicht den Unterschied zwischen der Verwendung der <xref:System.Text.Encoding.GetString%2A?displayProperty=nameWithType> -Methode und der <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> -Methode zum Decodieren eines Unicode-Bytearrays.</span><span class="sxs-lookup"><span data-stu-id="ede1e-231">The following example illustrates the difference between using the <xref:System.Text.Encoding.GetString%2A?displayProperty=nameWithType> and <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> methods for decoding a Unicode byte array.</span></span> <span data-ttu-id="ede1e-232">Im Beispiel wird eine Zeichenfolge, die einige Unicode-Zeichen enthält, in eine Datei codiert. Anschließend werden die Zeichen mithilfe der zwei Decodierungsmethoden immer um je zehn Bytes decodiert.</span><span class="sxs-lookup"><span data-stu-id="ede1e-232">The example encodes a string that contains some Unicode characters to a file, and then uses the two decoding methods to decode them ten bytes at a time.</span></span> <span data-ttu-id="ede1e-233">Da im zehnten und elften Byte ein Ersatzzeichenpaar auftritt, erfolgt die Decodierung mit separaten Methodenaufrufen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-233">Because a surrogate pair occurs in the tenth and eleventh bytes, it is decoded in separate method calls.</span></span> <span data-ttu-id="ede1e-234">Die Ausgabe zeigt, dass die <xref:System.Text.Encoding.GetString%2A?displayProperty=nameWithType> -Methode die Bytes nicht ordnungsgemäß decodieren kann und sie stattdessen durch U+FFFD (REPLACEMENT CHARACTER) ersetzt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-234">As the output shows, the <xref:System.Text.Encoding.GetString%2A?displayProperty=nameWithType> method is not able to correctly decode the bytes and instead replaces them with U+FFFD (REPLACEMENT CHARACTER).</span></span> <span data-ttu-id="ede1e-235">Die <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> -Methode kann das Bytearray hingegen erfolgreich decodieren, um die ursprüngliche Zeichenfolge abzurufen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-235">On the other hand, the <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> method is able to successfully decode the byte array to get the original string.</span></span>

[!code-csharp[Conceptual.Encoding#10](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/stream1.cs#10)]
[!code-vb[Conceptual.Encoding#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/stream1.vb#10)]

<a name="FallbackStrategy"></a>

## <a name="choosing-a-fallback-strategy"></a><span data-ttu-id="ede1e-236">Auswählen einer Fallbackstrategie</span><span class="sxs-lookup"><span data-stu-id="ede1e-236">Choosing a Fallback Strategy</span></span>

<span data-ttu-id="ede1e-237">Wenn eine Methode versucht, ein Zeichen zu codieren oder zu decodieren, aber keine Zuordnung vorhanden ist, muss eine Fallbackstrategie implementiert werden. Diese legt fest, wie die fehlende Zuordnung behandelt werden soll.</span><span class="sxs-lookup"><span data-stu-id="ede1e-237">When a method tries to encode or decode a character but no mapping exists, it must implement a fallback strategy that determines how the failed mapping should be handled.</span></span> <span data-ttu-id="ede1e-238">Es gibt drei Arten von Fallbackstrategien:</span><span class="sxs-lookup"><span data-stu-id="ede1e-238">There are three types of fallback strategies:</span></span>

- <span data-ttu-id="ede1e-239">Best-Fit Fallback</span><span class="sxs-lookup"><span data-stu-id="ede1e-239">Best-fit fallback</span></span>

- <span data-ttu-id="ede1e-240">Replacement Fallback</span><span class="sxs-lookup"><span data-stu-id="ede1e-240">Replacement fallback</span></span>

- <span data-ttu-id="ede1e-241">Exception Fallback</span><span class="sxs-lookup"><span data-stu-id="ede1e-241">Exception fallback</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ede1e-242">Bei Codierungsvorgängen treten Probleme am häufigsten dann auf, wenn ein Unicode-Zeichen keiner bestimmten Codepagecodierung zugeordnet werden kann.</span><span class="sxs-lookup"><span data-stu-id="ede1e-242">The most common problems in encoding operations occur when a Unicode character cannot be mapped to a particular code page encoding.</span></span> <span data-ttu-id="ede1e-243">Zu den am häufigsten auftretenden Problem bei Decodierungsvorgängen gehört es, wenn ungültige Bytefolgen nicht in gültige Unicode-Zeichen übersetzt werden können.</span><span class="sxs-lookup"><span data-stu-id="ede1e-243">The most common problems in decoding operations occur when invalid byte sequences cannot be translated into valid Unicode characters.</span></span> <span data-ttu-id="ede1e-244">Aus diesen Gründen sollten Sie wissen, welche Fallbackstrategien von bestimmten Codierungsobjekten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="ede1e-244">For these reasons, you should know which fallback strategy a particular encoding object uses.</span></span> <span data-ttu-id="ede1e-245">Nach Möglichkeit sollten Sie die von einem Codierungsobjekt verwendete Fallbackstrategie beim Instanziieren des Objekts festlegen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-245">Whenever possible, you should specify the fallback strategy used by an encoding object when you instantiate the object.</span></span>

<a name="BestFit"></a>

### <a name="best-fit-fallback"></a><span data-ttu-id="ede1e-246">Best-Fit Fallback</span><span class="sxs-lookup"><span data-stu-id="ede1e-246">Best-Fit Fallback</span></span>

<span data-ttu-id="ede1e-247">Wenn ein Zeichen nicht über eine genaue Entsprechung in der Zielcodierung verfügt, kann der Encoder versuchen, eine Zuordnung zu einem ähnlichen Zeichen zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-247">When a character does not have an exact match in the target encoding, the encoder can try to map it to a similar character.</span></span> <span data-ttu-id="ede1e-248">(Ein Fallback mit ähnlichen Zeichen ist meist vielmehr ein Codierungs- als ein Decodierungsproblem.</span><span class="sxs-lookup"><span data-stu-id="ede1e-248">(Best-fit fallback is mostly an encoding rather than a decoding issue.</span></span> <span data-ttu-id="ede1e-249">Es gibt sehr wenige Codepages, die Zeichen enthalten, die in Unicode nicht erfolgreich zugeordnet werden können.) Der Fallback mit ähnlichen Zeichen ist die Standardeinstellung für Codepage- und DBCS-Codierungen, die von der <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType>-Überladung und der <xref:System.Text.Encoding.GetEncoding%28System.String%29?displayProperty=nameWithType>-Überladung abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="ede1e-249">There are very few code pages that contain characters that cannot be successfully mapped to Unicode.) Best-fit fallback is the default for code page and double-byte character set encodings that are retrieved by the <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> and <xref:System.Text.Encoding.GetEncoding%28System.String%29?displayProperty=nameWithType> overloads.</span></span>

> [!NOTE]
> <span data-ttu-id="ede1e-250">Theoretisch unterstützen die in .NET bereitgestellten Unicode-Codierungsklassen (<xref:System.Text.UTF8Encoding>, <xref:System.Text.UnicodeEncoding> und <xref:System.Text.UTF32Encoding>) alle Zeichen in jedem Zeichensatz, sodass sie verwendet werden können, um Probleme beim Fallback mit ähnlichen Zeichen zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="ede1e-250">In theory, the Unicode encoding classes provided in .NET (<xref:System.Text.UTF8Encoding>, <xref:System.Text.UnicodeEncoding>, and <xref:System.Text.UTF32Encoding>) support every character in every character set, so they can be used to eliminate best-fit fallback issues.</span></span>

<span data-ttu-id="ede1e-251">Strategien mit ähnlichen Zeichen variieren für unterschiedliche Codepages.</span><span class="sxs-lookup"><span data-stu-id="ede1e-251">Best-fit strategies vary for different code pages.</span></span> <span data-ttu-id="ede1e-252">Beispielsweise werden bei einigen Codepages lateinische Zeichen in voller Breite den gängigeren halbbreiten lateinischen Zeichen zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="ede1e-252">For example, for some code pages, full-width Latin characters map to the more common half-width Latin characters.</span></span> <span data-ttu-id="ede1e-253">Bei anderen Codepages hingegen erfolgt diese Zuordnung nicht.</span><span class="sxs-lookup"><span data-stu-id="ede1e-253">For other code pages, this mapping is not made.</span></span> <span data-ttu-id="ede1e-254">Selbst bei einer aggressiven Strategie mit ähnlichen Zeichen besteht in einigen Codierungen für manche Zeichen keine denkbare Zuordnung.</span><span class="sxs-lookup"><span data-stu-id="ede1e-254">Even under an aggressive best-fit strategy, there is no imaginable fit for some characters in some encodings.</span></span> <span data-ttu-id="ede1e-255">Ein chinesisches ideografisches Zeichen hat z. B. keine angemessene Zuordnung in der Codepage 1252.</span><span class="sxs-lookup"><span data-stu-id="ede1e-255">For example, a Chinese ideograph has no reasonable mapping to code page 1252.</span></span> <span data-ttu-id="ede1e-256">Im diesem Fall wird eine Ersatzzeichenfolge verwendet.</span><span class="sxs-lookup"><span data-stu-id="ede1e-256">In this case, a replacement string is used.</span></span> <span data-ttu-id="ede1e-257">Standardmäßig handelt es sich bei dieser Zeichenfolge um ein einzelnes QUESTION MARK (Fragezeichen, U+003F).</span><span class="sxs-lookup"><span data-stu-id="ede1e-257">By default, this string is just a single QUESTION MARK (U+003F).</span></span>

> [!NOTE]
> <span data-ttu-id="ede1e-258">Strategien mit ähnlichen Zeichen sind nicht detailliert dokumentiert.</span><span class="sxs-lookup"><span data-stu-id="ede1e-258">Best-fit strategies are not documented in detail.</span></span> <span data-ttu-id="ede1e-259">Einige Codepages sind jedoch auf der Website des [Unicode-Konsortiums](https://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WindowsBestFit/) dokumentiert.</span><span class="sxs-lookup"><span data-stu-id="ede1e-259">However, several code pages are documented at the [Unicode Consortium's](https://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WindowsBestFit/) website.</span></span> <span data-ttu-id="ede1e-260">Lesen Sie die **readme.txt**-Datei in diesem Ordner, um zu erfahren, wie die Zuordnungsdateien interpretiert werden.</span><span class="sxs-lookup"><span data-stu-id="ede1e-260">Please review the **readme.txt** file in that folder for a description of how to interpret the mapping files.</span></span>

<span data-ttu-id="ede1e-261">Im folgenden Beispiel wird die Codepage 1252 (Windows-Codepage für westeuropäische Sprachen) verwendet, um eine Zuordnung mit ähnlichen Zeichen und deren Nachteile zu veranschaulichen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-261">The following example uses code page 1252 (the Windows code page for Western European languages) to illustrate best-fit mapping and its drawbacks.</span></span> <span data-ttu-id="ede1e-262">Die <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> -Methode wird verwendet, um ein Codierungsobjekt für Codepage 1252 abzurufen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-262">The <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> method is used to retrieve an encoding object for code page 1252.</span></span> <span data-ttu-id="ede1e-263">Standardmäßig wird eine Zuordnung mit ähnlichen Zeichen für nicht unterstützte Unicode-Zeichen verwendet.</span><span class="sxs-lookup"><span data-stu-id="ede1e-263">By default, it uses a best-fit mapping for Unicode characters that it does not support.</span></span> <span data-ttu-id="ede1e-264">Im Beispiel wird eine Zeichenfolge instanziiert, die drei durch Leerzeichen getrennte Nicht-ASCII-Zeichen enthält: CIRCLED LATIN CAPITAL LETTER S (eingekreister lateinischer Großbuchstabe S, U+24C8), SUPERSCRIPT FIVE (hochgestellte Fünf, U+2075) und INFINITY (Unendlichkeit, U+221E).</span><span class="sxs-lookup"><span data-stu-id="ede1e-264">The example instantiates a string that contains three non-ASCII characters - CIRCLED LATIN CAPITAL LETTER S (U+24C8), SUPERSCRIPT FIVE (U+2075), and INFINITY (U+221E) - separated by spaces.</span></span> <span data-ttu-id="ede1e-265">Die Ausgabe im Beispiel zeigt, dass die drei ursprünglichen Nicht-Leerzeichen bei der Codierung der Zeichenfolge durch QUESTION MARK (Fragezeichen, U+003F), DIGIT FIVE (Ziffer Fünf, U+0035) und DIGIT EIGHT (Ziffer Acht, U+0038) ersetzt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-265">As the output from the example shows, when the string is encoded, the three original non-space characters are replaced by QUESTION MARK (U+003F), DIGIT FIVE (U+0035), and DIGIT EIGHT (U+0038).</span></span> <span data-ttu-id="ede1e-266">Insbesondere DIGIT EIGHT (Ziffer Acht) ist ein ungeeigneter Ersatz für das nicht unterstützte INFINITY-Zeichen (Unendlichkeit), und QUESTION MARK (Fragezeichen) weist darauf hin, dass für das ursprüngliche Zeichen keine Zuordnung verfügbar war.</span><span class="sxs-lookup"><span data-stu-id="ede1e-266">DIGIT EIGHT is a particularly poor replacement for the unsupported INFINITY character, and QUESTION MARK indicates that no mapping was available for the original character.</span></span>

[!code-csharp[Conceptual.Encoding#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/bestfit1.cs#1)]
[!code-vb[Conceptual.Encoding#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/bestfit1.vb#1)]

<span data-ttu-id="ede1e-267">Die Zuordnung mit ähnlichen Zeichen ist das Standardverhalten für ein <xref:System.Text.Encoding> -Objekt, das Unicode-Daten in Codepagedaten codiert. Es gibt ältere Anwendungen, die auf diesem Verhalten basieren.</span><span class="sxs-lookup"><span data-stu-id="ede1e-267">Best-fit mapping is the default behavior for an <xref:System.Text.Encoding> object that encodes Unicode data into code page data, and there are legacy applications that rely on this behavior.</span></span> <span data-ttu-id="ede1e-268">In den meisten neuen Anwendungen sollte dieses Verhalten jedoch aus Sicherheitsgründen vermieden werden.</span><span class="sxs-lookup"><span data-stu-id="ede1e-268">However, most new applications should avoid best-fit behavior for security reasons.</span></span> <span data-ttu-id="ede1e-269">Durch eine Codierung mit ähnlichen Zeichen sollten Anwendungen z. B. keinen Domänennamen ausdrücken.</span><span class="sxs-lookup"><span data-stu-id="ede1e-269">For example, applications should not put a domain name through a best-fit encoding.</span></span>

> [!NOTE]
> <span data-ttu-id="ede1e-270">Sie können für eine Codierung auch eine benutzerdefinierte Zuordnung mit einem Fallback mit ähnlichen Zeichen implementieren.</span><span class="sxs-lookup"><span data-stu-id="ede1e-270">You can also implement a custom best-fit fallback mapping for an encoding.</span></span> <span data-ttu-id="ede1e-271">Weitere Informationen finden Sie im Abschnitt [Implementing a Custom Fallback Strategy](character-encoding.md#Custom) .</span><span class="sxs-lookup"><span data-stu-id="ede1e-271">For more information, see the [Implementing a Custom Fallback Strategy](character-encoding.md#Custom) section.</span></span>

<span data-ttu-id="ede1e-272">Wenn der Fallback mit ähnlichen Zeichen die Standardeinstellung für ein Codierungsobjekt ist, können Sie eine andere Fallbackstrategie auswählen, wenn Sie ein <xref:System.Text.Encoding> -Objekt abrufen, indem Sie die <xref:System.Text.Encoding.GetEncoding%28System.Int32%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> -Überladung aufrufen oder die <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> -Überladung aufrufen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-272">If best-fit fallback is the default for an encoding object, you can choose another fallback strategy when you retrieve an <xref:System.Text.Encoding> object by calling the <xref:System.Text.Encoding.GetEncoding%28System.Int32%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> or <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> overload.</span></span> <span data-ttu-id="ede1e-273">Der folgende Abschnitt enthält ein Beispiel, in dem jedes Zeichen, das Codepage 1252 nicht zugeordnet werden kann, durch ein Sternchen (\*) ersetzt wird.</span><span class="sxs-lookup"><span data-stu-id="ede1e-273">The following section includes an example that replaces each character that cannot be mapped to code page 1252 with an asterisk (\*).</span></span>

[!code-csharp[Conceptual.Encoding#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/bestfit1a.cs#3)]
[!code-vb[Conceptual.Encoding#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/bestfit1a.vb#3)]

<a name="Replacement"></a>

### <a name="replacement-fallback"></a><span data-ttu-id="ede1e-274">Replacement Fallback</span><span class="sxs-lookup"><span data-stu-id="ede1e-274">Replacement Fallback</span></span>

<span data-ttu-id="ede1e-275">Wenn ein Zeichen nicht über eine genaue Entsprechung im Zielschema verfügt und kein entsprechendes Zeichen für eine Zuordnung vorhanden ist, kann die Anwendung ein Ersatzzeichen oder eine Ersatzzeichenfolge angeben.</span><span class="sxs-lookup"><span data-stu-id="ede1e-275">When a character does not have an exact match in the target scheme, but there is no appropriate character that it can be mapped to, the application can specify a replacement character or string.</span></span> <span data-ttu-id="ede1e-276">Dies ist das Standardverhalten für den Unicode-Decoder, der jede 2-Byte-Sequenz ersetzt, die nicht mit REPLACEMENT_CHARACTER (Ersatzzeichen, U+FFFD) decodiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="ede1e-276">This is the default behavior for the Unicode decoder, which replaces any two-byte sequence that it cannot decode with REPLACEMENT_CHARACTER (U+FFFD).</span></span> <span data-ttu-id="ede1e-277">Dies ist auch das Standardverhalten der <xref:System.Text.ASCIIEncoding> -Klasse, die jedes Zeichen, das nicht codiert oder decodiert werden kann, durch ein Fragezeichen ersetzt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-277">It is also the default behavior of the <xref:System.Text.ASCIIEncoding> class, which replaces each character that it cannot encode or decode with a question mark.</span></span> <span data-ttu-id="ede1e-278">Das folgende Beispiel veranschaulicht das Ersetzen von Zeichen für die Unicode-Zeichenfolge aus dem vorherigen Beispiel.</span><span class="sxs-lookup"><span data-stu-id="ede1e-278">The following example illustrates character replacement for the Unicode string from the previous example.</span></span> <span data-ttu-id="ede1e-279">Wie die Ausgabe zeigt, wird jedes Zeichen, das nicht in einen ASCII-Bytewert decodiert werden kann, durch 0x3F ersetzt, dem ASCII-Code für ein Fragezeichen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-279">As the output shows, each character that cannot be decoded into an ASCII byte value is replaced by 0x3F, which is the ASCII code for a question mark.</span></span>

[!code-csharp[Conceptual.Encoding#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/replacementascii.cs#2)]
[!code-vb[Conceptual.Encoding#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/replacementascii.vb#2)]

<span data-ttu-id="ede1e-280">.NET enthält die <xref:System.Text.EncoderReplacementFallback>-Klasse und die <xref:System.Text.DecoderReplacementFallback>-Klasse, die eine Ersatzzeichenfolge verwenden, wenn in einem Codierungs- oder Decodierungsvorgang keine genaue Zuordnung für ein Zeichen möglich ist.</span><span class="sxs-lookup"><span data-stu-id="ede1e-280">.NET includes the <xref:System.Text.EncoderReplacementFallback> and <xref:System.Text.DecoderReplacementFallback> classes, which substitute a replacement string if a character does not map exactly in an encoding or decoding operation.</span></span> <span data-ttu-id="ede1e-281">Standardmäßig ist diese Ersatzzeichenfolge ein Fragezeichen. Sie können jedoch eine Klassenkonstruktorüberladung aufrufen, um eine andere Zeichenfolge auszuwählen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-281">By default, this replacement string is a question mark, but you can call a class constructor overload to choose a different string.</span></span> <span data-ttu-id="ede1e-282">In der Regel handelt es sich bei der Ersatzzeichenfolge um ein einzelnes Zeichen. Dies ist aber nicht erforderlich.</span><span class="sxs-lookup"><span data-stu-id="ede1e-282">Typically, the replacement string is a single character, although this is not a requirement.</span></span> <span data-ttu-id="ede1e-283">Im folgenden Beispiel wird das Verhalten des Encoders für Codepage 1252 geändert, indem ein <xref:System.Text.EncoderReplacementFallback> -Objekt instanziiert wird, das ein Sternchen (\*) als Ersatzzeichenfolge verwendet.</span><span class="sxs-lookup"><span data-stu-id="ede1e-283">The following example changes the behavior of the code page 1252 encoder by instantiating an <xref:System.Text.EncoderReplacementFallback> object that uses an asterisk (\*) as a replacement string.</span></span>

[!code-csharp[Conceptual.Encoding#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/bestfit1a.cs#3)]
[!code-vb[Conceptual.Encoding#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/bestfit1a.vb#3)]

> [!NOTE]
> <span data-ttu-id="ede1e-284">Sie können für eine Codierung auch eine Ersatzklasse implementieren.</span><span class="sxs-lookup"><span data-stu-id="ede1e-284">You can also implement a replacement class for an encoding.</span></span> <span data-ttu-id="ede1e-285">Weitere Informationen finden Sie im Abschnitt [Implementing a Custom Fallback Strategy](character-encoding.md#Custom) .</span><span class="sxs-lookup"><span data-stu-id="ede1e-285">For more information, see the [Implementing a Custom Fallback Strategy](character-encoding.md#Custom) section.</span></span>

<span data-ttu-id="ede1e-286">Zusätzlich zu QUESTION MARK (Fragezeichen, U+003F) wird in der Regel REPLACEMENT CHARACTER (Unicode-Ersatzzeichen, U+FFFD) als Ersatzzeichenfolge verwendet, insbesondere bei der Decodierung von Bytesequenzen, die nicht erfolgreich in Unicode-Zeichen übersetzt werden können.</span><span class="sxs-lookup"><span data-stu-id="ede1e-286">In addition to QUESTION MARK (U+003F), the Unicode REPLACEMENT CHARACTER (U+FFFD) is commonly used as a replacement string, particularly when decoding byte sequences that cannot be successfully translated into Unicode characters.</span></span> <span data-ttu-id="ede1e-287">Allerdings können Sie eine beliebige Ersatzzeichenfolge auswählen, die mehrere Zeichen enthalten kann.</span><span class="sxs-lookup"><span data-stu-id="ede1e-287">However, you are free to choose any replacement string, and it can contain multiple characters.</span></span>

<a name="Exception"></a>

### <a name="exception-fallback"></a><span data-ttu-id="ede1e-288">Exception Fallback</span><span class="sxs-lookup"><span data-stu-id="ede1e-288">Exception Fallback</span></span>

<span data-ttu-id="ede1e-289">Anstatt einen Fallback mit ähnlichen Zeichen oder eine Ersatzzeichenfolge bereitzustellen, kann ein Encoder eine <xref:System.Text.EncoderFallbackException> auslösen, wenn die Codierung eines Satzes von Zeichen nicht möglich ist, und ein Decoder kann eine <xref:System.Text.DecoderFallbackException> auslösen, wenn ein Bytearray nicht decodiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="ede1e-289">Instead of providing a best-fit fallback or a replacement string, an encoder can throw an <xref:System.Text.EncoderFallbackException> if it is unable to encode a set of characters, and a decoder can throw a <xref:System.Text.DecoderFallbackException> if it is unable to decode a byte array.</span></span> <span data-ttu-id="ede1e-290">Um eine Ausnahme in Codierungs- und Decodierungsvorgängen auszulösen, übergeben Sie ein <xref:System.Text.EncoderExceptionFallback> -Objekt bzw. ein <xref:System.Text.DecoderExceptionFallback> -Objekt an die <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> -Methode.</span><span class="sxs-lookup"><span data-stu-id="ede1e-290">To throw an exception in encoding and decoding operations, you supply an <xref:System.Text.EncoderExceptionFallback> object and a <xref:System.Text.DecoderExceptionFallback> object, respectively, to the <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="ede1e-291">Im folgenden Beispiel wird ein Ausnahmefallback mit der <xref:System.Text.ASCIIEncoding> -Klasse veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="ede1e-291">The following example illustrates exception fallback with the <xref:System.Text.ASCIIEncoding> class.</span></span>

[!code-csharp[Conceptual.Encoding#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/exceptionascii.cs#4)]
[!code-vb[Conceptual.Encoding#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/exceptionascii.vb#4)]

> [!NOTE]
> <span data-ttu-id="ede1e-292">Sie können für einen Codierungsvorgang auch einen benutzerdefinierten Ausnahmehandler implementieren.</span><span class="sxs-lookup"><span data-stu-id="ede1e-292">You can also implement a custom exception handler for an encoding operation.</span></span> <span data-ttu-id="ede1e-293">Weitere Informationen finden Sie im Abschnitt [Implementing a Custom Fallback Strategy](character-encoding.md#Custom) .</span><span class="sxs-lookup"><span data-stu-id="ede1e-293">For more information, see the [Implementing a Custom Fallback Strategy](character-encoding.md#Custom) section.</span></span>

<span data-ttu-id="ede1e-294">Das <xref:System.Text.EncoderFallbackException> -Objekt und das <xref:System.Text.DecoderFallbackException> -Objekt stellen die folgenden Informationen über die Bedingung bereit, durch die die Ausnahme ausgelöst wurde:</span><span class="sxs-lookup"><span data-stu-id="ede1e-294">The <xref:System.Text.EncoderFallbackException> and <xref:System.Text.DecoderFallbackException> objects provide the following information about the condition that caused the exception:</span></span>

- <span data-ttu-id="ede1e-295">Das <xref:System.Text.EncoderFallbackException> -Objekt enthält eine <xref:System.Text.EncoderFallbackException.IsUnknownSurrogate%2A> -Methode, die angibt, ob die Zeichen, die nicht codiert werden können, ein unbekanntes Ersatzzeichenpaar darstellen (in diesem Fall gibt die Methode `true`zurück) oder ob sie ein unbekanntes einzelnes Zeichen darstellen (in diesem Fall gibt die Methode `false`zurück).</span><span class="sxs-lookup"><span data-stu-id="ede1e-295">The <xref:System.Text.EncoderFallbackException> object includes an <xref:System.Text.EncoderFallbackException.IsUnknownSurrogate%2A> method, which indicates whether the character or characters that cannot be encoded represent an unknown surrogate pair (in which case, the method returns `true`) or an unknown single character (in which case, the method returns `false`).</span></span> <span data-ttu-id="ede1e-296">Die Zeichen im Ersatzzeichenpaar sind über die <xref:System.Text.EncoderFallbackException.CharUnknownHigh%2A?displayProperty=nameWithType> -Eigenschaft und die <xref:System.Text.EncoderFallbackException.CharUnknownLow%2A?displayProperty=nameWithType> -Eigenschaft verfügbar.</span><span class="sxs-lookup"><span data-stu-id="ede1e-296">The characters in the surrogate pair are available from the <xref:System.Text.EncoderFallbackException.CharUnknownHigh%2A?displayProperty=nameWithType> and <xref:System.Text.EncoderFallbackException.CharUnknownLow%2A?displayProperty=nameWithType> properties.</span></span> <span data-ttu-id="ede1e-297">Das unbekannte einzelne Zeichen ist über die <xref:System.Text.EncoderFallbackException.CharUnknown%2A?displayProperty=nameWithType> -Eigenschaft verfügbar.</span><span class="sxs-lookup"><span data-stu-id="ede1e-297">The unknown single character is available from the <xref:System.Text.EncoderFallbackException.CharUnknown%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="ede1e-298">Die <xref:System.Text.EncoderFallbackException.Index%2A?displayProperty=nameWithType> -Eigenschaft gibt die Position in der Zeichenfolge an, an der das erste Zeichen gefunden wurde, das nicht codiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="ede1e-298">The <xref:System.Text.EncoderFallbackException.Index%2A?displayProperty=nameWithType> property indicates the position in the string at which the first character that could not be encoded was found.</span></span>

- <span data-ttu-id="ede1e-299">Das <xref:System.Text.DecoderFallbackException> -Objekt enthält eine <xref:System.Text.DecoderFallbackException.BytesUnknown%2A> -Eigenschaft, die ein Bytearray zurückgibt, das nicht decodiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="ede1e-299">The <xref:System.Text.DecoderFallbackException> object includes a <xref:System.Text.DecoderFallbackException.BytesUnknown%2A> property that returns an array of bytes that cannot be decoded.</span></span> <span data-ttu-id="ede1e-300">Die <xref:System.Text.DecoderFallbackException.Index%2A?displayProperty=nameWithType> -Eigenschaft gibt die Anfangsposition der unbekannten Bytes an.</span><span class="sxs-lookup"><span data-stu-id="ede1e-300">The <xref:System.Text.DecoderFallbackException.Index%2A?displayProperty=nameWithType> property indicates the starting position of the unknown bytes.</span></span>

<span data-ttu-id="ede1e-301">Obwohl das <xref:System.Text.EncoderFallbackException> -Objekt und das <xref:System.Text.DecoderFallbackException> -Objekt angemessene Diagnoseinformationen zu der Ausnahme bereitstellen, ermöglichen sie keinen Zugriff auf den Codierungs- oder Decodierungspuffer.</span><span class="sxs-lookup"><span data-stu-id="ede1e-301">Although the <xref:System.Text.EncoderFallbackException> and <xref:System.Text.DecoderFallbackException> objects provide adequate diagnostic information about the exception, they do not provide access to the encoding or decoding buffer.</span></span> <span data-ttu-id="ede1e-302">Daher ist es nicht möglich, innerhalb der Codierungs- oder Decodierungsmethode ungültige Daten zu ersetzen oder zu korrigieren.</span><span class="sxs-lookup"><span data-stu-id="ede1e-302">Therefore, they do not allow invalid data to be replaced or corrected within the encoding or decoding method.</span></span>

<a name="Custom"></a>

## <a name="implementing-a-custom-fallback-strategy"></a><span data-ttu-id="ede1e-303">Implementing a Custom Fallback Strategy</span><span class="sxs-lookup"><span data-stu-id="ede1e-303">Implementing a Custom Fallback Strategy</span></span>

<span data-ttu-id="ede1e-304">Neben der Zuordnung mit ähnlichen Zeichen, die intern von Codepages implementiert wird, beinhaltet .NET die folgenden Klassen für die Implementierung einer Fallbackstrategie:</span><span class="sxs-lookup"><span data-stu-id="ede1e-304">In addition to the best-fit mapping that is implemented internally by code pages, .NET includes the following classes for implementing a fallback strategy:</span></span>

- <span data-ttu-id="ede1e-305">Verwenden Sie <xref:System.Text.EncoderReplacementFallback> und <xref:System.Text.EncoderReplacementFallbackBuffer> , um Zeichen in Codierungsvorgängen zu ersetzen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-305">Use <xref:System.Text.EncoderReplacementFallback> and <xref:System.Text.EncoderReplacementFallbackBuffer> to replace characters in encoding operations.</span></span>

- <span data-ttu-id="ede1e-306">Verwenden Sie <xref:System.Text.DecoderReplacementFallback> und <xref:System.Text.DecoderReplacementFallbackBuffer> , um Zeichen in Decodierungsvorgängen zu ersetzen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-306">Use <xref:System.Text.DecoderReplacementFallback> and <xref:System.Text.DecoderReplacementFallbackBuffer> to replace characters in decoding operations.</span></span>

- <span data-ttu-id="ede1e-307">Verwenden Sie <xref:System.Text.EncoderExceptionFallback> und <xref:System.Text.EncoderExceptionFallbackBuffer> , um eine <xref:System.Text.EncoderFallbackException> auszulösen, wenn ein Zeichen nicht codiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="ede1e-307">Use <xref:System.Text.EncoderExceptionFallback> and <xref:System.Text.EncoderExceptionFallbackBuffer> to throw an <xref:System.Text.EncoderFallbackException> when a character cannot be encoded.</span></span>

- <span data-ttu-id="ede1e-308">Verwenden Sie <xref:System.Text.DecoderExceptionFallback> und <xref:System.Text.DecoderExceptionFallbackBuffer> , um eine <xref:System.Text.DecoderFallbackException> auszulösen, wenn ein Zeichen nicht decodiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="ede1e-308">Use <xref:System.Text.DecoderExceptionFallback> and <xref:System.Text.DecoderExceptionFallbackBuffer> to throw a <xref:System.Text.DecoderFallbackException> when a character cannot be decoded.</span></span>

<span data-ttu-id="ede1e-309">Darüber hinaus können Sie eine benutzerdefinierte Lösung implementieren, die den Fallback mit ähnlichen Zeichen, den Ersatzfallback oder den Ausnahmefallback verwendet. Führen Sie hierzu folgende Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="ede1e-309">In addition, you can implement a custom solution that uses best-fit fallback, replacement fallback, or exception fallback, by following these steps:</span></span>

1. <span data-ttu-id="ede1e-310">Leiten Sie für Codierungsvorgänge eine Klasse von <xref:System.Text.EncoderFallback> und für Decodierungsvorgänge eine Klasse von <xref:System.Text.DecoderFallback> ab.</span><span class="sxs-lookup"><span data-stu-id="ede1e-310">Derive a class from <xref:System.Text.EncoderFallback> for encoding operations, and from <xref:System.Text.DecoderFallback> for decoding operations.</span></span>

2. <span data-ttu-id="ede1e-311">Leiten Sie für Codierungsvorgänge eine Klasse von <xref:System.Text.EncoderFallbackBuffer> und für Decodierungsvorgänge eine Klasse von <xref:System.Text.DecoderFallbackBuffer> ab.</span><span class="sxs-lookup"><span data-stu-id="ede1e-311">Derive a class from <xref:System.Text.EncoderFallbackBuffer> for encoding operations, and from <xref:System.Text.DecoderFallbackBuffer> for decoding operations.</span></span>

3. <span data-ttu-id="ede1e-312">Wenn die vordefinierte <xref:System.Text.EncoderFallbackException> -Klasse und die vordefinierte <xref:System.Text.DecoderFallbackException> -Klasse für Ausnahmefallbacks nicht Ihren Anforderungen entspricht, leiten Sie eine Klasse von einem Ausnahmeobjekt ab, z. B. <xref:System.Exception> oder <xref:System.ArgumentException>.</span><span class="sxs-lookup"><span data-stu-id="ede1e-312">For exception fallback, if the predefined <xref:System.Text.EncoderFallbackException> and <xref:System.Text.DecoderFallbackException> classes do not meet your needs, derive a class from an exception object such as <xref:System.Exception> or <xref:System.ArgumentException>.</span></span>

### <a name="deriving-from-encoderfallback-or-decoderfallback"></a><span data-ttu-id="ede1e-313">Ableiten von EncoderFallback oder DecoderFallback</span><span class="sxs-lookup"><span data-stu-id="ede1e-313">Deriving from EncoderFallback or DecoderFallback</span></span>

<span data-ttu-id="ede1e-314">Um eine benutzerdefinierte Fallbacklösung zu implementieren, müssen Sie für Codierungsvorgänge eine Klasse erstellen, die von <xref:System.Text.EncoderFallback> erbt. Für Decodierungsvorgänge erstellen Sie eine Klasse, die von <xref:System.Text.DecoderFallback> erbt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-314">To implement a custom fallback solution, you must create a class that inherits from <xref:System.Text.EncoderFallback> for encoding operations, and from <xref:System.Text.DecoderFallback> for decoding operations.</span></span> <span data-ttu-id="ede1e-315">Instanzen dieser Klassen werden an die <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> -Methode übergeben und dienen als Vermittler zwischen der Codierungsklasse und der Fallbackimplementierung.</span><span class="sxs-lookup"><span data-stu-id="ede1e-315">Instances of these classes are passed to the <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> method and serve as the intermediary between the encoding class and the fallback implementation.</span></span>

<span data-ttu-id="ede1e-316">Beim Erstellen einer benutzerdefinierten Fallbacklösung für einen Encoder oder einen Decoder müssen Sie die folgenden Member implementieren:</span><span class="sxs-lookup"><span data-stu-id="ede1e-316">When you create a custom fallback solution for an encoder or decoder, you must implement the following members:</span></span>

- <span data-ttu-id="ede1e-317">Die <xref:System.Text.EncoderFallback.MaxCharCount%2A?displayProperty=nameWithType> -Eigenschaft oder die <xref:System.Text.DecoderFallback.MaxCharCount%2A?displayProperty=nameWithType> -Eigenschaft, die die höchstmögliche Anzahl von Zeichen zurückgibt, die der Fallback mit ähnlichen Zeichen, der Ersatz- oder der Ausnahmefallback zurückgeben kann, um ein einzelnes Zeichen zu ersetzen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-317">The <xref:System.Text.EncoderFallback.MaxCharCount%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallback.MaxCharCount%2A?displayProperty=nameWithType> property, which returns the maximum possible number of characters that the best-fit, replacement, or exception fallback can return to replace a single character.</span></span> <span data-ttu-id="ede1e-318">Für einen benutzerdefinierten Ausnahmefallback ist der Wert Null.</span><span class="sxs-lookup"><span data-stu-id="ede1e-318">For a custom exception fallback, its value is zero.</span></span>

- <span data-ttu-id="ede1e-319">Die <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> -Methode oder die <xref:System.Text.DecoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> -Methode, die die benutzerdefinierte <xref:System.Text.EncoderFallbackBuffer> -Implementierung oder die benutzerdefinierte <xref:System.Text.DecoderFallbackBuffer> -Implementierung zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-319">The <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> method, which returns your custom <xref:System.Text.EncoderFallbackBuffer> or <xref:System.Text.DecoderFallbackBuffer> implementation.</span></span> <span data-ttu-id="ede1e-320">Die Methode wird vom Encoder aufgerufen, wenn das erste Zeichen erkannt wird, das nicht erfolgreich codiert werden kann, oder vom Decoder, wenn das erste Byte erkannt wird, das nicht erfolgreich decodiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="ede1e-320">The method is called by the encoder when it encounters the first character that it is unable to successfully encode, or by the decoder when it encounters the first byte that it is unable to successfully decode.</span></span>

### <a name="deriving-from-encoderfallbackbuffer-or-decoderfallbackbuffer"></a><span data-ttu-id="ede1e-321">Ableiten von EncoderFallbackBuffer oder DecoderFallbackBuffer</span><span class="sxs-lookup"><span data-stu-id="ede1e-321">Deriving from EncoderFallbackBuffer or DecoderFallbackBuffer</span></span>

<span data-ttu-id="ede1e-322">Um eine benutzerdefinierte Fallbacklösung zu implementieren, müssen Sie für Codierungsvorgänge außerdem eine Klasse erstellen, die von <xref:System.Text.EncoderFallbackBuffer> erbt. Für Decodierungsvorgänge erstellen Sie eine Klasse, die von <xref:System.Text.DecoderFallbackBuffer> erbt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-322">To implement a custom fallback solution, you must also create a class that inherits from <xref:System.Text.EncoderFallbackBuffer> for encoding operations, and from <xref:System.Text.DecoderFallbackBuffer> for decoding operations.</span></span> <span data-ttu-id="ede1e-323">Instanzen dieser Klasse werden von der <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A> -Methode der <xref:System.Text.EncoderFallback> -Klasse und der <xref:System.Text.DecoderFallback> -Klasse zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="ede1e-323">Instances of these classes are returned by the <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A> method  of the <xref:System.Text.EncoderFallback> and <xref:System.Text.DecoderFallback> classes.</span></span> <span data-ttu-id="ede1e-324">Die <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> -Methode wird vom Encoder aufgerufen, wenn das erste Zeichen erkannt wird, das nicht codiert werden kann. Die <xref:System.Text.DecoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> -Methode wird vom Decoder aufgerufen, wenn ein oder mehrere Bytes erkannt werden, die nicht decodiert werden können.</span><span class="sxs-lookup"><span data-stu-id="ede1e-324">The <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> method is called by the encoder when it encounters the first character that it is not able to encode, and the <xref:System.Text.DecoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> method is called by the decoder when it encounters one or more bytes that it is not able to decode.</span></span> <span data-ttu-id="ede1e-325">Die <xref:System.Text.EncoderFallbackBuffer> -Klasse und die <xref:System.Text.DecoderFallbackBuffer> -Klasse stellen die Fallbackimplementierung bereit.</span><span class="sxs-lookup"><span data-stu-id="ede1e-325">The <xref:System.Text.EncoderFallbackBuffer> and <xref:System.Text.DecoderFallbackBuffer> classes provide the fallback implementation.</span></span> <span data-ttu-id="ede1e-326">Jede Instanz stellt einen Puffer dar, der die Fallbackzeichen enthält, die das Zeichen ersetzen, das nicht codiert werden kann, bzw. die die Bytesequenz ersetzen, die nicht decodiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="ede1e-326">Each instance represents a buffer that contains the fallback characters that will replace the character that cannot be encoded or the byte sequence that cannot be decoded.</span></span>

<span data-ttu-id="ede1e-327">Beim Erstellen einer benutzerdefinierten Fallbacklösung für einen Encoder oder einen Decoder müssen Sie die folgenden Member implementieren:</span><span class="sxs-lookup"><span data-stu-id="ede1e-327">When you create a custom fallback solution for an encoder or decoder, you must implement the following members:</span></span>

- <span data-ttu-id="ede1e-328"><xref:System.Text.EncoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> oder die <xref:System.Text.DecoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> -Methode.</span><span class="sxs-lookup"><span data-stu-id="ede1e-328">The <xref:System.Text.EncoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="ede1e-329"><xref:System.Text.EncoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> wird vom Encoder aufgerufen, um dem Fallbackpuffer Informationen über das Zeichen bereitzustellen, das nicht codiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="ede1e-329"><xref:System.Text.EncoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> is called by the encoder to provide the fallback buffer with information about the character that it cannot encode.</span></span> <span data-ttu-id="ede1e-330">Da das zu codierende Zeichen möglicherweise ein Ersatzzeichenpaar ist, wird diese Methode überladen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-330">Because the character to be encoded may be a surrogate pair, this method is overloaded.</span></span> <span data-ttu-id="ede1e-331">Einer Überladung werden das zu codierende Zeichen und der zugehörige Index in der Zeichenfolge übergeben.</span><span class="sxs-lookup"><span data-stu-id="ede1e-331">One overload is passed the character to be encoded and its index in the string.</span></span> <span data-ttu-id="ede1e-332">Der zweiten Überladung werden das hohe und das niedrige Ersatzzeichen zusammen mit dem Index in der Zeichenfolge übergeben.</span><span class="sxs-lookup"><span data-stu-id="ede1e-332">The second overload is passed the high and low surrogate along with its index in the string.</span></span> <span data-ttu-id="ede1e-333">Die <xref:System.Text.DecoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> -Methode wird vom Decoder aufgerufen, um dem Fallbackpuffer Informationen über die Bytes bereitzustellen, die nicht decodiert werden können.</span><span class="sxs-lookup"><span data-stu-id="ede1e-333">The <xref:System.Text.DecoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> method is called by the decoder to provide the fallback buffer with information about the bytes that it cannot decode.</span></span> <span data-ttu-id="ede1e-334">Dieser Methode wird zusammen mit dem Index des ersten Bytes ein Bytearray übergeben, das nicht decodiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="ede1e-334">This method is passed an array of bytes that it cannot decode, along with the index of the first byte.</span></span> <span data-ttu-id="ede1e-335">Die Fallbackmethode sollte `true` zurückgeben, wenn der Fallbackpuffer ein ähnliches Zeichen oder ein bzw. mehrere Ersatzzeichen bereitstellen kann. Andernfalls sollte sie `false`zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="ede1e-335">The fallback method should return `true` if the fallback buffer can supply a best-fit or replacement character or characters; otherwise, it should return `false`.</span></span> <span data-ttu-id="ede1e-336">Bei einem Ausnahmefallback sollte die Fallbackmethode eine Ausnahme auslösen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-336">For an exception fallback, the fallback method should throw an exception.</span></span>

- <span data-ttu-id="ede1e-337">Die <xref:System.Text.EncoderFallbackBuffer.GetNextChar%2A?displayProperty=nameWithType> -Methode oder die <xref:System.Text.DecoderFallbackBuffer.GetNextChar%2A?displayProperty=nameWithType> -Methode, die wiederholt vom Encoder oder Decoder aufgerufen wird, um das nächste Zeichen aus dem Fallbackpuffer abzurufen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-337">The <xref:System.Text.EncoderFallbackBuffer.GetNextChar%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.GetNextChar%2A?displayProperty=nameWithType> method, which is called repeatedly by the encoder or decoder to get the next character from the fallback buffer.</span></span> <span data-ttu-id="ede1e-338">Wenn alle Fallbackzeichen zurückgegeben wurden, sollte die Methode U+0000 zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="ede1e-338">When all fallback characters have been returned, the method should return U+0000.</span></span>

- <span data-ttu-id="ede1e-339">Die <xref:System.Text.EncoderFallbackBuffer.Remaining%2A?displayProperty=nameWithType> -Eigenschaft oder die <xref:System.Text.DecoderFallbackBuffer.Remaining%2A?displayProperty=nameWithType> -Eigenschaft, die die Anzahl der Zeichen zurückgibt, die im Fallbackpuffer verbleiben.</span><span class="sxs-lookup"><span data-stu-id="ede1e-339">The <xref:System.Text.EncoderFallbackBuffer.Remaining%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.Remaining%2A?displayProperty=nameWithType> property, which returns the number of characters remaining in the fallback buffer.</span></span>

- <span data-ttu-id="ede1e-340">Die <xref:System.Text.EncoderFallbackBuffer.MovePrevious%2A?displayProperty=nameWithType> -Methode oder die <xref:System.Text.DecoderFallbackBuffer.MovePrevious%2A?displayProperty=nameWithType> -Methode, die die aktuelle Position im Fallbackpuffer zum vorangehenden Zeichen verschiebt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-340">The <xref:System.Text.EncoderFallbackBuffer.MovePrevious%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.MovePrevious%2A?displayProperty=nameWithType> method, which moves the current position in the fallback buffer to the previous character.</span></span>

- <span data-ttu-id="ede1e-341">Die <xref:System.Text.EncoderFallbackBuffer.Reset%2A?displayProperty=nameWithType> -Methode oder die <xref:System.Text.DecoderFallbackBuffer.Reset%2A?displayProperty=nameWithType> -Methode, die den Fallbackpuffer erneut initialisiert.</span><span class="sxs-lookup"><span data-stu-id="ede1e-341">The <xref:System.Text.EncoderFallbackBuffer.Reset%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.Reset%2A?displayProperty=nameWithType> method, which reinitializes the fallback buffer.</span></span>

<span data-ttu-id="ede1e-342">Wenn es sich bei der Fallbackimplementierung um einen Fallback mit ähnlichen Zeichen oder einen Ersatzfallback handelt, enthalten die von <xref:System.Text.EncoderFallbackBuffer> und <xref:System.Text.DecoderFallbackBuffer> abgeleiteten Klassen außerdem zwei private Instanzfelder: die genaue Anzahl von Zeichen im Puffer und der Index des nächsten Zeichens im Puffer, das zurückgegeben werden soll.</span><span class="sxs-lookup"><span data-stu-id="ede1e-342">If the fallback implementation is a best-fit fallback or a replacement fallback, the classes derived from <xref:System.Text.EncoderFallbackBuffer> and <xref:System.Text.DecoderFallbackBuffer> also maintain two private instance fields: the exact number of characters in the buffer; and the index of the next character in the buffer to return.</span></span>

### <a name="an-encoderfallback-example"></a><span data-ttu-id="ede1e-343">Ein EncoderFallback-Beispiel</span><span class="sxs-lookup"><span data-stu-id="ede1e-343">An EncoderFallback Example</span></span>

<span data-ttu-id="ede1e-344">In einem früheren Beispiel wurde ein Ersatzfallback verwendet, um Unicode-Zeichen, die keinen ASCII-Zeichen entsprachen, durch ein Sternchen (\*) zu ersetzen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-344">An earlier example used replacement fallback to replace Unicode characters that did not correspond to ASCII characters with an asterisk (\*).</span></span> <span data-ttu-id="ede1e-345">Im folgenden Beispiel wird stattdessen eine benutzerdefinierte Implementierung mit ähnlichen Zeichen verwendet, um eine bessere Zuordnung von Nicht-ASCII-Zeichen zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="ede1e-345">The following example uses a custom best-fit fallback implementation instead to provide a better mapping of non-ASCII characters.</span></span>

<span data-ttu-id="ede1e-346">Der folgende Code definiert eine von `CustomMapper` abgeleitete Klasse mit dem Namen <xref:System.Text.EncoderFallback> , um die Zuordnung mit ähnlichen Zeichen für Nicht-ASCII-Zeichen zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="ede1e-346">The following code defines a class named `CustomMapper` that is derived from <xref:System.Text.EncoderFallback> to handle the best-fit mapping of non-ASCII characters.</span></span> <span data-ttu-id="ede1e-347">Die `CreateFallbackBuffer` -Methode gibt ein `CustomMapperFallbackBuffer` -Objekt zurück, das die <xref:System.Text.EncoderFallbackBuffer> -Implementierung bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-347">Its `CreateFallbackBuffer` method returns a `CustomMapperFallbackBuffer` object, which provides the <xref:System.Text.EncoderFallbackBuffer> implementation.</span></span> <span data-ttu-id="ede1e-348">Die `CustomMapper` -Klasse verwendet ein <xref:System.Collections.Generic.Dictionary%602> -Objekt, um die Zuordnungen von nicht unterstützten Unicode-Zeichen (Schlüsselwert) und den entsprechenden 8-Bit-Zeichen (die in zwei aufeinander folgenden Bytes in einer 64-Bit-Ganzzahl gespeichert sind) zu speichern.</span><span class="sxs-lookup"><span data-stu-id="ede1e-348">The `CustomMapper` class uses a <xref:System.Collections.Generic.Dictionary%602> object to store the mappings of unsupported Unicode characters (the key value) and their corresponding 8-bit characters (which are stored in two consecutive bytes in a 64-bit integer).</span></span> <span data-ttu-id="ede1e-349">Um dem Fallbackpuffer diese Zuordnung zur Verfügung zu stellen, wird die `CustomMapper` -Instanz als Parameter an den `CustomMapperFallbackBuffer` -Klassenkonstruktor übergeben.</span><span class="sxs-lookup"><span data-stu-id="ede1e-349">To make this mapping available to the fallback buffer, the `CustomMapper` instance is passed as a parameter to the `CustomMapperFallbackBuffer` class constructor.</span></span> <span data-ttu-id="ede1e-350">Da die längste Zuordnung die Zeichenfolge "INF" für das Unicode-Zeichen U+221E ist, gibt die `MaxCharCount` -Eigenschaft 3 zurück.</span><span class="sxs-lookup"><span data-stu-id="ede1e-350">Because the longest mapping is the string "INF" for the Unicode character U+221E, the `MaxCharCount` property returns 3.</span></span>

[!code-csharp[Conceptual.Encoding#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/custom1.cs#5)]
[!code-vb[Conceptual.Encoding#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/custom1.vb#5)]

<span data-ttu-id="ede1e-351">Der folgende Code definiert die `CustomMapperFallbackBuffer` -Klasse, die von <xref:System.Text.EncoderFallbackBuffer>abgeleitet wird.</span><span class="sxs-lookup"><span data-stu-id="ede1e-351">The following code defines the `CustomMapperFallbackBuffer` class, which is derived from <xref:System.Text.EncoderFallbackBuffer>.</span></span> <span data-ttu-id="ede1e-352">Das Wörterbuch, das die Zuordnung mit ähnlichen Zeichen enthält und in der `CustomMapper` -Instanz definiert ist, ist über den Klassenkonstruktor verfügbar.</span><span class="sxs-lookup"><span data-stu-id="ede1e-352">The dictionary that contains best-fit mappings and that is defined in the `CustomMapper` instance is available from its class constructor.</span></span> <span data-ttu-id="ede1e-353">Die `Fallback` -Methode gibt `true` zurück, wenn eines der Unicode-Zeichen, das der ASCII-Encoder nicht codieren kann, im Zuordnungswörterbuch definiert ist. Andernfalls wird `false`zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="ede1e-353">Its `Fallback` method returns `true` if any of the Unicode characters that the ASCII encoder cannot encode are defined in the mapping dictionary; otherwise, it returns `false`.</span></span> <span data-ttu-id="ede1e-354">Bei jedem Fallback gibt die private `count` -Variable die Anzahl von Zeichen an, die noch zurückgegeben werden. Die private `index` -Variable gibt die Position im Zeichenfolgenpuffer ( `charsToReturn`) des nächsten zurückzugebenden Zeichens an.</span><span class="sxs-lookup"><span data-stu-id="ede1e-354">For each fallback, the private `count` variable indicates the number of characters that remain to be returned, and the private `index` variable indicates the position in the string buffer, `charsToReturn`, of the next character to return.</span></span>

[!code-csharp[Conceptual.Encoding#6](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/custom1.cs#6)]
[!code-vb[Conceptual.Encoding#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/custom1.vb#6)]

<span data-ttu-id="ede1e-355">Dann instanziiert der folgende Code das `CustomMapper` -Objekt und übergibt eine Instanz dieses Objekts an die <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> -Methode.</span><span class="sxs-lookup"><span data-stu-id="ede1e-355">The following code then instantiates the `CustomMapper` object and passes an instance of it to the <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="ede1e-356">Die Ausgabe zeigt, dass die Fallbackimplementierung mit ähnlichen Zeichen die drei Nicht-ASCII-Zeichen in der ursprünglichen Zeichenfolge erfolgreich behandelt.</span><span class="sxs-lookup"><span data-stu-id="ede1e-356">The output indicates that the best-fit fallback implementation successfully handles the three non-ASCII characters in the original string.</span></span>

[!code-csharp[Conceptual.Encoding#7](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/custom1.cs#7)]
[!code-vb[Conceptual.Encoding#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/custom1.vb#7)]

## <a name="see-also"></a><span data-ttu-id="ede1e-357">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="ede1e-357">See also</span></span>

- [<span data-ttu-id="ede1e-358">Einführung in die Zeichencodierung in .NET</span><span class="sxs-lookup"><span data-stu-id="ede1e-358">Introduction to character encoding in .NET</span></span>](character-encoding-introduction.md)
- <xref:System.Text.Encoder>
- <xref:System.Text.Decoder>
- <xref:System.Text.DecoderFallback>
- <xref:System.Text.Encoding>
- <xref:System.Text.EncoderFallback>
- [<span data-ttu-id="ede1e-359">Globalisierung und Lokalisierung</span><span class="sxs-lookup"><span data-stu-id="ede1e-359">Globalization and Localization</span></span>](../globalization-localization/index.md)
