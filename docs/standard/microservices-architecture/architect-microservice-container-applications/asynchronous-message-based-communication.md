---
title: Asynchrone nachrichtenbasierte Kommunikation
description: ".NET Microservices Architektur für Datenvolumes .NET-Anwendungen | Asynchrone nachrichtenbasierte Kommunikation"
keywords: Docker, Microservices, ASP.NET, Container
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: df39771295d12e122edbe27e91cd899e3318e301
ms.sourcegitcommit: c2e216692ef7576a213ae16af2377cd98d1a67fa
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/22/2017
---
# <a name="asynchronous-message-based-communication"></a><span data-ttu-id="b2759-104">Asynchrone nachrichtenbasierte Kommunikation</span><span class="sxs-lookup"><span data-stu-id="b2759-104">Asynchronous message-based communication</span></span>

<span data-ttu-id="b2759-105">Asynchrones messaging und ereignisgesteuerte Kommunikation sind entscheidend, bei der Weitergabe von Änderungen über mehrere Microservices und ihre verknüpften Domänenmodelle.</span><span class="sxs-lookup"><span data-stu-id="b2759-105">Asynchronous messaging and event-driven communication are critical when propagating changes across multiple microservices and their related domain models.</span></span> <span data-ttu-id="b2759-106">Wie weiter oben in der Erläuterung Microservices und Kontexte begrenzt (BCs) erwähnt, können Modelle (Benutzer, Kunde, Produkt, Konto usw.) verschiedene Bedeutungen für verschiedene Microservices oder BCs bedeuten.</span><span class="sxs-lookup"><span data-stu-id="b2759-106">As mentioned earlier in the discussion microservices and Bounded Contexts (BCs), models (User, Customer, Product, Account, etc.) can mean different things to different microservices or BCs.</span></span> <span data-ttu-id="b2759-107">Das bedeutet, dass beim Auftreten von Änderungen Abstimmen von Änderungen über die verschiedenen Modelle in irgendeiner Weise erforderlich.</span><span class="sxs-lookup"><span data-stu-id="b2759-107">That means that when changes occur, you need some way to reconcile changes across the different models.</span></span> <span data-ttu-id="b2759-108">Eine Lösung ist die letztliche Konsistenz und ereignisgesteuerte Kommunikation basierend auf asynchrones messaging.</span><span class="sxs-lookup"><span data-stu-id="b2759-108">A solution is eventual consistency and event-driven communication based on asynchronous messaging.</span></span>

<span data-ttu-id="b2759-109">Bei der Verwendung von messaging kommunizieren Prozesse Nachrichtenaustausch asynchron.</span><span class="sxs-lookup"><span data-stu-id="b2759-109">When using messaging, processes communicate by exchanging messages asynchronously.</span></span> <span data-ttu-id="b2759-110">Ein Client stellt einen Befehl oder eine Anforderung an einen Dienst durch Senden einer Nachricht.</span><span class="sxs-lookup"><span data-stu-id="b2759-110">A client makes a command or a request to a service by sending it a message.</span></span> <span data-ttu-id="b2759-111">Wenn der Dienst Antworten muss, sendet er eine andere Meldung zurück an den Client.</span><span class="sxs-lookup"><span data-stu-id="b2759-111">If the service needs to reply, it sends a different message back to the client.</span></span> <span data-ttu-id="b2759-112">Da eine nachrichtenbasierte Kommunikation ist, nimmt der Client an, dass die Antwort nicht sofort empfangen werden und möglicherweise gibt es keine Antwort überhaupt.</span><span class="sxs-lookup"><span data-stu-id="b2759-112">Since it is a message-based communication, the client assumes that the reply will not be received immediately, and that there might be no response at all.</span></span>

<span data-ttu-id="b2759-113">Eine Nachricht wird durch einen Header (z. B. Kennung oder Sicherheitsinformationen Metadaten) und einen Text verfasst.</span><span class="sxs-lookup"><span data-stu-id="b2759-113">A message is composed by a header (metadata such as identification or security information) and a body.</span></span> <span data-ttu-id="b2759-114">Nachrichten werden in der Regel über asynchrone Protokolle wie AMQP gesendet.</span><span class="sxs-lookup"><span data-stu-id="b2759-114">Messages are usually sent through asynchronous protocols like AMQP.</span></span>

<span data-ttu-id="b2759-115">Die bevorzugte Infrastruktur für diese Art der Kommunikation in der Microservices-Community ist eine einfache nachrichtenbroker, dem unterscheidet, die große Brokern und Orchestrators in SOA verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="b2759-115">The preferred infrastructure for this type of communication in the microservices community is a lightweight message broker, which is different than the large brokers and orchestrators used in SOA.</span></span> <span data-ttu-id="b2759-116">In einem einfachen nachrichtenbroker ist die Infrastruktur in der Regel "dumb," nur als ein nachrichtenbroker, mit für einfache Implementierungen, z. B. RabbitMQ oder einen skalierbaren Servicebus in der Cloud wie Azure Service Bus fungiert.</span><span class="sxs-lookup"><span data-stu-id="b2759-116">In a lightweight message broker, the infrastructure is typically “dumb,” acting only as a message broker, with simple implementations such as RabbitMQ or a scalable service bus in the cloud like Azure Service Bus.</span></span> <span data-ttu-id="b2759-117">In diesem Szenario die meisten "Intelligenz" weiterhin lebt in die Endpunkte, die erzeugt und Nachrichten zu nutzen, d. h. in der Microservices.</span><span class="sxs-lookup"><span data-stu-id="b2759-117">In this scenario, most of the “smart” thinking still lives in the endpoints that are producing and consuming messages—that is, in the microservices.</span></span>

<span data-ttu-id="b2759-118">Eine andere Regel, Sie versuchen sollten, die folgen, so weit wie möglich, ist, zur Verwendung nur asynchrones messaging zwischen den internen Diensten, und verwenden Sie die synchrone Kommunikation (z. B. HTTP) nur über die Client-apps auf die Front-End-Dienste (API-Gateways sowie die erste Ebene der Microservices).</span><span class="sxs-lookup"><span data-stu-id="b2759-118">Another rule you should try to follow, as much as possible, is to use only asynchronous messaging between the internal services, and to use synchronous communication (such as HTTP) only from the client apps to the front-end services (API Gateways plus the first level of microservices).</span></span>

<span data-ttu-id="b2759-119">Es gibt zwei Arten von asynchronen messaging-Kommunikation: einzelnen Empfänger meldungsbasierte Kommunikation und mehrere Empfänger nachrichtenbasierte Kommunikation.</span><span class="sxs-lookup"><span data-stu-id="b2759-119">There are two kinds of asynchronous messaging communication: single receiver message-based communication, and multiple receivers message-based communication.</span></span> <span data-ttu-id="b2759-120">In den folgenden Abschnitten bieten wir die Einzelheiten zu diesen.</span><span class="sxs-lookup"><span data-stu-id="b2759-120">In the following sections we provide details about them.</span></span>

## <a name="single-receiver-message-based-communication"></a><span data-ttu-id="b2759-121">Single-Empfänger meldungsbasierte Kommunikation</span><span class="sxs-lookup"><span data-stu-id="b2759-121">Single-receiver message-based communication</span></span> 

<span data-ttu-id="b2759-122">Asynchrone Kommunikation mit einem einzelnen Empfänger nachrichtenbasierte bedeutet, dass es Punkt-Kommunikation, die mit genau einem der Consumer eine Nachricht übermittelt werden, ist, die das Lesen aus dem Kanal und die Nachricht wird nur einmal verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="b2759-122">Message-based asynchronous communication with a single receiver means there is point-to-point communication that delivers a message to exactly one of the consumers that is reading from the channel, and that the message is processed just once.</span></span> <span data-ttu-id="b2759-123">Es gibt jedoch spezielle Situationen.</span><span class="sxs-lookup"><span data-stu-id="b2759-123">However, there are special situations.</span></span> <span data-ttu-id="b2759-124">Beispielsweise konnte in einem Cloud-System, die versucht, automatisch nach Fehlern wiederherstellen, die gleiche Nachricht mehrere Male gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="b2759-124">For instance, in a cloud system that tries to automatically recover from failures, the same message could be sent multiple times.</span></span> <span data-ttu-id="b2759-125">Aufgrund eines Netzwerk- oder andere Fehler der Client muss, damit ein Wiederholungsversuch sendende von Nachrichten werden, und der Server hat einen Vorgang, um Idempotent sein, um auf eine bestimmte Nachricht nur einmal verarbeiten implementieren.</span><span class="sxs-lookup"><span data-stu-id="b2759-125">Due to network or other failures, the client has to be able to retry sending messages, and the server has to implement an operation to be idempotent in order to process a particular message just once.</span></span>

<span data-ttu-id="b2759-126">Single-Empfänger meldungsbasierte Kommunikation eignet sich besonders gut für das Senden von asynchrone Befehle aus einem Microservice zu einem anderen wie in Abbildung 4 – 18 dargestellt, die diesen Ansatz veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="b2759-126">Single-receiver message-based communication is especially well suited for sending asynchronous commands from one microservice to another as shown in Figure 4-18 that illustrates this approach.</span></span>

<span data-ttu-id="b2759-127">Wenn Sie anfangen, meldungsbasierte Kommunikation (entweder mit Befehle oder Ereignisse) senden, sollten Sie das Mischen von meldungsbasierte Kommunikation mit einer synchronen HTTP-Kommunikation.</span><span class="sxs-lookup"><span data-stu-id="b2759-127">Once you start sending message-based communication (either with commands or events), you should avoid mixing message-based communication with synchronous HTTP communication.</span></span>

![](./media/image18.PNG)

<span data-ttu-id="b2759-128">**Abbildung 4 – 18**.</span><span class="sxs-lookup"><span data-stu-id="b2759-128">**Figure 4-18**.</span></span> <span data-ttu-id="b2759-129">Eine einzelne Microservice Empfang einer asynchronen</span><span class="sxs-lookup"><span data-stu-id="b2759-129">A single microservice receiving an asynchronous message</span></span>

<span data-ttu-id="b2759-130">Beachten Sie, wenn die Befehle von Clientanwendungen stammen, aber als HTTP-synchrone Befehle implementiert werden können.</span><span class="sxs-lookup"><span data-stu-id="b2759-130">Note that when the commands come from client applications, they can be implemented as HTTP synchronous commands.</span></span> <span data-ttu-id="b2759-131">Sie sollten nachrichtenbasierte Befehle verwenden, wenn Sie eine bessere Skalierbarkeit benötigen oder wenn Sie bereits in einem nachrichtenbasierte Geschäftsprozess.</span><span class="sxs-lookup"><span data-stu-id="b2759-131">You should use message-based commands when you need higher scalability or when you are already in a message-based business process.</span></span>

## <a name="multiple-receivers-message-based-communication"></a><span data-ttu-id="b2759-132">Mehrere Empfänger meldungsbasierte Kommunikation</span><span class="sxs-lookup"><span data-stu-id="b2759-132">Multiple-receivers message-based communication</span></span> 

<span data-ttu-id="b2759-133">Als einen noch flexibleren Ansatz können Sie auch einen Veröffentlichungs-/Abonnementmechanismus verwenden möchten, damit die Kommunikation vom Absender an zusätzliche Abonnenten Microservices oder externe Anwendungen zur Verfügung stehen.</span><span class="sxs-lookup"><span data-stu-id="b2759-133">As a more flexible approach, you might also want to use a publish/subscribe mechanism so that your communication from the sender will be available to additional subscriber microservices or to external applications.</span></span> <span data-ttu-id="b2759-134">Daher hilft Ihnen, befolgen die [öffnen/schließen Prinzip](https://en.wikipedia.org/wiki/Open/closed_principle) in den sendenden Dienst.</span><span class="sxs-lookup"><span data-stu-id="b2759-134">Thus, it helps you to follow the [open/closed principle](https://en.wikipedia.org/wiki/Open/closed_principle) in the sending service.</span></span> <span data-ttu-id="b2759-135">Auf diese Weise können zusätzliche Abonnenten in der Zukunft ohne die Notwendigkeit, ändern Sie den Absender-Dienst hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="b2759-135">That way, additional subscribers can be added in the future without the need to modify the sender service.</span></span>

<span data-ttu-id="b2759-136">Wenn Sie eine Veröffentlichen/Abonnieren-Kommunikation verwenden, verwenden Sie möglicherweise eine Ereignisschnittstelle Bus, Veröffentlichen von Ereignissen an alle Abonnenten.</span><span class="sxs-lookup"><span data-stu-id="b2759-136">When you use a publish/subscribe communication, you might be using an event bus interface to publish events to any subscriber.</span></span>

## <a name="asynchronous-event-driven-communication"></a><span data-ttu-id="b2759-137">Asynchrone Kommunikation mit ereignisgesteuerte</span><span class="sxs-lookup"><span data-stu-id="b2759-137">Asynchronous event-driven communication</span></span>

<span data-ttu-id="b2759-138">Bei Verwendung asynchronen ereignisgesteuerte Kommunikation veröffentlicht ein Microservice ein Integration-Ereignis, wenn etwas innerhalb seiner Domäne passiert und einem anderen Microservice kennen sollten, wie eine Preisänderung in einer Product Catalog Microservice muss.</span><span class="sxs-lookup"><span data-stu-id="b2759-138">When using asynchronous event-driven communication, a microservice publishes an integration event when something happens within its domain and another microservice needs to be aware of it, like a price change in a product catalog microservice.</span></span> <span data-ttu-id="b2759-139">Zusätzliche Microservices abonnieren die Ereignisse, damit sie asynchron empfangen können.</span><span class="sxs-lookup"><span data-stu-id="b2759-139">Additional microservices subscribe to the events so they can receive them asynchronously.</span></span> <span data-ttu-id="b2759-140">In diesem Fall können der Empfänger ihrer eigenen Domänenentitäten aktualisieren dadurch weitere integrationsereignisse veröffentlicht werden können.</span><span class="sxs-lookup"><span data-stu-id="b2759-140">When that happens, the receivers might update their own domain entities, which can cause more integration events to be published.</span></span> <span data-ttu-id="b2759-141">Dieses Veröffentlichen/Abonnieren-Systems erfolgt in der Regel über eine Implementierung von einem Ereignisbus.</span><span class="sxs-lookup"><span data-stu-id="b2759-141">This publish/subscribe system is usually performed by using an implementation of an event bus.</span></span> <span data-ttu-id="b2759-142">Als eine Abstraktion oder einer Schnittstelle, mit der API, die zum Abonnieren und Kündigen von Ereignissen und zum Veröffentlichen von Ereignissen erforderlich ist, kann der-Ereignisbus entworfen werden.</span><span class="sxs-lookup"><span data-stu-id="b2759-142">The event bus can be designed as an abstraction or interface, with the API that is needed to subscribe or unsubscribe to events and to publish events.</span></span> <span data-ttu-id="b2759-143">Der Ereignisbus kann auch ein oder mehrere Implementierungen auf Grundlage alle Broker Inter-process und messaging, z. B. eine Nachrichtenwarteschlange oder Servicebus, die asynchrone Kommunikation und ein Veröffentlichen/Abonnieren-Modell unterstützt.</span><span class="sxs-lookup"><span data-stu-id="b2759-143">The event bus can also have one or more implementations based on any inter-process and messaging broker, like a messaging queue or service bus that supports asynchronous communication and a publish/subscribe model.</span></span>

<span data-ttu-id="b2759-144">Wenn ein System eventuellen Konsistenz durch integrationsereignisse verursachten verwendet wird, wird empfohlen, dass dieser Ansatz für den Endbenutzer vollständig deaktivieren vorgenommen werden.</span><span class="sxs-lookup"><span data-stu-id="b2759-144">If a system uses eventual consistency driven by integration events, it is recommended that this approach be made completely clear to the end user.</span></span> <span data-ttu-id="b2759-145">Das System sollten keinen Ansatz verwenden, der integrationsereignisse wie SignalR oder Abruf Systeme vom Client imitiert.</span><span class="sxs-lookup"><span data-stu-id="b2759-145">The system should not use an approach that mimics integration events, like SignalR or polling systems from the client.</span></span> <span data-ttu-id="b2759-146">Der Endbenutzer und der Geschäftseigentümer müssen explizit eventuellen Konsistenz im System zu nutzen, und beachten Sie, dass in vielen Fällen das Unternehmen keine Probleme bei diesem Ansatz haben, als es explizit ist.</span><span class="sxs-lookup"><span data-stu-id="b2759-146">The end user and the business owner have to explicitly embrace eventual consistency in the system and realize that in many cases the business does not have any problem with this approach, as long as it is explicit.</span></span>

<span data-ttu-id="b2759-147">Wie zuvor erwähnt die [Herausforderungen und Lösungen für distributed Data Management](#challenges-and-solutions-for-distributed-data-management) Abschnitt können Sie integrationsereignisse Geschäftsaufgaben implementieren, die mehrere Microservices umfassen.</span><span class="sxs-lookup"><span data-stu-id="b2759-147">As noted earlier in the [Challenges and solutions for distributed data management](#challenges-and-solutions-for-distributed-data-management) section, you can use integration events to implement business tasks that span multiple microservices.</span></span> <span data-ttu-id="b2759-148">Daher müssen Sie die letztliche Konsistenz zwischen diesen Diensten.</span><span class="sxs-lookup"><span data-stu-id="b2759-148">Thus you will have eventual consistency between those services.</span></span> <span data-ttu-id="b2759-149">Eine letztendlich konsistente Transaktion besteht aus einer Auflistung von verteilten Aktionen.</span><span class="sxs-lookup"><span data-stu-id="b2759-149">An eventually consistent transaction is made up of a collection of distributed actions.</span></span> <span data-ttu-id="b2759-150">Bei jeder Aktion verknüpften Microservice aktualisiert eine Entität "Domain" und veröffentlicht ein anderes Integration-Ereignis, das die nächste Aktion innerhalb derselben Geschäftsaufgabe von End-to-End-auslöst.</span><span class="sxs-lookup"><span data-stu-id="b2759-150">At each action, the related microservice updates a domain entity and publishes another integration event that raises the next action within the same end-to-end business task.</span></span>

<span data-ttu-id="b2759-151">Ein wichtiger Aspekt ist, dass Sie möglicherweise mit mehreren Microservices zu kommunizieren, die das gleiche Ereignis abonnieren möchten.</span><span class="sxs-lookup"><span data-stu-id="b2759-151">An important point is that you might want to communicate to multiple microservices that are subscribed to the same event.</span></span> <span data-ttu-id="b2759-152">Voraussetzung hierfür ist, Sie veröffentlichen/abonnieren verwenden, können auf der Grundlage messaging ereignisgesteuerte Kommunikation, wie in Abbildung 4-19 gezeigt.</span><span class="sxs-lookup"><span data-stu-id="b2759-152">To do so, you can use publish/subscribe messaging based on event-driven communication, as shown in Figure 4-19.</span></span> <span data-ttu-id="b2759-153">Dieser Mechanismus Veröffentlichen/Abonnieren steht nicht exklusiv für die Microservice-Architektur.</span><span class="sxs-lookup"><span data-stu-id="b2759-153">This publish/subscribe mechanism is not exclusive to the microservice architecture.</span></span> <span data-ttu-id="b2759-154">Es ist ähnlich wie bei [Kontexten begrenzt, die den](http://martinfowler.com/bliki/BoundedContext.html) in DDD kommunizieren soll, oder auf die Möglichkeit, die Sie übertragen, Updates aus der Datenbank mit Schreibzugriff in der schreibgeschützten Datenbank in der [Befehl und Abfrage Verantwortung Segregation (CQRS)](http://martinfowler.com/bliki/CQRS.html)Architekturmuster.</span><span class="sxs-lookup"><span data-stu-id="b2759-154">It is similar to the way [Bounded Contexts](http://martinfowler.com/bliki/BoundedContext.html) in DDD should communicate, or to the way you propagate updates from the write database to the read database in the [Command and Query Responsibility Segregation (CQRS)](http://martinfowler.com/bliki/CQRS.html) architecture pattern.</span></span> <span data-ttu-id="b2759-155">Das Ziel ist eventuellen Konsistenz zwischen mehreren Datenquellen in Ihrem verteilten System haben.</span><span class="sxs-lookup"><span data-stu-id="b2759-155">The goal is to have eventual consistency between multiple data sources across your distributed system.</span></span>

![](./media/image19.png)

<span data-ttu-id="b2759-156">**Abbildung 4-19**.</span><span class="sxs-lookup"><span data-stu-id="b2759-156">**Figure 4-19**.</span></span> <span data-ttu-id="b2759-157">Asynchrone ereignisgesteuerte Nachrichtenkommunikation</span><span class="sxs-lookup"><span data-stu-id="b2759-157">Asynchronous event-driven message communication</span></span>

<span data-ttu-id="b2759-158">Ihre Implementierung bestimmen, welches Protokoll für eine ereignisgesteuerte, die meldungsbasierte Kommunikation verwendet.</span><span class="sxs-lookup"><span data-stu-id="b2759-158">Your implementation will determine what protocol to use for event-driven, message-based communications.</span></span> <span data-ttu-id="b2759-159">[AMQP](https://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol) zuverlässige warteschlangenkommunikation erreichen können.</span><span class="sxs-lookup"><span data-stu-id="b2759-159">[AMQP](https://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol) can help achieve reliable queued communication.</span></span>

<span data-ttu-id="b2759-160">Wenn Sie einen Ereignisbus verwenden, möglicherweise möchten eine Abstraktionsebene (z. B. eine Ereignisschnittstelle Bus) basierend auf eine ähnliche Implementierung in Klassen mit der API-Code aus einem nachrichtenbroker wie verwenden [RabbitMQ](https://www.rabbitmq.com/) oder einen Servicebus wie [Azure Servicebus mit Themen](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions).</span><span class="sxs-lookup"><span data-stu-id="b2759-160">When you use an event bus, you might want to use an abstraction level (like an event bus interface) based on a related implementation in classes with code using the API from a message broker like [RabbitMQ](https://www.rabbitmq.com/) or a service bus like [Azure Service Bus with Topics](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions).</span></span> <span data-ttu-id="b2759-161">Möglicherweise möchten alternativ einen Servicebus auf höherer Ebene, wie NServiceBus, MassTransit oder Brighter verwenden, um Ihre-Ereignisbus zu formulieren und Veröffentlichen/Abonnieren-Systems.</span><span class="sxs-lookup"><span data-stu-id="b2759-161">Alternatively, you might want to use a higher-level service bus like NServiceBus, MassTransit, or Brighter to articulate your event bus and publish/subscribe system.</span></span>

## <a name="a-note-about-messaging-technologies-for-production-systems"></a><span data-ttu-id="b2759-162">Ein Hinweis zu messaging Technologien für Produktionssysteme</span><span class="sxs-lookup"><span data-stu-id="b2759-162">A note about messaging technologies for production systems</span></span>

<span data-ttu-id="b2759-163">Die Messagingtechnologien verfügbar für die Implementierung Ihrer abstrakte Ereignisbus sind auf unterschiedlichen Ebenen.</span><span class="sxs-lookup"><span data-stu-id="b2759-163">The messaging technologies available for implementing your abstract event bus are at different levels.</span></span> <span data-ttu-id="b2759-164">Z. B. sit-Produkte wie RabbitMQ (messaging Broker Transport) und Azure Service Bus auf einer niedrigeren Ebene als andere Produkte wie NServiceBus, MassTransit oder Brighter, die auf RabbitMQ und Azure Service Bus arbeiten kann.</span><span class="sxs-lookup"><span data-stu-id="b2759-164">For instance, products like RabbitMQ (a messaging broker transport) and Azure Service Bus sit at a lower level than other products like, NServiceBus, MassTransit, or Brighter, which can work on top of RabbitMQ and Azure Service Bus.</span></span> <span data-ttu-id="b2759-165">Ihre Wahl hängt wie viele umfangreiche Funktionen in der Anwendungsebene und der Out-of-Box-Skalierbarkeit für Ihre Anwendung benötigten ab.</span><span class="sxs-lookup"><span data-stu-id="b2759-165">Your choice depends on how many rich features at the application level and out-of-the-box scalability you need for your application.</span></span> <span data-ttu-id="b2759-166">Für die Implementierung gerade ein Proof of Concept Ereignisbus für Ihre Entwicklungsumgebung an, wie es in der Stichprobe eShopOnContainers geschehen kann eine einfache Implementierung über RabbitMQ auf einem Docker-Container ausgeführt ausreichend sein.</span><span class="sxs-lookup"><span data-stu-id="b2759-166">For implementing just a proof-of-concept event bus for your development environment, as we have done in the eShopOnContainers sample, a simple implementation on top of RabbitMQ running on a Docker container might be enough.</span></span>

<span data-ttu-id="b2759-167">Beachten Sie jedoch bei unternehmenswichtigen und Produktionssystemen, die hyper-Skalierbarkeit benötigen Sie möglicherweise Azure Service Bus auswerten möchten.</span><span class="sxs-lookup"><span data-stu-id="b2759-167">However, for mission-critical and production systems that need hyper-scalability, you might want to evaluate Azure Service Bus.</span></span> <span data-ttu-id="b2759-168">Für allgemeine Abstraktionen und Funktionen, die die Entwicklung von verteilten Anwendungen zu vereinfachen, wird empfohlen, dass Sie andere kommerzielle und Open-Source-Service-Bussen, z. B. NServiceBus, MassTransit und Brighter auswerten.</span><span class="sxs-lookup"><span data-stu-id="b2759-168">For high-level abstractions and features that make the development of distributed applications easier, we recommend that you evaluate other commercial and open-source service buses, such as NServiceBus, MassTransit, and Brighter.</span></span> <span data-ttu-id="b2759-169">Natürlich können Sie eigene Servicebus Funktionen auf niedrigerer Ebene Technologien wie RabbitMQ und Docker erstellen.</span><span class="sxs-lookup"><span data-stu-id="b2759-169">Of course, you can build your own service-bus features on top of lower-level technologies like RabbitMQ and Docker.</span></span> <span data-ttu-id="b2759-170">Aber, dass Aufgaben, die die Arbeit möglicherweise zu viel für eine benutzerdefinierte Enterprise-Anwendung.</span><span class="sxs-lookup"><span data-stu-id="b2759-170">But that plumbing work might cost too much for a custom enterprise application.</span></span>

## <a name="resiliently-publishing-to-the-event-bus"></a><span data-ttu-id="b2759-171">Bei veröffentlichen den-Ereignisbus</span><span class="sxs-lookup"><span data-stu-id="b2759-171">Resiliently publishing to the event bus</span></span>

<span data-ttu-id="b2759-172">Eine Herausforderung beim Implementieren einer ereignisgesteuerten Architektur über mehrere Microservices wird erklärt, wie Status in der ursprünglichen Microservice automatisch aktualisiert wird, während der Veröffentlichung je in der Ereignisbus irgendwie basierend auf seiner verwandten Integration-Ereignis Transaktionen.</span><span class="sxs-lookup"><span data-stu-id="b2759-172">A challenge when implementing an event-driven architecture across multiple microservices is how to atomically update state in the original microservice while resiliently publishing its related integration event into the event bus, somehow based on transactions.</span></span> <span data-ttu-id="b2759-173">Es folgen einige Möglichkeiten, um dies zu erreichen zwar möglicherweise auch zusätzliche Ansätze.</span><span class="sxs-lookup"><span data-stu-id="b2759-173">The following are a few ways to accomplish this, although there could be additional approaches as well.</span></span>

-   <span data-ttu-id="b2759-174">Verwenden eine (DTC-basiert) Transaktionswarteschlange wie MSMQ.</span><span class="sxs-lookup"><span data-stu-id="b2759-174">Using a transactional (DTC-based) queue like MSMQ.</span></span> <span data-ttu-id="b2759-175">(Dies ist jedoch ein älterer Ansatz.)</span><span class="sxs-lookup"><span data-stu-id="b2759-175">(However, this is a legacy approach.)</span></span>

-   <span data-ttu-id="b2759-176">Mit [Transaktionsprotokoll Mining](http://www.scoop.it/t/sql-server-transaction-log-mining).</span><span class="sxs-lookup"><span data-stu-id="b2759-176">Using [transaction log mining](http://www.scoop.it/t/sql-server-transaction-log-mining).</span></span>

-   <span data-ttu-id="b2759-177">Unter Verwendung des vollständigen [Ereignis Sourcing](https://msdn.microsoft.com/en-us/library/dn589792.aspx) Muster.</span><span class="sxs-lookup"><span data-stu-id="b2759-177">Using full [Event Sourcing](https://msdn.microsoft.com/en-us/library/dn589792.aspx) pattern.</span></span>

-   <span data-ttu-id="b2759-178">Mithilfe der [Postausgang Muster](http://gistlabs.com/2014/05/the-outbox/): eine Transaktionsdatenbank-Tabelle als eine Warteschlange, die die Basis für eine Ereignis-Ersteller-Komponente, die das Ereignis zu erstellen und veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="b2759-178">Using the [Outbox pattern](http://gistlabs.com/2014/05/the-outbox/): a transactional database table as a message queue that will be the base for an event-creator component that would create the event and publish it.</span></span>

<span data-ttu-id="b2759-179">Zusätzliche Themen, die bei Verwendung der asynchronen Kommunikation Nachricht Idempotenz und die Nachricht der Deduplizierung werden berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="b2759-179">Additional topics to consider when using asynchronous communication are message idempotence and message deduplication.</span></span> <span data-ttu-id="b2759-180">In diesen Themen finden Sie im Abschnitt [Implementieren des ereignisbasierten Kommunikation zwischen Microservices (integrationsereignisse)](#implementing_event_based_comms_microserv) weiter unten in diesem Handbuch.</span><span class="sxs-lookup"><span data-stu-id="b2759-180">These topics are covered in the section [Implementing event-based communication between microservices (integration events)](#implementing_event_based_comms_microserv) later in this guide.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="b2759-181">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="b2759-181">Additional resources</span></span>

-   <span data-ttu-id="b2759-182">**Ereignis Driven Messaging**
    [*http://soapatterns.org/design\_Muster-Ereignis\_driven\_messaging*](http://soapatterns.org/design_patterns/event_driven_messaging)</span><span class="sxs-lookup"><span data-stu-id="b2759-182">**Event Driven Messaging**
[*http://soapatterns.org/design\_patterns/event\_driven\_messaging*](http://soapatterns.org/design_patterns/event_driven_messaging)</span></span>

-   <span data-ttu-id="b2759-183">**Veröffentlichen/Abonnieren-Kanal**
    [*http://www.enterpriseintegrationpatterns.com/patterns/messaging/PublishSubscribeChannel.html*](http://www.enterpriseintegrationpatterns.com/patterns/messaging/PublishSubscribeChannel.html)</span><span class="sxs-lookup"><span data-stu-id="b2759-183">**Publish/Subscribe Channel**
[*http://www.enterpriseintegrationpatterns.com/patterns/messaging/PublishSubscribeChannel.html*](http://www.enterpriseintegrationpatterns.com/patterns/messaging/PublishSubscribeChannel.html)</span></span>

-   <span data-ttu-id="b2759-184">**Udi Dahan. Es wird erläutert CQRS**
    [*http://udidahan.com/2009/12/09/clarified-cqrs/*](http://udidahan.com/2009/12/09/clarified-cqrs/)</span><span class="sxs-lookup"><span data-stu-id="b2759-184">**Udi Dahan. Clarified CQRS**
[*http://udidahan.com/2009/12/09/clarified-cqrs/*](http://udidahan.com/2009/12/09/clarified-cqrs/)</span></span>

-   <span data-ttu-id="b2759-185">**Befehls- und Abfragen Responsibility Segregation (CQRS)**
    [*https://docs.microsoft.com/azure/architecture/patterns/cqrs*](https://docs.microsoft.com/azure/architecture/patterns/cqrs)</span><span class="sxs-lookup"><span data-stu-id="b2759-185">**Command and Query Responsibility Segregation (CQRS)**
[*https://docs.microsoft.com/azure/architecture/patterns/cqrs*](https://docs.microsoft.com/azure/architecture/patterns/cqrs)</span></span>

-   <span data-ttu-id="b2759-186">**Kommunikation zwischen Kontexten begrenzt**
    [*https://msdn.microsoft.com/library/jj591572.aspx*](https://msdn.microsoft.com/library/jj591572.aspx)</span><span class="sxs-lookup"><span data-stu-id="b2759-186">**Communicating Between Bounded Contexts**
[*https://msdn.microsoft.com/library/jj591572.aspx*](https://msdn.microsoft.com/library/jj591572.aspx)</span></span>

-   <span data-ttu-id="b2759-187">**Eventuelle Konsistenz**
    [*https://en.wikipedia.org/wiki/Eventual\_Konsistenz*](https://en.wikipedia.org/wiki/Eventual_consistency)</span><span class="sxs-lookup"><span data-stu-id="b2759-187">**Eventual consistency**
[*https://en.wikipedia.org/wiki/Eventual\_consistency*](https://en.wikipedia.org/wiki/Eventual_consistency)</span></span>

-   <span data-ttu-id="b2759-188">**Jimmy Bogard. Umgestaltung für Stabilität: Auswerten Kopplung**
    [*https://jimmybogard.com/refactoring-towards-resilience-evaluating-coupling/*](https://jimmybogard.com/refactoring-towards-resilience-evaluating-coupling/)</span><span class="sxs-lookup"><span data-stu-id="b2759-188">**Jimmy Bogard. Refactoring Towards Resilience: Evaluating Coupling**
[*https://jimmybogard.com/refactoring-towards-resilience-evaluating-coupling/*](https://jimmybogard.com/refactoring-towards-resilience-evaluating-coupling/)</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="b2759-189">[Vorherigen] (Kommunikation-in-Microservice-architecture.md) [weiter] (verwalten-Microservice-apis.md)</span><span class="sxs-lookup"><span data-stu-id="b2759-189">[Previous] (communication-in-microservice-architecture.md) [Next] (maintain-microservice-apis.md)</span></span>
