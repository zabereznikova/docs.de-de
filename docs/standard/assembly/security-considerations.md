---
title: Überlegungen zur Assemblysicherheit
description: Beim Erstellen einer .NET-Assembly können Sie Berechtigungen angeben, die erforderlich sind, um die Assembly auszuführen. In diesem Artikel werden Assemblys mit starkem Namen und Signierungstools erläutert.
ms.date: 08/20/2019
helpviewer_keywords:
- assemblies [.NET], security
- signcodes
- names [.NET], assemblies
- strong-named assemblies, security considerations
- signing assemblies
- assemblies [.NET], signing
- granting permissions, assemblies
- assemblies [.NET], strong-named
- names [.NET], strong names
- permissions [.NET], assemblies
- security [.NET], assemblies
- integrity with assemblies
ms.assetid: 1b5439c1-f3d5-4529-bd69-01814703d067
ms.openlocfilehash: 91ea206abf80da275651854b9f13aa0116b7a1c5
ms.sourcegitcommit: 279fb6e8d515df51676528a7424a1df2f0917116
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/27/2020
ms.locfileid: "92687268"
---
# <a name="assembly-security-considerations"></a><span data-ttu-id="50355-104">Überlegungen zur Assemblysicherheit</span><span class="sxs-lookup"><span data-stu-id="50355-104">Assembly security considerations</span></span>

<span data-ttu-id="50355-105">Beim Erstellen einer Assembly können Sie eine Reihe von Berechtigungen angeben, die erforderlich sind, um die Assembly auszuführen.</span><span class="sxs-lookup"><span data-stu-id="50355-105">When you build an assembly, you can specify a set of permissions that the assembly requires to run.</span></span> <span data-ttu-id="50355-106">Das Erteilen bestimmter Berechtigungen für eine Assembly beruht auf Beweisen.</span><span class="sxs-lookup"><span data-stu-id="50355-106">Whether certain permissions are granted or not granted to an assembly is based on evidence.</span></span>  
  
 <span data-ttu-id="50355-107">Beweise werden auf zwei unterschiedliche Arten verwendet:</span><span class="sxs-lookup"><span data-stu-id="50355-107">There are two distinct ways evidence is used:</span></span>  
  
- <span data-ttu-id="50355-108">Die Eingabebeweise werden mit den vom Ladeprogramm erfassten Beweisen zusammengeführt, um einen endgültigen Beweissatz zu erstellen. Dieser wird für die Richtlinienauflösung verwendet.</span><span class="sxs-lookup"><span data-stu-id="50355-108">The input evidence is merged with the evidence gathered by the loader to create a final set of evidence used for policy resolution.</span></span> <span data-ttu-id="50355-109">Diese Semantik wird von den Methoden **Assembly.Load** , **Assembly.LoadFrom** und **Activator.CreateInstance** verwendet.</span><span class="sxs-lookup"><span data-stu-id="50355-109">The methods that use this semantic include **Assembly.Load** , **Assembly.LoadFrom** , and **Activator.CreateInstance** .</span></span>  
  
- <span data-ttu-id="50355-110">Die Eingabebeweise werden unverändert als endgültiger Beweissatz für die Richtlinienauflösung verwendet.</span><span class="sxs-lookup"><span data-stu-id="50355-110">The input evidence is used unaltered as the final set of evidence used for policy resolution.</span></span> <span data-ttu-id="50355-111">Diese Semantik wird von den Methoden **Assembly.Load(byte[])** und **AppDomain.DefineDynamicAssembly()** verwendet.</span><span class="sxs-lookup"><span data-stu-id="50355-111">The methods that use this semantic include **Assembly.Load(byte[])** and **AppDomain.DefineDynamicAssembly()** .</span></span>  
  
  <span data-ttu-id="50355-112">Optionale Berechtigungen können über die [Sicherheitsrichtlinien](../../framework/misc/code-access-security-basics.md) erteilt werden, die auf dem Computer festgelegt sind, auf dem die Assembly ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="50355-112">Optional permissions can be granted by the [security policy](../../framework/misc/code-access-security-basics.md) set on the computer where the assembly will run.</span></span> <span data-ttu-id="50355-113">Wenn der Code alle potenziellen Sicherheitsausnahmen behandeln soll, können Sie eines der folgenden Verfahren durchführen:</span><span class="sxs-lookup"><span data-stu-id="50355-113">If you want your code to handle all potential security exceptions, you can do one of the following:</span></span>  
  
- <span data-ttu-id="50355-114">Sie fügen eine Berechtigungsanforderung für alle Berechtigungen ein, über die der Code verfügen muss, und behandeln zuerst den Ladezeitfehler, der auftritt, wenn die Berechtigungen nicht erteilt werden.</span><span class="sxs-lookup"><span data-stu-id="50355-114">Insert a permission request for all the permissions your code must have, and handle up front the load-time failure that occurs if the permissions are not granted.</span></span>  
  
- <span data-ttu-id="50355-115">Sie fordern die vom Code eventuell benötigten Berechtigungen nicht mit Berechtigungsanforderungen an, bereiten jedoch die Behandlung von Sicherheitsausnahmen für den Fall vor, dass keine Berechtigungen erteilt werden.</span><span class="sxs-lookup"><span data-stu-id="50355-115">Do not use a permission request to obtain permissions your code might need, but be prepared to handle security exceptions if permissions are not granted.</span></span>  
  
  > [!NOTE]
  > <span data-ttu-id="50355-116">Sicherheit ist ein komplexer Themenbereich, und Sie können aus einer Vielzahl von Optionen auswählen.</span><span class="sxs-lookup"><span data-stu-id="50355-116">Security is a complex area, and you have many options to choose from.</span></span> <span data-ttu-id="50355-117">Weitere Informationen finden Sie unter [Schlüsselbegriffe der Sicherheit](../security/key-security-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="50355-117">For more information, see [Key Security Concepts](../security/key-security-concepts.md).</span></span>  
  
 <span data-ttu-id="50355-118">Zur Ladezeit wird der Beweis der Assembly als Eingabe für die Sicherheitsrichtlinie verwendet.</span><span class="sxs-lookup"><span data-stu-id="50355-118">At load time, the assembly's evidence is used as input to security policy.</span></span> <span data-ttu-id="50355-119">Die Sicherheitsrichtlinie wird durch den Administrator der Organisation und des Computers sowie durch die Benutzerrichtlinieneinstellungen eingerichtet und bestimmt den Satz von Berechtigungen, der sämtlichem verwalteten Code beim Ausführen erteilt wird.</span><span class="sxs-lookup"><span data-stu-id="50355-119">Security policy is established by the enterprise and the computer's administrator as well as by user policy settings, and determines the set of permissions that is granted to all managed code when executed.</span></span> <span data-ttu-id="50355-120">Die Sicherheitsrichtlinie kann für den Herausgeber der Assembly eingerichtet werden (dazu ist eine mit dem Signaturtool generierte Signatur erforderlich). Sie kann außerdem für die Website und die Zone (als solche in Internet Explorer bezeichnet), von der die Assembly heruntergeladen wurde, oder für den starken Namen der Assembly eingerichtet werden.</span><span class="sxs-lookup"><span data-stu-id="50355-120">Security policy can be established for the publisher of the assembly (if it has a signing tool generated signature), for the Web site and zone (in Internet Explorer terms) the assembly was downloaded from, or for the assembly's strong name.</span></span> <span data-ttu-id="50355-121">Der für einen Computer zuständige Administrator kann z. B. eine Sicherheitsrichtlinie einrichten, über die Code, der von einer Website heruntergeladen und von einer bestimmten Softwarefirma signiert ist, auf die Datenbank auf einem Computer zugreifen kann. Die Sicherheitsrichtlinie lässt es aber nicht zu, dass auf die Festplatte dieses Computers geschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="50355-121">For example, a computer's administrator can establish security policy that allows all code downloaded from a Web site and signed by a given software company to access a database on a computer, but does not grant access to write to the computer's disk.</span></span>  
  
## <a name="strong-named-assemblies-and-signing-tools"></a><span data-ttu-id="50355-122">Assemblys mit starkem Namen und Signierungstools</span><span class="sxs-lookup"><span data-stu-id="50355-122">Strong-named assemblies and signing tools</span></span>  

 > [!WARNING]
 > <span data-ttu-id="50355-123">Verlassen Sie sich für die Sicherheit nicht auf starke Namen.</span><span class="sxs-lookup"><span data-stu-id="50355-123">Do not rely on strong names for security.</span></span> <span data-ttu-id="50355-124">Diese Namen bieten lediglich eine eindeutige Identität.</span><span class="sxs-lookup"><span data-stu-id="50355-124">They provide a unique identity only.</span></span>

 <span data-ttu-id="50355-125">Sie können eine Assembly auf zwei unterschiedliche, sich jedoch gegenseitig ergänzende Arten signieren: mit einem starken Namen oder mithilfe von [SignTool.exe (Signaturtool)](../../framework/tools/signtool-exe.md).</span><span class="sxs-lookup"><span data-stu-id="50355-125">You can sign an assembly in two different but complementary ways: with a strong name or by using  [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md).</span></span> <span data-ttu-id="50355-126">Beim Signieren einer Assembly mit einem starken Namen wird der Datei, die das Assemblymanifest enthält, eine Verschlüsselung mit einem öffentlichen Schlüssel hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="50355-126">Signing an assembly with a strong name adds public key encryption to the file containing the assembly manifest.</span></span> <span data-ttu-id="50355-127">Das Signieren mit starkem Namen gewährleistet die Eindeutigkeit der Namen, verhindert das Vortäuschen von Namen (Spoofing) und stellt Aufrufern beim Auflösen eines Verweises eine Identität bereit.</span><span class="sxs-lookup"><span data-stu-id="50355-127">Strong name signing helps to verify name uniqueness, prevent name spoofing, and provide callers with some identity when a reference is resolved.</span></span>  
  
 <span data-ttu-id="50355-128">Mit einem starken Namen ist keine Vertrauensebene verknüpft. Daher ist die Verwendung von [SignTool.exe (Signaturtool)](../../framework/tools/signtool-exe.md) wichtig.</span><span class="sxs-lookup"><span data-stu-id="50355-128">No level of trust is associated with a strong name, which makes [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) important.</span></span> <span data-ttu-id="50355-129">Beim Einsatz der beiden Signaturtools müssen Herausgeber ihre Identität gegenüber einer dritten Stelle beweisen und ein Zertifikat anfordern.</span><span class="sxs-lookup"><span data-stu-id="50355-129">The two signing tools require a publisher to prove its identity to a third-party authority and obtain a certificate.</span></span> <span data-ttu-id="50355-130">Dieses Zertifikat wird dann in die Datei eingebettet und kann von einem Administrator bei der Entscheidung verwendet werden, ob die Authentizität von Code vertrauenswürdig ist.</span><span class="sxs-lookup"><span data-stu-id="50355-130">This certificate is then embedded in your file and can be used by an administrator to decide whether to trust the code's authenticity.</span></span>  
  
 <span data-ttu-id="50355-131">Sie können einer Assembly sowohl einen starken Namen als auch eine mit [SignTool.exe (Signaturtool)](../../framework/tools/signtool-exe.md) erstellte digitale Signatur zuordnen, können diese Optionen jedoch auch einzeln verwenden.</span><span class="sxs-lookup"><span data-stu-id="50355-131">You can give both a strong name and a digital signature created using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) to an assembly, or you can use either alone.</span></span> <span data-ttu-id="50355-132">Mit den beiden Signaturtools kann immer nur jeweils eine Datei signiert werden. Bei einer Mehrfachdateiassembly signieren Sie die Datei, die das Assemblymanifest enthält.</span><span class="sxs-lookup"><span data-stu-id="50355-132">The two signing tools can sign only one file at a time; for a multifile assembly, you sign the file that contains the assembly manifest.</span></span> <span data-ttu-id="50355-133">Ein starker Name ist in der Datei mit dem Assemblymanifest gespeichert, eine mit [SignTool.exe (Signaturtool)](../../framework/tools/signtool-exe.md) erstellte Signatur wird jedoch in einem reservierten Slot der PE-Datei (Portable Executable, übertragbare ausführbare Datei) mit dem Assemblymanifest gespeichert.</span><span class="sxs-lookup"><span data-stu-id="50355-133">A strong name is stored in the file containing the assembly manifest, but a signature created using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) is stored in a reserved slot in the portable executable (PE) file containing the assembly manifest.</span></span> <span data-ttu-id="50355-134">Eine Assembly kann mit [SignTool.exe (Signaturtool)](../../framework/tools/signtool-exe.md) signiert werden (mit oder ohne starken Namen), wenn bereits eine Vertrauenshierarchie auf der Basis von mit [SignTool.exe (Signaturtool)](../../framework/tools/signtool-exe.md) generierten Signaturen vorhanden ist oder die Richtlinie nur den Teil mit dem Schlüssel verwendet und keine Kette von Vertrauensstellungen überprüft.</span><span class="sxs-lookup"><span data-stu-id="50355-134">Signing of an assembly using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) can be used (with or without a strong name) when you already have a trust hierarchy that relies on [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) generated signatures, or when your policy uses only the key portion and does not check a chain of trust.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="50355-135">Wenn für eine Assembly sowohl ein starker Name als auch eine Signaturtool-Signatur erforderlich ist, muss zuerst der starke Name zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="50355-135">When using both a strong name and a signing tool signature on an assembly, the strong name must be assigned first.</span></span>  
  
 <span data-ttu-id="50355-136">Die Common Language Runtime führt darüber hinaus eine Hashüberprüfung durch: Das Assemblymanifest enthält eine Liste aller Dateien, aus denen die Assembly besteht, einschließlich eines Hash für jede Datei, wie sie beim Erstellen des Manifests vorlag.</span><span class="sxs-lookup"><span data-stu-id="50355-136">The common language runtime also performs a hash verification; the assembly manifest contains a list of all files that make up the assembly, including a hash of each file as it existed when the manifest was built.</span></span> <span data-ttu-id="50355-137">Beim Laden der einzelnen Dateien werden die Inhalte gehasht und mit dem letzten Hashwert verglichen, der im Manifest gespeichert ist.</span><span class="sxs-lookup"><span data-stu-id="50355-137">As each file is loaded, its contents are hashed and compared with the hash value stored in the manifest.</span></span> <span data-ttu-id="50355-138">Wenn die zwei Hashs nicht übereinstimmen, wird die Assembly nicht geladen.</span><span class="sxs-lookup"><span data-stu-id="50355-138">If the two hashes do not match, the assembly fails to load.</span></span>  
  
 <span data-ttu-id="50355-139">Da starke Namen und das Signieren mit [SignTool.exe (Signaturtool)](../../framework/tools/signtool-exe.md) die Integrität garantieren, können Sie der Sicherheitsrichtlinie für den Codezugriff diese beiden Formen von Assemblybeweisen zugrunde legen.</span><span class="sxs-lookup"><span data-stu-id="50355-139">Because strong naming and signing using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) guarantee integrity, you can base code access security policy on these two forms of assembly evidence.</span></span> <span data-ttu-id="50355-140">Starke Namen und das Signieren mit [SignTool.exe (Signaturtool)](../../framework/tools/signtool-exe.md) garantieren die Integrität durch digitale Signaturen und Zertifikate.</span><span class="sxs-lookup"><span data-stu-id="50355-140">Strong naming and signing using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) guarantee integrity through digital signatures and certificates.</span></span> <span data-ttu-id="50355-141">Alle genannten Technologien (Hashüberprüfung, starke Namen und das Signieren mit [SignTool.exe (Signaturtool)](../../framework/tools/signtool-exe.md)) gewährleisten gemeinsam, dass die Assembly in keiner Weise geändert werden kann.</span><span class="sxs-lookup"><span data-stu-id="50355-141">All the technologies mentioned—hash verification, strong naming, and signing using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md)—work together to ensure that the assembly has not been altered in any way.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="50355-142">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="50355-142">See also</span></span>

- [<span data-ttu-id="50355-143">Assemblys mit starken Namen</span><span class="sxs-lookup"><span data-stu-id="50355-143">Strong-named assemblies</span></span>](strong-named.md)
- [<span data-ttu-id="50355-144">Assemblys in .NET</span><span class="sxs-lookup"><span data-stu-id="50355-144">Assemblies in .NET</span></span>](index.md)
- [<span data-ttu-id="50355-145">SignTool.exe (Signaturtool)</span><span class="sxs-lookup"><span data-stu-id="50355-145">SignTool.exe (Sign Tool)</span></span>](../../framework/tools/signtool-exe.md)
