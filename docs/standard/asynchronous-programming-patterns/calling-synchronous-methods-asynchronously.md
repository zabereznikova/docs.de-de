---
title: Asynchrones Aufrufen von synchronen Methoden
description: Erfahren Sie, wie Sie synchrone Methoden in .NET über die Methoden BeginInvoke und EndInvoke asynchron aufrufen.
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- asynchronous programming, delegates
- asynchronous delegates
- AsyncWaitHandle property
- callback methods
- calling synchronous methods in asynchronous manner
- WaitHandle class, code examples
- asynchronous programming, status polling
- polling asynchronous operation status
- delegates [.NET], asynchronous
- synchronous calling in asynchronous manner
- waiting for asynchronous calls
- status information [.NET], asynchronous operations
ms.assetid: 41972034-92ed-450a-9664-ab93fcc6f1fb
ms.openlocfilehash: d518e5f64096fde5c9b14222dc4fe0634e6bb7b1
ms.sourcegitcommit: 4a938327bad8b2e20cabd0f46a9dc50882596f13
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/28/2020
ms.locfileid: "92888892"
---
# <a name="calling-synchronous-methods-asynchronously"></a><span data-ttu-id="a9368-103">Asynchrones Aufrufen von synchronen Methoden</span><span class="sxs-lookup"><span data-stu-id="a9368-103">Calling Synchronous Methods Asynchronously</span></span>

<span data-ttu-id="a9368-104">.NET ermöglicht es, jede Methode asynchron aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="a9368-104">.NET enables you to call any method asynchronously.</span></span> <span data-ttu-id="a9368-105">Dazu definieren Sie einen Delegaten mit derselben Signatur wie die Methode, die Sie aufrufen möchten.</span><span class="sxs-lookup"><span data-stu-id="a9368-105">To do this, you define a delegate with the same signature as the method you want to call.</span></span> <span data-ttu-id="a9368-106">Die Common Language Runtime definiert automatisch `BeginInvoke`- und `EndInvoke`-Methoden für diesen Delegaten mit entsprechenden Signaturen.</span><span class="sxs-lookup"><span data-stu-id="a9368-106">The common language runtime automatically defines `BeginInvoke` and `EndInvoke` methods for this delegate, with the appropriate signatures.</span></span>

> [!NOTE]
> <span data-ttu-id="a9368-107">Asynchrone Delegatenaufrufe, insbesondere der `BeginInvoke` -Methode und der `EndInvoke` -Methode, werden im .NET Compact Framework nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="a9368-107">Asynchronous delegate calls, specifically the `BeginInvoke` and `EndInvoke` methods, are not supported in the .NET Compact Framework.</span></span>

<span data-ttu-id="a9368-108">Die `BeginInvoke` -Methode initiiert den asynchronen Aufruf.</span><span class="sxs-lookup"><span data-stu-id="a9368-108">The `BeginInvoke` method initiates the asynchronous call.</span></span> <span data-ttu-id="a9368-109">Diese Methode hat die gleichen Parameter wie die Methode, die Sie asynchron ausführen möchten, inklusive zweier zusätzlicher Parameter, die optional sind.</span><span class="sxs-lookup"><span data-stu-id="a9368-109">It has the same parameters as the method that you want to execute asynchronously, plus two additional optional parameters.</span></span> <span data-ttu-id="a9368-110">Der erste Parameter ist ein <xref:System.AsyncCallback> -Delegat, der auf eine Methode verweist, die bei Beendigung des asynchronen Aufrufs aufzurufen ist.</span><span class="sxs-lookup"><span data-stu-id="a9368-110">The first parameter is an <xref:System.AsyncCallback> delegate that references a method to be called when the asynchronous call completes.</span></span> <span data-ttu-id="a9368-111">Der zweite Parameter ist ein benutzerdefiniertes Objekt, das Informationen an die Rückrufmethode übergibt.</span><span class="sxs-lookup"><span data-stu-id="a9368-111">The second parameter is a user-defined object that passes information into the callback method.</span></span> <span data-ttu-id="a9368-112">`BeginInvoke` wird immer sofort zurückgegeben und wartet nicht, bis der asynchrone Aufruf abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="a9368-112">`BeginInvoke` returns immediately and does not wait for the asynchronous call to complete.</span></span> <span data-ttu-id="a9368-113">`BeginInvoke` gibt ein <xref:System.IAsyncResult>zurück, mit dem der Status des asynchronen Aufrufs überwacht werden kann.</span><span class="sxs-lookup"><span data-stu-id="a9368-113">`BeginInvoke` returns an <xref:System.IAsyncResult>, which can be used to monitor the progress of the asynchronous call.</span></span>

<span data-ttu-id="a9368-114">Die Ergebnisse dieses asynchronen Aufrufs werden dann mithilfe der `EndInvoke` -Methode abgerufen.</span><span class="sxs-lookup"><span data-stu-id="a9368-114">The `EndInvoke` method retrieves the results of the asynchronous call.</span></span> <span data-ttu-id="a9368-115">Diese kann jederzeit nach der `BeginInvoke`-Methode aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="a9368-115">It can be called any time after `BeginInvoke`.</span></span> <span data-ttu-id="a9368-116">Wenn der asynchrone Aufruf nicht abgeschlossen wurde, blockiert `EndInvoke` den aufrufenden Thread, bis er abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="a9368-116">If the asynchronous call has not completed, `EndInvoke` blocks the calling thread until it completes.</span></span> <span data-ttu-id="a9368-117">Zu den Parametern von `EndInvoke` gehören die Parameter `out` und `ref` (`<Out>`, `ByRef` und `ByRef` in Visual Basic) der Methode, die Sie asynchron ausführen möchten, und die <xref:System.IAsyncResult>-Schnittstelle, die von `BeginInvoke` zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="a9368-117">The parameters of `EndInvoke` include the `out` and `ref` parameters (`<Out>` `ByRef` and `ByRef` in Visual Basic) of the method that you want to execute asynchronously, plus the <xref:System.IAsyncResult> returned by `BeginInvoke`.</span></span>

> [!NOTE]
> <span data-ttu-id="a9368-118">Das IntelliSense-Feature in Visual Studio zeigt die Parameter von `BeginInvoke` und `EndInvoke` an.</span><span class="sxs-lookup"><span data-stu-id="a9368-118">The IntelliSense feature in Visual Studio displays the parameters of `BeginInvoke` and `EndInvoke`.</span></span> <span data-ttu-id="a9368-119">Sofern Sie nicht Visual Studio oder ein vergleichbares Tool verwenden, oder wenn Sie C# zusammen mit Visual Studio nutzen, finden Sie unter [Asynchrones Programmiermodell (APM)](asynchronous-programming-model-apm.md) (Asynchrones Programmiermodell (APM)) eine Beschreibung der für diese Methoden festgelegten Parameter.</span><span class="sxs-lookup"><span data-stu-id="a9368-119">If you're not using Visual Studio or a similar tool, or if you're using C# with Visual Studio, see [Asynchronous Programming Model (APM)](asynchronous-programming-model-apm.md) for a description of the parameters defined for these methods.</span></span>

<span data-ttu-id="a9368-120">Die in diesem Abschnitt verwendeten Codebeispiele veranschaulichen die vier gebräuchlichen Arten der Verwendung von `BeginInvoke` und `EndInvoke` bei asynchronen Aufrufen.</span><span class="sxs-lookup"><span data-stu-id="a9368-120">The code examples in this topic demonstrate four common ways to use `BeginInvoke` and `EndInvoke` to make asynchronous calls.</span></span> <span data-ttu-id="a9368-121">Nach dem Aufrufen von `BeginInvoke` können Sie Folgendes tun:</span><span class="sxs-lookup"><span data-stu-id="a9368-121">After calling `BeginInvoke` you can do the following:</span></span>

- <span data-ttu-id="a9368-122">Sie können etwas Arbeit erledigen und dann `EndInvoke` aufrufen, um eine Blockierung bis zum Abschluss des Aufrufs zu erreichen.</span><span class="sxs-lookup"><span data-stu-id="a9368-122">Do some work and then call `EndInvoke` to block until the call completes.</span></span>

- <span data-ttu-id="a9368-123">Rufen Sie ein <xref:System.Threading.WaitHandle> mithilfe der <xref:System.IAsyncResult.AsyncWaitHandle%2A?displayProperty=nameWithType> -Eigenschaft ab. Verwenden Sie deren <xref:System.Threading.WaitHandle.WaitOne%2A> -Methode, um die Ausführung zu blockieren, bis das <xref:System.Threading.WaitHandle> signalisiert wurde, und rufen Sie dann `EndInvoke`auf.</span><span class="sxs-lookup"><span data-stu-id="a9368-123">Obtain a <xref:System.Threading.WaitHandle> using the <xref:System.IAsyncResult.AsyncWaitHandle%2A?displayProperty=nameWithType> property, use its <xref:System.Threading.WaitHandle.WaitOne%2A> method to block execution until the <xref:System.Threading.WaitHandle> is signaled, and then call `EndInvoke`.</span></span>

- <span data-ttu-id="a9368-124">Sie können das von <xref:System.IAsyncResult> zurückgegebene `BeginInvoke` abrufen, um zu ermitteln, wann der asynchrone Aufruf beendet wurde, und dann `EndInvoke`abrufen.</span><span class="sxs-lookup"><span data-stu-id="a9368-124">Poll the <xref:System.IAsyncResult> returned by `BeginInvoke` to determine when the asynchronous call has completed, and then call `EndInvoke`.</span></span>

- <span data-ttu-id="a9368-125">Sie können einen Delegaten für eine Rückrufmethode an `BeginInvoke`übergeben.</span><span class="sxs-lookup"><span data-stu-id="a9368-125">Pass a delegate for a callback method to `BeginInvoke`.</span></span> <span data-ttu-id="a9368-126">Die Methode wird bei Beendigung des asynchronen Aufrufs für einen <xref:System.Threading.ThreadPool> -Thread ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="a9368-126">The method is executed on a <xref:System.Threading.ThreadPool> thread when the asynchronous call completes.</span></span> <span data-ttu-id="a9368-127">Die Rückrufmethode ruft die `EndInvoke`-Methode auf.</span><span class="sxs-lookup"><span data-stu-id="a9368-127">The callback method calls `EndInvoke`.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a9368-128">Unabhängig von der Vorgehensweise wird immer `EndInvoke` aufgerufen, um den asynchronen Aufruf abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="a9368-128">No matter which technique you use, always call `EndInvoke` to complete your asynchronous call.</span></span>

## <a name="defining-the-test-method-and-asynchronous-delegate"></a><span data-ttu-id="a9368-129">Definieren der Testmethode und des asynchronen Delegaten</span><span class="sxs-lookup"><span data-stu-id="a9368-129">Defining the Test Method and Asynchronous Delegate</span></span>
 <span data-ttu-id="a9368-130">In den folgenden Codebeispielen werden verschiedene Möglichkeiten veranschaulicht, wie die gleiche zeitintensive Methode, `TestMethod`, asynchron aufgerufen werden kann.</span><span class="sxs-lookup"><span data-stu-id="a9368-130">The code examples that follow demonstrate various ways of calling the same long-running method, `TestMethod`, asynchronously.</span></span> <span data-ttu-id="a9368-131">Die `TestMethod` -Methode zeigt eine Konsolenmeldung an, um zu zeigen, dass mit der Verarbeitung begonnen wurde, wechselt für einige Sekunden in den Ruhezustand und wird dann beendet.</span><span class="sxs-lookup"><span data-stu-id="a9368-131">The `TestMethod` method displays a console message to show that it has begun processing, sleeps for a few seconds, and then ends.</span></span> <span data-ttu-id="a9368-132">`TestMethod` verfügt über einen `out` -Parameter, um zu zeigen, wie solche Parameter zu den Signaturen von `BeginInvoke` und `EndInvoke`hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="a9368-132">`TestMethod` has an `out` parameter to demonstrate the way such parameters are added to the signatures of `BeginInvoke` and `EndInvoke`.</span></span> <span data-ttu-id="a9368-133">Sie können `ref` -Parameter auf ähnliche Weise behandeln.</span><span class="sxs-lookup"><span data-stu-id="a9368-133">You can handle `ref` parameters similarly.</span></span>

 <span data-ttu-id="a9368-134">Im folgenden Codebeispiel werden die Definitionen von `TestMethod` und des Delegaten mit dem Namen `AsyncMethodCaller` veranschaulicht, die beide zum asynchronen Aufrufen von `TestMethod` verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="a9368-134">The following code example shows the definition of `TestMethod` and the delegate named `AsyncMethodCaller` that can be used to call `TestMethod` asynchronously.</span></span> <span data-ttu-id="a9368-135">Beim Kompilieren der Codebeispiele müssen Sie die Definitionen für `TestMethod` und für den `AsyncMethodCaller` -Delegaten hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="a9368-135">To compile the code examples, you must include the definitions for `TestMethod` and the `AsyncMethodCaller` delegate.</span></span>

 [!code-cpp[AsyncDelegateExamples#1](../../../samples/snippets/cpp/VS_Snippets_CLR/AsyncDelegateExamples/cpp/TestMethod.cpp#1)]
 [!code-csharp[AsyncDelegateExamples#1](../../../samples/snippets/csharp/VS_Snippets_CLR/AsyncDelegateExamples/CS/TestMethod.cs#1)]
 [!code-vb[AsyncDelegateExamples#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/AsyncDelegateExamples/VB/TestMethod.vb#1)]

## <a name="waiting-for-an-asynchronous-call-with-endinvoke"></a><span data-ttu-id="a9368-136">Warten auf einen asynchronen Aufruf mit "EndInvoke"</span><span class="sxs-lookup"><span data-stu-id="a9368-136">Waiting for an Asynchronous Call with EndInvoke</span></span>
 <span data-ttu-id="a9368-137">Die einfachste Möglichkeit zum asynchronen Ausführen einer Methode besteht darin, das Ausführen der Methode durch Aufrufen der `BeginInvoke` -Methode des Delegaten zu starten, einige Aufgaben im Hauptthread auszuführen und dann die `EndInvoke` -Methode des Delegaten aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="a9368-137">The simplest way to execute a method asynchronously is to start executing the method by calling the delegate's `BeginInvoke` method, do some work on the main thread, and then call the delegate's `EndInvoke` method.</span></span> <span data-ttu-id="a9368-138">`EndInvoke` kann den aufrufenden Thread blockieren, da dies erst zurückgegeben wird, wenn der asynchrone Aufruf abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="a9368-138">`EndInvoke` might block the calling thread because it does not return until the asynchronous call completes.</span></span> <span data-ttu-id="a9368-139">Dies ist ein gutes Verfahren für Datei- oder Netzwerkvorgänge.</span><span class="sxs-lookup"><span data-stu-id="a9368-139">This is a good technique to use with file or network operations.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a9368-140">Da `EndInvoke` blockieren kann, sollte sie nicht aus Threads für die Benutzeroberfläche aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="a9368-140">Because `EndInvoke` might block, you should never call it from threads that service the user interface.</span></span>

 [!code-cpp[AsyncDelegateExamples#2](../../../samples/snippets/cpp/VS_Snippets_CLR/AsyncDelegateExamples/cpp/EndInvoke.cpp#2)]
 [!code-csharp[AsyncDelegateExamples#2](../../../samples/snippets/csharp/VS_Snippets_CLR/AsyncDelegateExamples/CS/EndInvoke.cs#2)]
 [!code-vb[AsyncDelegateExamples#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/AsyncDelegateExamples/VB/EndInvoke.vb#2)]

## <a name="waiting-for-an-asynchronous-call-with-waithandle"></a><span data-ttu-id="a9368-141">Warten auf einen asynchronen Aufruf mit "WaitHandle"</span><span class="sxs-lookup"><span data-stu-id="a9368-141">Waiting for an Asynchronous Call with WaitHandle</span></span>
 <span data-ttu-id="a9368-142">Sie können ein <xref:System.Threading.WaitHandle> mithilfe der <xref:System.IAsyncResult.AsyncWaitHandle%2A> -Eigenschaft vom <xref:System.IAsyncResult> abrufen, das von `BeginInvoke`zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="a9368-142">You can obtain a <xref:System.Threading.WaitHandle> by using the <xref:System.IAsyncResult.AsyncWaitHandle%2A> property of the <xref:System.IAsyncResult> returned by `BeginInvoke`.</span></span> <span data-ttu-id="a9368-143">Das <xref:System.Threading.WaitHandle> wird bei Beendigung des asynchronen Aufrufs signalisiert, und durch Aufrufen der <xref:System.Threading.WaitHandle.WaitOne%2A> -Methode kann darauf gewartet werden.</span><span class="sxs-lookup"><span data-stu-id="a9368-143">The <xref:System.Threading.WaitHandle> is signaled when the asynchronous call completes, and you can wait for it by calling the <xref:System.Threading.WaitHandle.WaitOne%2A> method.</span></span>

 <span data-ttu-id="a9368-144">Bei Verwendung eines <xref:System.Threading.WaitHandle>kann vor oder nach Abschluss des asynchronen Aufrufs eine weitere Verarbeitung erfolgen. Dies ist jedoch nur vor dem Abrufen der Ergebnisse über den Aufruf von `EndInvoke` möglich.</span><span class="sxs-lookup"><span data-stu-id="a9368-144">If you use a <xref:System.Threading.WaitHandle>, you can perform additional processing before or after the asynchronous call completes, but before calling `EndInvoke` to retrieve the results.</span></span>

> [!NOTE]
> <span data-ttu-id="a9368-145">Das Wait-Handle wird nicht automatisch geschlossen, wenn Sie `EndInvoke`aufrufen.</span><span class="sxs-lookup"><span data-stu-id="a9368-145">The wait handle is not closed automatically when you call `EndInvoke`.</span></span> <span data-ttu-id="a9368-146">Wenn Sie alle Verweise auf das Wait-Handle freigeben, werden Systemressourcen frei, sobald das Wait-Handle von der Garbage Collection zurückgefordert wird.</span><span class="sxs-lookup"><span data-stu-id="a9368-146">If you release all references to the wait handle, system resources are freed when garbage collection reclaims the wait handle.</span></span> <span data-ttu-id="a9368-147">Um die Systemressourcen unmittelbar nach der Verwendung des Wait-Handles freizugeben, löschen Sie es, indem Sie die <xref:System.Threading.WaitHandle.Close%2A?displayProperty=nameWithType> -Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="a9368-147">To free the system resources as soon as you are finished using the wait handle, dispose of it by calling the <xref:System.Threading.WaitHandle.Close%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="a9368-148">Garbage Collection arbeitet effizienter, wenn verwerfbare Objekte explizit entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="a9368-148">Garbage collection works more efficiently when disposable objects are explicitly disposed.</span></span>

 [!code-cpp[AsyncDelegateExamples#3](../../../samples/snippets/cpp/VS_Snippets_CLR/AsyncDelegateExamples/cpp/waithandle.cpp#3)]
 [!code-csharp[AsyncDelegateExamples#3](../../../samples/snippets/csharp/VS_Snippets_CLR/AsyncDelegateExamples/CS/waithandle.cs#3)]
 [!code-vb[AsyncDelegateExamples#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/AsyncDelegateExamples/VB/WaitHandle.vb#3)]

## <a name="polling-for-asynchronous-call-completion"></a><span data-ttu-id="a9368-149">Abrufen der asynchronen Aufrufbeendigung</span><span class="sxs-lookup"><span data-stu-id="a9368-149">Polling for Asynchronous Call Completion</span></span>
 <span data-ttu-id="a9368-150">Mit der <xref:System.IAsyncResult.IsCompleted%2A> -Eigenschaft des von <xref:System.IAsyncResult> zurückgegebenen `BeginInvoke` können Sie feststellen, wann der asynchrone Aufruf abgeschlossen wird.</span><span class="sxs-lookup"><span data-stu-id="a9368-150">You can use the <xref:System.IAsyncResult.IsCompleted%2A> property of the <xref:System.IAsyncResult> returned by `BeginInvoke` to discover when the asynchronous call completes.</span></span> <span data-ttu-id="a9368-151">Dieses Verfahren ist empfehlenswert, wenn der asynchrone Aufruf aus einem Thread für die Benutzeroberfläche erfolgt.</span><span class="sxs-lookup"><span data-stu-id="a9368-151">You might do this when making the asynchronous call from a thread that services the user interface.</span></span> <span data-ttu-id="a9368-152">Durch das Abrufen der Beendigung kann die Verarbeitung vom aufrufenden Thread fortgesetzt werden, während der asynchrone Aufruf für einen <xref:System.Threading.ThreadPool> -Thread ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="a9368-152">Polling for completion allows the calling thread to continue executing while the asynchronous call executes on a <xref:System.Threading.ThreadPool> thread.</span></span>

 [!code-cpp[AsyncDelegateExamples#4](../../../samples/snippets/cpp/VS_Snippets_CLR/AsyncDelegateExamples/cpp/polling.cpp#4)]
 [!code-csharp[AsyncDelegateExamples#4](../../../samples/snippets/csharp/VS_Snippets_CLR/AsyncDelegateExamples/CS/polling.cs#4)]
 [!code-vb[AsyncDelegateExamples#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/AsyncDelegateExamples/VB/polling.vb#4)]

## <a name="executing-a-callback-method-when-an-asynchronous-call-completes"></a><span data-ttu-id="a9368-153">Ausführen einer Rückrufmethode bei Beendigung eines asynchronen Aufrufs</span><span class="sxs-lookup"><span data-stu-id="a9368-153">Executing a Callback Method When an Asynchronous Call Completes</span></span>
 <span data-ttu-id="a9368-154">Wenn der Thread, der den asynchronen Aufruf gestartet hat, die Ergebnisse nicht verarbeiten muss, können Sie bei Beendigung des Aufrufs eine Rückrufmethode ausführen.</span><span class="sxs-lookup"><span data-stu-id="a9368-154">If the thread that initiates the asynchronous call does not need to be the thread that processes the results, you can execute a callback method when the call completes.</span></span> <span data-ttu-id="a9368-155">Die Rückrufmethode wird auf einem <xref:System.Threading.ThreadPool> -Thread ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="a9368-155">The callback method is executed on a <xref:System.Threading.ThreadPool> thread.</span></span>

 <span data-ttu-id="a9368-156">Um eine Rückrufmethode verwenden zu können, müssen Sie `BeginInvoke` an einen <xref:System.AsyncCallback> -Delegaten übergeben, der die Rückrufmethode darstellt.</span><span class="sxs-lookup"><span data-stu-id="a9368-156">To use a callback method, you must pass `BeginInvoke` an <xref:System.AsyncCallback> delegate that represents the callback method.</span></span> <span data-ttu-id="a9368-157">Sie können auch ein Objekt übergeben, das die von der Rückrufmethode zu verwendenden Informationen enthält.</span><span class="sxs-lookup"><span data-stu-id="a9368-157">You can also pass an object that contains information to be used by the callback method.</span></span> <span data-ttu-id="a9368-158">Mit der Rückrufmethode können Sie das <xref:System.IAsyncResult>, das den einzigen Parameter der Rückrufmethode darstellt, in ein <xref:System.Runtime.Remoting.Messaging.AsyncResult> -Objekt umwandeln.</span><span class="sxs-lookup"><span data-stu-id="a9368-158">In the callback method, you can cast the <xref:System.IAsyncResult>, which is the only parameter of the callback method, to an <xref:System.Runtime.Remoting.Messaging.AsyncResult> object.</span></span> <span data-ttu-id="a9368-159">Mithilfe der <xref:System.Runtime.Remoting.Messaging.AsyncResult.AsyncDelegate%2A?displayProperty=nameWithType> -Eigenschaft erhalten Sie dann den Delegaten, der zur Initiierung des Aufrufs verwendet wurde, sodass Sie `EndInvoke`aufrufen können.</span><span class="sxs-lookup"><span data-stu-id="a9368-159">You can then use the <xref:System.Runtime.Remoting.Messaging.AsyncResult.AsyncDelegate%2A?displayProperty=nameWithType> property to get the delegate that was used to initiate the call so that you can call `EndInvoke`.</span></span>

 <span data-ttu-id="a9368-160">Hinweise zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="a9368-160">Notes on the example:</span></span>

- <span data-ttu-id="a9368-161">Der `threadId`-Parameter von `TestMethod` ist ein `out`-Parameter (`<Out>` `ByRef` in Visual Basic). Deshalb wird sein Eingabewert niemals von `TestMethod` verwendet.</span><span class="sxs-lookup"><span data-stu-id="a9368-161">The `threadId` parameter of `TestMethod` is an `out` parameter ([`<Out>` `ByRef` in Visual Basic), so its input value is never used by `TestMethod`.</span></span> <span data-ttu-id="a9368-162">Eine Dummyvariable wird an den `BeginInvoke` -Aufruf übergeben.</span><span class="sxs-lookup"><span data-stu-id="a9368-162">A dummy variable is passed to the `BeginInvoke` call.</span></span> <span data-ttu-id="a9368-163">Wenn der `threadId` -Parameter ein `ref` -Parameter wäre (`ByRef` in Visual Basic), müsste die Variable ein Feld auf Klassenebene darstellen, damit sie sowohl an `BeginInvoke` als auch an `EndInvoke`übergeben werden könnte.</span><span class="sxs-lookup"><span data-stu-id="a9368-163">If the `threadId` parameter were a `ref` parameter (`ByRef` in Visual Basic), the variable would have to be a class-level field so that it could be passed to both `BeginInvoke` and `EndInvoke`.</span></span>

- <span data-ttu-id="a9368-164">Die an `BeginInvoke` übergebenen Zustandsinformationen bestehen aus einer Formatzeichenfolge, die von der Rückrufmethode zum Formatieren einer Ausgabemeldung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="a9368-164">The state information that is passed to `BeginInvoke` is a format string, which the callback method uses to format an output message.</span></span> <span data-ttu-id="a9368-165">Da sie als <xref:System.Object>-Typ übergeben werden, müssen die Zustandsinformationen vor der Verwendung in den geeigneten Typ umgewandelt werden.</span><span class="sxs-lookup"><span data-stu-id="a9368-165">Because it is passed as type <xref:System.Object>, the state information must be cast to its proper type before it can be used.</span></span>

- <span data-ttu-id="a9368-166">Der Rückruf erfolgt in einem <xref:System.Threading.ThreadPool> -Thread.</span><span class="sxs-lookup"><span data-stu-id="a9368-166">The callback is made on a <xref:System.Threading.ThreadPool> thread.</span></span> <span data-ttu-id="a9368-167"><xref:System.Threading.ThreadPool> -Threads sind Hintergrundthreads, die nicht dafür sorgen, dass die Anwendung weiter ausgeführt wird, wenn der Hauptthread beendet wird. Aus diesem Grund muss der Hauptthread des Beispiels im Ruhezustand verbleiben, bis der Rückruf abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="a9368-167"><xref:System.Threading.ThreadPool> threads are background threads, which do not keep the application running if the main thread ends, so the main thread of the example has to sleep long enough for the callback to finish.</span></span>

 [!code-cpp[AsyncDelegateExamples#5](../../../samples/snippets/cpp/VS_Snippets_CLR/AsyncDelegateExamples/cpp/callback.cpp#5)]
 [!code-csharp[AsyncDelegateExamples#5](../../../samples/snippets/csharp/VS_Snippets_CLR/AsyncDelegateExamples/CS/callback.cs#5)]
 [!code-vb[AsyncDelegateExamples#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/AsyncDelegateExamples/VB/callback.vb#5)]

## <a name="see-also"></a><span data-ttu-id="a9368-168">Siehe auch</span><span class="sxs-lookup"><span data-stu-id="a9368-168">See also</span></span>

- <xref:System.Delegate>
- [<span data-ttu-id="a9368-169">Ereignisbasiertes asynchrones Muster (EAP)</span><span class="sxs-lookup"><span data-stu-id="a9368-169">Event-based Asynchronous Pattern (EAP)</span></span>](event-based-asynchronous-pattern-eap.md)
