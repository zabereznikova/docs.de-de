---
title: Kommunikation zwischen Dienst und Dienst
description: Erfahren Sie, wie Back-End-cloudnative-mikrodienste mit anderen Back-End-Webdiensten kommunizieren.
author: robvet
ms.date: 09/09/2019
ms.openlocfilehash: a5124b8b83f62ff17b1230ead63db26e0c1f2a5b
ms.sourcegitcommit: 515469828d0f040e01bde01df6b8e4eb43630b06
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78675135"
---
# <a name="service-to-service-communication"></a><span data-ttu-id="67460-103">Kommunikation zwischen Dienst und Dienst</span><span class="sxs-lookup"><span data-stu-id="67460-103">Service-to-service communication</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="67460-104">Beim Umstieg vom Front-End-Client werden nun die Kommunikation zwischen Back-End-Verbindungen miteinander angegangen.</span><span class="sxs-lookup"><span data-stu-id="67460-104">Moving from the front-end client, we now address back-end microservices communicate with each other.</span></span>

<span data-ttu-id="67460-105">Beim Erstellen einer cloudanwendung sollten Sie sensibel darauf achten, wie Back-End-Dienste miteinander kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="67460-105">When constructing a cloud-native application, you'll want to be sensitive to how back-end services communicate with each other.</span></span> <span data-ttu-id="67460-106">Im Idealfall umso besser ist die Kommunikation zwischen Diensten.</span><span class="sxs-lookup"><span data-stu-id="67460-106">Ideally, the less inter-service communication, the better.</span></span> <span data-ttu-id="67460-107">Die Vermeidung ist jedoch nicht immer möglich, da sich Back-End-Dienste oft aufeinander verlassen, um einen Vorgang abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="67460-107">However, avoidance isn't always possible as back-end services often rely on one another to complete an operation.</span></span>

<span data-ttu-id="67460-108">Es gibt mehrere häufig akzeptierte Ansätze für die Implementierung der Dienst übergreifenden Kommunikation.</span><span class="sxs-lookup"><span data-stu-id="67460-108">There are several widely accepted approaches to implementing cross-service communication.</span></span> <span data-ttu-id="67460-109">Der *Typ der Kommunikations Interaktion* wird häufig die beste Vorgehensweise bestimmen.</span><span class="sxs-lookup"><span data-stu-id="67460-109">The *type of communication interaction* will often determine the best approach.</span></span>

<span data-ttu-id="67460-110">Beachten Sie die folgenden Interaktions Typen:</span><span class="sxs-lookup"><span data-stu-id="67460-110">Consider the following interaction types:</span></span>

- <span data-ttu-id="67460-111">*Abfrage* – wenn ein aufrufenden-mikrodienst eine Antwort von einem aufgerufenen-mikroservice erfordert, z. b. "Hey, geben Sie mir die Käufer Informationen für eine bestimmte Kunden-ID."</span><span class="sxs-lookup"><span data-stu-id="67460-111">*Query* – when a calling microservice requires a response from a called microservice, such as, "Hey, give me the buyer information for a given customer Id."</span></span>

- <span data-ttu-id="67460-112">*Befehl* – wenn der aufrufende-mikroservice einen anderen-mikrodienst benötigt, um eine Aktion auszuführen, aber keine Antwort benötigt, wie z. b. "Hey, geben Sie diese Bestellung einfach" an.</span><span class="sxs-lookup"><span data-stu-id="67460-112">*Command* – when the calling microservice needs another microservice to execute an action but doesn't require a response, such as, "Hey, just ship this order."</span></span>

- <span data-ttu-id="67460-113">*Ereignis* – wenn ein als Verleger bezeichneten Dienst als Verleger bezeichnet wird, löst er ein Ereignis aus, bei dem sich der Zustand geändert hat oder eine Aktion aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="67460-113">*Event* – when a microservice, called the publisher, raises an event that state has changed or an action has occurred.</span></span> <span data-ttu-id="67460-114">Andere mit Interesse bezeichnete, als Abonnenten bezeichnete-Dienste können auf das Ereignis entsprechend reagieren.</span><span class="sxs-lookup"><span data-stu-id="67460-114">Other microservices, called subscribers, who are interested, can react to the event appropriately.</span></span> <span data-ttu-id="67460-115">Der Verleger und die Abonnenten sind einander nicht bewusst.</span><span class="sxs-lookup"><span data-stu-id="67460-115">The publisher and the subscribers aren't aware of each other.</span></span>

<span data-ttu-id="67460-116">Bei der Ausführung von Vorgängen, die eine Dienst übergreifende Interaktion erfordern, wird in der Regel eine Kombination dieser Interaktions Typen verwendet.</span><span class="sxs-lookup"><span data-stu-id="67460-116">Microservice systems typically use a combination of these interaction types when executing operations that require cross-service interaction.</span></span> <span data-ttu-id="67460-117">Sehen wir uns die einzelnen Schritte an, und wie Sie Sie implementieren können.</span><span class="sxs-lookup"><span data-stu-id="67460-117">Let's take a close look at each and how you might implement them.</span></span>

## <a name="queries"></a><span data-ttu-id="67460-118">Abfragen</span><span class="sxs-lookup"><span data-stu-id="67460-118">Queries</span></span>

<span data-ttu-id="67460-119">Häufig muss ein mikrodienst eine andere *Abfrage* ausführen, die eine sofortige Antwort benötigt, um einen Vorgang abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="67460-119">Many times, one microservice might need to *query* another, requiring an immediate response to complete an operation.</span></span> <span data-ttu-id="67460-120">Ein Einkaufskorb-microservice benötigt möglicherweise Produktinformationen und einen Preis, um dem Warenkorb ein Element hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="67460-120">A shopping basket microservice may need product information and a price to add an item to its basket.</span></span> <span data-ttu-id="67460-121">Es gibt eine Reihe von Ansätzen zum Implementieren von Abfrage Vorgängen.</span><span class="sxs-lookup"><span data-stu-id="67460-121">There are a number of approaches for implementing query operations.</span></span>

### <a name="requestresponse-messaging"></a><span data-ttu-id="67460-122">Messaging vom Typ 'Anforderungsantwort'</span><span class="sxs-lookup"><span data-stu-id="67460-122">Request/Response Messaging</span></span>

<span data-ttu-id="67460-123">Eine Möglichkeit zum Implementieren dieses Szenarios besteht darin, dass der aufrufende Back-End-Dienst direkte HTTP-Anforderungen an die für die Abfrage erforderlichen mikrodienste stellt, wie in Abbildung 4-8 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="67460-123">One option for implementing this scenario is for the calling back-end microservice to make direct HTTP requests to the microservices it needs to query, shown in Figure 4-8.</span></span>

![Direkte HTTP-Kommunikation](./media/direct-http-communication.png)

<span data-ttu-id="67460-125">**Abbildung 4-8**.</span><span class="sxs-lookup"><span data-stu-id="67460-125">**Figure 4-8**.</span></span> <span data-ttu-id="67460-126">Direkte HTTP-Kommunikation</span><span class="sxs-lookup"><span data-stu-id="67460-126">Direct HTTP communication</span></span>

<span data-ttu-id="67460-127">Während direkte http-Aufrufe zwischen den-Diensten relativ einfach zu implementieren sind, sollten Sie darauf achten, diese Vorgehensweise zu minimieren.</span><span class="sxs-lookup"><span data-stu-id="67460-127">While direct HTTP calls between microservices are relatively simple to implement, care should be taken to minimize this practice.</span></span> <span data-ttu-id="67460-128">Zum Starten sind diese Aufrufe immer *synchron* und blockieren den Vorgang, bis ein Ergebnis zurückgegeben wird oder die Anforderungs Zeit übersteigt.</span><span class="sxs-lookup"><span data-stu-id="67460-128">To start, these calls are always *synchronous* and will block the operation until a result is returned or the request times outs.</span></span> <span data-ttu-id="67460-129">Wenn sich eigenständige, unabhängige Dienste befinden, die unabhängig voneinander entwickelt und häufig bereitgestellt werden können, werden Sie jetzt miteinander gekoppelt.</span><span class="sxs-lookup"><span data-stu-id="67460-129">What were once self-contained, independent services, able to evolve independently and deploy frequently, now become coupled to each other.</span></span> <span data-ttu-id="67460-130">Da die Kopplung zwischen den mikrodiensten zunimmt, verringern sich ihre architektonischen Vorteile.</span><span class="sxs-lookup"><span data-stu-id="67460-130">As coupling among microservices increase, their architectural benefits diminish.</span></span>

<span data-ttu-id="67460-131">Das Ausführen einer seltenen Anforderung, die einen einzelnen direkten http-Rückruf an einen anderen-Dienst ausführt, ist möglicherweise für einige Systeme akzeptabel.</span><span class="sxs-lookup"><span data-stu-id="67460-131">Executing an infrequent request that makes a single direct HTTP call to another microservice might be acceptable for some systems.</span></span> <span data-ttu-id="67460-132">Aufrufe mit hohem Volumen, die direkte http-Aufrufe mehrerer mikrodienste aufrufen, sind jedoch nicht empfehlenswert.</span><span class="sxs-lookup"><span data-stu-id="67460-132">However, high-volume calls that invoke direct HTTP calls to multiple microservices aren't advisable.</span></span> <span data-ttu-id="67460-133">Sie können die Latenzzeit erhöhen und sich negativ auf die Leistung, Skalierbarkeit und Verfügbarkeit Ihres Systems auswirken.</span><span class="sxs-lookup"><span data-stu-id="67460-133">They can increase latency and negatively impact the performance, scalability, and availability of your system.</span></span> <span data-ttu-id="67460-134">Noch schlimmer ist, dass eine lange Folge von direkter HTTP-Kommunikation zu tiefgreifenden und komplexen Ketten synchroner Aufrufe von mikrodiensten führen kann, wie in Abbildung 4-9 dargestellt:</span><span class="sxs-lookup"><span data-stu-id="67460-134">Even worse, a long series of direct HTTP communication can lead to deep and complex chains of synchronous microservices calls, shown in Figure 4-9:</span></span>

![Verketten von http-Abfragen](./media/chaining-http-queries.png)

<span data-ttu-id="67460-136">**Abbildung 4-9.**</span><span class="sxs-lookup"><span data-stu-id="67460-136">**Figure 4-9**.</span></span> <span data-ttu-id="67460-137">Verketten von http-Abfragen</span><span class="sxs-lookup"><span data-stu-id="67460-137">Chaining HTTP queries</span></span>

<span data-ttu-id="67460-138">Sie können sich das Risiko in dem in der vorherigen Abbildung gezeigten Entwurf sicherlich vorstellen.</span><span class="sxs-lookup"><span data-stu-id="67460-138">You can certainly imagine the risk in the design shown in the previous image.</span></span> <span data-ttu-id="67460-139">Was geschieht, wenn Schritt \#3 fehlschlägt?</span><span class="sxs-lookup"><span data-stu-id="67460-139">What happens if Step \#3 fails?</span></span> <span data-ttu-id="67460-140">Oder Schritt \#8 schlägt fehl?</span><span class="sxs-lookup"><span data-stu-id="67460-140">Or Step \#8 fails?</span></span> <span data-ttu-id="67460-141">Wie werden Sie wieder hergestellt?</span><span class="sxs-lookup"><span data-stu-id="67460-141">How do you recover?</span></span> <span data-ttu-id="67460-142">Was geschieht, wenn Schritt \#6 langsam ist, weil der zugrunde liegende Dienst ausgelastet ist?</span><span class="sxs-lookup"><span data-stu-id="67460-142">What if Step \#6 is slow because the underlying service is busy?</span></span> <span data-ttu-id="67460-143">Wie können Sie fortfahren?</span><span class="sxs-lookup"><span data-stu-id="67460-143">How do you continue?</span></span> <span data-ttu-id="67460-144">Selbst wenn alles ordnungsgemäß funktioniert, stellen Sie sich die Latenzzeit dieses Aufrufs vor, also die Summe der Latenz der einzelnen Schritte.</span><span class="sxs-lookup"><span data-stu-id="67460-144">Even if all works correctly, think of the latency this call would incur, which is the sum of the latency of each step.</span></span>

<span data-ttu-id="67460-145">Der große Grad an Kopplung in der vorherigen Abbildung deutet darauf hin, dass die Dienste nicht optimal modelliert wurden.</span><span class="sxs-lookup"><span data-stu-id="67460-145">The large degree of coupling in the previous image suggests the services weren't optimally modeled.</span></span> <span data-ttu-id="67460-146">Es würde das Team anheften, seinen Entwurf wiederholen zu müssen.</span><span class="sxs-lookup"><span data-stu-id="67460-146">It would behoove the team to revisit their design.</span></span>

### <a name="materialized-view-pattern"></a><span data-ttu-id="67460-147">Muster für materialisierte Sichten</span><span class="sxs-lookup"><span data-stu-id="67460-147">Materialized View pattern</span></span>

<span data-ttu-id="67460-148">Eine beliebte Option zum Entfernen der Verbindung mit dem mikroservice ist das [materialisierte Ansichts Muster](https://docs.microsoft.com/azure/architecture/patterns/materialized-view).</span><span class="sxs-lookup"><span data-stu-id="67460-148">A popular option for removing microservice coupling is the [Materialized View pattern](https://docs.microsoft.com/azure/architecture/patterns/materialized-view).</span></span> <span data-ttu-id="67460-149">Bei diesem Muster speichert ein-Dienst seine eigene lokale, denormalisierte Kopie von Daten, die sich im Besitz anderer Dienste befinden.</span><span class="sxs-lookup"><span data-stu-id="67460-149">With this pattern, a microservice stores its own local, denormalized copy of data that's owned by other services.</span></span> <span data-ttu-id="67460-150">Anstelle des waren Korb-microservice, der den Produktkatalog und die Preise für microservices abfragt, behält er seine eigene lokale Kopie dieser Daten bei.</span><span class="sxs-lookup"><span data-stu-id="67460-150">Instead of the Shopping Basket microservice querying the Product Catalog and Pricing microservices, it maintains its own local copy of that data.</span></span> <span data-ttu-id="67460-151">Dieses Muster eliminiert unnötige Kopplung und verbessert die Zuverlässigkeit und die Reaktionszeit.</span><span class="sxs-lookup"><span data-stu-id="67460-151">This pattern eliminates unnecessary coupling and improves reliability and response time.</span></span> <span data-ttu-id="67460-152">Der gesamte Vorgang wird innerhalb eines einzelnen Prozesses ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="67460-152">The entire operation executes inside a single process.</span></span> <span data-ttu-id="67460-153">Wir untersuchen dieses Muster und andere Daten Aspekte in Kapitel 5.</span><span class="sxs-lookup"><span data-stu-id="67460-153">We explore this pattern and other data concerns in Chapter 5.</span></span>

### <a name="service-aggregator-pattern"></a><span data-ttu-id="67460-154">Dienst Aggregator-Muster</span><span class="sxs-lookup"><span data-stu-id="67460-154">Service Aggregator Pattern</span></span>

<span data-ttu-id="67460-155">Eine weitere Möglichkeit zum Ausschließen der Kopplung zwischen einem Dienst und einem mikrodienst ist ein [Aggregator-mikroservice](https://devblogs.microsoft.com/cesardelatorre/designing-and-implementing-api-gateways-with-ocelot-in-a-microservices-and-container-based-architecture/), der in der lila Abbildung 4-10 dargestellt wird.</span><span class="sxs-lookup"><span data-stu-id="67460-155">Another option for eliminating microservice-to-microservice coupling is an [Aggregator microservice](https://devblogs.microsoft.com/cesardelatorre/designing-and-implementing-api-gateways-with-ocelot-in-a-microservices-and-container-based-architecture/), shown in purple in Figure 4-10.</span></span>

![Aggregator-Dienst](./media/aggregator-service.png)

<span data-ttu-id="67460-157">**Abbildung 4-10**.</span><span class="sxs-lookup"><span data-stu-id="67460-157">**Figure 4-10**.</span></span> <span data-ttu-id="67460-158">Aggregator-mikroservice</span><span class="sxs-lookup"><span data-stu-id="67460-158">Aggregator microservice</span></span>

<span data-ttu-id="67460-159">Das Muster isoliert einen Vorgang, der Aufrufe mehrerer Back-End-mikrodienste ausführt und seine Logik in einen spezialisierten-mikrodienst zentralisiert.</span><span class="sxs-lookup"><span data-stu-id="67460-159">The pattern isolates an operation that makes calls to multiple back-end microservices, centralizing its logic into a specialized microservice.</span></span>  <span data-ttu-id="67460-160">Mit dem in der vorherigen Abbildung aufgeführten mikroservice für den violetten Checkout-Aggregator wird der Workflow für den Checkout-Vorgang orchestriert.</span><span class="sxs-lookup"><span data-stu-id="67460-160">The purple checkout aggregator microservice in the previous figure orchestrates the workflow for the Checkout operation.</span></span> <span data-ttu-id="67460-161">Es umfasst Aufrufe mehrerer Back-End-mikrodienste in sequenzierter Reihenfolge.</span><span class="sxs-lookup"><span data-stu-id="67460-161">It includes calls to several back-end microservices in a sequenced order.</span></span> <span data-ttu-id="67460-162">Daten aus dem Workflow werden aggregiert und an den Aufrufer zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="67460-162">Data from the workflow is aggregated and returned to the caller.</span></span> <span data-ttu-id="67460-163">Während es weiterhin direkte http-Aufrufe implementiert, reduziert der Aggregator-mikrodienst direkte Abhängigkeiten zwischen Back-End-Webdiensten.</span><span class="sxs-lookup"><span data-stu-id="67460-163">While it still implements direct HTTP calls, the aggregator microservice reduces direct dependencies among back-end microservices.</span></span>

### <a name="requestreply-pattern"></a><span data-ttu-id="67460-164">Anforderungs-/Antwortmuster</span><span class="sxs-lookup"><span data-stu-id="67460-164">Request/Reply Pattern</span></span>

<span data-ttu-id="67460-165">Ein weiterer Ansatz zum entkoppeln synchroner HTTP-Nachrichten ist ein [Anforderungs-Antwort-Muster](https://www.enterpriseintegrationpatterns.com/patterns/messaging/RequestReply.html), das die Warteschlangen Kommunikation verwendet.</span><span class="sxs-lookup"><span data-stu-id="67460-165">Another approach for decoupling synchronous HTTP messages is a [Request-Reply Pattern](https://www.enterpriseintegrationpatterns.com/patterns/messaging/RequestReply.html), which uses queuing communication.</span></span> <span data-ttu-id="67460-166">Die Kommunikation über eine Warteschlange ist immer ein unidirektionaler Kanal, wobei ein Producer die Nachricht sendet, und der Consumer Sie empfängt.</span><span class="sxs-lookup"><span data-stu-id="67460-166">Communication using a queue is always a one-way channel, with a producer sending the message and consumer receiving it.</span></span> <span data-ttu-id="67460-167">Bei diesem Muster werden eine Anforderungs Warteschlange und eine Antwort Warteschlange implementiert, wie in Abbildung 4-11 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="67460-167">With this pattern, both a request queue and response queue are implemented, shown in Figure 4-11.</span></span>

![Anforderung-Antwort-Muster](./media/request-reply-pattern.png)

<span data-ttu-id="67460-169">**Abbildung 4-11**.</span><span class="sxs-lookup"><span data-stu-id="67460-169">**Figure 4-11**.</span></span> <span data-ttu-id="67460-170">Anforderung-Antwort-Muster</span><span class="sxs-lookup"><span data-stu-id="67460-170">Request-reply pattern</span></span>

<span data-ttu-id="67460-171">Hier erstellt der Nachrichten Producer eine Abfrage basierte Nachricht, die eine eindeutige Korrelations-ID enthält, und fügt Sie in eine Anforderungs Warteschlange ein.</span><span class="sxs-lookup"><span data-stu-id="67460-171">Here, the message producer creates a query-based message that contains a unique correlation ID and places it into a request queue.</span></span> <span data-ttu-id="67460-172">Der verarbeitende Dienst entfernt die Nachrichten aus der Warteschlange, verarbeitet sie und fügt die Antwort in die Antwort Warteschlange mit der gleichen Korrelations-ID ein.</span><span class="sxs-lookup"><span data-stu-id="67460-172">The consuming service dequeues the messages, processes it and places the response into the response queue with the same correlation ID.</span></span> <span data-ttu-id="67460-173">Der Producer-Dienst entfernt die Nachricht aus der Warteschlange, vergleicht sie mit der Korrelations-ID und setzt die Verarbeitung fort</span><span class="sxs-lookup"><span data-stu-id="67460-173">The producer service dequeues the message, matches it with the correlation ID and continues processing.</span></span> <span data-ttu-id="67460-174">Im nächsten Abschnitt werden die Warteschlangen ausführlich behandelt.</span><span class="sxs-lookup"><span data-stu-id="67460-174">We cover queues in detail in the next section.</span></span>

## <a name="commands"></a><span data-ttu-id="67460-175">Befehle</span><span class="sxs-lookup"><span data-stu-id="67460-175">Commands</span></span>

<span data-ttu-id="67460-176">Eine andere Art von Kommunikations Interaktion ist ein- *Befehl*.</span><span class="sxs-lookup"><span data-stu-id="67460-176">Another type of communication interaction is a *command*.</span></span> <span data-ttu-id="67460-177">Ein-Dienst benötigt möglicherweise einen anderen-mikrodienst, um eine Aktion auszuführen.</span><span class="sxs-lookup"><span data-stu-id="67460-177">A microservice may need another microservice to perform an action.</span></span> <span data-ttu-id="67460-178">Der "Bestellung"-mikrodienst benötigt möglicherweise den "Shipping"-Dienst, um eine Lieferung für eine genehmigte Bestellung zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="67460-178">The Ordering microservice may need the Shipping microservice to create a shipment for an approved order.</span></span> <span data-ttu-id="67460-179">In Abbildung 4-12 sendet ein als Producer bezeichneten mikrodienst eine Nachricht an einen anderen, den Consumer, der die Nachricht sendet.</span><span class="sxs-lookup"><span data-stu-id="67460-179">In Figure 4-12, one microservice, called a Producer, sends a message to another microservice, the Consumer, commanding it to do something.</span></span>

![Befehls Interaktion mit einer Warteschlange](./media/command-interaction-with-queue.png)

<span data-ttu-id="67460-181">**Abbildung 4-12.**</span><span class="sxs-lookup"><span data-stu-id="67460-181">**Figure 4-12**.</span></span> <span data-ttu-id="67460-182">Befehls Interaktion mit einer Warteschlange</span><span class="sxs-lookup"><span data-stu-id="67460-182">Command interaction with a queue</span></span>

<span data-ttu-id="67460-183">In den meisten Fällen ist für den Producer keine Antwort erforderlich, und die Nachricht kann ausgelöst *und vergessen* werden.</span><span class="sxs-lookup"><span data-stu-id="67460-183">Most often, the Producer doesn't require a response and can *fire-and-forget* the message.</span></span> <span data-ttu-id="67460-184">Wenn eine Antwort erforderlich ist, sendet der Consumer eine separate Nachricht zurück an den Producer auf einem anderen Kanal.</span><span class="sxs-lookup"><span data-stu-id="67460-184">If a reply is needed, the Consumer sends a separate message back to Producer on another channel.</span></span> <span data-ttu-id="67460-185">Eine Befehls Meldung wird am besten asynchron mit einer Nachrichten Warteschlange gesendet.</span><span class="sxs-lookup"><span data-stu-id="67460-185">A command message is best sent asynchronously with a message queue.</span></span> <span data-ttu-id="67460-186">wird von einem Lightweight-Nachrichten Broker unterstützt.</span><span class="sxs-lookup"><span data-stu-id="67460-186">supported by a lightweight message broker.</span></span> <span data-ttu-id="67460-187">Beachten Sie im vorherigen Diagramm, wie eine Warteschlange beide Dienste trennt und abkoppelt.</span><span class="sxs-lookup"><span data-stu-id="67460-187">In the previous diagram, note how a queue separates and decouples both services.</span></span>

<span data-ttu-id="67460-188">Eine Nachrichten Warteschlange ist ein Vermittler Konstrukt, über das ein Producer und ein Consumer eine Nachricht übergeben.</span><span class="sxs-lookup"><span data-stu-id="67460-188">A message queue is an intermediary construct through which a producer and consumer pass a message.</span></span> <span data-ttu-id="67460-189">Warteschlangen implementieren ein asynchrones Messaging Muster für Punkt-zu-Punkt-Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="67460-189">Queues implement an asynchronous, point-to-point messaging pattern.</span></span> <span data-ttu-id="67460-190">Der Producer weiß, wo ein Befehl gesendet werden muss, und leitet entsprechend weiter.</span><span class="sxs-lookup"><span data-stu-id="67460-190">The Producer knows where a command needs to be sent and routes appropriately.</span></span> <span data-ttu-id="67460-191">Die Warteschlange stellt sicher, dass eine Nachricht von genau einer der Consumer-Instanzen verarbeitet wird, die aus dem Kanal lesen.</span><span class="sxs-lookup"><span data-stu-id="67460-191">The queue guarantees that a message is processed by exactly one of the consumer instances that are reading from the channel.</span></span> <span data-ttu-id="67460-192">In diesem Szenario kann der Producer-oder Consumer-Dienst horizontal hochskaliert werden, ohne den anderen zu beeinflussen.</span><span class="sxs-lookup"><span data-stu-id="67460-192">In this scenario, either the producer or consumer service can scale out without affecting the other.</span></span> <span data-ttu-id="67460-193">Technologien können auf jeder Seite verschieden sein, was bedeutet, dass ein Java-mikrodienst einen [golang](https://golang.org) -mikrodienst aufrufen könnte.</span><span class="sxs-lookup"><span data-stu-id="67460-193">As well, technologies can be disparate on each side, meaning that we might have a Java microservice calling a [Golang](https://golang.org) microservice.</span></span>

<span data-ttu-id="67460-194">In Kapitel 1 haben wir uns mit dem *Sichern von Diensten*beschäftigt.</span><span class="sxs-lookup"><span data-stu-id="67460-194">In chapter 1, we talked about *backing services*.</span></span> <span data-ttu-id="67460-195">Unterstützungsdienste sind zusätzliche Ressourcen, von denen cloudnative Systeme abhängig sind.</span><span class="sxs-lookup"><span data-stu-id="67460-195">Backing services are ancillary resources upon which cloud-native systems depend.</span></span> <span data-ttu-id="67460-196">Nachrichten Warteschlangen sind Sicherungsdienste.</span><span class="sxs-lookup"><span data-stu-id="67460-196">Message queues are backing services.</span></span> <span data-ttu-id="67460-197">Die Azure-Cloud unterstützt zwei Arten von Nachrichten Warteschlangen, die ihre cloudbasierten Systeme nutzen können, um Befehls Messaging zu implementieren: Azure Storage Warteschlangen und Azure Service Bus Warteschlangen.</span><span class="sxs-lookup"><span data-stu-id="67460-197">The Azure cloud supports two types of message queues that your cloud-native systems can consume to implement command messaging: Azure Storage Queues and Azure Service Bus Queues.</span></span>

### <a name="azure-storage-queues"></a><span data-ttu-id="67460-198">Azure Storage Warteschlangen</span><span class="sxs-lookup"><span data-stu-id="67460-198">Azure Storage Queues</span></span>

<span data-ttu-id="67460-199">Azure Storage-Warteschlangen bieten eine einfache Warteschlangen Infrastruktur, die schnell, kostengünstig und durch Azure-Speicher Konten unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="67460-199">Azure storage queues offer a simple queueing infrastructure that is fast, affordable, and backed by Azure storage accounts.</span></span>

<span data-ttu-id="67460-200">[Azure Storage Warteschlangen](https://docs.microsoft.com/azure/storage/queues/storage-queues-introduction) verfügen über einen Rest-basierten Warteschlangenmechanismus mit zuverlässigem und permanentem Messaging.</span><span class="sxs-lookup"><span data-stu-id="67460-200">[Azure Storage Queues](https://docs.microsoft.com/azure/storage/queues/storage-queues-introduction) feature a REST-based queuing mechanism with reliable and persistent messaging.</span></span> <span data-ttu-id="67460-201">Sie bieten einen minimalen Funktionsumfang, sind aber kostengünstig und speichern Millionen von Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="67460-201">They provide a minimal feature set, but are inexpensive and store millions of messages.</span></span> <span data-ttu-id="67460-202">Ihre Kapazität reicht von bis zu 500 TB.</span><span class="sxs-lookup"><span data-stu-id="67460-202">Their capacity ranges up to 500 TB.</span></span> <span data-ttu-id="67460-203">Eine einzelne Nachricht kann bis zu 64 KB groß sein.</span><span class="sxs-lookup"><span data-stu-id="67460-203">A single message can be up to 64 KB in size.</span></span>

<span data-ttu-id="67460-204">Sie können über authentifizierte Aufrufe mithilfe von http oder HTTPS von überall auf der Welt auf Nachrichten zugreifen.</span><span class="sxs-lookup"><span data-stu-id="67460-204">You can access messages from anywhere in the world via authenticated calls using HTTP or HTTPS.</span></span> <span data-ttu-id="67460-205">Speicher Warteschlangen können auf eine große Anzahl von gleichzeitigen Clients horizontal hochskaliert werden, um Datenverkehrs Spitzen</span><span class="sxs-lookup"><span data-stu-id="67460-205">Storage queues can scale out to large numbers of concurrent clients to handle traffic spikes.</span></span>

<span data-ttu-id="67460-206">Das heißt, es gibt Einschränkungen für den Dienst:</span><span class="sxs-lookup"><span data-stu-id="67460-206">That said, there are limitations with the service:</span></span>

- <span data-ttu-id="67460-207">Die Nachrichten Reihenfolge ist nicht garantiert</span><span class="sxs-lookup"><span data-stu-id="67460-207">Message order isn't guaranteed.</span></span>

- <span data-ttu-id="67460-208">Eine Nachricht kann nur sieben Tage lang aufbewahrt werden, bevor Sie automatisch entfernt wird.</span><span class="sxs-lookup"><span data-stu-id="67460-208">A message can only persist for seven days before it's automatically removed.</span></span>

- <span data-ttu-id="67460-209">Die Unterstützung der Zustands Verwaltung, der Duplikaterkennung oder der Transaktionen ist nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="67460-209">Support for state management, duplicate detection, or transactions isn't available.</span></span>

<span data-ttu-id="67460-210">In Abbildung 4-13 wird die Hierarchie einer Azure Storage Warteschlange gezeigt.</span><span class="sxs-lookup"><span data-stu-id="67460-210">Figure 4-13 shows the hierarchy of an Azure Storage Queue.</span></span>

![Speicher Warteschlangen Hierarchie](./media/storage-queue-hierarchy.png)

<span data-ttu-id="67460-212">**Abbildung 4-13.**</span><span class="sxs-lookup"><span data-stu-id="67460-212">**Figure 4-13**.</span></span> <span data-ttu-id="67460-213">Speicher Warteschlangen Hierarchie</span><span class="sxs-lookup"><span data-stu-id="67460-213">Storage queue hierarchy</span></span>

<span data-ttu-id="67460-214">Beachten Sie in der obigen Abbildung, wie Speicher Warteschlangen Ihre Nachrichten im zugrunde liegenden Azure Storage Konto speichern.</span><span class="sxs-lookup"><span data-stu-id="67460-214">In the previous figure, note how storage queues store their messages in the underlying Azure Storage account.</span></span>

<span data-ttu-id="67460-215">Für Entwickler stellt Microsoft mehrere Client-und serverseitige Bibliotheken für die Verarbeitung von Speicher Warteschlangen bereit.</span><span class="sxs-lookup"><span data-stu-id="67460-215">For developers, Microsoft provides several client and server-side libraries for Storage queue processing.</span></span> <span data-ttu-id="67460-216">Die meisten wichtigen Plattformen werden unterstützt, einschließlich .net, Java, JavaScript, Ruby, Python und go.</span><span class="sxs-lookup"><span data-stu-id="67460-216">Most major platforms are supported including .NET, Java, JavaScript, Ruby, Python, and Go.</span></span> <span data-ttu-id="67460-217">Entwickler sollten niemals direkt mit diesen Bibliotheken kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="67460-217">Developers should never communicate directly with these libraries.</span></span> <span data-ttu-id="67460-218">Dadurch wird Ihr Code für den-Code eng mit dem Azure Storage Warteschlangendienst verknüpfen.</span><span class="sxs-lookup"><span data-stu-id="67460-218">Doing so will tightly couple your microservice code to the Azure Storage Queue service.</span></span> <span data-ttu-id="67460-219">Es ist eine bewährte Vorgehensweise, die Implementierungsdetails der API zu isolieren.</span><span class="sxs-lookup"><span data-stu-id="67460-219">It's a better practice to insulate the implementation details of the API.</span></span> <span data-ttu-id="67460-220">Stellen Sie eine Vermittlungs Schicht oder eine zwischen-API ein, die generische Vorgänge verfügbar macht und die konkrete Bibliothek kapselt.</span><span class="sxs-lookup"><span data-stu-id="67460-220">Introduce an intermediation layer, or intermediate API, that exposes generic operations and encapsulates the concrete library.</span></span> <span data-ttu-id="67460-221">Diese lose Kopplung ermöglicht das Austauschen eines Warteschlangen Dienstanbieter für einen anderen, ohne Änderungen am Haupt-Dienst Code vornehmen zu müssen.</span><span class="sxs-lookup"><span data-stu-id="67460-221">This loose coupling enables you to swap out one queuing service for another without having to make changes to the mainline service code.</span></span>

<span data-ttu-id="67460-222">Azure Storage Warteschlangen sind eine wirtschaftliche Option zum Implementieren von befehlsnachrichten in ihren cloudanwendungen.</span><span class="sxs-lookup"><span data-stu-id="67460-222">Azure Storage queues are an economical option to implement command messaging in your cloud-native applications.</span></span> <span data-ttu-id="67460-223">Dies gilt insbesondere dann, wenn eine Warteschlangen Größe 80 GB überschreitet oder eine einfache Funktionsgruppe zulässig ist.</span><span class="sxs-lookup"><span data-stu-id="67460-223">Especially when a queue size will exceed 80 GB, or a simple feature set is acceptable.</span></span> <span data-ttu-id="67460-224">Sie zahlen nur für die Speicherung der Nachrichten. Es fallen keine Kosten für die stündliche Abrechnung an.</span><span class="sxs-lookup"><span data-stu-id="67460-224">You only pay for the storage of the messages; there are no fixed hourly charges.</span></span>

### <a name="azure-service-bus-queues"></a><span data-ttu-id="67460-225">Azure Service Bus Warteschlangen</span><span class="sxs-lookup"><span data-stu-id="67460-225">Azure Service Bus Queues</span></span>

<span data-ttu-id="67460-226">Wenn Sie komplexere Messaging Anforderungen wünschen, sollten Sie Azure Service Bus Warteschlangen beachten.</span><span class="sxs-lookup"><span data-stu-id="67460-226">For more complex messaging requirements, consider Azure Service Bus queues.</span></span>

<span data-ttu-id="67460-227">Wenn Sie über eine robuste Nachrichten Infrastruktur verfügen, [Azure Service Bus](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-messaging-overview) ein *Broker Messaging-Modell*unterstützt.</span><span class="sxs-lookup"><span data-stu-id="67460-227">Sitting atop a robust message infrastructure, [Azure Service Bus](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-messaging-overview) supports a *brokered messaging model*.</span></span> <span data-ttu-id="67460-228">Nachrichten werden zuverlässig in einem Broker (der Warteschlange) gespeichert, bis Sie vom Consumer empfangen werden.</span><span class="sxs-lookup"><span data-stu-id="67460-228">Messages are reliably stored in a broker (the queue) until received by the consumer.</span></span> <span data-ttu-id="67460-229">Die Warteschlange garantiert eine FIFO-Nachrichtenübermittlung (First in/First Out) und respektiert dabei die Reihenfolge, in der Nachrichten zur Warteschlange hinzugefügt wurden.</span><span class="sxs-lookup"><span data-stu-id="67460-229">The queue guarantees First-In/First-Out (FIFO) message delivery, respecting the order in which messages were added to the queue.</span></span>

<span data-ttu-id="67460-230">Die Größe einer Nachricht kann viel größer sein, bis zu 256 KB.</span><span class="sxs-lookup"><span data-stu-id="67460-230">The size of a message can be much larger, up to 256 KB.</span></span> <span data-ttu-id="67460-231">Nachrichten werden für einen unbegrenzten Zeitraum in der Warteschlange gespeichert.</span><span class="sxs-lookup"><span data-stu-id="67460-231">Messages are persisted in the queue for an unlimited period of time.</span></span> <span data-ttu-id="67460-232">Service Bus unterstützt nicht nur HTTP-basierte Aufrufe, sondern bietet auch vollständige Unterstützung für das [ampq-Protokoll](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-amqp-overview).</span><span class="sxs-lookup"><span data-stu-id="67460-232">Service Bus supports not only HTTP-based calls, but also provides full support for the [AMPQ protocol](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-amqp-overview).</span></span> <span data-ttu-id="67460-233">Ampq ist ein cloudübergreifender Open-Standard-Anbieter, der ein binäres Protokoll und ein höheres Maß an Zuverlässigkeit unterstützt.</span><span class="sxs-lookup"><span data-stu-id="67460-233">AMPQ is an open-standard across vendors that supports a binary protocol and higher degrees of reliability.</span></span>

<span data-ttu-id="67460-234">Service Bus stellt einen umfangreichen Satz von Funktionen bereit, einschließlich der [Transaktionsunterstützung](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-transactions) und einer [Funktion zur doppelten Erkennung](https://docs.microsoft.com/azure/service-bus-messaging/duplicate-detection).</span><span class="sxs-lookup"><span data-stu-id="67460-234">Service Bus provides a rich set of features, including [transaction support](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-transactions) and a [duplicate detection feature](https://docs.microsoft.com/azure/service-bus-messaging/duplicate-detection).</span></span> <span data-ttu-id="67460-235">Die Warteschlange garantiert "höchstens einmal Übermittlung" pro Nachricht.</span><span class="sxs-lookup"><span data-stu-id="67460-235">The queue guarantees "at most once delivery" per message.</span></span> <span data-ttu-id="67460-236">Eine Nachricht, die bereits gesendet wurde, wird automatisch verworfen.</span><span class="sxs-lookup"><span data-stu-id="67460-236">It automatically discards a message that has already been sent.</span></span> <span data-ttu-id="67460-237">Wenn ein Producer zweifelhaft ist, kann er dieselbe Nachricht erneut senden und Service Bus sicherstellen, dass nur eine Kopie verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="67460-237">If a producer is in doubt, it can resend the same message, and Service Bus guarantees that only one copy will be processed.</span></span> <span data-ttu-id="67460-238">Durch die Duplikaterkennung müssen Sie keine zusätzlichen Infrastrukturen der Infrastruktur erstellen.</span><span class="sxs-lookup"><span data-stu-id="67460-238">Duplicate detection frees you from  having to build additional infrastructure plumbing.</span></span>

<span data-ttu-id="67460-239">Zwei weitere Unternehmens Features sind Partitionierung und Sitzungen.</span><span class="sxs-lookup"><span data-stu-id="67460-239">Two more enterprise features are partitioning and sessions.</span></span> <span data-ttu-id="67460-240">Eine konventionelle Service Bus Warteschlange wird von einem einzelnen Nachrichten Broker behandelt und in einem einzelnen Nachrichtenspeicher gespeichert.</span><span class="sxs-lookup"><span data-stu-id="67460-240">A conventional Service Bus queue is handled by a single message broker and stored in a single message store.</span></span> <span data-ttu-id="67460-241">Allerdings wird die Warteschlange durch [Service Bus Partitionierung](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-partitioning) auf mehrere Nachrichten Broker und Nachrichtenspeicher verteilt.</span><span class="sxs-lookup"><span data-stu-id="67460-241">But, [Service Bus Partitioning](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-partitioning) spreads the queue across multiple message brokers and message stores.</span></span> <span data-ttu-id="67460-242">Der Gesamtdurchsatz ist nicht mehr durch die Leistung eines einzelnen Nachrichten Brokers oder Messaging Speicher beschränkt.</span><span class="sxs-lookup"><span data-stu-id="67460-242">The overall throughput is no longer limited by the performance of a single message broker or messaging store.</span></span> <span data-ttu-id="67460-243">Bei einem temporären Ausfall eines Messaging Stores wird eine partitionierte Warteschlange nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="67460-243">A temporary outage of a messaging store doesn't render a partitioned queue unavailable.</span></span>

<span data-ttu-id="67460-244">[Service Bus Sitzungen](https://codingcanvas.com/azure-service-bus-sessions/) bieten eine Möglichkeit zum Gruppieren verwandter Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="67460-244">[Service Bus Sessions](https://codingcanvas.com/azure-service-bus-sessions/) provide a way to group-related messages.</span></span> <span data-ttu-id="67460-245">Stellen Sie sich ein Workflow Szenario vor, in dem Nachrichten zusammenverarbeitet und der Vorgang am Ende abgeschlossen werden muss.</span><span class="sxs-lookup"><span data-stu-id="67460-245">Imagine a workflow scenario where messages must be processed together and the operation completed at the end.</span></span> <span data-ttu-id="67460-246">Um die Vorteile zu nutzen, müssen Sitzungen explizit für die Warteschlange aktiviert sein, und jede zugehörige mestzung muss dieselbe Sitzungs-ID enthalten.</span><span class="sxs-lookup"><span data-stu-id="67460-246">To take advantage, sessions must be explicitly enabled for the queue and each related messaged must contain the same session ID.</span></span>

<span data-ttu-id="67460-247">Es gibt jedoch einige wichtige Vorsichtsmaßnahmen: Service Bus Warteschlangen Größe ist auf 80 GB beschränkt, was wesentlich kleiner ist als die verfügbaren Speicher Warteschlangen.</span><span class="sxs-lookup"><span data-stu-id="67460-247">However, there are some important caveats: Service Bus queues size is limited to 80 GB, which is much smaller than what's available from store queues.</span></span> <span data-ttu-id="67460-248">Außerdem verursachen Service Bus Warteschlangen einen Grundkosten und eine Gebühr pro Vorgang.</span><span class="sxs-lookup"><span data-stu-id="67460-248">Additionally, Service Bus queues incur a base cost and charge per operation.</span></span>

<span data-ttu-id="67460-249">In Abbildung 4-14 wird die allgemeine Architektur einer Service Bus Warteschlange beschrieben.</span><span class="sxs-lookup"><span data-stu-id="67460-249">Figure 4-14 outlines the high-level architecture of a Service Bus queue.</span></span>

![Service Bus-Warteschlange](./media/service-bus-queue.png)

<span data-ttu-id="67460-251">**Abbildung 4-14.**</span><span class="sxs-lookup"><span data-stu-id="67460-251">**Figure 4-14**.</span></span> <span data-ttu-id="67460-252">Service Bus-Warteschlange</span><span class="sxs-lookup"><span data-stu-id="67460-252">Service Bus queue</span></span>

<span data-ttu-id="67460-253">Beachten Sie in der vorherigen Abbildung die Punkt-zu-Punkt-Beziehung.</span><span class="sxs-lookup"><span data-stu-id="67460-253">In the previous figure, note the point-to-point relationship.</span></span> <span data-ttu-id="67460-254">Zwei Instanzen des gleichen Anbieters stellen Nachrichten in eine Warteschlange in eine einzelne Service Bus Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="67460-254">Two instances of the same provider are enqueuing messages into a single Service Bus queue.</span></span> <span data-ttu-id="67460-255">Jede Nachricht wird nur von einer von drei consumerinstanzen auf der rechten Seite verwendet.</span><span class="sxs-lookup"><span data-stu-id="67460-255">Each message is consumed by only one of three consumer instances on the right.</span></span> <span data-ttu-id="67460-256">Im nächsten Schritt wird erläutert, wie Sie Messaging implementieren, bei dem verschiedene Consumer die gleiche Nachricht benötigen.</span><span class="sxs-lookup"><span data-stu-id="67460-256">Next, we discuss how to implement messaging where different consumers may all be interested the same message.</span></span>

## <a name="events"></a><span data-ttu-id="67460-257">Events</span><span class="sxs-lookup"><span data-stu-id="67460-257">Events</span></span>

<span data-ttu-id="67460-258">Message queuate ist eine effektive Methode zum Implementieren der Kommunikation, bei der ein Producer einen Consumer asynchron an eine Nachricht senden kann.</span><span class="sxs-lookup"><span data-stu-id="67460-258">Message queuing is an effective way to implement communication where a producer can asynchronously send a consumer a message.</span></span> <span data-ttu-id="67460-259">Was passiert jedoch, wenn *viele verschiedene* Consumer an derselben Nachricht interessiert sind?</span><span class="sxs-lookup"><span data-stu-id="67460-259">However, what happens when *many different consumers* are interested in the same message?</span></span> <span data-ttu-id="67460-260">Eine dedizierte Nachrichten Warteschlange für jeden Consumer wäre nicht gut skalierbar und würde die Verwaltung erschweren.</span><span class="sxs-lookup"><span data-stu-id="67460-260">A dedicated message queue for each consumer wouldn't scale well and would become difficult to manage.</span></span>

<span data-ttu-id="67460-261">Um dieses Szenario zu beheben, wechseln wir zum dritten Typ der Nachrichten Interaktion, dem- *Ereignis*.</span><span class="sxs-lookup"><span data-stu-id="67460-261">To address this scenario, we move to the third type of message interaction, the *event*.</span></span> <span data-ttu-id="67460-262">Ein-mikrodienst gibt an, dass eine Aktion aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="67460-262">One microservice announces that an action had occurred.</span></span> <span data-ttu-id="67460-263">Andere, bei Interesse, reagieren auf die Aktion oder das Ereignis.</span><span class="sxs-lookup"><span data-stu-id="67460-263">Other microservices, if interested, react to the action, or event.</span></span>

<span data-ttu-id="67460-264">Das Ereignis ist ein zweistufiger Prozess.</span><span class="sxs-lookup"><span data-stu-id="67460-264">Eventing is a two-step process.</span></span> <span data-ttu-id="67460-265">Bei einer bestimmten Zustandsänderung veröffentlicht ein-Dienst ein Ereignis in einem Nachrichten Broker, sodass es für jeden anderen interessierten-Dienst verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="67460-265">For a given state change, a microservice publishes an event to a message broker, making it available to any other interested microservice.</span></span> <span data-ttu-id="67460-266">Der interessierte-mikrodienst wird benachrichtigt, indem er das-Ereignis im Nachrichten Broker abonniert.</span><span class="sxs-lookup"><span data-stu-id="67460-266">The interested microservice is notified by subscribing to the event in the message broker.</span></span> <span data-ttu-id="67460-267">Sie verwenden das [Veröffentlichen/Abonnieren-](https://docs.microsoft.com/azure/architecture/patterns/publisher-subscriber) Muster zum Implementieren der [ereignisbasierten Kommunikation](https://docs.microsoft.com/dotnet/standard/microservices-architecture/multi-container-microservice-net-applications/integration-event-based-microservice-communications).</span><span class="sxs-lookup"><span data-stu-id="67460-267">You use the [Publish/Subscribe](https://docs.microsoft.com/azure/architecture/patterns/publisher-subscriber) pattern to implement [event-based communication](https://docs.microsoft.com/dotnet/standard/microservices-architecture/multi-container-microservice-net-applications/integration-event-based-microservice-communications).</span></span>

<span data-ttu-id="67460-268">Abbildung 4-15 zeigt einen waren Korb-microservice, der ein Ereignis veröffentlicht, das zwei andere microservices abonniert hat.</span><span class="sxs-lookup"><span data-stu-id="67460-268">Figure 4-15 shows a shopping basket microservice publishing an event with two other microservices subscribing to it.</span></span>

![Ereignisgesteuerte Messaging](./media/event-driven-messaging.png)

<span data-ttu-id="67460-270">**Abbildung 4-15**.</span><span class="sxs-lookup"><span data-stu-id="67460-270">**Figure 4-15**.</span></span> <span data-ttu-id="67460-271">Ereignisgesteuerte Messaging</span><span class="sxs-lookup"><span data-stu-id="67460-271">Event-Driven messaging</span></span>

<span data-ttu-id="67460-272">Beachten Sie die *Ereignisbus* Komponente, die sich in der Mitte des Kommunikationskanals befindet.</span><span class="sxs-lookup"><span data-stu-id="67460-272">Note the *event bus* component that sits in the middle of the communication channel.</span></span> <span data-ttu-id="67460-273">Dabei handelt es sich um eine benutzerdefinierte Klasse, die den Nachrichten Broker kapselt und ihn von der zugrunde liegenden Anwendung entkoppelt.</span><span class="sxs-lookup"><span data-stu-id="67460-273">It's a custom class that encapsulates the message broker and decouples it from the underlying application.</span></span> <span data-ttu-id="67460-274">Die microservices für die Reihenfolge und Inventur betreiben unabhängig das Ereignis ohne Kenntnis der anderen und des microservices waren Korb.</span><span class="sxs-lookup"><span data-stu-id="67460-274">The ordering and inventory microservices independently operate the event with no knowledge of each other, nor the shopping basket microservice.</span></span> <span data-ttu-id="67460-275">Wenn das registrierte Ereignis im Ereignisbus veröffentlicht wird, werden Sie darauf reagieren.</span><span class="sxs-lookup"><span data-stu-id="67460-275">When the registered event is published to the event bus, they act upon it.</span></span>

<span data-ttu-id="67460-276">Mit Eventing wechseln wir von der Warteschlangen Technologie zu *Themen*.</span><span class="sxs-lookup"><span data-stu-id="67460-276">With eventing, we move from queuing technology to *topics*.</span></span> <span data-ttu-id="67460-277">Ein [Thema](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions) ähnelt einer Warteschlange, unterstützt jedoch ein 1: n-Nachrichten Muster.</span><span class="sxs-lookup"><span data-stu-id="67460-277">A [topic](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions) is similar to a queue, but supports a one-to-many messaging pattern.</span></span> <span data-ttu-id="67460-278">Ein-mikrodienst veröffentlicht eine Nachricht.</span><span class="sxs-lookup"><span data-stu-id="67460-278">One microservice publishes a message.</span></span> <span data-ttu-id="67460-279">Mehrere abonnierte-mikrodienste können diese Nachricht empfangen und auf diese reagieren.</span><span class="sxs-lookup"><span data-stu-id="67460-279">Multiple subscribing microservices can choose to receive and act upon that message.</span></span> <span data-ttu-id="67460-280">Abbildung 4-16 zeigt eine Themen Architektur.</span><span class="sxs-lookup"><span data-stu-id="67460-280">Figure 4-16 shows a topic architecture.</span></span>

![Themen Architektur](./media/topic-architecture.png)

<span data-ttu-id="67460-282">**Abbildung 4-16**.</span><span class="sxs-lookup"><span data-stu-id="67460-282">**Figure 4-16**.</span></span> <span data-ttu-id="67460-283">Themen Architektur</span><span class="sxs-lookup"><span data-stu-id="67460-283">Topic architecture</span></span>

<span data-ttu-id="67460-284">In der vorherigen Abbildung senden Verleger Nachrichten an das Thema.</span><span class="sxs-lookup"><span data-stu-id="67460-284">In the previous figure, publishers send messages to the topic.</span></span> <span data-ttu-id="67460-285">Am Ende empfangen Abonnenten Nachrichten von Abonnements.</span><span class="sxs-lookup"><span data-stu-id="67460-285">At the end, subscribers receive messages from subscriptions.</span></span> <span data-ttu-id="67460-286">In der Mitte leitet das Thema Nachrichten basierend auf einem Satz von *Regeln*, die in dunklen blauen Feldern angezeigt werden, an Abonnements weiter.</span><span class="sxs-lookup"><span data-stu-id="67460-286">In the middle, the topic forwards messages to subscriptions based on a set of *rules*, shown in dark blue boxes.</span></span> <span data-ttu-id="67460-287">Regeln fungieren als Filter, der bestimmte Nachrichten an ein Abonnement weiterleiten soll.</span><span class="sxs-lookup"><span data-stu-id="67460-287">Rules act as a filter that forward specific messages to a subscription.</span></span> <span data-ttu-id="67460-288">Hier wird ein Ereignis vom Typ "Anordnen" an Abonnement \#1 und Abonnement \#3 gesendet, aber nicht an Abonnement \#2.</span><span class="sxs-lookup"><span data-stu-id="67460-288">Here, a "CreateOrder" event would be sent to Subscription \#1 and Subscription \#3, but not to Subscription \#2.</span></span> <span data-ttu-id="67460-289">Ein "orderabgeschlossene"-Ereignis würde an das Abonnement \#2 und das Abonnement \#3 gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="67460-289">An "OrderCompleted" event would be sent to Subscription \#2 and Subscription \#3.</span></span>

<span data-ttu-id="67460-290">Die Azure-Cloud unterstützt zwei verschiedene Themen Dienste: Azure Service Bus Themen und Azure Event Grid.</span><span class="sxs-lookup"><span data-stu-id="67460-290">The Azure cloud supports two different topic services: Azure Service Bus Topics and Azure EventGrid.</span></span>

### <a name="azure-service-bus-topics"></a><span data-ttu-id="67460-291">Themen zu Azure Service Bus</span><span class="sxs-lookup"><span data-stu-id="67460-291">Azure Service Bus Topics</span></span>

<span data-ttu-id="67460-292">Auf dem gleichen robusten Broker Nachrichten Modell Azure Service Bus Warteschlangen finden Sie [Azure Service Bus Themen](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions).</span><span class="sxs-lookup"><span data-stu-id="67460-292">Sitting on top of the same robust brokered message model of Azure Service Bus queues are [Azure Service Bus Topics](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions).</span></span> <span data-ttu-id="67460-293">Ein Thema kann Nachrichten von mehreren unabhängigen Verlegern empfangen und Nachrichten an bis zu 2.000 Abonnenten senden.</span><span class="sxs-lookup"><span data-stu-id="67460-293">A topic can receive messages from multiple independent publishers and send messages to up to 2,000 subscribers.</span></span> <span data-ttu-id="67460-294">Abonnements können zur Laufzeit dynamisch hinzugefügt oder entfernt werden, ohne das System zu beenden oder das Thema neu zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="67460-294">Subscriptions can be dynamically added or removed at runtime without stopping the system or recreating the topic.</span></span>

<span data-ttu-id="67460-295">Viele erweiterte Features aus Azure Service Bus Warteschlangen sind auch für Themen verfügbar, einschließlich [Duplikaterkennung](https://docs.microsoft.com/azure/service-bus-messaging/duplicate-detection) und [Transaktionsunterstützung](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-transactions).</span><span class="sxs-lookup"><span data-stu-id="67460-295">Many advanced features from Azure Service Bus queues are also available for topics, including [Duplicate Detection](https://docs.microsoft.com/azure/service-bus-messaging/duplicate-detection) and [Transaction support](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-transactions).</span></span> <span data-ttu-id="67460-296">Standardmäßig werden Service Bus Themen von einem einzelnen Nachrichten Broker behandelt und in einem einzelnen Nachrichtenspeicher gespeichert.</span><span class="sxs-lookup"><span data-stu-id="67460-296">By default, Service Bus topics are handled by a single message broker and stored in a single message store.</span></span> <span data-ttu-id="67460-297">[Service Bus Partitionierung](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-partitioning) skaliert jedoch ein Thema, indem es auf viele Nachrichten Broker und Nachrichtenspeicher verteilt wird.</span><span class="sxs-lookup"><span data-stu-id="67460-297">But, [Service Bus Partitioning](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-partitioning) scales a topic by spreading it across many message brokers and message stores.</span></span>

<span data-ttu-id="67460-298">Bei der [geplanten Übermittlung](https://docs.microsoft.com/azure/service-bus-messaging/message-sequencing) von Nachrichten wird eine Nachricht mit einem bestimmten Zeitpunkt für die Verarbeitung markiert.</span><span class="sxs-lookup"><span data-stu-id="67460-298">[Scheduled Message Delivery](https://docs.microsoft.com/azure/service-bus-messaging/message-sequencing) tags a message with a specific time for processing.</span></span> <span data-ttu-id="67460-299">Die Meldung wird vor diesem Zeitpunkt nicht im Thema angezeigt.</span><span class="sxs-lookup"><span data-stu-id="67460-299">The message won't appear in the topic before that time.</span></span> <span data-ttu-id="67460-300">Mithilfe der [Nachrichten Verzögerung](https://docs.microsoft.com/azure/service-bus-messaging/message-deferral) können Sie das Abrufen einer Nachricht zu einem späteren Zeitpunkt verzögern.</span><span class="sxs-lookup"><span data-stu-id="67460-300">[Message Deferral](https://docs.microsoft.com/azure/service-bus-messaging/message-deferral) enables you to defer a retrieval of a message to a later time.</span></span> <span data-ttu-id="67460-301">Beide werden häufig in Workflow Verarbeitungs Szenarien verwendet, in denen Vorgänge in einer bestimmten Reihenfolge verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="67460-301">Both are commonly used in workflow processing scenarios where operations are processed in a particular order.</span></span> <span data-ttu-id="67460-302">Sie können die Verarbeitung empfangener Nachrichten verschieben, bis die vorherige Arbeit abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="67460-302">You can postpone processing of received messages until prior work has been completed.</span></span>

<span data-ttu-id="67460-303">Service Bus Themen sind eine robuste und bewährte Technologie zum Aktivieren der Kommunikation zwischen veröffentlichen und abonnieren in ihren cloudbasierten Systemen.</span><span class="sxs-lookup"><span data-stu-id="67460-303">Service Bus topics are a robust and proven technology for enabling publish/subscribe communication in your cloud-native systems.</span></span>

### <a name="azure-event-grid"></a><span data-ttu-id="67460-304">Azure Event Grid</span><span class="sxs-lookup"><span data-stu-id="67460-304">Azure Event Grid</span></span>

<span data-ttu-id="67460-305">Obwohl es sich bei Azure Service Bus um einen in der Praxis getesteten Messaging Broker mit einem vollständigen Satz von Enterprise-Features handelt, ist [Azure Event Grid](https://docs.microsoft.com/azure/event-grid/overview) das neue Kind auf dem Block.</span><span class="sxs-lookup"><span data-stu-id="67460-305">While Azure Service Bus is a battle-tested messaging broker with a full set of enterprise features, [Azure Event Grid](https://docs.microsoft.com/azure/event-grid/overview) is the new kid on the block.</span></span>

<span data-ttu-id="67460-306">Auf den ersten Blick können Event Grid wie ein anderes themenbasiertes Messaging System aussehen.</span><span class="sxs-lookup"><span data-stu-id="67460-306">At first glance, Event Grid may look like just another topic-based messaging system.</span></span> <span data-ttu-id="67460-307">Dies unterscheidet sich jedoch in vielerlei Hinsicht.</span><span class="sxs-lookup"><span data-stu-id="67460-307">However, it's different in many ways.</span></span> <span data-ttu-id="67460-308">Der Schwerpunkt auf ereignisgesteuerten Workloads ist die Echt Zeit Ereignisverarbeitung, die umfassende Azure-Integration sowie eine offene Plattform für die Server lose Infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="67460-308">Focused on event-driven workloads, it enables real-time event processing, deep Azure integration, and an open-platform - all on serverless infrastructure.</span></span> <span data-ttu-id="67460-309">Es ist für moderne cloudbasierte und Server lose Anwendungen konzipiert.</span><span class="sxs-lookup"><span data-stu-id="67460-309">It's designed for contemporary cloud-native and serverless applications</span></span>

<span data-ttu-id="67460-310">Als zentrale Ereignis *Rückwand*oder Pipe wird Event Grid auf Ereignisse in Azure-Ressourcen und ihren eigenen Diensten reagieren.</span><span class="sxs-lookup"><span data-stu-id="67460-310">As a centralized *eventing backplane*, or pipe, Event Grid reacts to events inside Azure resources and from your own services.</span></span>

<span data-ttu-id="67460-311">Ereignis Benachrichtigungen werden in einem Event Grid Thema veröffentlicht, das wiederum jedes Ereignis an ein Abonnement weiterleitet.</span><span class="sxs-lookup"><span data-stu-id="67460-311">Event notifications are published to an Event Grid Topic, which, in turn, routes each event to a subscription.</span></span> <span data-ttu-id="67460-312">Abonnenten sind Abonnements zugeordnet und nutzen die Ereignisse.</span><span class="sxs-lookup"><span data-stu-id="67460-312">Subscribers map to subscriptions and consume the events.</span></span> <span data-ttu-id="67460-313">Wie Service Bus unterstützt Event Grid ein *gefiltertes Abonnenten Modell* , bei dem ein Abonnement die Regel für die Ereignisse festlegt, die es empfangen möchte.</span><span class="sxs-lookup"><span data-stu-id="67460-313">Like Service Bus, Event Grid supports a *filtered subscriber model* where a subscription sets rule for the events it wishes to receive.</span></span> <span data-ttu-id="67460-314">Event Grid bietet einen schnellen Durchsatz mit einer Garantie von 10 Millionen Ereignissen pro Sekunde, was die Bereitstellung nahezu in Echtzeit ermöglicht, als die Azure Service Bus generieren kann.</span><span class="sxs-lookup"><span data-stu-id="67460-314">Event Grid provides fast throughput with a guarantee of 10 million events per second enabling near real-time delivery - far more than what Azure Service Bus can generate.</span></span>

<span data-ttu-id="67460-315">Ein süßer Punkt für Event Grid ist die umfassende Integration in das Fabric der Azure-Infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="67460-315">A sweet spot for Event Grid is its deep integration into the fabric of Azure infrastructure.</span></span> <span data-ttu-id="67460-316">Eine Azure-Ressource, z. b. Cosmos DB, kann integrierte Ereignisse direkt in anderen interessanten Azure-Ressourcen veröffentlichen, ohne benutzerdefinierten Code zu benötigen.</span><span class="sxs-lookup"><span data-stu-id="67460-316">An Azure resource, such as Cosmos DB, can publish built-in events directly to other interested Azure resources - without the need for custom code.</span></span> <span data-ttu-id="67460-317">Event Grid können Ereignisse aus einem Azure-Abonnement, einer Ressourcengruppe oder einem Dienst veröffentlichen und so den Entwicklern eine präzisere Kontrolle über den Lebenszyklus von cloudressourcen gewähren.</span><span class="sxs-lookup"><span data-stu-id="67460-317">Event Grid can publish events from an Azure Subscription, Resource Group, or Service, giving developers fine-grained control over the lifecycle of cloud resources.</span></span> <span data-ttu-id="67460-318">Event Grid ist jedoch nicht auf Azure beschränkt.</span><span class="sxs-lookup"><span data-stu-id="67460-318">However, Event Grid isn't limited to Azure.</span></span> <span data-ttu-id="67460-319">Dabei handelt es sich um eine offene Plattform, die benutzerdefinierte, von Anwendungen oder Drittanbieter Diensten veröffentlichte http-Ereignisse nutzen und Ereignisse an externe Abonnenten weiterleiten kann.</span><span class="sxs-lookup"><span data-stu-id="67460-319">It's an open platform that can consume custom HTTP events published from applications or third-party services and route events to external subscribers.</span></span>

<span data-ttu-id="67460-320">Wenn Sie Native Ereignisse von Azure-Ressourcen veröffentlichen und abonnieren, sind keine Codierungen erforderlich.</span><span class="sxs-lookup"><span data-stu-id="67460-320">When publishing and subscribing to native events from Azure resources, no coding is required.</span></span> <span data-ttu-id="67460-321">Mit der einfachen Konfiguration können Sie Ereignisse von einer Azure-Ressource in eine andere integrieren, indem Sie integrierte Grundlagen für Themen und Abonnements nutzen.</span><span class="sxs-lookup"><span data-stu-id="67460-321">With simple configuration, you can integrate events from one Azure resource to another leveraging built-in plumbing for Topics and Subscriptions.</span></span> <span data-ttu-id="67460-322">In Abbildung 4-17 wird die Anatomie der Event Grid dargestellt.</span><span class="sxs-lookup"><span data-stu-id="67460-322">Figure 4-17 shows the anatomy of Event Grid.</span></span>

![Event Grid Anatomie](./media/event-grid-anatomy.png)

<span data-ttu-id="67460-324">**Abbildung 4-17**.</span><span class="sxs-lookup"><span data-stu-id="67460-324">**Figure 4-17**.</span></span> <span data-ttu-id="67460-325">Event Grid Anatomie</span><span class="sxs-lookup"><span data-stu-id="67460-325">Event Grid anatomy</span></span>

<span data-ttu-id="67460-326">Ein Hauptunterschied zwischen eventgrid und Service Bus ist das zugrunde liegende *Nachrichtenaustausch Muster*.</span><span class="sxs-lookup"><span data-stu-id="67460-326">A major difference between EventGrid and Service Bus is the underlying *message exchange pattern*.</span></span>

<span data-ttu-id="67460-327">Service Bus implementiert ein älteres Pullabonnement- *Modell* , in dem der downstreamabonnent das Themen Abonnement aktiv nach neuen Nachrichten abfragt.</span><span class="sxs-lookup"><span data-stu-id="67460-327">Service Bus implements an older style *pull model* in which the downstream subscriber actively polls the topic subscription for new messages.</span></span> <span data-ttu-id="67460-328">Bei diesem Ansatz erhält der Abonnent vollständige Kontrolle über die Geschwindigkeit, mit der Nachrichten verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="67460-328">On the upside, this approach gives the subscriber full control of the pace at which it processes messages.</span></span> <span data-ttu-id="67460-329">Er steuert, wann und wie viele Nachrichten zu einem beliebigen Zeitpunkt verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="67460-329">It controls when and how many messages to process at any given time.</span></span> <span data-ttu-id="67460-330">Ungelesene Nachrichten verbleiben bis zur Verarbeitung im Abonnement.</span><span class="sxs-lookup"><span data-stu-id="67460-330">Unread messages remain in the subscription until processed.</span></span> <span data-ttu-id="67460-331">Ein erheblicher Mangel ist die Latenzzeit zwischen dem Zeitpunkt, zu dem das Ereignis generiert wird, und dem Abruf Vorgang, der diese Nachricht zur Verarbeitung an den Abonnenten abruft.</span><span class="sxs-lookup"><span data-stu-id="67460-331">A significant shortcoming is the latency between the time the event is generated and the polling operation that pulls that message to the subscriber for processing.</span></span> <span data-ttu-id="67460-332">Außerdem verbraucht der Aufwand des Konstanten Abrufs für das nächste Ereignis Ressourcen und Geld.</span><span class="sxs-lookup"><span data-stu-id="67460-332">Also, the overhead of constant polling for the next event consumes resources and money.</span></span>

<span data-ttu-id="67460-333">Event Grid ist jedoch anders.</span><span class="sxs-lookup"><span data-stu-id="67460-333">EventGrid, however, is different.</span></span> <span data-ttu-id="67460-334">Es implementiert ein *Push-Modell* , in dem Ereignisse als empfangene Ereignisse an die EventHandler gesendet werden, sodass die Ereignis Übermittlung nahezu in Echtzeit erfolgt.</span><span class="sxs-lookup"><span data-stu-id="67460-334">It implements a *push model* in which events are sent to the EventHandlers as received, giving near real-time event delivery.</span></span> <span data-ttu-id="67460-335">Außerdem werden Kosten gesenkt, da der Dienst nur ausgelöst wird, wenn er für die Nutzung eines Ereignisses benötigt wird – nicht kontinuierlich wie beim Abrufen.</span><span class="sxs-lookup"><span data-stu-id="67460-335">It also reduces cost as the service is triggered only when it's needed to consume an event – not continually as with polling.</span></span> <span data-ttu-id="67460-336">Dies bedeutet, dass ein Ereignishandler die eingehende Last verarbeiten und einschränkensteuerungs Mechanismen bereitstellen muss, um sich selbst vor der Überlastung zu schützen.</span><span class="sxs-lookup"><span data-stu-id="67460-336">That said, an event handler must handle the incoming load and provide throttling mechanisms to protect itself from becoming overwhelmed.</span></span> <span data-ttu-id="67460-337">Viele Azure-Dienste, die diese Ereignisse nutzen, wie z. b. Azure Functions und Logic apps, bieten automatische Funktionen für die automatische Skalierung, um eine größere Auslastung</span><span class="sxs-lookup"><span data-stu-id="67460-337">Many Azure services that consume these events, such as Azure Functions and Logic Apps provide automatic autoscaling capabilities to handle increased loads.</span></span>  

<span data-ttu-id="67460-338">Event Grid ist ein vollständig verwalteter Server loser clouddienst.</span><span class="sxs-lookup"><span data-stu-id="67460-338">Event Grid is a fully managed serverless cloud service.</span></span> <span data-ttu-id="67460-339">Die Skalierung erfolgt dynamisch basierend auf dem Datenverkehr und berechnet Sie nur für die tatsächliche Nutzung, nicht für vorab erworbene Kapazitäten.</span><span class="sxs-lookup"><span data-stu-id="67460-339">It dynamically scales based on your traffic and charges you only for your actual usage, not pre-purchased capacity.</span></span> <span data-ttu-id="67460-340">Die ersten 100.000 Vorgänge pro Monat sind kostenlose –-Vorgänge, die als Ereignis Eingang (eingehende Ereignis Benachrichtigungen), Abonnement Übermittlungs Versuche, Verwaltungs Anrufe und Filtern nach Betreff definiert werden.</span><span class="sxs-lookup"><span data-stu-id="67460-340">The first 100,000 operations per month are free – operations being defined as event ingress (incoming event notifications), subscription delivery attempts, management calls, and filtering by subject.</span></span> <span data-ttu-id="67460-341">Mit der Verfügbarkeit von 99,99% garantiert eventgrid die Übermittlung eines Ereignisses innerhalb eines Zeitraums von 24 Stunden mit integrierter Wiederholungsfunktion für die erfolgreiche Übermittlung.</span><span class="sxs-lookup"><span data-stu-id="67460-341">With 99.99% availability, EventGrid guarantees the delivery of an event within a 24-hour period, with built-in retry functionality for unsuccessful delivery.</span></span> <span data-ttu-id="67460-342">Nicht übermittelte Nachrichten können zur Auflösung in eine Warteschlange für unzustellbare Nachrichten verschoben werden.</span><span class="sxs-lookup"><span data-stu-id="67460-342">Undelivered messages can be moved to a "dead-letter" queue for resolution.</span></span>  <span data-ttu-id="67460-343">Im Gegensatz zu Azure Service Bus ist Event Grid auf eine schnelle Leistung optimiert und unterstützt keine Features wie das geordnete Messaging, Transaktionen und Sitzungen.</span><span class="sxs-lookup"><span data-stu-id="67460-343">Unlike Azure Service Bus, Event Grid is tuned for fast performance and doesn't support features like ordered messaging, transactions, and sessions.</span></span>

### <a name="streaming-messages-in-the-azure-cloud"></a><span data-ttu-id="67460-344">Streaming von Nachrichten in der Azure-Cloud</span><span class="sxs-lookup"><span data-stu-id="67460-344">Streaming messages in the Azure cloud</span></span>

<span data-ttu-id="67460-345">Azure Service Bus und Event Grid bieten hervorragend Unterstützung für Anwendungen, die einzelne, diskrete Ereignisse wie ein neues Dokument verfügbar machen, das in eine Cosmos DB eingefügt wurde.</span><span class="sxs-lookup"><span data-stu-id="67460-345">Azure Service Bus and Event Grid provide great support for applications that expose single, discrete events like a new document has been inserted into a Cosmos DB.</span></span> <span data-ttu-id="67460-346">Aber was geschieht, wenn Ihr System eigenes System einen *Stream verwandter Ereignisse*verarbeiten muss?</span><span class="sxs-lookup"><span data-stu-id="67460-346">But, what if your cloud-native system needs to process a *stream of related events*?</span></span> <span data-ttu-id="67460-347">[Ereignisstreams](https://docs.microsoft.com/archive/msdn-magazine/2015/february/microsoft-azure-the-rise-of-event-stream-oriented-systems) sind komplexer.</span><span class="sxs-lookup"><span data-stu-id="67460-347">[Event streams](https://docs.microsoft.com/archive/msdn-magazine/2015/february/microsoft-azure-the-rise-of-event-stream-oriented-systems) are more complex.</span></span> <span data-ttu-id="67460-348">Sie sind in der Regel zeitlich geordnet, interverwandt und müssen als Gruppe verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="67460-348">They're typically time-ordered, interrelated, and must be processed as a group.</span></span>

<span data-ttu-id="67460-349">[Azure Event Hub](https://azure.microsoft.com/services/event-hubs/) ist eine datenstreamingplattform und ein Ereignis Erfassungs Dienst, der Ereignisse sammelt, transformiert und speichert.</span><span class="sxs-lookup"><span data-stu-id="67460-349">[Azure Event Hub](https://azure.microsoft.com/services/event-hubs/) is a data streaming platform and event ingestion service that collects, transforms, and stores events.</span></span> <span data-ttu-id="67460-350">Sie ist darauf abgestimmt, Streamingdaten zu erfassen, wie z. b. kontinuierliche Ereignis Benachrichtigungen, die von einem telemetriekontext ausgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="67460-350">It's fine-tuned to capture streaming data, such as continuous event notifications emitted from a telemetry context.</span></span> <span data-ttu-id="67460-351">Der Dienst ist hochgradig skalierbar und kann [Millionen von Ereignissen pro Sekunde](https://docs.microsoft.com/azure/event-hubs/event-hubs-about)speichern und verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="67460-351">The service is highly scalable and can store and [process millions of events per second](https://docs.microsoft.com/azure/event-hubs/event-hubs-about).</span></span> <span data-ttu-id="67460-352">In Abbildung 4-18 ist es häufig eine Tür für eine Ereignis Pipeline, bei der der Erfassungsdaten Strom vom Ereignis Verbrauch entkoppelt wird.</span><span class="sxs-lookup"><span data-stu-id="67460-352">Shown in Figure 4-18, it's often a front door for an event pipeline, decoupling ingest stream from event consumption.</span></span>

![Azure Event Hub](./media/azure-event-hub.png)

<span data-ttu-id="67460-354">**Abbildung 4-18.**</span><span class="sxs-lookup"><span data-stu-id="67460-354">**Figure 4-18**.</span></span> <span data-ttu-id="67460-355">Azure Event Hub</span><span class="sxs-lookup"><span data-stu-id="67460-355">Azure Event Hub</span></span>

<span data-ttu-id="67460-356">Event Hub unterstützt niedrige Latenz und konfigurierbare Zeit Aufbewahrung.</span><span class="sxs-lookup"><span data-stu-id="67460-356">Event Hub supports low latency and configurable time retention.</span></span> <span data-ttu-id="67460-357">Im Gegensatz zu Warteschlangen und Themen Event Hubs die Ereignisdaten beibehalten, nachdem Sie von einem Consumer gelesen wurden.</span><span class="sxs-lookup"><span data-stu-id="67460-357">Unlike queues and topics, Event Hubs keep event data after it's been read by a consumer.</span></span> <span data-ttu-id="67460-358">Mit dieser Funktion können andere Datenanalyse Dienste (sowohl intern als auch extern) die Daten zur weiteren Analyse wiedergeben.</span><span class="sxs-lookup"><span data-stu-id="67460-358">This feature enables other data analytic services, both internal and external, to replay the data for further analysis.</span></span> <span data-ttu-id="67460-359">Ereignisse, die in Event Hub gespeichert werden, werden nur nach Ablauf der Beibehaltungs Dauer gelöscht, was standardmäßig ein Tag ist, aber konfigurierbar ist.</span><span class="sxs-lookup"><span data-stu-id="67460-359">Events stored in event hub are only deleted upon expiration of the retention period, which is one day by default, but configurable.</span></span>

<span data-ttu-id="67460-360">Event Hub unterstützt allgemeine Ereignis Veröffentlichungs Protokolle, einschließlich HTTPS und AMQP.</span><span class="sxs-lookup"><span data-stu-id="67460-360">Event Hub supports common event publishing protocols including HTTPS and AMQP.</span></span> <span data-ttu-id="67460-361">Außerdem wird Kafka 1,0 unterstützt.</span><span class="sxs-lookup"><span data-stu-id="67460-361">It also supports Kafka 1.0.</span></span> <span data-ttu-id="67460-362">[Vorhandene Kafka-Anwendungen können mit dem Event Hub](https://docs.microsoft.com/azure/event-hubs/event-hubs-for-kafka-ecosystem-overview) über das Kafka-Protokoll kommunizieren, das eine Alternative zur Verwaltung großer Kafka-Cluster bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="67460-362">[Existing Kafka applications can communicate with Event Hub](https://docs.microsoft.com/azure/event-hubs/event-hubs-for-kafka-ecosystem-overview) using the Kafka protocol providing an alternative to managing large Kafka clusters.</span></span> <span data-ttu-id="67460-363">Viele Open-Source-cloudnative Systeme nehmen Kafka vor.</span><span class="sxs-lookup"><span data-stu-id="67460-363">Many open-source cloud-native systems embrace Kafka.</span></span>

<span data-ttu-id="67460-364">Event Hubs implementiert das Nachrichten Streaming über ein [partitioniertes consumermodell](https://docs.microsoft.com/azure/event-hubs/event-hubs-features) , in dem jeder Consumer nur eine bestimmte Teilmenge oder Partition des nachrichtenstreams liest.</span><span class="sxs-lookup"><span data-stu-id="67460-364">Event Hubs implements message streaming through a [partitioned consumer model](https://docs.microsoft.com/azure/event-hubs/event-hubs-features) in which each consumer only reads a specific subset, or partition, of the message stream.</span></span> <span data-ttu-id="67460-365">Dieses Muster ermöglicht enorme horizontale Skalierung für die Ereignisverarbeitung und stellt weitere datenstromorientierte Features zur Verfügung, die in Warteschlangen und Themen nicht verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="67460-365">This pattern enables tremendous horizontal scale for event processing and provides other stream-focused features that are unavailable in queues and topics.</span></span> <span data-ttu-id="67460-366">Eine Partition ist eine geordnete Sequenz von Ereignissen, die in einem Event Hub besteht.</span><span class="sxs-lookup"><span data-stu-id="67460-366">A partition is an ordered sequence of events that is held in an event hub.</span></span> <span data-ttu-id="67460-367">Wenn neuere Ereignisse eintreffen, werden Sie am Ende dieser Sequenz hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="67460-367">As newer events arrive, they're added to the end of this sequence.</span></span><span data-ttu-id="67460-368"> Abbildung 4-19 zeigt die Partitionierung in einem Event Hub.</span><span class="sxs-lookup"><span data-stu-id="67460-368"> Figure 4-19 shows partitioning in an Event Hub.</span></span>

![Event Hub-Partitionierung](./media/event-hub-partitioning.png)

<span data-ttu-id="67460-370">**Abbildung 4-19.**</span><span class="sxs-lookup"><span data-stu-id="67460-370">**Figure 4-19**.</span></span> <span data-ttu-id="67460-371">Event Hub-Partitionierung</span><span class="sxs-lookup"><span data-stu-id="67460-371">Event Hub partitioning</span></span>

<span data-ttu-id="67460-372">Anstatt aus derselben Ressource zu lesen, liest jede consumergruppe eine Teilmenge oder Partition des Nachrichten Datenstroms.</span><span class="sxs-lookup"><span data-stu-id="67460-372">Instead of reading from the same resource, each consumer group reads across a subset, or partition, of the message stream.</span></span>

<span data-ttu-id="67460-373">Für cloudanwendungen, die eine große Anzahl von Ereignissen streamen müssen, kann Azure Event Hub eine robuste und kostengünstige Lösung sein.</span><span class="sxs-lookup"><span data-stu-id="67460-373">For cloud-native applications that must stream large numbers of events, Azure Event Hub can be a robust and affordable solution.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="67460-374">[Zurück](front-end-communication.md)
>[Weiter](rest-grpc.md)</span><span class="sxs-lookup"><span data-stu-id="67460-374">[Previous](front-end-communication.md)
[Next](rest-grpc.md)</span></span>
