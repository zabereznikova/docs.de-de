---
title: Azure-Sicherheit für Native Cloud-apps
description: Architektur von Cloud Native .net-apps für Azure | Azure-Sicherheit für Native Cloud-apps
ms.date: 12/01/2020
ms.openlocfilehash: 5e541606c762ea192ab8767e78e9b7346b3ec9c1
ms.sourcegitcommit: 2f485e721f7f34b87856a51181b5b56624b31fd5
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/02/2020
ms.locfileid: "96509818"
---
# <a name="azure-security-for-cloud-native-apps"></a><span data-ttu-id="51ab2-103">Azure-Sicherheit für Native Cloud-apps</span><span class="sxs-lookup"><span data-stu-id="51ab2-103">Azure security for cloud-native apps</span></span>

<span data-ttu-id="51ab2-104">Native Cloud-Anwendungen können einfacher und schwieriger zu schützen als herkömmliche Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-104">Cloud-native applications can be both easier and more difficult to secure than traditional applications.</span></span> <span data-ttu-id="51ab2-105">Der Nachteil ist, dass Sie kleinere Anwendungen sichern und mehr Energie aufwenden müssen, um die Sicherheitsinfrastruktur zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-105">On the downside, you need to secure more smaller applications and dedicate more energy to build out the security infrastructure.</span></span> <span data-ttu-id="51ab2-106">Die heterogene Natur der Programmiersprachen und Stile in den meisten Dienst Bereitstellungen bedeutet auch, dass Sie die Sicherheits Bulletins von vielen unterschiedlichen Anbietern berücksichtigen müssen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-106">The heterogeneous nature of programming languages and styles in most service deployments also means you need to pay more attention to security bulletins from many different providers.</span></span>

<span data-ttu-id="51ab2-107">Auf der Flip-Seite beschränken kleinere Dienste, die jeweils über einen eigenen Datenspeicher verfügen, den Umfang eines Angriffs.</span><span class="sxs-lookup"><span data-stu-id="51ab2-107">On the flip side, smaller services, each with their own data store, limit the scope of an attack.</span></span> <span data-ttu-id="51ab2-108">Wenn ein Angreifer ein System kompromittiert, ist es für den Angreifer wahrscheinlich schwieriger, den Sprung zu einem anderen System als in einer monolithischen Anwendung zu machen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-108">If an attacker compromises one system, it's probably more difficult for the attacker to make the jump to another system than it is in a monolithic application.</span></span> <span data-ttu-id="51ab2-109">Prozess Grenzen sind starke Grenzen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-109">Process boundaries are strong boundaries.</span></span> <span data-ttu-id="51ab2-110">Wenn eine Datenbanksicherung offengelegt wird, ist der Schaden außerdem eingeschränkt, da diese Datenbank nur eine Teilmenge der Daten enthält und wahrscheinlich keine personenbezogenen Daten enthält.</span><span class="sxs-lookup"><span data-stu-id="51ab2-110">Also, if a database backup gets exposed, then the damage is more limited, as that database contains only a subset of data and is unlikely to contain personal data.</span></span>

## <a name="threat-modeling"></a><span data-ttu-id="51ab2-111">Bedrohungsmodellierung</span><span class="sxs-lookup"><span data-stu-id="51ab2-111">Threat modeling</span></span>

<span data-ttu-id="51ab2-112">Unabhängig davon, ob die Vorteile die Nachteile von cloudbasierten Anwendungen überwiegen, muss dieselbe ganzheitliche Sicherheits Denkweise befolgt werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-112">No matter if the advantages outweigh the disadvantages of cloud-native applications, the same holistic security mindset must be followed.</span></span> <span data-ttu-id="51ab2-113">Sicherheit und sicheres denken müssen Teil jedes Schritts der Entwicklungs-und Betriebsgeschichte sein.</span><span class="sxs-lookup"><span data-stu-id="51ab2-113">Security and secure thinking must be part of every step of the development and operations story.</span></span> <span data-ttu-id="51ab2-114">Wenn Sie eine Anwendung planen, stellen Sie Fragen wie:</span><span class="sxs-lookup"><span data-stu-id="51ab2-114">When planning an application ask questions like:</span></span>

- <span data-ttu-id="51ab2-115">Welche Auswirkungen haben diese Daten verloren?</span><span class="sxs-lookup"><span data-stu-id="51ab2-115">What would be the impact of this data being lost?</span></span>
- <span data-ttu-id="51ab2-116">Wie können wir den Schaden von ungültigen Daten, die in diesen Dienst eingefügt werden, einschränken?</span><span class="sxs-lookup"><span data-stu-id="51ab2-116">How can we limit the damage from bad data being injected into this service?</span></span>
- <span data-ttu-id="51ab2-117">Wer sollte Zugriff auf diese Daten haben?</span><span class="sxs-lookup"><span data-stu-id="51ab2-117">Who should have access to this data?</span></span>
- <span data-ttu-id="51ab2-118">Gibt es Überwachungs Richtlinien für den Entwicklungs-und Releaseprozess?</span><span class="sxs-lookup"><span data-stu-id="51ab2-118">Are there auditing policies in place around the development and release process?</span></span>

<span data-ttu-id="51ab2-119">Alle diese Fragen sind Teil eines Prozesses namens [Bedrohungsmodellierung](/azure/security/azure-security-threat-modeling-tool).</span><span class="sxs-lookup"><span data-stu-id="51ab2-119">All these questions are part of a process called [threat modeling](/azure/security/azure-security-threat-modeling-tool).</span></span> <span data-ttu-id="51ab2-120">Bei diesem Prozess wird versucht, die Frage zu beantworten, welche Bedrohungen für das System bestehen, wie wahrscheinlich die Bedrohungen sind und welche potenzielle Schäden daraus bestehen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-120">This process tries to answer the question of what threats there are to the system, how likely the threats are, and the potential damage from them.</span></span>

<span data-ttu-id="51ab2-121">Nachdem die Liste der Bedrohungen festgelegt wurde, müssen Sie entscheiden, ob Sie eine Minderung durchführen möchten.</span><span class="sxs-lookup"><span data-stu-id="51ab2-121">Once the list of threats has been established, you need to decide whether they're worth mitigating.</span></span> <span data-ttu-id="51ab2-122">Manchmal ist eine Bedrohung so unwahrscheinlich und teuer, dass es nicht sinnvoll ist, Energie zu investieren.</span><span class="sxs-lookup"><span data-stu-id="51ab2-122">Sometimes a threat is so unlikely and expensive to plan for that it isn't worth spending energy on it.</span></span> <span data-ttu-id="51ab2-123">Beispielsweise könnte ein Actor auf Zustands Ebene Änderungen in den Entwurf eines Prozesses einfügen, der von Millionen von Geräten verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="51ab2-123">For instance, some state level actor could inject changes into the design of a process that is used by millions of devices.</span></span> <span data-ttu-id="51ab2-124">Anstatt ein bestimmtes Code Element in [Ring 3](https://en.wikipedia.org/wiki/Protection_ring)auszuführen, wird dieser Code in Ring 0 ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="51ab2-124">Now, instead of running a certain piece of code in [Ring 3](https://en.wikipedia.org/wiki/Protection_ring), that code is run in Ring 0.</span></span> <span data-ttu-id="51ab2-125">Dieser Prozess ermöglicht einen Exploit, der den Hypervisor umgehen und den Angriffs Code auf den Bare-Metal-Computern ausführen kann, sodass Angriffe auf alle virtuellen Maschinen, die auf der Hardware ausgeführt werden, möglich sind.</span><span class="sxs-lookup"><span data-stu-id="51ab2-125">This process allows an exploit that can bypass the hypervisor and run the attack code on the bare metal machines, allowing attacks on all the virtual machines that are running on that hardware.</span></span>

<span data-ttu-id="51ab2-126">Die geänderten Prozessoren sind schwer zu erkennen, ohne dass ein Mikroskop und erweiterte Kenntnisse des auf dem Silicon Design dieses Prozessors vorliegen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-126">The altered processors are difficult to detect without a microscope and advanced knowledge of the on silicon design of that processor.</span></span> <span data-ttu-id="51ab2-127">Dieses Szenario ist unwahrscheinlich und kostenaufwendig zu beheben. wahrscheinlich empfiehlt es sich nicht, ein Bedrohungs Modell dafür zu entwickeln.</span><span class="sxs-lookup"><span data-stu-id="51ab2-127">This scenario is unlikely to happen and expensive to mitigate, so probably no threat model would recommend building exploit protection for it.</span></span>

<span data-ttu-id="51ab2-128">Wahrscheinlichere Bedrohungen, wie z. b. unterbrochene Zugriffs Steuerungen, `Id` die inkrementellen Angriffe zulassen ( `Id=2` durch `Id=3` in der URL ersetzen) oder SQL Injection, sind attraktiver für den Schutz vor.</span><span class="sxs-lookup"><span data-stu-id="51ab2-128">More likely threats, such as broken access controls permitting `Id` incrementing attacks (replacing `Id=2` with `Id=3` in the URL) or SQL injection, are more attractive to build protections against.</span></span> <span data-ttu-id="51ab2-129">Die entschärfungen für diese Bedrohungen sind recht vernünftig, um peinliche Sicherheitslücken zu erstellen und zu verhindern, die den Ruf des Unternehmens unterscheiden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-129">The mitigations for these threats are quite reasonable to build and prevent embarrassing security holes that smear the company's reputation.</span></span>

## <a name="principle-of-least-privilege"></a><span data-ttu-id="51ab2-130">Prinzip der geringsten Rechte</span><span class="sxs-lookup"><span data-stu-id="51ab2-130">Principle of least privilege</span></span>

<span data-ttu-id="51ab2-131">Eine der Gründer Ideen bei der Computersicherheit ist das Prinzip der geringsten Rechte (POLP).</span><span class="sxs-lookup"><span data-stu-id="51ab2-131">One of the founding ideas in computer security is the Principle of Least Privilege (POLP).</span></span> <span data-ttu-id="51ab2-132">Es ist eine grundlegende Idee in den meisten Formen der Sicherheit, dass Sie Digital oder physisch ist.</span><span class="sxs-lookup"><span data-stu-id="51ab2-132">It's actually a foundational idea in most any form of security be it digital or physical.</span></span> <span data-ttu-id="51ab2-133">Kurz gesagt, das Prinzip ist, dass jeder Benutzer oder Prozess über die kleinste Anzahl von Rechten verfügen sollte, um seine Aufgabe ausführen zu können.</span><span class="sxs-lookup"><span data-stu-id="51ab2-133">In short, the principle is that any user or process should have the smallest number of rights possible to execute its task.</span></span>

<span data-ttu-id="51ab2-134">Stellen Sie sich als Beispiel den Kassierer an einer Bank vor: der Zugriff auf den Safe ist eine ungewöhnliche Aktivität.</span><span class="sxs-lookup"><span data-stu-id="51ab2-134">As an example, think of the tellers at a bank: accessing the safe is an uncommon activity.</span></span> <span data-ttu-id="51ab2-135">Daher kann der durchschnittliche Kassierer den sicheren selbst nicht öffnen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-135">So, the average teller can't open the safe themselves.</span></span> <span data-ttu-id="51ab2-136">Um Zugriff zu erhalten, müssen Sie Ihre Anforderung über einen Bankmanager eskalieren, der zusätzliche Sicherheitsüberprüfungen ausführt.</span><span class="sxs-lookup"><span data-stu-id="51ab2-136">To gain access, they need to escalate their request through a bank manager, who performs additional security checks.</span></span>

<span data-ttu-id="51ab2-137">In einem Computersystem ist ein fantastisches Beispiel die Rechte eines Benutzers, der eine Verbindung mit einer Datenbank herstellt.</span><span class="sxs-lookup"><span data-stu-id="51ab2-137">In a computer system, a fantastic example is the rights of a user connecting to a database.</span></span> <span data-ttu-id="51ab2-138">In vielen Fällen gibt es ein einzelnes Benutzerkonto, das verwendet wird, um die Datenbankstruktur zu erstellen und die Anwendung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-138">In many cases, there's a single user account used to both build the database structure and run the application.</span></span> <span data-ttu-id="51ab2-139">Das Konto, auf dem die Anwendung ausgeführt wird, benötigt nicht die Möglichkeit, Schema Informationen zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="51ab2-139">Except in extreme cases, the account running the application doesn't need the ability to update schema information.</span></span> <span data-ttu-id="51ab2-140">Es sollten mehrere Konten vorhanden sein, die unterschiedliche Berechtigungsstufen bieten.</span><span class="sxs-lookup"><span data-stu-id="51ab2-140">There should be several accounts that provide different levels of privilege.</span></span> <span data-ttu-id="51ab2-141">Die Anwendung sollte nur die Berechtigungsstufe verwenden, die Lese-und Schreibzugriff auf die Daten in den Tabellen gewährt.</span><span class="sxs-lookup"><span data-stu-id="51ab2-141">The application should only use the permission level that grants read and writes access to the data in the tables.</span></span> <span data-ttu-id="51ab2-142">Durch diese Art von Schutz werden Angriffe vermieden, die Datenbanktabellen löschen oder schädliche Trigger auslösen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-142">This kind of protection would eliminate attacks that aimed to drop database tables or introduce malicious triggers.</span></span>

<span data-ttu-id="51ab2-143">Fast jeder Teil der Bildung einer Cloud-native Anwendung kann von der Erinnerung an das Prinzip der geringsten Rechte profitieren.</span><span class="sxs-lookup"><span data-stu-id="51ab2-143">Almost every part of building a cloud-native application can benefit from remembering the principle of least privilege.</span></span> <span data-ttu-id="51ab2-144">Sie finden es beim Einrichten von Firewalls, Netzwerk Sicherheitsgruppen, Rollen und Bereichen in der rollenbasierten Zugriffs Steuerung (Role-Based Access Control, RBAC).</span><span class="sxs-lookup"><span data-stu-id="51ab2-144">You can find it at play when setting up firewalls, network security groups, roles, and scopes in Role-based access control (RBAC).</span></span>

## <a name="penetration-testing"></a><span data-ttu-id="51ab2-145">Penetrationstests</span><span class="sxs-lookup"><span data-stu-id="51ab2-145">Penetration testing</span></span>

<span data-ttu-id="51ab2-146">Wenn Anwendungen komplizierter werden, erhöht sich die Anzahl der Angriffsvektoren mit alarmierender Geschwindigkeit.</span><span class="sxs-lookup"><span data-stu-id="51ab2-146">As applications become more complicated the number of attack vectors increases at an alarming rate.</span></span> <span data-ttu-id="51ab2-147">Die Bedrohungsmodellierung ist insofern fehlerhaft, als Sie in der Regel von denselben Personen ausgeführt wird, die das System aufbauen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-147">Threat modeling is flawed in that it tends to be executed by the same people building the system.</span></span> <span data-ttu-id="51ab2-148">Ebenso wie viele Entwickler Probleme bei der Entwicklung von Benutzerinteraktionen und der anschließenden Erstellung nicht verwendbarer Benutzeroberflächen haben, haben die meisten Entwickler Schwierigkeiten, jeden Angriffsvektor zu sehen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-148">In the same way that many developers have trouble envisioning user interactions and then build unusable user interfaces, most developers have difficulty seeing every attack vector.</span></span> <span data-ttu-id="51ab2-149">Es ist auch möglich, dass sich die Entwickler, die das System aufbauen, nicht gut mit Angriffsmethoden auskennen und etwas Wichtiges übersehen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-149">It's also possible that the developers building the system aren't well versed in attack methodologies and miss something crucial.</span></span>

<span data-ttu-id="51ab2-150">Penetrationstests oder "Stift Tests" beinhalten die Einbindung externer Actors, um Angriffe auf das System durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-150">Penetration testing or "pen testing" involves bringing in external actors to attempt to attack the system.</span></span> <span data-ttu-id="51ab2-151">Dabei kann es sich um ein externes Beratungsunternehmen oder um andere Entwickler mit guten Sicherheits Kenntnissen aus einem anderen Teil des Unternehmens handeln.</span><span class="sxs-lookup"><span data-stu-id="51ab2-151">These attackers may be an external consulting company or other developers with good security knowledge from another part of the business.</span></span> <span data-ttu-id="51ab2-152">Sie erhalten eine Hand Hand, um zu versuchen, das System zu unterteilen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-152">They're given carte blanche to attempt to subvert the system.</span></span> <span data-ttu-id="51ab2-153">Häufig finden Sie umfassende Sicherheitslücken, die gepatcht werden müssen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-153">Frequently, they'll find extensive security holes that need to be patched.</span></span> <span data-ttu-id="51ab2-154">Manchmal ist der Angriffsvektor etwas unerwartetes wie das Ausnutzen eines Phishingangriffen gegen den CEO.</span><span class="sxs-lookup"><span data-stu-id="51ab2-154">Sometimes the attack vector will be something totally unexpected like exploiting a phishing attack against the CEO.</span></span>

<span data-ttu-id="51ab2-155">Azure selbst hat immer wieder Angriffe von einem [Team von Hacker innerhalb von Microsoft](https://azure.microsoft.com/resources/videos/red-vs-blue-internal-security-penetration-testing-of-microsoft-azure/).</span><span class="sxs-lookup"><span data-stu-id="51ab2-155">Azure itself is constantly undergoing attacks from a [team of hackers inside Microsoft](https://azure.microsoft.com/resources/videos/red-vs-blue-internal-security-penetration-testing-of-microsoft-azure/).</span></span> <span data-ttu-id="51ab2-156">Im Laufe der Jahre war es der erste, Dutzende potenziell schwerwiegender Angriffsvektoren zu finden und diese zu schließen, bevor Sie extern ausgenutzt werden können.</span><span class="sxs-lookup"><span data-stu-id="51ab2-156">Over the years, they've been the first to find dozens of potentially catastrophic attack vectors, closing them before they can be exploited externally.</span></span> <span data-ttu-id="51ab2-157">Umso wahrscheinlicher ist es, dass ewig Actors versuchen, das Ziel auszunutzen, und es gibt ein paar Ziele auf der Welt, die eher verlockend sind als Azure.</span><span class="sxs-lookup"><span data-stu-id="51ab2-157">The more tempting a target, the more likely that eternal actors will attempt to exploit it and there are a few targets in the world more tempting than Azure.</span></span>

## <a name="monitoring"></a><span data-ttu-id="51ab2-158">Überwachung</span><span class="sxs-lookup"><span data-stu-id="51ab2-158">Monitoring</span></span>

<span data-ttu-id="51ab2-159">Wenn ein Angreifer versucht, eine Anwendung zu durchdringen, sollte eine Warnung vorliegen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-159">Should an attacker attempt to penetrate an application, there should be some warning of it.</span></span> <span data-ttu-id="51ab2-160">Häufig können Angriffe durch Untersuchen der Protokolle von Diensten erkannt werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-160">Frequently, attacks can be spotted by examining the logs from services.</span></span> <span data-ttu-id="51ab2-161">Angriffe hinterlassen klarer Zeichen, die vor dem Erfolg erkannt werden können.</span><span class="sxs-lookup"><span data-stu-id="51ab2-161">Attacks leave telltale signs that can be spotted before they succeed.</span></span> <span data-ttu-id="51ab2-162">Beispielsweise nimmt ein Angreifer, der versucht, ein Kennwort zu erraten, viele Anforderungen an ein Anmeldesystem an.</span><span class="sxs-lookup"><span data-stu-id="51ab2-162">For instance, an attacker attempting to guess a password will make many requests to a login system.</span></span> <span data-ttu-id="51ab2-163">Durch die Überwachung des Anmeldesystems können seltsame Muster erkannt werden, die mit dem typischen Zugriffsmuster nicht übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-163">Monitoring around the login system can detect weird patterns that are out of line with the typical access pattern.</span></span> <span data-ttu-id="51ab2-164">Diese Überwachung kann in eine Warnung umgewandelt werden, die wiederum einen Vorgangs Mitarbeiter warnen kann, um eine bestimmte Art von Gegenmaßnahme zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="51ab2-164">This monitoring can be turned into an alert that can, in turn, alert an operations person to activate some sort of countermeasure.</span></span> <span data-ttu-id="51ab2-165">Ein stark ausgereiftes Überwachungssystem kann sogar auf der Grundlage dieser Abweichungen Maßnahmen ergreifen, die proaktiv Regeln zum Blockieren von Anforderungen oder Einschränken von Antworten hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-165">A highly mature monitoring system might even take action based on these deviations proactively adding rules to block requests or throttle responses.</span></span>

## <a name="securing-the-build"></a><span data-ttu-id="51ab2-166">Sichern des Builds</span><span class="sxs-lookup"><span data-stu-id="51ab2-166">Securing the build</span></span>

<span data-ttu-id="51ab2-167">Ein Ort, an dem Sicherheit oft übersehen wird, ist um den Buildprozess herum.</span><span class="sxs-lookup"><span data-stu-id="51ab2-167">One place where security is often overlooked is around the build process.</span></span> <span data-ttu-id="51ab2-168">Der Build sollte nicht nur Sicherheitsüberprüfungen ausführen, wie z. b. das Überprüfen auf unsicheren Code oder eingecheckte Anmelde Informationen, sondern der Build selbst muss sicher sein.</span><span class="sxs-lookup"><span data-stu-id="51ab2-168">Not only should the build run security checks, such as scanning for insecure code or checked-in credentials, but the build itself should be secure.</span></span> <span data-ttu-id="51ab2-169">Wenn der Buildserver kompromittiert ist, bietet er einen fantastischen Vektor für die Einführung von beliebigem Code in das Produkt.</span><span class="sxs-lookup"><span data-stu-id="51ab2-169">If the build server is compromised, then it provides a fantastic vector for introducing arbitrary code into the product.</span></span>

<span data-ttu-id="51ab2-170">Stellen Sie sich vor, dass ein Angreifer die Kenn Wörter von Personen stehlen möchte, die sich bei einer Webanwendung anmelden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-170">Imagine that an attacker is looking to steal the passwords of people signing into a web application.</span></span> <span data-ttu-id="51ab2-171">Sie könnten einen Buildschritt einführen, der den ausgecheckten Code so ändert, dass er beliebige Anmelde Anforderungen an einen anderen Server widerspiegelt.</span><span class="sxs-lookup"><span data-stu-id="51ab2-171">They could introduce a build step that modifies the checked-out code to mirror any login request to another server.</span></span> <span data-ttu-id="51ab2-172">Der nächste Zeitpunkt, zu dem der Code den Build durchläuft, wird automatisch aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="51ab2-172">The next time code goes through the build, it's silently updated.</span></span> <span data-ttu-id="51ab2-173">Durch die Überprüfung der Quell Code Anfälligkeit wird dieses Sicherheitsrisiko nicht abgefangen, da es vor dem Build ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="51ab2-173">The source code vulnerability scanning won't catch this vulnerability as it runs before the build.</span></span> <span data-ttu-id="51ab2-174">Ebenso fängt niemand Sie in einem Code Review ab, da die Buildschritte auf dem Buildserver ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-174">Equally, nobody will catch it in a code review because the build steps live on the build server.</span></span> <span data-ttu-id="51ab2-175">Der ausgebeutete Code wird in die Produktion geleitet, wo er Kenn Wörter ernten kann.</span><span class="sxs-lookup"><span data-stu-id="51ab2-175">The exploited code will go to production where it can harvest passwords.</span></span> <span data-ttu-id="51ab2-176">Es ist wahrscheinlich kein Überwachungs Protokoll des buildprozessprozesses vorhanden oder zumindest niemand, der die Überwachung überwacht.</span><span class="sxs-lookup"><span data-stu-id="51ab2-176">Probably there's no audit log of the build process changes, or at least nobody monitoring the audit.</span></span>

<span data-ttu-id="51ab2-177">Dieses Szenario ist ein perfektes Beispiel für ein scheinbar Ziel mit geringem Wert, das verwendet werden kann, um das System zu unterbrechen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-177">This scenario is a perfect example of a seemingly low-value target that can be used to break into the system.</span></span> <span data-ttu-id="51ab2-178">Nachdem ein Angreifer den Umkreis des Systems verletzt hat, kann er mit der Suche nach Möglichkeiten zum herauf Stufen der Berechtigungen auf den Punkt beginnen, an dem Sie jederzeit echte Schäden verursachen können.</span><span class="sxs-lookup"><span data-stu-id="51ab2-178">Once an attacker breaches the perimeter of the system, they can start working on finding ways to elevate their permissions to the point that they can cause real harm anywhere they like.</span></span>

## <a name="building-secure-code"></a><span data-ttu-id="51ab2-179">Aufbauen von sicherem Code</span><span class="sxs-lookup"><span data-stu-id="51ab2-179">Building secure code</span></span>

<span data-ttu-id="51ab2-180">.NET Framework ist bereits ein sehr sicheres Framework.</span><span class="sxs-lookup"><span data-stu-id="51ab2-180">.NET Framework is already a quite secure framework.</span></span> <span data-ttu-id="51ab2-181">Dabei werden einige der Fehler von nicht verwaltetem Code vermieden, z. b. das Durchlaufen der Enden von Arrays.</span><span class="sxs-lookup"><span data-stu-id="51ab2-181">It avoids some of the pitfalls of unmanaged code, such as walking off the ends of arrays.</span></span> <span data-ttu-id="51ab2-182">Die Arbeit wird aktiv durchgeführt, um Sicherheitslücken zu beheben, wenn Sie erkannt werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-182">Work is actively done to fix security holes as they're discovered.</span></span> <span data-ttu-id="51ab2-183">Es gibt sogar ein [Programm zur Fehler](https://www.microsoft.com/msrc/bounty) Behebung, mit dem Forscher Probleme im Framework finden und Sie melden, anstatt sie auszunutzen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-183">There's even a [bug bounty program](https://www.microsoft.com/msrc/bounty) that pays researchers to find issues in the framework and report them instead of exploiting them.</span></span>

<span data-ttu-id="51ab2-184">Es gibt viele Möglichkeiten, .NET-Code sicherer zu machen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-184">There are many ways to make .NET code more secure.</span></span> <span data-ttu-id="51ab2-185">Die folgenden Richtlinien, wie z. b. die [Richtlinien für die sichere Codierung für .net](../../standard/security/secure-coding-guidelines.md) , sind ein angemessener Schritt, um sicherzustellen, dass der Code von Grund auf sicher ist.</span><span class="sxs-lookup"><span data-stu-id="51ab2-185">Following guidelines such as the [Secure coding guidelines for .NET](../../standard/security/secure-coding-guidelines.md) article is a reasonable step to take to ensure that the code is secure from the ground up.</span></span> <span data-ttu-id="51ab2-186">Der [OWASP Top 10](https://owasp.org/www-project-top-ten/) ist ein weiterer unschätzbarer Leitfaden zum Erstellen von sicherem Code.</span><span class="sxs-lookup"><span data-stu-id="51ab2-186">The [OWASP top 10](https://owasp.org/www-project-top-ten/) is another invaluable guide to build secure code.</span></span>

<span data-ttu-id="51ab2-187">Der Buildprozess ist ein guter Ausgangspunkt, um Scan Tools zu platzieren, um Probleme im Quellcode zu erkennen, bevor Sie Sie in die Produktion versetzen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-187">The build process is a good place to put scanning tools to detect problems in source code before they make it into production.</span></span> <span data-ttu-id="51ab2-188">Die meisten Projekte weisen Abhängigkeiten von einigen anderen Paketen auf.</span><span class="sxs-lookup"><span data-stu-id="51ab2-188">Most every project has dependencies on some other packages.</span></span> <span data-ttu-id="51ab2-189">Ein Tool, das nach veralteten Paketen suchen kann, fängt Probleme in einem nächtlichen Build ab.</span><span class="sxs-lookup"><span data-stu-id="51ab2-189">A tool that can scan for outdated packages will catch problems in a nightly build.</span></span> <span data-ttu-id="51ab2-190">Selbst beim Erstellen von Docker-Images ist es sinnvoll, zu überprüfen und sicherzustellen, dass das Basis Image keine bekannten Sicherheitsrisiken aufweist.</span><span class="sxs-lookup"><span data-stu-id="51ab2-190">Even when building Docker images, it's useful to check and make sure that the base image doesn't have known vulnerabilities.</span></span> <span data-ttu-id="51ab2-191">Ein weiterer zu überprüfende Punkt ist, dass niemand versehentlich Anmelde Informationen eingecheckt hat.</span><span class="sxs-lookup"><span data-stu-id="51ab2-191">Another thing to check is that nobody has accidentally checked in credentials.</span></span>

## <a name="built-in-security"></a><span data-ttu-id="51ab2-192">Integrierte Sicherheit</span><span class="sxs-lookup"><span data-stu-id="51ab2-192">Built-in security</span></span>

<span data-ttu-id="51ab2-193">Azure ist so konzipiert, dass die Benutzerfreundlichkeit und Sicherheit für die meisten Benutzer ausgeglichen werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-193">Azure is designed to balance usability and security for the majority of users.</span></span> <span data-ttu-id="51ab2-194">Unterschiedliche Benutzer haben unterschiedliche Sicherheitsanforderungen, sodass Sie Ihren Ansatz für die cloudsicherheit optimieren müssen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-194">Different users are going to have different security requirements, so they need to fine-tune their approach to cloud security.</span></span> <span data-ttu-id="51ab2-195">Microsoft veröffentlicht viele Sicherheitsinformationen im [Trust Center](https://azure.microsoft.com/support/trust-center/).</span><span class="sxs-lookup"><span data-stu-id="51ab2-195">Microsoft publishes a great deal of security information in the [Trust Center](https://azure.microsoft.com/support/trust-center/).</span></span> <span data-ttu-id="51ab2-196">Diese Ressource sollte der erste Anlaufpunkt für diese Fachleute sein, um zu verstehen, wie die integrierten Angriffe zur Abwehr von Angriffen funktionieren.</span><span class="sxs-lookup"><span data-stu-id="51ab2-196">This resource should be the first stop for those professionals interested in understanding how the built-in attack mitigation technologies work.</span></span>

<span data-ttu-id="51ab2-197">Innerhalb des Azure-Portal ist die [Azure Advisor](https://azure.microsoft.com/services/advisor/) ein System, das ständig eine Umgebung scannt und Empfehlungen sendet.</span><span class="sxs-lookup"><span data-stu-id="51ab2-197">Within the Azure portal, the [Azure Advisor](https://azure.microsoft.com/services/advisor/) is a system that is constantly scanning an environment and making recommendations.</span></span> <span data-ttu-id="51ab2-198">Einige dieser Empfehlungen sind so konzipiert, dass Benutzer Geld sparen können, aber andere sind darauf ausgelegt, potenziell unsichere Konfigurationen zu erkennen, z. b. einen Speicher Container, der auf der ganzen Welt offen ist und nicht durch eine Virtual Network geschützt wird.</span><span class="sxs-lookup"><span data-stu-id="51ab2-198">Some of these recommendations are designed to save users money, but others are designed to identify potentially insecure configurations, such as having a storage container open to the world and not protected by a Virtual Network.</span></span>

## <a name="azure-network-infrastructure"></a><span data-ttu-id="51ab2-199">Azure-Netzwerkinfrastruktur</span><span class="sxs-lookup"><span data-stu-id="51ab2-199">Azure network infrastructure</span></span>

<span data-ttu-id="51ab2-200">In einer lokalen Bereitstellungs Umgebung ist eine große Menge an Energie für das Einrichten von Netzwerken vorgesehen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-200">In an on-premises deployment environment, a great deal of energy is dedicated to setting up networking.</span></span> <span data-ttu-id="51ab2-201">Das Einrichten von Routern, Switches und dem solchen ist eine komplizierte Arbeit.</span><span class="sxs-lookup"><span data-stu-id="51ab2-201">Setting up routers, switches, and the such is complicated work.</span></span> <span data-ttu-id="51ab2-202">Mit Netzwerken können bestimmte Ressourcen mit anderen Ressourcen kommunizieren und in einigen Fällen den Zugriff verhindern.</span><span class="sxs-lookup"><span data-stu-id="51ab2-202">Networks allow certain resources to talk to other resources and prevent access in some cases.</span></span> <span data-ttu-id="51ab2-203">Eine häufige Netzwerk Regel besteht darin, den Zugriff auf die Produktionsumgebung von der Entwicklungsumgebung aus zu deaktivieren, wenn ein Teil des Codes mit einem Teil des Codes eintreten ausführt und einen Daten Satz löscht.</span><span class="sxs-lookup"><span data-stu-id="51ab2-203">A frequent network rule is to restrict access to the production environment from the development environment on the off chance that a half-developed piece of code runs awry and deletes a swath of data.</span></span>

<span data-ttu-id="51ab2-204">Standardmäßig verfügen die meisten Azure-Ressourcen in Azure nur über die grundlegende und leistungsbezogene Netzwerk Einrichtung.</span><span class="sxs-lookup"><span data-stu-id="51ab2-204">Out of the box, most PaaS Azure resources have only the most basic and permissive networking setup.</span></span> <span data-ttu-id="51ab2-205">Beispielsweise kann jeder im Internet auf einen app Service zugreifen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-205">For instance, anybody on the Internet can access an app service.</span></span> <span data-ttu-id="51ab2-206">Neue SQL Server Instanzen sind in der Regel eingeschränkt, sodass externe Parteien nicht darauf zugreifen können, aber die von Azure selbst verwendeten IP-Adressbereiche sind über zulässig.</span><span class="sxs-lookup"><span data-stu-id="51ab2-206">New SQL Server instances typically come restricted, so that external parties can't access them, but the IP address ranges used by Azure itself are permitted through.</span></span> <span data-ttu-id="51ab2-207">Obwohl der SQL-Server vor externen Bedrohungen geschützt ist, muss ein Angreifer nur einen Azure-Bridgeheadserver einrichten, von dem aus Angriffe auf alle SQL-Instanzen in Azure gestartet werden können.</span><span class="sxs-lookup"><span data-stu-id="51ab2-207">So, while the SQL server is protected from external threats, an attacker only needs to set up an Azure bridgehead from where they can launch attacks against all SQL instances on Azure.</span></span>

<span data-ttu-id="51ab2-208">Glücklicherweise können die meisten Azure-Ressourcen in einer Azure-Virtual Network platziert werden, die eine differenzierte Zugriffs Steuerung ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="51ab2-208">Fortunately, most Azure resources can be placed into an Azure Virtual Network that allows fine-grained access control.</span></span> <span data-ttu-id="51ab2-209">Ähnlich der Art und Weise, wie lokale Netzwerke private Netzwerke einrichten, die vor der umfassenderen Welt geschützt sind, sind virtuelle Netzwerke Inseln mit privaten IP-Adressen, die sich innerhalb des Azure-Netzwerks befinden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-209">Similar to the way that on-premises networks establish private networks that are protected from the wider world, virtual networks are islands of private IP addresses that are located within the Azure network.</span></span>

![Abbildung 9-1 ein virtuelles Netzwerk in Azure](./media/virtual-network.png)

<span data-ttu-id="51ab2-211">**Abbildung 9-1**.</span><span class="sxs-lookup"><span data-stu-id="51ab2-211">**Figure 9-1**.</span></span> <span data-ttu-id="51ab2-212">Ein virtuelles Netzwerk in Azure.</span><span class="sxs-lookup"><span data-stu-id="51ab2-212">A virtual network in Azure.</span></span>

<span data-ttu-id="51ab2-213">Auf die gleiche Weise, wie lokale Netzwerke über eine Firewall verfügen, die den Zugriff auf das Netzwerk regelt, können Sie eine ähnliche Firewall an der Grenze des virtuellen Netzwerks einrichten.</span><span class="sxs-lookup"><span data-stu-id="51ab2-213">In the same way that on-premises networks have a firewall governing access to the network, you can establish a similar firewall at the boundary of the virtual network.</span></span> <span data-ttu-id="51ab2-214">Standardmäßig können alle Ressourcen in einem virtuellen Netzwerk weiterhin mit dem Internet kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="51ab2-214">By default, all the resources on a virtual network can still talk to the Internet.</span></span> <span data-ttu-id="51ab2-215">Es handelt sich nur um eingehende Verbindungen, für die eine explizite Firewallausnahme erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="51ab2-215">It's only incoming connections that require some form of explicit firewall exception.</span></span>

<span data-ttu-id="51ab2-216">Wenn das Netzwerk eingerichtet ist, können interne Ressourcen wie z. b. Speicher Konten so eingerichtet werden, dass nur der Zugriff durch Ressourcen ermöglicht wird, die sich auch auf dem Virtual Network befinden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-216">With the network established, internal resources like storage accounts can be set up to only allow for access by resources that are also on the Virtual Network.</span></span> <span data-ttu-id="51ab2-217">Diese Firewall bietet ein zusätzliches Maß an Sicherheit, wenn die Schlüssel für dieses Speicherkonto kompromittiert werden könnten und Angreifer nicht in der Lage sind, die kompromittierten Schlüssel auszunutzen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-217">This firewall provides an extra level of security, should the keys for that storage account be leaked, attackers wouldn't be able to connect to it to exploit the leaked keys.</span></span> <span data-ttu-id="51ab2-218">Dieses Szenario ist ein weiteres Beispiel für das Prinzip der geringsten Berechtigung.</span><span class="sxs-lookup"><span data-stu-id="51ab2-218">This scenario is another example of the principle of least privilege.</span></span>

<span data-ttu-id="51ab2-219">Die Knoten in einem Azure Kubernetes-Cluster können genauso wie andere Ressourcen, die in Azure einheitlicher sind, an einem virtuellen Netzwerk teilnehmen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-219">The nodes in an Azure Kubernetes cluster can participate in a virtual network just like other resources that are more native to Azure.</span></span> <span data-ttu-id="51ab2-220">Diese Funktion wird als [Azure Container Networking-Schnittstelle](https://github.com/Azure/azure-container-networking/blob/master/docs/cni.md)bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="51ab2-220">This functionality is called [Azure Container Networking Interface](https://github.com/Azure/azure-container-networking/blob/master/docs/cni.md).</span></span> <span data-ttu-id="51ab2-221">Tatsächlich weist Sie ein Subnetz innerhalb des virtuellen Netzwerks zu, dem virtuelle Computer und Container Images zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="51ab2-221">In effect, it allocates a subnet within the virtual network on which virtual machines and container images are allocated.</span></span>

<span data-ttu-id="51ab2-222">Wenn Sie den Weg zur Veranschaulichung des Prinzips der geringsten Rechte fortsetzen, muss nicht jede Ressource innerhalb einer Virtual Network mit allen anderen Ressourcen kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="51ab2-222">Continuing down the path of illustrating the principle of least privilege, not every resource within a Virtual Network needs to talk to every other resource.</span></span> <span data-ttu-id="51ab2-223">Beispielsweise ist es in einer Anwendung, die eine Web-API über ein Speicherkonto und eine SQL-Datenbank bereitstellt, unwahrscheinlich, dass die Datenbank und das Speicherkonto miteinander kommunizieren müssen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-223">For instance, in an application that provides a web API over a storage account and a SQL database, it's unlikely that the database and the storage account need to talk to one another.</span></span> <span data-ttu-id="51ab2-224">Alle Daten, die zwischen Ihnen gemeinsam genutzt werden, durchlaufen die Webanwendung.</span><span class="sxs-lookup"><span data-stu-id="51ab2-224">Any data sharing between them would go through the web application.</span></span> <span data-ttu-id="51ab2-225">Daher kann eine [Netzwerk Sicherheitsgruppe (NSG)](/azure/virtual-network/security-overview) verwendet werden, um den Datenverkehr zwischen den beiden Diensten abzulehnen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-225">So, a [network security group (NSG)](/azure/virtual-network/security-overview) could be used to deny traffic between the two services.</span></span>

<span data-ttu-id="51ab2-226">Eine Richtlinie, mit der die Kommunikation zwischen Ressourcen verweigert wird, kann sich als lästig erweisen. Dies gilt insbesondere für den Hintergrund der Verwendung von Azure ohne Datenverkehrs Einschränkungen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-226">A policy of denying communication between resources can be annoying to implement, especially coming from a background of using Azure without traffic restrictions.</span></span> <span data-ttu-id="51ab2-227">In einigen anderen Clouds ist das Konzept der Netzwerk Sicherheitsgruppen weitaus häufiger.</span><span class="sxs-lookup"><span data-stu-id="51ab2-227">On some other clouds, the concept of network security groups is much more prevalent.</span></span> <span data-ttu-id="51ab2-228">Beispielsweise ist die Standard Richtlinie für AWS, dass Ressourcen nicht untereinander kommunizieren können, bis Sie durch Regeln in einer NSG aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="51ab2-228">For instance, the default policy on AWS is that resources can't communicate among themselves until enabled by rules in an NSG.</span></span> <span data-ttu-id="51ab2-229">Eine restriktivere Umgebung bietet zwar eine langsamere Entwicklung, aber eine restriktivere Umgebung bietet einen sichereren Standard.</span><span class="sxs-lookup"><span data-stu-id="51ab2-229">While slower to develop this, a more restrictive environment provides a more secure default.</span></span> <span data-ttu-id="51ab2-230">Die Verwendung geeigneter devops-Verfahren, insbesondere die Verwendung von [Azure Resource Manager oder TERRAFORM](infrastructure-as-code.md) zum Verwalten von Berechtigungen, kann die Steuerung der Regeln vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-230">Making use of proper DevOps practices, especially using [Azure Resource Manager or Terraform](infrastructure-as-code.md) to manage permissions can make controlling the rules easier.</span></span>

<span data-ttu-id="51ab2-231">Virtuelle Netzwerke können auch beim Einrichten der Kommunikation zwischen lokalen Ressourcen und cloudressourcen nützlich sein.</span><span class="sxs-lookup"><span data-stu-id="51ab2-231">Virtual Networks can also be useful when setting up communication between on-premises and cloud resources.</span></span> <span data-ttu-id="51ab2-232">Ein virtuelles privates Netzwerk kann verwendet werden, um die beiden Netzwerke nahtlos zu verbinden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-232">A virtual private network can be used to seamlessly attach the two networks together.</span></span> <span data-ttu-id="51ab2-233">Dieser Ansatz ermöglicht die Ausführung eines virtuellen Netzwerks ohne gatewayart für Szenarien, in denen alle Benutzer auf dem Standort sind.</span><span class="sxs-lookup"><span data-stu-id="51ab2-233">This approach allows running a virtual network without any sort of gateway for scenarios where all the users are on-site.</span></span> <span data-ttu-id="51ab2-234">Es gibt eine Reihe von Technologien, die verwendet werden können, um dieses Netzwerk einzurichten.</span><span class="sxs-lookup"><span data-stu-id="51ab2-234">There are a number of technologies that can be used to establish this network.</span></span> <span data-ttu-id="51ab2-235">Die einfachste Möglichkeit ist die Verwendung eines [Site-to-Site-VPN](/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%252fazure%252fvirtual-network%252ftoc.json#s2smulti) , das zwischen vielen Routern und Azure hergestellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="51ab2-235">The simplest is to use a [site-to-site VPN](/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%252fazure%252fvirtual-network%252ftoc.json#s2smulti) that can be established between many routers and Azure.</span></span> <span data-ttu-id="51ab2-236">Der Datenverkehr wird über das Internet mit den gleichen Kosten pro Byte wie bei jedem anderen Datenverkehr verschlüsselt und getunniert.</span><span class="sxs-lookup"><span data-stu-id="51ab2-236">Traffic is encrypted and tunneled over the Internet at the same cost per byte as any other traffic.</span></span> <span data-ttu-id="51ab2-237">Für Szenarien, in denen mehr Bandbreite oder mehr Sicherheit wünschenswert ist, bietet Azure einen Dienst mit dem Namen [Express Route](/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%252fazure%252fvirtual-network%252ftoc.json#ExpressRoute) , der eine private Verbindung zwischen einem lokalen Netzwerk und Azure verwendet.</span><span class="sxs-lookup"><span data-stu-id="51ab2-237">For scenarios where more bandwidth or more security is desirable, Azure offers a service called [Express Route](/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%252fazure%252fvirtual-network%252ftoc.json#ExpressRoute) that uses a private circuit between an on-premises network and Azure.</span></span> <span data-ttu-id="51ab2-238">Es ist kostspieliger und schwerer zu erstellen, aber auch sicherer.</span><span class="sxs-lookup"><span data-stu-id="51ab2-238">It's more costly and difficult to establish but also more secure.</span></span>

## <a name="role-based-access-control-for-restricting-access-to-azure-resources"></a><span data-ttu-id="51ab2-239">Rollenbasierte Zugriffs Steuerung zum Einschränken des Zugriffs auf Azure-Ressourcen</span><span class="sxs-lookup"><span data-stu-id="51ab2-239">Role-based access control for restricting access to Azure resources</span></span>

<span data-ttu-id="51ab2-240">RBAC ist ein System, das eine Identität für Anwendungen bereitstellt, die in Azure ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-240">RBAC is a system that provides an identity to applications running in Azure.</span></span> <span data-ttu-id="51ab2-241">Anwendungen können auf Ressourcen zugreifen, die diese Identität anstelle von oder zusätzlich zur Verwendung von Schlüsseln oder Kenn Wörtern verwenden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-241">Applications can access resources using this identity instead of or in addition to using keys or passwords.</span></span>

## <a name="security-principals"></a><span data-ttu-id="51ab2-242">Sicherheitsprinzipale</span><span class="sxs-lookup"><span data-stu-id="51ab2-242">Security Principals</span></span>

<span data-ttu-id="51ab2-243">Die erste Komponente in RBAC ist ein Sicherheits Prinzipal.</span><span class="sxs-lookup"><span data-stu-id="51ab2-243">The first component in RBAC is a security principal.</span></span> <span data-ttu-id="51ab2-244">Ein Sicherheits Prinzipal kann ein Benutzer, eine Gruppe, ein Dienst Prinzipal oder eine verwaltete Identität sein.</span><span class="sxs-lookup"><span data-stu-id="51ab2-244">A security principal can be a user, group, service principal, or managed identity.</span></span>

![Abbildung 9-2 verschiedene Typen von Sicherheits Prinzipale](./media/rbac-security-principal.png)

<span data-ttu-id="51ab2-246">**Abbildung 9-2:**</span><span class="sxs-lookup"><span data-stu-id="51ab2-246">**Figure 9-2**.</span></span> <span data-ttu-id="51ab2-247">Verschiedene Typen von Sicherheits Prinzipale.</span><span class="sxs-lookup"><span data-stu-id="51ab2-247">Different types of security principals.</span></span>

- <span data-ttu-id="51ab2-248">Benutzer: jeder Benutzer, der über ein Konto in Azure Active Directory verfügt, ist ein Benutzer.</span><span class="sxs-lookup"><span data-stu-id="51ab2-248">User - Any user who has an account in Azure Active Directory is a user.</span></span>
- <span data-ttu-id="51ab2-249">Gruppieren: eine Sammlung von Benutzern aus Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="51ab2-249">Group - A collection of users from Azure Active Directory.</span></span> <span data-ttu-id="51ab2-250">Als Mitglied einer Gruppe nimmt ein Benutzer zusätzlich zu seinen eigenen Rollen die Rollen dieser Gruppe an.</span><span class="sxs-lookup"><span data-stu-id="51ab2-250">As a member of a group, a user takes on the roles of that group in addition to their own.</span></span>
- <span data-ttu-id="51ab2-251">Dienst Prinzipal: eine Sicherheitsidentität, unter der Dienste oder Anwendungen ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-251">Service principal - A security identity under which services or applications run.</span></span>
- <span data-ttu-id="51ab2-252">Verwaltete Identität: eine Azure Active Directory Identität, die von Azure verwaltet wird.</span><span class="sxs-lookup"><span data-stu-id="51ab2-252">Managed identity - An Azure Active Directory identity managed by Azure.</span></span> <span data-ttu-id="51ab2-253">Verwaltete Identitäten werden in der Regel verwendet, wenn Cloud-Anwendungen entwickelt werden, die die Anmelde Informationen für die Authentifizierung bei Azure-Diensten verwalten.</span><span class="sxs-lookup"><span data-stu-id="51ab2-253">Managed identities are typically used when developing cloud applications that manage the credentials for authenticating to Azure services.</span></span>

<span data-ttu-id="51ab2-254">Der Sicherheits Prinzipal kann auf die meisten Ressourcen angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-254">The security principal can be applied to most any resource.</span></span> <span data-ttu-id="51ab2-255">Dies bedeutet, dass es möglich ist, einem Container, der in Azure Kubernetes ausgeführt wird, einen Sicherheits Prinzipal zuzuweisen, sodass er auf in Key Vault gespeicherte Geheimnisse zugreifen kann.</span><span class="sxs-lookup"><span data-stu-id="51ab2-255">This means that it's possible to assign a security principal to a container running within Azure Kubernetes, allowing it to access secrets stored in Key Vault.</span></span> <span data-ttu-id="51ab2-256">Eine Azure-Funktion könnte eine Berechtigung akzeptieren, damit Sie mit einer Active Directory Instanz kommunizieren kann, um ein JWT für einen aufrufenden Benutzer zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-256">An Azure Function could take on a permission allowing it to talk to an Active Directory instance to validate a JWT for a calling user.</span></span> <span data-ttu-id="51ab2-257">Nachdem Dienste mit einem Dienst Prinzipal aktiviert wurden, können Ihre Berechtigungen mithilfe von Rollen und Bereichen granulär verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-257">Once services are enabled with a service principal, their permissions can be managed granularly using roles and scopes.</span></span>

## <a name="roles"></a><span data-ttu-id="51ab2-258">Rollen</span><span class="sxs-lookup"><span data-stu-id="51ab2-258">Roles</span></span>

<span data-ttu-id="51ab2-259">Ein Sicherheits Prinzipal kann zahlreiche Rollen übernehmen oder bei Verwendung einer eher in der Analogie verwendeten Analogie viele Hüte belegen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-259">A security principal can take on many roles or, using a more sartorial analogy, wear many hats.</span></span> <span data-ttu-id="51ab2-260">Jede Rolle definiert eine Reihe von Berechtigungen, z. b. "Lesen von Nachrichten von Azure Service Bus Endpunkts".</span><span class="sxs-lookup"><span data-stu-id="51ab2-260">Each role defines a series of permissions such as "Read messages from Azure Service Bus endpoint".</span></span> <span data-ttu-id="51ab2-261">Der effektive Berechtigungs Satz eines Sicherheits Prinzipals ist die Kombination aller Berechtigungen, die allen von einem Sicherheits Prinzipal zugewiesenen Rollen zugewiesen sind.</span><span class="sxs-lookup"><span data-stu-id="51ab2-261">The effective permission set of a security principal is the combination of all the permissions assigned to all the roles that a security principal has.</span></span> <span data-ttu-id="51ab2-262">Azure verfügt über eine große Anzahl integrierter Rollen, und Benutzer können Ihre eigenen Rollen definieren.</span><span class="sxs-lookup"><span data-stu-id="51ab2-262">Azure has a large number of built-in roles and users can define their own roles.</span></span>

![Abbildung 9-3 RBAC-Rollen Definitionen](./media/rbac-role-definition.png)

<span data-ttu-id="51ab2-264">**Abbildung 9-3.**</span><span class="sxs-lookup"><span data-stu-id="51ab2-264">**Figure 9-3**.</span></span> <span data-ttu-id="51ab2-265">RBAC-Rollen Definitionen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-265">RBAC role definitions.</span></span>

<span data-ttu-id="51ab2-266">In Azure integriert ist auch eine Reihe von Rollen auf hoher Ebene, z. b. Besitzer, Mitwirkender, Leser und Benutzerkonto Administrator.</span><span class="sxs-lookup"><span data-stu-id="51ab2-266">Built into Azure are also a number of high-level roles such as Owner, Contributor, Reader, and User Account Administrator.</span></span> <span data-ttu-id="51ab2-267">Mit der Rolle "Besitzer" kann ein Sicherheits Prinzipal auf alle Ressourcen zugreifen und anderen Personen Berechtigungen zuweisen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-267">With the Owner role, a security principal can access all resources and assign permissions to others.</span></span> <span data-ttu-id="51ab2-268">Ein Mitwirkender hat dieselbe Zugriffsebene für alle Ressourcen, aber er kann keine Berechtigungen zuweisen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-268">A contributor has the same level of access to all resources but they can't assign permissions.</span></span> <span data-ttu-id="51ab2-269">Ein Leser kann nur vorhandene Azure-Ressourcen anzeigen, und ein Benutzerkonto Administrator kann den Zugriff auf Azure-Ressourcen verwalten.</span><span class="sxs-lookup"><span data-stu-id="51ab2-269">A Reader can only view existing Azure resources and a User Account Administrator can manage access to Azure resources.</span></span>

<span data-ttu-id="51ab2-270">Präzisetere integrierte Rollen, z. b. [Mitwirkender von DNS-Zonen](/azure/role-based-access-control/built-in-roles#dns-zone-contributor) , haben Rechte, die auf einen einzelnen Dienst beschränkt sind</span><span class="sxs-lookup"><span data-stu-id="51ab2-270">More granular built-in roles such as [DNS Zone Contributor](/azure/role-based-access-control/built-in-roles#dns-zone-contributor) have rights limited to a single service.</span></span> <span data-ttu-id="51ab2-271">Sicherheits Prinzipale können eine beliebige Anzahl von Rollen annehmen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-271">Security principals can take on any number of roles.</span></span>

## <a name="scopes"></a><span data-ttu-id="51ab2-272">Bereiche</span><span class="sxs-lookup"><span data-stu-id="51ab2-272">Scopes</span></span>

<span data-ttu-id="51ab2-273">Rollen können auf einen eingeschränkten Satz von Ressourcen in Azure angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-273">Roles can be applied to a restricted set of resources within Azure.</span></span> <span data-ttu-id="51ab2-274">Wenn Sie z. b. den Bereich auf das vorherige Beispiel für das Lesen aus einer Service Bus Warteschlange anwenden, können Sie die Berechtigung auf eine einzige Warteschlange eingrenzen: "Lesen von Nachrichten von Azure Service Bus Endpunkt `blah.servicebus.windows.net/queue1` "</span><span class="sxs-lookup"><span data-stu-id="51ab2-274">For instance, applying scope to the previous example of reading from a Service Bus queue, you can narrow the permission to a single queue: "Read messages from Azure Service Bus endpoint `blah.servicebus.windows.net/queue1`"</span></span>

<span data-ttu-id="51ab2-275">Der Bereich kann so schmal wie eine einzelne Ressource sein oder auf eine gesamte Ressourcengruppe, ein Abonnement oder sogar auf eine Verwaltungsgruppe angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-275">The scope can be as narrow as a single resource or it can be applied to an entire resource group, subscription, or even management group.</span></span>

<span data-ttu-id="51ab2-276">Beim Testen, ob ein Sicherheits Prinzipal über bestimmte Berechtigungen verfügt, wird die Kombination von Rolle und Bereich berücksichtigt.</span><span class="sxs-lookup"><span data-stu-id="51ab2-276">When testing if a security principal has certain permission, the combination of role and scope are taken into account.</span></span> <span data-ttu-id="51ab2-277">Diese Kombination bietet einen leistungsfähigen Autorisierungs Mechanismus.</span><span class="sxs-lookup"><span data-stu-id="51ab2-277">This combination provides a powerful authorization mechanism.</span></span>

## <a name="deny"></a><span data-ttu-id="51ab2-278">Verweigern</span><span class="sxs-lookup"><span data-stu-id="51ab2-278">Deny</span></span>

<span data-ttu-id="51ab2-279">Bisher waren nur "zulassen"-Regeln für die RBAC zulässig.</span><span class="sxs-lookup"><span data-stu-id="51ab2-279">Previously, only "allow" rules were permitted for RBAC.</span></span> <span data-ttu-id="51ab2-280">Dieses Verhalten hat das Erstellen einiger Bereiche erschwert.</span><span class="sxs-lookup"><span data-stu-id="51ab2-280">This behavior made some scopes complicated to build.</span></span> <span data-ttu-id="51ab2-281">So kann z. b. ein Sicherheits Prinzipal Zugriff auf alle Speicher Konten, außer auf einen, gewährt werden, um einer potenziell unendlichen Liste von Speicher Konten explizite Berechtigungen zu erteilen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-281">For instance, allowing a security principal access to all storage accounts except one required granting explicit permission to a potentially endless list of storage accounts.</span></span> <span data-ttu-id="51ab2-282">Jedes Mal, wenn ein neues Speicherkonto erstellt wurde, muss es dieser Liste von Konten hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-282">Every time a new storage account was created, it would have to be added to this list of accounts.</span></span> <span data-ttu-id="51ab2-283">Dies erforderte einen Verwaltungsaufwand, der sicherlich nicht wünschenswert war.</span><span class="sxs-lookup"><span data-stu-id="51ab2-283">This added management overhead that certainly wasn't desirable.</span></span>

<span data-ttu-id="51ab2-284">Ablehnungs Regeln haben Vorrang vor Zulassungsregeln.</span><span class="sxs-lookup"><span data-stu-id="51ab2-284">Deny rules take precedence over allow rules.</span></span> <span data-ttu-id="51ab2-285">Die Darstellung des gleichen "allow all with a"-Bereichs kann nun wie folgt dargestellt werden: "All zulassen" und "Deny this one this".</span><span class="sxs-lookup"><span data-stu-id="51ab2-285">Now representing the same "allow all but one" scope could be represented as two rules "allow all" and "deny this one specific one".</span></span> <span data-ttu-id="51ab2-286">Ablehnungs Regeln vereinfachen die Verwaltung nicht nur, sondern ermöglichen zusätzlich sichere Ressourcen, indem der Zugriff auf alle verweigert wird.</span><span class="sxs-lookup"><span data-stu-id="51ab2-286">Deny rules not only ease management but allow for resources that are extra secure by denying access to everybody.</span></span>

## <a name="checking-access"></a><span data-ttu-id="51ab2-287">Überprüfen des Zugriffs</span><span class="sxs-lookup"><span data-stu-id="51ab2-287">Checking access</span></span>

<span data-ttu-id="51ab2-288">Wie Sie sich vorstellen können, kann es schwierig sein, die effektive Berechtigung eines Dienst Prinzipals zu ermitteln, wenn eine große Anzahl von Rollen und Bereichen vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="51ab2-288">As you can imagine, having a large number of roles and scopes can make figuring out the effective permission of a service principal quite difficult.</span></span> <span data-ttu-id="51ab2-289">Das Anheften von Ablehnungs Regeln wird nur zur Erhöhung der Komplexität dienen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-289">Piling deny rules on top of that, only serves to increase the complexity.</span></span> <span data-ttu-id="51ab2-290">Glücklicherweise gibt es einen [Berechtigungs Rechner](/azure/role-based-access-control/check-access) , der die effektiven Berechtigungen für jeden Dienst Prinzipal anzeigen kann.</span><span class="sxs-lookup"><span data-stu-id="51ab2-290">Fortunately, there's a [permissions calculator](/azure/role-based-access-control/check-access) that can show the effective permissions for any service principal.</span></span> <span data-ttu-id="51ab2-291">Sie befindet sich in der Regel auf der Registerkarte IAM im Portal, wie in Abbildung 9-3 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="51ab2-291">It's typically found under the IAM tab in the portal, as shown in Figure 9-3.</span></span>

![Abbildung 9-4 Berechtigungs Rechner für App Service](./media/check-rbac.png)

<span data-ttu-id="51ab2-293">**Abbildung 9-4**.</span><span class="sxs-lookup"><span data-stu-id="51ab2-293">**Figure 9-4**.</span></span> <span data-ttu-id="51ab2-294">Der Berechtigungs Rechner für einen app Service.</span><span class="sxs-lookup"><span data-stu-id="51ab2-294">Permission calculator for an app service.</span></span>

## <a name="securing-secrets"></a><span data-ttu-id="51ab2-295">Sichern von Geheimnissen</span><span class="sxs-lookup"><span data-stu-id="51ab2-295">Securing secrets</span></span>

<span data-ttu-id="51ab2-296">Kenn Wörter und Zertifikate sind ein gängiger Angriffsvektor für Angreifer.</span><span class="sxs-lookup"><span data-stu-id="51ab2-296">Passwords and certificates are a common attack vector for attackers.</span></span> <span data-ttu-id="51ab2-297">Die Kenn Wort Absturz Hardware kann einen Brute-Force-Angriff durchführen und versuchen, Milliarden von Kenn Wörtern pro Sekunde zu erraten.</span><span class="sxs-lookup"><span data-stu-id="51ab2-297">Password-cracking hardware can do a  brute-force attack and try to guess billions of passwords per second.</span></span> <span data-ttu-id="51ab2-298">Daher ist es wichtig, dass die Kenn Wörter, die für den Zugriff auf Ressourcen verwendet werden, stark sind und eine große Bandbreite an Zeichen aufweisen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-298">So it's important that the passwords that are used to access resources are strong, with a large variety of characters.</span></span> <span data-ttu-id="51ab2-299">Diese Kenn Wörter sind genau die Art von Kenn Wörtern, die sich beinahe nicht merken.</span><span class="sxs-lookup"><span data-stu-id="51ab2-299">These passwords are exactly the kind of passwords that are near impossible to remember.</span></span> <span data-ttu-id="51ab2-300">Glücklicherweise müssen die Kenn Wörter in Azure von keinem menschlichen Benutzer bekannt sein.</span><span class="sxs-lookup"><span data-stu-id="51ab2-300">Fortunately, the passwords in Azure don't actually need to be known by any human.</span></span>

<span data-ttu-id="51ab2-301">Viele Sicherheits [Experten empfehlen](https://www.troyhunt.com/password-managers-dont-have-to-be-perfect-they-just-have-to-be-better-than-not-having-one/) , dass die Verwendung eines Kennwort-Managers zum Aufbewahren Ihrer eigenen Kenn Wörter die beste Vorgehensweise ist.</span><span class="sxs-lookup"><span data-stu-id="51ab2-301">Many security [experts suggest](https://www.troyhunt.com/password-managers-dont-have-to-be-perfect-they-just-have-to-be-better-than-not-having-one/) that using a password manager to keep your own passwords is the best approach.</span></span> <span data-ttu-id="51ab2-302">Obwohl Sie Ihre Kenn Wörter an einem Ort zentralisiert, können Sie auch sehr komplexe Kenn Wörter verwenden und sicherstellen, dass Sie für jedes Konto eindeutig sind.</span><span class="sxs-lookup"><span data-stu-id="51ab2-302">While it centralizes your passwords in one location, it also allows using highly complex passwords and ensuring they're unique for each account.</span></span> <span data-ttu-id="51ab2-303">Das gleiche System ist in Azure vorhanden: ein zentraler Speicher für Geheimnisse.</span><span class="sxs-lookup"><span data-stu-id="51ab2-303">The same system exists within Azure: a central store for secrets.</span></span>

## <a name="azure-key-vault"></a><span data-ttu-id="51ab2-304">Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="51ab2-304">Azure Key Vault</span></span>

<span data-ttu-id="51ab2-305">Azure Key Vault bietet einen zentralisierten Speicherort zum Speichern von Kenn Wörtern für Dinge wie Datenbanken, API-Schlüssel und Zertifikate.</span><span class="sxs-lookup"><span data-stu-id="51ab2-305">Azure Key Vault provides a centralized location to store passwords for things such as databases, API keys, and certificates.</span></span> <span data-ttu-id="51ab2-306">Sobald ein geheimer Schlüssel in den Tresor eingegeben wurde, wird er nie erneut angezeigt, und die Befehle zum Extrahieren und Anzeigen sind absichtlich kompliziert.</span><span class="sxs-lookup"><span data-stu-id="51ab2-306">Once a secret is entered into the Vault, it's never shown again and the commands to extract and view it are purposefully complicated.</span></span> <span data-ttu-id="51ab2-307">Die Informationen in der Safe werden entweder mithilfe der Software Verschlüsselung oder mithilfe der von TPS 140-2 Level 2 validierten Hardware Sicherheitsmodule geschützt.</span><span class="sxs-lookup"><span data-stu-id="51ab2-307">The information in the safe is protected using either software encryption or FIPS 140-2 Level 2 validated Hardware Security Modules.</span></span>

<span data-ttu-id="51ab2-308">Der Zugriff auf den Schlüssel Tresor wird über rbacs bereitgestellt. Dies bedeutet, dass nicht nur ein Benutzer auf die Informationen im Tresor zugreifen kann.</span><span class="sxs-lookup"><span data-stu-id="51ab2-308">Access to the key vault is provided through RBACs, meaning that not just any user can access the information in the vault.</span></span> <span data-ttu-id="51ab2-309">Nehmen wir an, eine Webanwendung möchte auf die in Azure Key Vault gespeicherte Datenbank-Verbindungs Zeichenfolge zugreifen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-309">Say a web application wishes to access the database connection string stored in Azure Key Vault.</span></span> <span data-ttu-id="51ab2-310">Anwendungen müssen mithilfe eines Dienst Prinzipals ausgeführt werden, um Zugriff zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="51ab2-310">To gain access, applications need to run using a service principal.</span></span> <span data-ttu-id="51ab2-311">Unter dieser angenommenen Rolle können die geheimen Schlüssel aus dem sicheren gelesen werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-311">Under this assumed role, they can read the secrets from the safe.</span></span> <span data-ttu-id="51ab2-312">Es gibt eine Reihe unterschiedlicher Sicherheitseinstellungen, mit denen der Zugriff einer Anwendung auf den Tresor weiter eingeschränkt werden kann, sodass keine geheimen Schlüssel aktualisiert, sondern nur gelesen werden kann.</span><span class="sxs-lookup"><span data-stu-id="51ab2-312">There are a number of different security settings that can further limit the access that an application has to the vault, so that it can't update secrets but only read them.</span></span>

<span data-ttu-id="51ab2-313">Der Zugriff auf den Schlüssel Tresor kann überwacht werden, um sicherzustellen, dass nur die erwarteten Anwendungen auf den Tresor zugreifen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-313">Access to the key vault can be monitored to ensure that only the expected applications are accessing the vault.</span></span> <span data-ttu-id="51ab2-314">Die Protokolle können wieder in Azure Monitor integriert werden, sodass Sie die Möglichkeit zum Einrichten von Warnungen erhalten, wenn unerwartete Bedingungen auftreten.</span><span class="sxs-lookup"><span data-stu-id="51ab2-314">The logs can be integrated back into Azure Monitor, unlocking the ability to set up alerts when unexpected conditions are encountered.</span></span>

## <a name="kubernetes"></a><span data-ttu-id="51ab2-315">Kubernetes</span><span class="sxs-lookup"><span data-stu-id="51ab2-315">Kubernetes</span></span>

<span data-ttu-id="51ab2-316">In Kubernetes gibt es einen ähnlichen Dienst zum Verwalten von kleinen geheimen Informationen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-316">Within Kubernetes, there's a similar service for maintaining small pieces of secret information.</span></span> <span data-ttu-id="51ab2-317">Kubernetes Geheimnisse können über die typische `kubectl` ausführbare Datei festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-317">Kubernetes Secrets can be set via the typical `kubectl` executable.</span></span>

<span data-ttu-id="51ab2-318">Das Erstellen eines Geheimnisses ist so einfach wie das Auffinden der Base64-Version der zu speichernden Werte:</span><span class="sxs-lookup"><span data-stu-id="51ab2-318">Creating a secret is as simple as finding the base64 version of the values to be stored:</span></span>

```console
echo -n 'admin' | base64
YWRtaW4=
echo -n '1f2d1e2e67df' | base64
MWYyZDFlMmU2N2Rm
```

<span data-ttu-id="51ab2-319">Fügen Sie es dann zu einer Geheimnis Datei mit dem Namen hinzu `secret.yml` , die etwa wie im folgenden Beispiel aussieht:</span><span class="sxs-lookup"><span data-stu-id="51ab2-319">Then adding it to a secrets file named `secret.yml` for example that looks similar to the following example:</span></span>

```yml
apiVersion: v1
kind: Secret
metadata:
  name: mysecret
type: Opaque
data:
  username: YWRtaW4=
  password: MWYyZDFlMmU2N2Rm
```

<span data-ttu-id="51ab2-320">Zum Schluss kann diese Datei in Kubernetes geladen werden, indem der folgende Befehl ausgeführt wird:</span><span class="sxs-lookup"><span data-stu-id="51ab2-320">Finally, this file can be loaded into Kubernetes by running the following command:</span></span>

```console
kubectl apply -f ./secret.yaml
```

<span data-ttu-id="51ab2-321">Diese geheimen Schlüssel können dann in Volumes bereitgestellt oder für Container Prozesse über Umgebungsvariablen verfügbar gemacht werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-321">These secrets can then be mounted into volumes or exposed to container processes through environment variables.</span></span> <span data-ttu-id="51ab2-322">Der Ansatz der [12-stufigen App](https://12factor.net/) zum Entwickeln von Anwendungen schlägt vor, den kleinsten gemeinsamen Nenner zum Übertragen von Einstellungen an eine Anwendung zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-322">The [Twelve-factor app](https://12factor.net/) approach to building applications suggests using the lowest common denominator to transmit settings to an application.</span></span> <span data-ttu-id="51ab2-323">Umgebungsvariablen sind der kleinste gemeinsame Nenner, da Sie unabhängig vom Betriebssystem oder der Anwendung unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-323">Environment variables are the lowest common denominator, because they're supported no matter the operating system or application.</span></span>

<span data-ttu-id="51ab2-324">Eine Alternative zur Verwendung der integrierten Kubernetes-Geheimnisse besteht darin, innerhalb von Kubernetes auf die geheimen Schlüssel in Azure Key Vault zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-324">An alternative to use the built-in Kubernetes secrets is to access the secrets in Azure Key Vault from within Kubernetes.</span></span> <span data-ttu-id="51ab2-325">Die einfachste Möglichkeit hierfür ist, dem Container eine RBAC-Rolle zuzuweisen, um geheime Schlüssel zu laden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-325">The simplest way to do this is to assign an RBAC role to the container looking to load secrets.</span></span> <span data-ttu-id="51ab2-326">Die Anwendung kann dann die Azure Key Vault-APIs verwenden, um auf die geheimen Schlüssel zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-326">The application can then use the Azure Key Vault APIs to access the secrets.</span></span> <span data-ttu-id="51ab2-327">Dieser Ansatz erfordert jedoch Änderungen am Code und befolgt nicht das Muster der Verwendung von Umgebungsvariablen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-327">However, this approach requires modifications to the code and doesn't follow the pattern of using environment variables.</span></span> <span data-ttu-id="51ab2-328">Stattdessen ist es möglich, Werte in einen Container einzufügen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-328">Instead, it's possible to inject values into a container.</span></span> <span data-ttu-id="51ab2-329">Diese Vorgehensweise ist sicherer als die Verwendung der Kubernetes-Geheimnisse direkt, da Benutzer im Cluster darauf zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="51ab2-329">This approach is actually more secure than using the Kubernetes secrets directly, as they can be accessed by users on the cluster.</span></span>

## <a name="encryption-in-transit-and-at-rest"></a><span data-ttu-id="51ab2-330">Verschlüsselung während der Übertragung und im Ruhezustand</span><span class="sxs-lookup"><span data-stu-id="51ab2-330">Encryption in transit and at rest</span></span>

<span data-ttu-id="51ab2-331">Die Sicherheit der Daten ist wichtig, unabhängig davon, ob Sie sich auf einem Datenträger befinden oder zwischen verschiedenen Diensten wechseln.</span><span class="sxs-lookup"><span data-stu-id="51ab2-331">Keeping data safe is important whether it's on disk or transiting between various different services.</span></span> <span data-ttu-id="51ab2-332">Die effektivste Methode, Daten von einem Verlust zu bewahren, besteht darin, Sie in ein Format zu verschlüsseln, das von anderen nicht einfach gelesen werden kann.</span><span class="sxs-lookup"><span data-stu-id="51ab2-332">The most effective way to keep data from leaking is to encrypt it into a format that can't be easily read by others.</span></span> <span data-ttu-id="51ab2-333">Azure unterstützt eine große Bandbreite an Verschlüsselungsoptionen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-333">Azure supports a wide range of encryption options.</span></span>

### <a name="in-transit"></a><span data-ttu-id="51ab2-334">Während der Übertragung</span><span class="sxs-lookup"><span data-stu-id="51ab2-334">In transit</span></span>

<span data-ttu-id="51ab2-335">Es gibt mehrere Möglichkeiten, den Datenverkehr im Netzwerk in Azure zu verschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="51ab2-335">There are several ways to encrypt traffic on the network in Azure.</span></span> <span data-ttu-id="51ab2-336">Der Zugriff auf Azure-Dienste erfolgt in der Regel über Verbindungen, die Transport Layer Security (TLS) verwenden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-336">The access to Azure services is typically done over connections that use Transport Layer Security (TLS).</span></span> <span data-ttu-id="51ab2-337">Beispielsweise sind für alle Verbindungen mit den Azure-APIs TLS-Verbindungen erforderlich.</span><span class="sxs-lookup"><span data-stu-id="51ab2-337">For instance, all the connections to the Azure APIs require TLS connections.</span></span> <span data-ttu-id="51ab2-338">Gleichermaßen können Verbindungen mit Endpunkten in Azure Storage nur über TLS-verschlüsselte Verbindungen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-338">Equally, connections to endpoints in Azure storage can be restricted to work only over TLS encrypted connections.</span></span>

<span data-ttu-id="51ab2-339">TLS ist ein kompliziertes Protokoll, und es ist einfach zu wissen, dass die Verbindung TLS verwendet, nicht ausreichen, um die Sicherheit sicherzustellen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-339">TLS is a complicated protocol and simply knowing that the connection is using TLS isn't sufficient to ensure security.</span></span> <span data-ttu-id="51ab2-340">Beispielsweise ist TLS 1,0 chronisch unsicher, und TLS 1,1 ist nicht viel besser.</span><span class="sxs-lookup"><span data-stu-id="51ab2-340">For instance, TLS 1.0 is chronically insecure, and TLS 1.1 isn't much better.</span></span> <span data-ttu-id="51ab2-341">Auch innerhalb der Versionen von TLS gibt es verschiedene Einstellungen, mit denen die Verbindungen leichter entschlüsselt werden können.</span><span class="sxs-lookup"><span data-stu-id="51ab2-341">Even within the versions of TLS, there are various settings that can make the connections easier to decrypt.</span></span> <span data-ttu-id="51ab2-342">Die beste Vorgehensweise besteht darin, zu überprüfen, ob die Server Verbindung aktuelle und ordnungsgemäß konfigurierte Protokolle verwendet.</span><span class="sxs-lookup"><span data-stu-id="51ab2-342">The best course of action is to check and see if the server connection is using up-to-date and well configured protocols.</span></span>

<span data-ttu-id="51ab2-343">Diese Überprüfung kann von einem externen Dienst wie dem SSL-Server Test von SSL Labs durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-343">This check can be done by an external service such as SSL labs' SSL Server Test.</span></span> <span data-ttu-id="51ab2-344">Ein Testlauf für einen typischen Azure-Endpunkt, in diesem Fall ein Service Bus-Endpunkt, ergibt eine nahezu perfekte Bewertung eines.</span><span class="sxs-lookup"><span data-stu-id="51ab2-344">A test run against a typical Azure endpoint, in this case a service bus endpoint, yields a near perfect score of A.</span></span>

<span data-ttu-id="51ab2-345">Auch Dienste wie Azure SQL-Datenbanken verwenden die TLS-Verschlüsselung, um die Daten zu verbergen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-345">Even services like Azure SQL databases use TLS encryption to keep data hidden.</span></span> <span data-ttu-id="51ab2-346">Der interessante Teil der Verschlüsselung der Daten während der Übertragung mithilfe von TLS besteht darin, dass es nicht möglich ist, auch für Microsoft die Verbindung zwischen Computern zu überwachen, auf denen TLS ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="51ab2-346">The interesting part about encrypting the data in transit using TLS is that it isn't possible, even for Microsoft, to listen in on the connection between computers running TLS.</span></span> <span data-ttu-id="51ab2-347">Dies sollte für Unternehmen sorgen, dass Ihre Daten von einem ordnungsgemäßen Microsoft-oder sogar einem Zustands Akteur mit mehr Ressourcen als dem Standard Angreifer gefährdet werden können.</span><span class="sxs-lookup"><span data-stu-id="51ab2-347">This should provide comfort for companies concerned that their data may be at risk from Microsoft proper or even a state actor with more resources than the standard attacker.</span></span>

![Abbildung 9-5 der Bericht "SSL Labs" zeigt eine Bewertung eines für einen Service Bus Endpunkt an.](./media/ssl-report.png)

<span data-ttu-id="51ab2-349">**Abbildung 9-5.**</span><span class="sxs-lookup"><span data-stu-id="51ab2-349">**Figure 9-5**.</span></span> <span data-ttu-id="51ab2-350">Der Bericht "SSL Labs" zeigt die Bewertung eines für einen Service Bus Endpunkt an.</span><span class="sxs-lookup"><span data-stu-id="51ab2-350">SSL labs report showing a score of A for a Service Bus endpoint.</span></span>

<span data-ttu-id="51ab2-351">Diese Verschlüsselungs Stufe ist nicht für die gesamte Zeit ausreichend, Sie sollte jedoch sicher sein, dass Azure TLS-Verbindungen sehr sicher sind.</span><span class="sxs-lookup"><span data-stu-id="51ab2-351">While this level of encryption isn't going to be sufficient for all time, it should inspire confidence that Azure TLS connections are quite secure.</span></span> <span data-ttu-id="51ab2-352">Azure wird seine Sicherheitsstandards weiterentwickeln, wenn die Verschlüsselung verbessert wird.</span><span class="sxs-lookup"><span data-stu-id="51ab2-352">Azure will continue to evolve its security standards as encryption improves.</span></span> <span data-ttu-id="51ab2-353">Es ist gut zu wissen, dass es jemanden gibt, der die Sicherheitsstandards überwacht und Azure bei der Verbesserung aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="51ab2-353">It's nice to know that there's somebody watching the security standards and updating Azure as they improve.</span></span>

### <a name="at-rest"></a><span data-ttu-id="51ab2-354">Im Ruhezustand</span><span class="sxs-lookup"><span data-stu-id="51ab2-354">At rest</span></span>

<span data-ttu-id="51ab2-355">In jeder Anwendung gibt es eine Reihe von stellen, an denen sich Daten auf dem Datenträger befinden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-355">In any application, there are a number of places where data rests on the disk.</span></span> <span data-ttu-id="51ab2-356">Der Anwendungscode selbst wird aus einem Speichermechanismus geladen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-356">The application code itself is loaded from some storage mechanism.</span></span> <span data-ttu-id="51ab2-357">Die meisten Anwendungen verwenden auch eine solche Datenbank, z. b. SQL Server, Cosmos DB oder sogar die erstaunlich Preis effiziente Table Storage.</span><span class="sxs-lookup"><span data-stu-id="51ab2-357">Most applications also use some kind of a database such as SQL Server, Cosmos DB, or even the amazingly price-efficient Table Storage.</span></span> <span data-ttu-id="51ab2-358">Diese Datenbanken verwenden alle stark verschlüsselten Speicher, um sicherzustellen, dass keine anderen Anwendungen als die Anwendungen mit den richtigen Berechtigungen Ihre Daten lesen können.</span><span class="sxs-lookup"><span data-stu-id="51ab2-358">These databases all use heavily encrypted storage to ensure that nobody other than the applications with proper permissions can read your data.</span></span> <span data-ttu-id="51ab2-359">Auch die System Operatoren können keine verschlüsselten Daten lesen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-359">Even the system operators can't read data that has been encrypted.</span></span> <span data-ttu-id="51ab2-360">Daher können Kunden sicher sein, dass Ihre geheimen Informationen geheim bleiben.</span><span class="sxs-lookup"><span data-stu-id="51ab2-360">So customers can remain confident their secret information remains secret.</span></span>

### <a name="storage"></a><span data-ttu-id="51ab2-361">Speicher</span><span class="sxs-lookup"><span data-stu-id="51ab2-361">Storage</span></span>

<span data-ttu-id="51ab2-362">Die Grundlage für einen Großteil von Azure ist die Azure Storage-Engine.</span><span class="sxs-lookup"><span data-stu-id="51ab2-362">The underpinning of much of Azure is the Azure Storage engine.</span></span> <span data-ttu-id="51ab2-363">Die Datenträger virtueller Computer werden auf Azure Storage bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="51ab2-363">Virtual machine disks are mounted on top of Azure Storage.</span></span> <span data-ttu-id="51ab2-364">Der Azure Kubernetes-Dienst wird auf virtuellen Computern ausgeführt, die auf Azure Storage gehostet werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-364">Azure Kubernetes Service runs on virtual machines that, themselves, are hosted on Azure Storage.</span></span> <span data-ttu-id="51ab2-365">Sogar Server lose Technologien, wie Azure Functions-apps und Azure Container Instances, sind nicht auf dem Datenträger verfügbar, der Teil von Azure Storage ist.</span><span class="sxs-lookup"><span data-stu-id="51ab2-365">Even serverless technologies, such as Azure Functions Apps and Azure Container Instances, run out of disk that is part of Azure Storage.</span></span>

<span data-ttu-id="51ab2-366">Wenn Azure Storage gut verschlüsselt ist, wird eine Grundlage für die meisten anderen anderen Elemente für die Verschlüsselung bereit stehen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-366">If Azure Storage is well encrypted, then it provides for a foundation for most everything else to also be encrypted.</span></span> <span data-ttu-id="51ab2-367">Azure Storage [ist](/azure/storage/common/storage-service-encryption) mit der mit dem [fps 140-2](https://en.wikipedia.org/wiki/FIPS_140) kompatiblen [256-Bit-AES](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard)verschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="51ab2-367">Azure Storage [is encrypted](/azure/storage/common/storage-service-encryption) with [FIPS 140-2](https://en.wikipedia.org/wiki/FIPS_140) compliant [256-bit AES](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard).</span></span> <span data-ttu-id="51ab2-368">Dies ist eine bekannte Verschlüsselungstechnologie, die in den letzten 20 oder so vielen Jahren eine umfassende akademische Überprüfung durchgeführt hat.</span><span class="sxs-lookup"><span data-stu-id="51ab2-368">This is a well-regarded encryption technology having been the subject of extensive academic scrutiny over the last 20 or so years.</span></span> <span data-ttu-id="51ab2-369">Zurzeit gibt es keinen bekannten praktischen Angriff, der es einem Benutzer ohne Kenntnis des Schlüssels gestattet, Daten zu lesen, die von AES verschlüsselt wurden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-369">At present, there's no known practical attack that would allow someone without knowledge of the key to read data encrypted by AES.</span></span>

<span data-ttu-id="51ab2-370">Standardmäßig werden die Schlüssel, die zum Verschlüsseln von Azure Storage verwendet werden, von Microsoft verwaltet.</span><span class="sxs-lookup"><span data-stu-id="51ab2-370">By default, the keys used for encrypting Azure Storage are managed by Microsoft.</span></span> <span data-ttu-id="51ab2-371">Es sind umfassende Schutzmaßnahmen vorhanden, um sicherzustellen, dass böswillige Zugriffe auf diese Schlüssel verhindert werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-371">There are extensive protections in place to ensure to prevent malicious access to these keys.</span></span> <span data-ttu-id="51ab2-372">Benutzer mit bestimmten Verschlüsselungs Anforderungen können jedoch auch [eigene Speicher Schlüssel bereitstellen](/azure/storage/common/storage-encryption-keys-powershell) , die in Azure Key Vault verwaltet werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-372">However, users with particular encryption requirements can also [provide their own storage keys](/azure/storage/common/storage-encryption-keys-powershell) that are managed in Azure Key Vault.</span></span> <span data-ttu-id="51ab2-373">Diese Schlüssel können jederzeit widerrufen werden, wodurch der Inhalt des Speicher Kontos auf diese Weise nicht mehr zugänglich ist.</span><span class="sxs-lookup"><span data-stu-id="51ab2-373">These keys can be revoked at any time, which would effectively render the contents of the Storage account using them inaccessible.</span></span>

<span data-ttu-id="51ab2-374">Bei virtuellen Computern wird verschlüsselter Speicher verwendet, aber es ist möglich, eine andere Verschlüsselungs Schicht mithilfe von Technologien wie BitLocker unter Windows oder DM-Crypt unter Linux bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-374">Virtual machines use encrypted storage, but it's possible to provide another layer of encryption by using technologies like BitLocker on Windows or DM-Crypt on Linux.</span></span> <span data-ttu-id="51ab2-375">Diese Technologien bedeuten, dass auch dann, wenn das Datenträger Abbild aus dem Speicher entfernt wurde, fast unmöglich wäre, es zu lesen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-375">These technologies mean that even if the disk image was leaked off of storage, it would remain near impossible to read it.</span></span>

### <a name="azure-sql"></a><span data-ttu-id="51ab2-376">Azure SQL</span><span class="sxs-lookup"><span data-stu-id="51ab2-376">Azure SQL</span></span>

<span data-ttu-id="51ab2-377">In Azure SQL gehostete Datenbanken verwenden eine Technologie namens [transparent Data Encryption (TDE)](/sql/relational-databases/security/encryption/transparent-data-encryption) , um sicherzustellen, dass die Daten verschlüsselt bleiben.</span><span class="sxs-lookup"><span data-stu-id="51ab2-377">Databases hosted on Azure SQL use a technology called [Transparent Data Encryption (TDE)](/sql/relational-databases/security/encryption/transparent-data-encryption) to ensure data remains encrypted.</span></span> <span data-ttu-id="51ab2-378">Sie ist standardmäßig für alle neu erstellten SQL-Datenbanken aktiviert, muss jedoch manuell für Legacy Datenbanken aktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-378">It's enabled by default on all newly created SQL databases, but must be enabled manually for legacy databases.</span></span> <span data-ttu-id="51ab2-379">TDE führt die Verschlüsselung und Entschlüsselung von Echtzeitdaten nicht nur für die Datenbank, sondern auch für die Sicherungen und Transaktionsprotokolle aus.</span><span class="sxs-lookup"><span data-stu-id="51ab2-379">TDE executes real-time encryption and decryption of not just the database, but also the backups and transaction logs.</span></span>

<span data-ttu-id="51ab2-380">Die Verschlüsselungs Parameter werden in der `master` -Datenbank gespeichert und beim Start für die verbleibenden Vorgänge in den Arbeitsspeicher gelesen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-380">The encryption parameters are stored in the `master` database and, on startup, are read into memory for the remaining operations.</span></span> <span data-ttu-id="51ab2-381">Dies bedeutet, dass die `master` Datenbank unverschlüsselt bleiben muss.</span><span class="sxs-lookup"><span data-stu-id="51ab2-381">This means that the `master` database must remain unencrypted.</span></span> <span data-ttu-id="51ab2-382">Der tatsächliche Schlüssel wird von Microsoft verwaltet.</span><span class="sxs-lookup"><span data-stu-id="51ab2-382">The actual key is managed by Microsoft.</span></span> <span data-ttu-id="51ab2-383">Benutzer mit strengen Sicherheitsanforderungen können jedoch ihren eigenen Schlüssel in Key Vault auf die gleiche Weise wie für Azure Storage bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-383">However, users with exacting security requirements may provide their own key in Key Vault in much the same way as is done for Azure Storage.</span></span> <span data-ttu-id="51ab2-384">Der Key Vault stellt für Dienste wie die Schlüssel Rotation und die Sperrung bereit.</span><span class="sxs-lookup"><span data-stu-id="51ab2-384">The Key Vault provides for such services as key rotation and revocation.</span></span>

<span data-ttu-id="51ab2-385">Der "transparente" Teil von TDS ergibt sich aus der Tatsache, dass keine Client Änderungen erforderlich sind, um eine verschlüsselte Datenbank zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-385">The "Transparent" part of TDS comes from the fact that there aren't client changes needed to use an encrypted database.</span></span> <span data-ttu-id="51ab2-386">Obwohl dieser Ansatz eine gute Sicherheit bietet, ist das Verlust des Daten Bank Kennworts ausreichend, damit Benutzer die Daten entschlüsseln können.</span><span class="sxs-lookup"><span data-stu-id="51ab2-386">While this approach provides for good security, leaking the database password is enough for users to be able to decrypt the data.</span></span> <span data-ttu-id="51ab2-387">Es gibt einen weiteren Ansatz, bei dem einzelne Spalten oder Tabellen in einer Datenbank verschlüsselt werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-387">There's another approach that encrypts individual columns or tables in a database.</span></span> <span data-ttu-id="51ab2-388">[Always Encrypted](/azure/sql-database/sql-database-always-encrypted-azure-key-vault) stellt sicher, dass die verschlüsselten Daten zu keinem Zeitpunkt als Klartext innerhalb der Datenbank angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-388">[Always Encrypted](/azure/sql-database/sql-database-always-encrypted-azure-key-vault) ensures that at no point the encrypted data appears in plain text inside the database.</span></span>

<span data-ttu-id="51ab2-389">Das Einrichten dieser Verschlüsselungs Stufe erfordert die Ausführung über einen Assistenten in SQL Server Management Studio, um die Art der Verschlüsselung auszuwählen, und wo in Key Vault die zugeordneten Schlüssel gespeichert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-389">Setting up this tier of encryption requires running through a wizard in SQL Server Management Studio to select the sort of encryption and where in Key Vault to store the associated keys.</span></span>

![Abbildung 9-6 Auswählen der Spalten in einer Tabelle, die mit Always Encrypted verschlüsselt werden soll](./media/always-encrypted.png)

<span data-ttu-id="51ab2-391">**Abbildung 9-6**.</span><span class="sxs-lookup"><span data-stu-id="51ab2-391">**Figure 9-6**.</span></span> <span data-ttu-id="51ab2-392">Auswählen von Spalten in einer Tabelle, die mit Always Encrypted verschlüsselt werden soll.</span><span class="sxs-lookup"><span data-stu-id="51ab2-392">Selecting columns in a table to be encrypted using Always Encrypted.</span></span>

<span data-ttu-id="51ab2-393">Client Anwendungen, die Informationen aus diesen verschlüsselten Spalten lesen, müssen besondere Berechtigungen zum Lesen verschlüsselter Daten gewähren.</span><span class="sxs-lookup"><span data-stu-id="51ab2-393">Client applications that read information from these encrypted columns need to make special allowances to read encrypted data.</span></span> <span data-ttu-id="51ab2-394">Verbindungs Zeichenfolgen müssen mit aktualisiert werden, `Column Encryption Setting=Enabled` und Client Anmelde Informationen müssen vom Key Vault abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-394">Connection strings need to be updated with `Column Encryption Setting=Enabled` and client credentials must be retrieved from the Key Vault.</span></span> <span data-ttu-id="51ab2-395">Der SQL Server Client muss dann mit den Spalten Verschlüsselungsschlüsseln in der Liste angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-395">The SQL Server client must then be primed with the column encryption keys.</span></span> <span data-ttu-id="51ab2-396">Sobald dies abgeschlossen ist, verwenden die verbleibenden Aktionen die Standardschnittstellen für den SQL-Client.</span><span class="sxs-lookup"><span data-stu-id="51ab2-396">Once that is done, the remaining actions use the standard interfaces to SQL Client.</span></span> <span data-ttu-id="51ab2-397">Das heißt, Tools wie dapperund Entity Framework, die auf dem SQL-Client basieren, funktionieren weiterhin ohne Änderungen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-397">That is, tools like Dapper and Entity Framework, which are built on top of SQL Client, will continue to work without changes.</span></span> <span data-ttu-id="51ab2-398">Always Encrypted ist möglicherweise noch nicht für alle SQL Server Treiber in jeder Sprache verfügbar.</span><span class="sxs-lookup"><span data-stu-id="51ab2-398">Always Encrypted may not yet be available for every SQL Server driver on every language.</span></span>

<span data-ttu-id="51ab2-399">Die Kombination von TDE und Always encrypted, die beide mit Client spezifischen Schlüsseln verwendet werden können, stellt sicher, dass auch die höchsten Verschlüsselungs Anforderungen unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-399">The combination of TDE and Always Encrypted, both of which can be used with client-specific keys, ensures that even the most exacting encryption requirements are supported.</span></span>

### <a name="cosmos-db"></a><span data-ttu-id="51ab2-400">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="51ab2-400">Cosmos DB</span></span>

<span data-ttu-id="51ab2-401">Cosmos DB ist die neueste von Microsoft in Azure bereitgestellte Datenbank.</span><span class="sxs-lookup"><span data-stu-id="51ab2-401">Cosmos DB is the newest database provided by Microsoft in Azure.</span></span> <span data-ttu-id="51ab2-402">Es wurde von Grund auf für Sicherheit und Kryptografie entwickelt.</span><span class="sxs-lookup"><span data-stu-id="51ab2-402">It has been built from the ground up with security and cryptography in mind.</span></span> <span data-ttu-id="51ab2-403">Die AES-256-Bit-Verschlüsselung ist standardmäßig für alle Cosmos DB-Datenbanken und kann nicht deaktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="51ab2-403">AES-256bit encryption is standard for all Cosmos DB databases and can't be disabled.</span></span> <span data-ttu-id="51ab2-404">Gekoppelt mit der TLS 1,2-Anforderung für die Kommunikation wird die gesamte Speicherlösung verschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="51ab2-404">Coupled with the TLS 1.2 requirement for communication, the entire storage solution is encrypted.</span></span>

![Abbildung 9-7 der Daten Verschlüsselungs Fluss innerhalb Cosmos DB](./media/cosmos-encryption.png)

<span data-ttu-id="51ab2-406">**Abbildung 9-7**.</span><span class="sxs-lookup"><span data-stu-id="51ab2-406">**Figure 9-7**.</span></span> <span data-ttu-id="51ab2-407">Der Daten Verschlüsselungs Fluss in Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="51ab2-407">The flow of data encryption within Cosmos DB.</span></span>

<span data-ttu-id="51ab2-408">Obwohl Cosmos DB nicht für die Bereitstellung von Kunden Verschlüsselungsschlüsseln bereitstellt, hat das Team bedeutende Arbeiten durchgeführt, um sicherzustellen, dass es ohne das PCI-DSS-kompatibel ist.</span><span class="sxs-lookup"><span data-stu-id="51ab2-408">While Cosmos DB doesn't provide for supplying customer encryption keys, there has been significant work done by the team to ensure it remains PCI-DSS compliant without that.</span></span> <span data-ttu-id="51ab2-409">Cosmos DB unterstützt auch keine Art von Single Column Encryption, ähnlich wie die Always Encrypted von Azure SQL.</span><span class="sxs-lookup"><span data-stu-id="51ab2-409">Cosmos DB also doesn't support any sort of single column encryption similar to Azure SQL's Always Encrypted yet.</span></span>

## <a name="keeping-secure"></a><span data-ttu-id="51ab2-410">Sicherheit bewahren</span><span class="sxs-lookup"><span data-stu-id="51ab2-410">Keeping secure</span></span>

<span data-ttu-id="51ab2-411">Azure verfügt über alle Tools, die Sie zum Freigeben eines äußerst sicheren Produkts benötigen.</span><span class="sxs-lookup"><span data-stu-id="51ab2-411">Azure has all the tools necessary to release a highly secure product.</span></span> <span data-ttu-id="51ab2-412">Eine Kette ist jedoch nur so stark wie ihr schwächstes Glied.</span><span class="sxs-lookup"><span data-stu-id="51ab2-412">However, a chain is only as strong as its weakest link.</span></span> <span data-ttu-id="51ab2-413">Wenn die Anwendungen, die auf Azure bereitgestellt werden, nicht mit einer ordnungsgemäßen Sicherheits Denkweise und guten Sicherheits Überwachungen entwickelt wurden, werden Sie zur schwachen Verknüpfung in der Kette.</span><span class="sxs-lookup"><span data-stu-id="51ab2-413">If the applications deployed on top of Azure aren't developed with a proper security mindset and good security audits, then they become the weak link in the chain.</span></span> <span data-ttu-id="51ab2-414">Es gibt viele hervor artige Statische Analysetools, Verschlüsselungs Bibliotheken und Sicherheitsmethoden, mit denen sichergestellt werden kann, dass die in Azure installierte Software so sicher wie Azure selbst ist.</span><span class="sxs-lookup"><span data-stu-id="51ab2-414">There are many great static analysis tools, encryption libraries, and security practices that can be used to ensure that the software installed on Azure is as secure as Azure itself.</span></span> <span data-ttu-id="51ab2-415">Beispiele hierfür sind [Statische Analysetools](https://www.whitesourcesoftware.com/), [Verschlüsselungs Bibliotheken](https://www.libressl.org/)und [Sicherheitsmethoden](https://azure.microsoft.com/resources/videos/red-vs-blue-internal-security-penetration-testing-of-microsoft-azure/).</span><span class="sxs-lookup"><span data-stu-id="51ab2-415">Examples include [static analysis tools](https://www.whitesourcesoftware.com/), [encryption libraries](https://www.libressl.org/), and [security practices](https://azure.microsoft.com/resources/videos/red-vs-blue-internal-security-penetration-testing-of-microsoft-azure/).</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="51ab2-416">[Zurück](security.md)
>[Weiter](devops.md)</span><span class="sxs-lookup"><span data-stu-id="51ab2-416">[Previous](security.md)
[Next](devops.md)</span></span>
