---
title: Migrieren moderner Desktop Anwendungen
description: Alles, was Sie über den Migrationsprozess für moderne Desktop Anwendungen wissen müssen.
ms.date: 05/12/2020
ms.openlocfilehash: f7862d6379eeeb737c386b5ffeaab938d258b046
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/24/2020
ms.locfileid: "97866534"
---
# <a name="migrating-modern-desktop-applications"></a><span data-ttu-id="2eba4-103">Migrieren moderner Desktop Anwendungen</span><span class="sxs-lookup"><span data-stu-id="2eba4-103">Migrating Modern Desktop applications</span></span>

<span data-ttu-id="2eba4-104">In diesem Kapitel untersuchen wir die häufigsten Probleme und Herausforderungen, die beim Migrieren einer vorhandenen Anwendung von .NET Framework zu .net Core auftreten können.</span><span class="sxs-lookup"><span data-stu-id="2eba4-104">In this chapter, we're exploring the most common issues and challenges you can face when migrating an existing application from .NET Framework to .NET Core.</span></span>

<span data-ttu-id="2eba4-105">Eine komplexe Desktop Anwendung funktioniert nicht isoliert und erfordert eine gewisse Interaktion mit Subsystemen, die sich möglicherweise auf dem lokalen Computer oder auf einem Remote Server befinden.</span><span class="sxs-lookup"><span data-stu-id="2eba4-105">A complex desktop application doesn't work in isolation and needs some kind of interaction with subsystems that may reside on the local machine or on a remote server.</span></span> <span data-ttu-id="2eba4-106">Sie benötigt wahrscheinlich eine Datenbank, um entweder lokal oder Remote eine Verbindung als Persistenzspeicher herzustellen.</span><span class="sxs-lookup"><span data-stu-id="2eba4-106">It will probably need some kind of database to connect as a persistence storage either locally or remotely.</span></span> <span data-ttu-id="2eba4-107">Mit der Erhöhung der Internet-und Dienst orientierten Architekturen ist es üblich, dass Ihre Anwendung mit einer Art von Diensten verbunden ist, die sich auf einem Remote Server oder in der Cloud befinden.</span><span class="sxs-lookup"><span data-stu-id="2eba4-107">With the raise of Internet and service-oriented architectures, it's common to have your application connected to some sort of service residing on a remote server or in the cloud.</span></span> <span data-ttu-id="2eba4-108">Möglicherweise müssen Sie auf das Dateisystem des Computers zugreifen, um einige Funktionen zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="2eba4-108">You may need to access the machine file system to implement some functionality.</span></span> <span data-ttu-id="2eba4-109">Alternativ dazu können Sie auch eine Funktion verwenden, die sich innerhalb eines COM-Objekts außerhalb der Anwendung befindet, was ein häufiges Szenario ist, wenn Sie z. b. Office-Assemblys in Ihre APP integrieren.</span><span class="sxs-lookup"><span data-stu-id="2eba4-109">Alternatively, maybe you're using a piece of functionality that resides inside a COM object outside your application, which is a common scenario if, for example, you're integrating Office assemblies in your app.</span></span>

<span data-ttu-id="2eba4-110">Außerdem gibt es Unterschiede in der API-Oberfläche, die von .NET Framework und .net Core verfügbar gemacht wird, und einige Funktionen, die auf .NET Framework verfügbar sind, sind in .net Core nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="2eba4-110">Besides, there are differences in the API surface that is exposed by .NET Framework and .NET Core, and some features that are available on .NET Framework aren't available on .NET Core.</span></span> <span data-ttu-id="2eba4-111">Daher ist es wichtig, dass Sie beim Planen einer Migration wissen und berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="2eba4-111">So, it's important for you to know and take them into account when planning a migration.</span></span>

## <a name="configuration-files"></a><span data-ttu-id="2eba4-112">Konfigurationsdateien</span><span class="sxs-lookup"><span data-stu-id="2eba4-112">Configuration files</span></span>

<span data-ttu-id="2eba4-113">Konfigurationsdateien bieten die Möglichkeit, Gruppen von Eigenschaften zu speichern, die zur Laufzeit gelesen werden, und das Verhalten der apps zu beeinflussen, z. b. wo eine Datenbank gesucht werden soll oder wie oft eine Schleife ausgeführt werden soll.</span><span class="sxs-lookup"><span data-stu-id="2eba4-113">Configuration files offer the possibility to store sets of properties that are read at run time and affect the behavior of our apps, such as where to locate a database or how many times to execute a loop.</span></span> <span data-ttu-id="2eba4-114">Das schöne an dieser Technik ist, dass Sie einige Aspekte der Anwendung ändern können, ohne dass ein erneutes Kompilieren und erneute Kompilieren erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="2eba4-114">The beauty of this technique is that you can modify some aspects of the application without the need to recode and recompile.</span></span> <span data-ttu-id="2eba4-115">Dies ist praktisch, wenn beispielsweise derselbe app-Code in einer Entwicklungsumgebung mit einem bestimmten Satz von Konfigurations Werten und in der Produktionsumgebung mit einem anderen ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="2eba4-115">This comes in handy when, for example, the same app code runs on a development environment with a certain set of configuration values and in production with a different one.</span></span>

### <a name="configuration-on-net-framework"></a><span data-ttu-id="2eba4-116">Konfiguration auf .NET Framework</span><span class="sxs-lookup"><span data-stu-id="2eba4-116">Configuration on .NET Framework</span></span>

<span data-ttu-id="2eba4-117">Wenn Sie über eine funktionierende .NET Framework Desktop Anwendung verfügen, besteht die Wahrscheinlichkeit,  dass Sie über die- <xref:System.Configuration.AppSettingsSection> Klasse aus dem-Namespace auf eineapp.configDatei zugreifen `System.Configuration` .</span><span class="sxs-lookup"><span data-stu-id="2eba4-117">If you have a working .NET Framework desktop application, chances are you have an *app.config* file accessed through the <xref:System.Configuration.AppSettingsSection> class from the `System.Configuration` namespace.</span></span>

<span data-ttu-id="2eba4-118">In der .NET Framework-Infrastruktur gibt es eine Hierarchie von Konfigurationsdateien, die Eigenschaften von den übergeordneten Elementen erben.</span><span class="sxs-lookup"><span data-stu-id="2eba4-118">Within the .NET Framework infrastructure, there's a hierarchy of configuration files that inherit properties from its parents.</span></span> <span data-ttu-id="2eba4-119">Sie finden eine *machine.config* Datei, in der viele Eigenschaften und Konfigurations Abschnitte definiert sind, die in einer beliebigen Nachfolger Konfigurationsdatei verwendet oder überschrieben werden können.</span><span class="sxs-lookup"><span data-stu-id="2eba4-119">You can find a *machine.config* file that defines many properties and configuration sections that can be used or overridden in any descendant configuration file.</span></span>

### <a name="configuration-on-net-core"></a><span data-ttu-id="2eba4-120">Konfiguration auf .net Core</span><span class="sxs-lookup"><span data-stu-id="2eba4-120">Configuration on .NET Core</span></span>

<span data-ttu-id="2eba4-121">In der .net Core-Welt gibt es keine *machine.config* Datei.</span><span class="sxs-lookup"><span data-stu-id="2eba4-121">In the .NET Core world, there's no *machine.config* file.</span></span> <span data-ttu-id="2eba4-122">Auch wenn Sie den alten, vorgefertigten Namespace weiterhin verwenden können <xref:System.Configuration> , sollten Sie in Erwägung gezogen werden, auf die moderne zu wechseln <xref:Microsoft.Extensions.Configuration> , die eine gute Anzahl von Verbesserungen bietet.</span><span class="sxs-lookup"><span data-stu-id="2eba4-122">And even though you can continue to use the old fashioned <xref:System.Configuration> namespace, you may consider switching to the modern <xref:Microsoft.Extensions.Configuration>, which offers a good number of enhancements.</span></span>

<span data-ttu-id="2eba4-123">Die Konfigurations-API unterstützt das Konzept des Konfigurations Anbieters, der die Datenquelle definiert, die zum Laden der Konfiguration verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="2eba4-123">The configuration API supports the concept of configuration provider, which defines the data source to be used to load the configuration.</span></span> <span data-ttu-id="2eba4-124">Es gibt verschiedene Arten von integrierten Anbietern, wie z. b.:</span><span class="sxs-lookup"><span data-stu-id="2eba4-124">There are different kinds of built-in providers, such as:</span></span>

- <span data-ttu-id="2eba4-125">Speicherinterne .NET Objekte</span><span class="sxs-lookup"><span data-stu-id="2eba4-125">In-memory .NET objects</span></span>
- <span data-ttu-id="2eba4-126">INI-Dateien</span><span class="sxs-lookup"><span data-stu-id="2eba4-126">INI files</span></span>
- <span data-ttu-id="2eba4-127">JSON-Dateien</span><span class="sxs-lookup"><span data-stu-id="2eba4-127">JSON files</span></span>
- <span data-ttu-id="2eba4-128">XML-Dateien</span><span class="sxs-lookup"><span data-stu-id="2eba4-128">XML files</span></span>
- <span data-ttu-id="2eba4-129">Befehlszeilenargumente</span><span class="sxs-lookup"><span data-stu-id="2eba4-129">Command-line arguments</span></span>
- <span data-ttu-id="2eba4-130">Umgebungsvariablen</span><span class="sxs-lookup"><span data-stu-id="2eba4-130">Environment variables</span></span>
- <span data-ttu-id="2eba4-131">Verschlüsselter Benutzerspeicher</span><span class="sxs-lookup"><span data-stu-id="2eba4-131">Encrypted user store</span></span>

 <span data-ttu-id="2eba4-132">Sie können auch eigene erstellen.</span><span class="sxs-lookup"><span data-stu-id="2eba4-132">Or you can build your own.</span></span>

<span data-ttu-id="2eba4-133">Die neue Konfiguration ermöglicht eine Liste von Name-Wert-Paaren, die in einer Hierarchie mit mehreren Ebenen gruppiert werden können.</span><span class="sxs-lookup"><span data-stu-id="2eba4-133">The new configuration allows a list of name-value pairs that can be grouped into a multi-level hierarchy.</span></span> <span data-ttu-id="2eba4-134">Jeder gespeicherte Wert wird einer Zeichenfolge zugeordnet, und es gibt eine integrierte Bindungs Unterstützung, mit der Sie Einstellungen in ein poco-Objekt (Custom Plain Old CLR Object) deserialisieren können.</span><span class="sxs-lookup"><span data-stu-id="2eba4-134">Any stored value maps to a string, and there's built-in binding support that allows you to deserialize settings into a custom plain old CLR object (POCO) object.</span></span>

<span data-ttu-id="2eba4-135">Mit dem- <xref:Microsoft.Extensions.Configuration.ConfigurationBuilder> Objekt können Sie beliebig viele Konfigurations Anbieter hinzufügen, die Sie möglicherweise für Ihre Anwendung benötigen, und eine Rang folgen Regel zum Auflösen von Einstellungen verwenden.</span><span class="sxs-lookup"><span data-stu-id="2eba4-135">The <xref:Microsoft.Extensions.Configuration.ConfigurationBuilder> object lets you add as many configuration providers you may need for your application, using a precedence rule to resolve preference.</span></span> <span data-ttu-id="2eba4-136">Der letzte Anbieter, den Sie in Ihrem Code hinzufügen, überschreibt die anderen.</span><span class="sxs-lookup"><span data-stu-id="2eba4-136">So, the last provider you add in your code will override the others.</span></span> <span data-ttu-id="2eba4-137">Dies ist ein großartiges Feature zum Verwalten verschiedener Umgebungen für die Ausführung, da Sie unterschiedliche Konfigurationen für Entwicklungs-, Test-und Produktionsumgebungen definieren und diese in einer einzelnen Funktion innerhalb Ihres Codes verwalten können.</span><span class="sxs-lookup"><span data-stu-id="2eba4-137">This is a great feature for managing different environments for execution since you can define different configurations for development, testing and production environments, and manage them on a single function inside your code.</span></span>

### <a name="migrating-configuration-files"></a><span data-ttu-id="2eba4-138">Migrieren von Konfigurationsdateien</span><span class="sxs-lookup"><span data-stu-id="2eba4-138">Migrating Configuration files</span></span>

<span data-ttu-id="2eba4-139">Sie können weiterhin Ihre vorhandene app.config-XML-Datei verwenden.</span><span class="sxs-lookup"><span data-stu-id="2eba4-139">You can continue to use your existing app.config XML file.</span></span> <span data-ttu-id="2eba4-140">Allerdings können Sie diese Gelegenheit nutzen, um Ihre Konfiguration zu migrieren, um von den verschiedenen Erweiterungen von .net Core profitieren zu können.</span><span class="sxs-lookup"><span data-stu-id="2eba4-140">However, you could take this opportunity to migrate your configuration to benefit from the several enhancements made on .NET Core.</span></span>

<span data-ttu-id="2eba4-141">Wenn Sie von einem *app.config* im alten Stil zu einer neuen Konfigurationsdatei migrieren möchten, sollten Sie zwischen einem XML-Format und einem JSON-Format wählen.</span><span class="sxs-lookup"><span data-stu-id="2eba4-141">To migrate from an old-style *app.config* to a new configuration file, you should choose between an XML format and a JSON format.</span></span>

<span data-ttu-id="2eba4-142">Wenn Sie XML auswählen, ist die Konvertierung unkompliziert.</span><span class="sxs-lookup"><span data-stu-id="2eba4-142">If you choose XML, the conversion is straightforward.</span></span> <span data-ttu-id="2eba4-143">Da der Inhalt identisch ist, benennen Sie einfach die *app.config* -Datei in eine Datei mit der XML-Erweiterung um.</span><span class="sxs-lookup"><span data-stu-id="2eba4-143">Since the content is the same, just rename the *app.config* file to a file with XML extension.</span></span> <span data-ttu-id="2eba4-144">Ändern Sie dann den Code, der auf appSettings verweist, um die-Klasse zu verwenden `ConfigurationBuilder` .</span><span class="sxs-lookup"><span data-stu-id="2eba4-144">Then, change the code that references AppSettings to use the `ConfigurationBuilder` class.</span></span> <span data-ttu-id="2eba4-145">Diese Änderung sollte einfach sein.</span><span class="sxs-lookup"><span data-stu-id="2eba4-145">This change should be easy.</span></span>

<span data-ttu-id="2eba4-146">Wenn Sie ein JSON-Format verwenden möchten, das Sie nicht per Hand migrieren möchten, ist ein Tool namens [dotnet-config2json](https://www.nuget.org/packages/dotnet-config2json/) in .net Core verfügbar, das eine *app.config* Datei in eine JSON-Konfigurationsdatei konvertieren kann.</span><span class="sxs-lookup"><span data-stu-id="2eba4-146">If you want to use a JSON format and you don't want to migrate by hand, there's a tool called [dotnet-config2json](https://www.nuget.org/packages/dotnet-config2json/) available on .NET Core that can convert an *app.config* file to a JSON configuration file.</span></span>

<span data-ttu-id="2eba4-147">Möglicherweise treten auch einige Probleme auf, wenn Sie Konfigurations Abschnitte verwenden, die in der *machine.config* -Datei definiert wurden.</span><span class="sxs-lookup"><span data-stu-id="2eba4-147">You may also come across some issues when using configuration sections that were defined in the *machine.config* file.</span></span> <span data-ttu-id="2eba4-148">Sehen Sie sich beispielsweise die folgende Konfiguration an:</span><span class="sxs-lookup"><span data-stu-id="2eba4-148">For example, consider the following configuration:</span></span>

```xml
<configuration>
    <system.diagnostics>
        <switches>
            <add name="General" value="4" />
        </switches>
        <trace autoflush="true" indentsize="2">
            <listeners>
                <add name="myListener"
                     type="System.Diagnostics.TextWriterTraceListener,
                           System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
                     initializeData="MyListener.log"
                     traceOutputOptions="ProcessId, LogicalOperationStack, Timestamp, ThreadId, Callstack, DateTime" />
            </listeners>
        </trace>
    </system.diagnostics>
</configuration>
```

<span data-ttu-id="2eba4-149">Wenn Sie diese Konfiguration auf .net Core übernehmen, erhalten Sie eine Ausnahme:</span><span class="sxs-lookup"><span data-stu-id="2eba4-149">If you take this configuration to a .NET Core, you'll get an exception:</span></span>

<span data-ttu-id="2eba4-150">Unbekannter Konfigurations Abschnitt System. Diagnostics</span><span class="sxs-lookup"><span data-stu-id="2eba4-150">Unrecognized configuration section system.diagnostics</span></span>

<span data-ttu-id="2eba4-151">Diese Ausnahme tritt auf, weil dieser Abschnitt und die Assembly, die für die Verarbeitung dieses Abschnitts zuständig sind, in der *machine.config* -Datei definiert wurden, die jetzt nicht vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="2eba4-151">This exception occurs because that section and the assembly responsible for handling that section was defined in the *machine.config* file, which now doesn't exist.</span></span>

<span data-ttu-id="2eba4-152">Um das Problem zu beheben, können Sie die Abschnitts Definition aus der alten *machine.config* in die neue Konfigurationsdatei kopieren:</span><span class="sxs-lookup"><span data-stu-id="2eba4-152">To easily fix the issue, you can copy the section definition from your old *machine.config* to your new configuration file:</span></span>

```xml
<configSections>
    <section name="system.diagnostics"
             type="System.Diagnostics.SystemDiagnosticsSection,
                   System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
</configSections>
```

## <a name="accessing-databases"></a><span data-ttu-id="2eba4-153">Zugreifen auf Datenbanken</span><span class="sxs-lookup"><span data-stu-id="2eba4-153">Accessing databases</span></span>

<span data-ttu-id="2eba4-154">Fast jede Desktop Anwendung benötigt eine beliebige Datenbank.</span><span class="sxs-lookup"><span data-stu-id="2eba4-154">Almost every desktop application needs some kind of database.</span></span> <span data-ttu-id="2eba4-155">Für den Desktop ist es üblich, Client/Server-Architekturen mit einer direkten Verbindung zwischen der Desktop-App und der Datenbank-Engine zu finden.</span><span class="sxs-lookup"><span data-stu-id="2eba4-155">For desktop, it's common to find client-server architectures with a direct connection between the desktop app and the database engine.</span></span> <span data-ttu-id="2eba4-156">Diese Datenbanken können lokal oder Remote sein, abhängig davon, wie Informationen zwischen verschiedenen Benutzern gemeinsam genutzt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="2eba4-156">These databases can be local or remote depending on the need to share information between different users.</span></span>

<span data-ttu-id="2eba4-157">Aus Sicht des Codes gibt es viele Technologien und Frameworks, die dem Entwickler die Möglichkeit bieten, eine Verbindung, Abfrage und Aktualisierung einer Datenbank herzustellen.</span><span class="sxs-lookup"><span data-stu-id="2eba4-157">From the code perspective, there have been many technologies and frameworks to give the developer the possibility to connect, query, and update a database.</span></span>

<span data-ttu-id="2eba4-158">Die häufigsten Beispiele für die-Datenbank, die Sie bei der Kommunikation mit Windows-Desktop Anwendungen finden, sind Microsoft Access und Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="2eba4-158">The most common examples of database you can find when talking about Windows Desktop application are Microsoft Access and Microsoft SQL Server.</span></span> <span data-ttu-id="2eba4-159">Wenn Sie mehr als 20 Jahre Erfahrung beim Programmieren für den Desktop haben, sind Namen wie ODBC, OLEDB, RDO, ADO, ADO.net, LINQ und Entity Framework gut vertraut.</span><span class="sxs-lookup"><span data-stu-id="2eba4-159">If you have more than 20 years of experience programming for the desktop, names like ODBC, OLEDB, RDO, ADO, ADO.NET, LINQ, and Entity Framework will sound familiar.</span></span>

### <a name="odbc"></a><span data-ttu-id="2eba4-160">ODBC</span><span class="sxs-lookup"><span data-stu-id="2eba4-160">ODBC</span></span>

<span data-ttu-id="2eba4-161">Sie können ODBC weiterhin auf .net Core verwenden, da Microsoft die Bibliothek bereitstellt, die `System.Data.Odbc` mit .NET Standard 2,0 kompatibel ist.</span><span class="sxs-lookup"><span data-stu-id="2eba4-161">You can continue to use ODBC on .NET Core since Microsoft is providing the `System.Data.Odbc` library compatible with .NET Standard 2.0.</span></span>

### <a name="ole-db"></a><span data-ttu-id="2eba4-162">OLE DB</span><span class="sxs-lookup"><span data-stu-id="2eba4-162">OLE DB</span></span>

<span data-ttu-id="2eba4-163">[OLE DB](/previous-versions/windows/desktop/ms722784(v=vs.85))   bietet eine gute Möglichkeit, auf einheitliche Weise auf verschiedene Datenquellen zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="2eba4-163">[OLE DB](/previous-versions/windows/desktop/ms722784(v=vs.85)) has been a great way to access various data sources in a uniform manner.</span></span> <span data-ttu-id="2eba4-164">Es basiert aber auf com, das eine reine Windows-Technologie ist, und ist daher nicht die beste Lösung für eine plattformübergreifende Technologie wie .net Core.</span><span class="sxs-lookup"><span data-stu-id="2eba4-164">But it was based on COM, which is a Windows-only technology, and as such wasn't the best fit for a cross-platform technology such as .NET Core.</span></span> <span data-ttu-id="2eba4-165">Außerdem wird Sie in SQL Server, Version 2014 und höher, nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="2eba4-165">It's also unsupported in SQL Server versions 2014 and later.</span></span> <span data-ttu-id="2eba4-166">Aus diesen Gründen werden OLE DB von .net Core nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="2eba4-166">For those reasons, OLE DB won't be supported by .NET Core.</span></span>

### <a name="adonet"></a><span data-ttu-id="2eba4-167">ADO.NET</span><span class="sxs-lookup"><span data-stu-id="2eba4-167">ADO.NET</span></span>

<span data-ttu-id="2eba4-168">Sie können ADO.net weiterhin aus Ihrem vorhandenen Desktop Code in .net Core verwenden.</span><span class="sxs-lookup"><span data-stu-id="2eba4-168">You can still use ADO.NET from your existing desktop code on .NET Core.</span></span> <span data-ttu-id="2eba4-169">Sie müssen nur einige nuget-Pakete aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="2eba4-169">You just need to update some NuGet packages.</span></span>

### <a name="ef-core-vs-ef6"></a><span data-ttu-id="2eba4-170">EF Core im Vergleich zu EF6</span><span class="sxs-lookup"><span data-stu-id="2eba4-170">EF Core vs. EF6</span></span>

<span data-ttu-id="2eba4-171">Es gibt zwei derzeit unterstützte Versionen von Entity Framework (EF), Entity Framework 6 (EF6) und EF Core.</span><span class="sxs-lookup"><span data-stu-id="2eba4-171">There are two currently supported versions of Entity Framework (EF), Entity Framework 6 (EF6) and EF Core.</span></span>

<span data-ttu-id="2eba4-172">Die neueste als Teil der .NET Framework Welt veröffentlichte Technologie ist Entity Framework, wobei 6,4 die neueste Version ist.</span><span class="sxs-lookup"><span data-stu-id="2eba4-172">The latest technology released as part of the .NET Framework world is Entity Framework, with 6.4 being the latest version.</span></span> <span data-ttu-id="2eba4-173">Mit der Einführung von .net Core veröffentlichte Microsoft auch einen neuen Datenzugriffs Stapel, der auf Entity Framework basiert und Entity Framework Core genannt wird.</span><span class="sxs-lookup"><span data-stu-id="2eba4-173">With the launch of .NET Core, Microsoft also released a new data access stack based on Entity Framework and called Entity Framework Core.</span></span>

<span data-ttu-id="2eba4-174">Sie können EF 6,4 und EF Core sowohl aus .NET Framework als auch aus .net Core verwenden.</span><span class="sxs-lookup"><span data-stu-id="2eba4-174">You can use EF 6.4 and EF Core from both .NET Framework and .NET Core.</span></span> <span data-ttu-id="2eba4-175">Was sind die Entscheidungs Treiber, die Sie bei der Entscheidung unterstützen?</span><span class="sxs-lookup"><span data-stu-id="2eba4-175">So, what are the decision drivers to help to decide between the two?</span></span>

<span data-ttu-id="2eba4-176">EF 6,3 ist die erste Version von EF6, die auf .net Core ausgeführt werden kann und plattformübergreifend funktioniert.</span><span class="sxs-lookup"><span data-stu-id="2eba4-176">EF 6.3 is the first version of EF6 that can run on .NET Core and work cross-platform.</span></span> <span data-ttu-id="2eba4-177">Das Hauptziel dieser Version bestand darin, vorhandene Anwendungen, die EF6 verwenden, zu .net Core zu migrieren.</span><span class="sxs-lookup"><span data-stu-id="2eba4-177">In fact, the main goal of this release was to make it easier to migrate existing applications that use EF6 to .NET Core.</span></span>

<span data-ttu-id="2eba4-178">EF Core wurde entwickelt, um eine ähnliche Entwicklererfahrung wie EF6 bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="2eba4-178">EF Core was designed to provide a developer experience similar to EF6.</span></span> <span data-ttu-id="2eba4-179">Die meisten APIs der obersten Ebene bleibt unverändert, so dass EF Core Entwicklern, die EF 6 verwendet haben, vertraut erscheint.</span><span class="sxs-lookup"><span data-stu-id="2eba4-179">Most of the top-level APIs remain the same, so EF Core will feel familiar to developers who have used EF6.</span></span>

<span data-ttu-id="2eba4-180">Obwohl es kompatibel ist, gibt es Unterschiede bei der Implementierung, die Sie vor dem Treffen der Entscheidung überprüfen sollten.</span><span class="sxs-lookup"><span data-stu-id="2eba4-180">Although compatible, there are differences on the implementation you should check before making a decision.</span></span>
<span data-ttu-id="2eba4-181">Weitere Informationen finden Sie unter [Compare EF Core & EF6](/ef/efcore-and-ef6/).</span><span class="sxs-lookup"><span data-stu-id="2eba4-181">For more information, see [Compare EF Core & EF6](/ef/efcore-and-ef6/).</span></span>

<span data-ttu-id="2eba4-182">Es wird empfohlen, EF Core if:</span><span class="sxs-lookup"><span data-stu-id="2eba4-182">The recommendation is to use EF Core if:</span></span>

* <span data-ttu-id="2eba4-183">Die App benötigt die Funktionen von .NET Core.</span><span class="sxs-lookup"><span data-stu-id="2eba4-183">The app needs the capabilities of .NET Core.</span></span>
* <span data-ttu-id="2eba4-184">EF Core unterstützt alle Funktionen, die für die App erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="2eba4-184">EF Core supports all of the features that the app requires.</span></span>

<span data-ttu-id="2eba4-185">Ziehen Sie EF6 in Erwägung, wenn die beiden folgenden Bedingungen erfüllt sind:</span><span class="sxs-lookup"><span data-stu-id="2eba4-185">Consider using EF6 if both of the following conditions are true:</span></span>

* <span data-ttu-id="2eba4-186">Die APP kann unter Windows und .NET Framework 4,0 oder höher ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="2eba4-186">The app will run on Windows and .NET Framework 4.0 or later.</span></span>
* <span data-ttu-id="2eba4-187">EF6 unterstützt alle Funktionen, die für die App erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="2eba4-187">EF6 supports all of the features that the app requires.</span></span>

### <a name="relational-databases"></a><span data-ttu-id="2eba4-188">Relationale Datenbanken</span><span class="sxs-lookup"><span data-stu-id="2eba4-188">Relational databases</span></span>

#### <a name="sql-server"></a><span data-ttu-id="2eba4-189">SQL Server</span><span class="sxs-lookup"><span data-stu-id="2eba4-189">SQL Server</span></span>

<span data-ttu-id="2eba4-190">SQL Server ist eine der bevorzugten Datenbanken, wenn Sie vor einigen Jahren für den Desktop entwickelt wurden.</span><span class="sxs-lookup"><span data-stu-id="2eba4-190">SQL Server has been one of the databases of choice if you were developing for the desktop some years ago.</span></span> <span data-ttu-id="2eba4-191">Mit der Verwendung von <xref:System.Data.SqlClient> in .NET Framework können Sie auf Versionen von SQL Server zugreifen, die datenbankspezifische Protokolle kapseln.</span><span class="sxs-lookup"><span data-stu-id="2eba4-191">With the use of <xref:System.Data.SqlClient> in .NET Framework, you could access versions of SQL Server, which encapsulates database-specific protocols.</span></span>

<span data-ttu-id="2eba4-192">In .net Core finden Sie eine neue- `SqlClient` Klasse, die vollständig mit der-Klasse kompatibel ist, die in der .NET Framework vorhanden ist, sich aber in der- <xref:Microsoft.Data.SqlClient> Bibliothek befindet.</span><span class="sxs-lookup"><span data-stu-id="2eba4-192">In .NET Core, you can find a new `SqlClient` class, fully compatible with the one existing in the .NET Framework but located in the <xref:Microsoft.Data.SqlClient> library.</span></span> <span data-ttu-id="2eba4-193">Sie müssen lediglich einen Verweis auf das nuget-Paket " [Microsoft. Data. SqlClient](https://www.nuget.org/packages/Microsoft.Data.SqlClient/) " hinzufügen und einige Umbenennungen für die Namespaces durchführen, und alles sollte erwartungsgemäß funktionieren.</span><span class="sxs-lookup"><span data-stu-id="2eba4-193">You just have to add a reference to the [Microsoft.Data.SqlClient](https://www.nuget.org/packages/Microsoft.Data.SqlClient/) NuGet package and do some renaming for the namespaces and everything should work as expected.</span></span>

#### <a name="microsoft-access"></a><span data-ttu-id="2eba4-194">Microsoft Access</span><span class="sxs-lookup"><span data-stu-id="2eba4-194">Microsoft Access</span></span>

<span data-ttu-id="2eba4-195">Microsoft Access wurde seit Jahren verwendet, als die ausgereifte und skalierbare SQL Server nicht benötigt wurden.</span><span class="sxs-lookup"><span data-stu-id="2eba4-195">Microsoft Access has been used for years when the sophisticated and more scalable SQL Server wasn't needed.</span></span> <span data-ttu-id="2eba4-196">Mithilfe der-Bibliothek können Sie weiterhin eine Verbindung mit Microsoft Access herstellen <xref:System.Data.Odbc> .</span><span class="sxs-lookup"><span data-stu-id="2eba4-196">You can still connect to Microsoft Access using the <xref:System.Data.Odbc> library.</span></span>

## <a name="consuming-services"></a><span data-ttu-id="2eba4-197">Nutzen von Diensten</span><span class="sxs-lookup"><span data-stu-id="2eba4-197">Consuming services</span></span>

<span data-ttu-id="2eba4-198">Mit der Erhöhung der Dienst orientierten Architekturen begann sich die Entwicklung von Desktop Anwendungen von einem Client-Server-Modell zum Ansatz mit drei Ebenen.</span><span class="sxs-lookup"><span data-stu-id="2eba4-198">With the raise of service-oriented architectures, desktop applications began to evolve from a client-server model to the three-layer approach.</span></span> <span data-ttu-id="2eba4-199">Beim Client-Server-Ansatz wird eine direkte Datenbankverbindung vom Client hergestellt, der die Geschäftslogik enthält, in der Regel in einer einzelnen exe-Datei.</span><span class="sxs-lookup"><span data-stu-id="2eba4-199">In the client-server approach, a direct database connection is established from the client holding the business logic usually inside a single EXE file.</span></span> <span data-ttu-id="2eba4-200">Andererseits richtet der Ansatz mit drei Ebenen eine zwischengeschaltete Dienst Schicht ein, die Geschäftslogik-und Datenbankzugriffe implementiert und eine bessere Sicherheit, Skalierbarkeit und Wiederverwendbarkeit ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="2eba4-200">On the other hand, the three-layer approach establishes an intermediate service layer implementing business logic and database access allowing for better security, scalability, and reusability.</span></span> <span data-ttu-id="2eba4-201">Anstatt direkt mit Datasets von Daten zu arbeiten, basiert der ebenenansatz auf einer Reihe von Diensten, die Verträge implementieren und Objekte als Möglichkeit zum Implementieren der Datenübertragung implementieren.</span><span class="sxs-lookup"><span data-stu-id="2eba4-201">Instead of working directly with datasets of data, the layer approach relies in a set of services implementing contracts and types objects as a way to implement data transfer.</span></span>

<span data-ttu-id="2eba4-202">Wenn Sie über eine Desktop Anwendung verfügen, die einen WCF-Dienst verwendet und Sie zu .net Core migrieren möchten, müssen Sie einige Punkte beachten.</span><span class="sxs-lookup"><span data-stu-id="2eba4-202">If you have a desktop application using a WCF service and you want to migrate it to .NET Core, there are some things to consider.</span></span>

<span data-ttu-id="2eba4-203">Der erste Schritt besteht darin, die Konfiguration für den Zugriff auf den Dienst aufzulösen.</span><span class="sxs-lookup"><span data-stu-id="2eba4-203">The first thing is how to resolve the configuration to access the service.</span></span> <span data-ttu-id="2eba4-204">Da sich die Konfiguration auf .net Core unterscheidet, müssen Sie einige Updates in der Konfigurationsdatei vornehmen.</span><span class="sxs-lookup"><span data-stu-id="2eba4-204">Because the configuration is different on .NET Core, you'll need to make some updates in your configuration file.</span></span>

<span data-ttu-id="2eba4-205">Zweitens müssen Sie den Dienst Client mit den neuen Tools neu generieren, die in Visual Studio 2019 vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="2eba4-205">Second, you'll need to regenerate the service client with the new tools present on Visual Studio 2019.</span></span> <span data-ttu-id="2eba4-206">In diesem Schritt müssen Sie in Erwägung gezogen werden, die Generierung der synchronen Vorgänge zu aktivieren, damit der Client mit vorhandenem Code kompatibel ist.</span><span class="sxs-lookup"><span data-stu-id="2eba4-206">In this step, you must consider activating the generation of the synchronous operations to make the client compatible with your existing code.</span></span>

<span data-ttu-id="2eba4-207">Wenn Sie nach der Migration feststellen, dass Bibliotheken vorhanden sind, die nicht in .net Core vorhanden sind, können Sie einen Verweis auf das nuget-Paket [Microsoft. Windows. Compatibility](https://www.nuget.org/packages/Microsoft.Windows.Compatibility) hinzufügen und überprüfen, ob die fehlenden Funktionen vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="2eba4-207">After the migration, if you find that there are libraries you need that aren't present on .NET Core, you can add a reference to the [Microsoft.Windows.Compatibility](https://www.nuget.org/packages/Microsoft.Windows.Compatibility) NuGet package and see if the missing functions are there.</span></span>

<span data-ttu-id="2eba4-208">Wenn Sie die- <xref:System.Net.WebRequest> Klasse zum Ausführen von Webdienst aufrufen verwenden, finden Sie möglicherweise einige Unterschiede zu .net Core.</span><span class="sxs-lookup"><span data-stu-id="2eba4-208">If you're using the <xref:System.Net.WebRequest> class to perform web service calls, you may find some differences on .NET Core.</span></span> <span data-ttu-id="2eba4-209">Es wird empfohlen, stattdessen den System .net. http. HttpClient zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="2eba4-209">The recommendation is to use the System.Net.Http.HttpClient instead.</span></span>

## <a name="consuming-a-com-object"></a><span data-ttu-id="2eba4-210">Verwenden eines COM-Objekts</span><span class="sxs-lookup"><span data-stu-id="2eba4-210">Consuming a COM Object</span></span>

<span data-ttu-id="2eba4-211">Derzeit gibt es keine Möglichkeit, einen Verweis auf ein COM-Objekt aus Visual Studio 2019 für die Verwendung mit .net Core hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="2eba4-211">Currently, there's no way to add a reference to a COM object from Visual Studio 2019 to use with .NET Core.</span></span> <span data-ttu-id="2eba4-212">Daher müssen Sie die Projektdatei manuell ändern.</span><span class="sxs-lookup"><span data-stu-id="2eba4-212">So, you have to manually modify the project file.</span></span>

<span data-ttu-id="2eba4-213">Fügen Sie eine `COMReference` Struktur in die Projektdatei ein, wie im folgenden Beispiel gezeigt:</span><span class="sxs-lookup"><span data-stu-id="2eba4-213">Insert a `COMReference` structure inside the project file like in the following example:</span></span>

```xml
<ItemGroup>
    <COMReference Include="MSHTML">
        <Guid>{3050F1C5-98B5-11CF-BB82-00AA00BDCE0B}\</Guid>
        <VersionMajor>4</VersionMajor>
        <VersionMinor>0</VersionMinor>
        <Lcid>0</Lcid>
        <WrapperTool>primary</WrapperTool>
        <Isolated>false</Isolated>
    </COMReference>
</ItemGroup>
```

## <a name="more-things-to-consider"></a><span data-ttu-id="2eba4-214">Weitere zu berücksichtigende Punkte</span><span class="sxs-lookup"><span data-stu-id="2eba4-214">More things to consider</span></span>

<span data-ttu-id="2eba4-215">Für .net Core sind verschiedene Technologien verfügbar, die für .NET Framework Bibliotheken verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="2eba4-215">Several technologies available to .NET Framework libraries aren't available for .NET Core.</span></span> <span data-ttu-id="2eba4-216">Wenn Ihr Code von einigen dieser Technologien abhängig ist, sollten Sie die in diesem Abschnitt beschriebenen alternativen Ansätze beachten.</span><span class="sxs-lookup"><span data-stu-id="2eba4-216">If your code relies on some of these technologies, consider the alternative approaches outlined in this section.</span></span>

<span data-ttu-id="2eba4-217">Das [Windows-Kompatibilitätspaket](../../core/porting/windows-compat-pack.md) bietet Zugriff auf APIs, die zuvor nur für .NET Framework verfügbar waren.</span><span class="sxs-lookup"><span data-stu-id="2eba4-217">The [Windows Compatibility Pack](../../core/porting/windows-compat-pack.md) provides access to APIs that were previously available only for .NET Framework.</span></span> <span data-ttu-id="2eba4-218">Sie kann in .net Core-und .NET Standard-Projekten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="2eba4-218">It can be used on .NET Core and .NET Standard projects.</span></span>

<span data-ttu-id="2eba4-219">Weitere Informationen zur API-Kompatibilität finden Sie in der Dokumentation zu wichtigen Änderungen und veralteten/veralteten APIs unter <https://docs.microsoft.com/dotnet/core/compatibility/fx-core> .</span><span class="sxs-lookup"><span data-stu-id="2eba4-219">For more information on API compatibility, you can find documentation about breaking changes and deprecated/legacy APIs at <https://docs.microsoft.com/dotnet/core/compatibility/fx-core>.</span></span>

### <a name="appdomains"></a><span data-ttu-id="2eba4-220">AppDomains</span><span class="sxs-lookup"><span data-stu-id="2eba4-220">AppDomains</span></span>

<span data-ttu-id="2eba4-221">Anwendungsdomänen (AppDomains) isolieren Apps voneinander.</span><span class="sxs-lookup"><span data-stu-id="2eba4-221">Application domains (AppDomains) isolate apps from one another.</span></span> <span data-ttu-id="2eba4-222">AppDomains erfordern eine Laufzeitunterstützung und sind aufwändig.</span><span class="sxs-lookup"><span data-stu-id="2eba4-222">AppDomains require runtime support and are expensive.</span></span> <span data-ttu-id="2eba4-223">Das Erstellen zusätzlicher App-Domänen wird nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="2eba4-223">Creating additional app domains isn't supported.</span></span> <span data-ttu-id="2eba4-224">Für die Codeisolierung empfehlen wir separate Prozesse oder die Verwendung von Containern als Alternative.</span><span class="sxs-lookup"><span data-stu-id="2eba4-224">For code isolation, we recommend separate processes or using containers as an alternative.</span></span> <span data-ttu-id="2eba4-225">Für das dynamische Laden von Assemblys empfehlen wir die neue  <xref:System.Runtime.Loader.AssemblyLoadContext> Klasse.</span><span class="sxs-lookup"><span data-stu-id="2eba4-225">For the dynamic loading of assemblies, we recommend the new <xref:System.Runtime.Loader.AssemblyLoadContext> class.</span></span>

<span data-ttu-id="2eba4-226">Um die Code Migration von .NET Framework zu vereinfachen, macht .net Core einige der AppDomain-API-Oberfläche verfügbar.</span><span class="sxs-lookup"><span data-stu-id="2eba4-226">To make code migration from .NET Framework easier, .NET Core exposes some of the AppDomain API surface.</span></span> <span data-ttu-id="2eba4-227">Einige der APIs funktionieren normal (z. b.  <xref:System.AppDomain.UnhandledException?displayProperty=nameWithType> ), einige Member nehmen nichts (z. b.)  <xref:System.AppDomain.SetCachePath%2A> vor, und einige von Ihnen lösen (z. b.) aus <xref:System.PlatformNotSupportedException>  <xref:System.AppDomain.CreateDomain%2A> .</span><span class="sxs-lookup"><span data-stu-id="2eba4-227">Some of the APIs function normally (for example, <xref:System.AppDomain.UnhandledException?displayProperty=nameWithType>), some members do nothing (for example, <xref:System.AppDomain.SetCachePath%2A>), and some of them throw <xref:System.PlatformNotSupportedException> (for example, <xref:System.AppDomain.CreateDomain%2A>).</span></span>

### <a name="remoting"></a><span data-ttu-id="2eba4-228">Remoting</span><span class="sxs-lookup"><span data-stu-id="2eba4-228">Remoting</span></span>

<span data-ttu-id="2eba4-229">.NET-Remoting wurde für die AppDomain-Kommunikation verwendet, die nicht mehr unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="2eba4-229">.NET Remoting was used for cross-AppDomain communication, which is no longer supported.</span></span> <span data-ttu-id="2eba4-230">Darüber hinaus erfordert Remoting die Runtimeunterstützung, die teuer in der Wartung ist.</span><span class="sxs-lookup"><span data-stu-id="2eba4-230">Also, Remoting requires runtime support, which is expensive to maintain.</span></span> <span data-ttu-id="2eba4-231">Aus diesen Gründen wird .NET-Remoting unter .net Core nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="2eba4-231">For these reasons, .NET Remoting isn't supported on .NET Core.</span></span>

<span data-ttu-id="2eba4-232">Für die prozessübergreifende Kommunikation sollten Sie Mechanismen für die prozessübergreifende Kommunikation (Inter-Process Communication, IPC) als Alternative zu Remoting, wie z <xref:System.IO.Pipes?displayProperty=nameWithType> . b. oder der-Klasse, berücksichtigen <xref:System.IO.MemoryMappedFiles.MemoryMappedFile> .</span><span class="sxs-lookup"><span data-stu-id="2eba4-232">For communication across processes, you should consider inter-process communication (IPC) mechanisms as an alternative to Remoting, such as the <xref:System.IO.Pipes?displayProperty=nameWithType> or the <xref:System.IO.MemoryMappedFiles.MemoryMappedFile> class.</span></span>

<span data-ttu-id="2eba4-233">Verwenden Sie computerübergreifend eine netzwerkbasierte Lösung als Alternative.</span><span class="sxs-lookup"><span data-stu-id="2eba4-233">Across machines, use a network-based solution as an alternative.</span></span> <span data-ttu-id="2eba4-234">Verwenden Sie vorzugsweise ein nur-Text-Protokoll mit geringem Overhead, z. b. http.</span><span class="sxs-lookup"><span data-stu-id="2eba4-234">Preferably, use a low-overhead plaintext protocol, such as HTTP.</span></span> <span data-ttu-id="2eba4-235">Der Kestrel Webserver, der von ASP.NET Core verwendete Webserver, ist hier eine Option.</span><span class="sxs-lookup"><span data-stu-id="2eba4-235">The Kestrel web server, the web server used by ASP.NET Core, is an option here.</span></span>

### <a name="code-access-security-cas"></a><span data-ttu-id="2eba4-236">Codezugriffssicherheit (Code Access Security, CAS)</span><span class="sxs-lookup"><span data-stu-id="2eba4-236">Code Access Security (CAS)</span></span>

<span data-ttu-id="2eba4-237">Das Sandboxing, das auf der Laufzeit oder dem Framework basiert, um einzuschränken, welche Ressourcen von einer verwalteten Anwendung oder Bibliothek verwendet oder ausgeführt werden, wird von .net Core nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="2eba4-237">Sandboxing, which relies on the runtime or the framework to constrain which resources a managed application or library uses or runs, isn't supported on .NET Core.</span></span>

<span data-ttu-id="2eba4-238">Verwenden Sie Sicherheitsgrenzen, die vom Betriebssystem bereitgestellt werden, z. b. Virtualisierung, Container oder Benutzerkonten zum Ausführen von Prozessen mit dem minimalen Berechtigungs Satz.</span><span class="sxs-lookup"><span data-stu-id="2eba4-238">Use security boundaries that are provided by the operating system, such as virtualization, containers, or user accounts for running processes with the minimum set of privileges.</span></span>

### <a name="security-transparency"></a><span data-ttu-id="2eba4-239">Sicherheitstransparenz</span><span class="sxs-lookup"><span data-stu-id="2eba4-239">Security Transparency</span></span>

<span data-ttu-id="2eba4-240">Ähnlich wie CAS trennt die Sicherheitstransparenz den Sandboxcode von sicherheitsrelevantem Code in einer deklarativen Weise, aber sie wird nicht mehr als Sicherheitsgrenze unterstützt.</span><span class="sxs-lookup"><span data-stu-id="2eba4-240">Similar to CAS, Security Transparency separates sandboxed code from security critical code in a declarative fashion but is no longer supported as a security boundary.</span></span>

<span data-ttu-id="2eba4-241">Verwenden Sie Sicherheitsgrenzen, die vom Betriebssystem bereitgestellt werden, z. b. Virtualisierung, Container oder Benutzerkonten zum Ausführen von Prozessen mit dem geringsten Berechtigungs Satz.</span><span class="sxs-lookup"><span data-stu-id="2eba4-241">Use security boundaries that are provided by the operating system, such as virtualization, containers, or user accounts for running processes with the least set of privileges.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="2eba4-242">[Zurück](whats-new-dotnet-core.md )
>[Weiter](windows-migration.md)</span><span class="sxs-lookup"><span data-stu-id="2eba4-242">[Previous](whats-new-dotnet-core.md )
[Next](windows-migration.md)</span></span>
