---
title: Erstellen, Weiterentwickeln und Verwalten von Versionen von Microservice-APIs und -verträgen
description: Erstellen Sie Microservice-APIs und Verträge unter Berücksichtigung von Weiterentwicklung und Versionsverwaltung angesichts der Tatsache, dass Anforderungen sich ändern.
ms.date: 01/13/2021
ms.openlocfilehash: 84eeaa9776947abda6171949c730f8473e97b241
ms.sourcegitcommit: a4cecb7389f02c27e412b743f9189bd2a6dea4d6
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 01/14/2021
ms.locfileid: "98189459"
---
# <a name="creating-evolving-and-versioning-microservice-apis-and-contracts"></a><span data-ttu-id="e6dc3-103">Erstellen, Weiterentwickeln und Verwalten von Versionen von Microservice-APIs und -verträgen</span><span class="sxs-lookup"><span data-stu-id="e6dc3-103">Creating, evolving, and versioning microservice APIs and contracts</span></span>

<span data-ttu-id="e6dc3-104">Eine Microservice-API stellt einen Vertrag zwischen dem Dienst und dessen Clients dar.</span><span class="sxs-lookup"><span data-stu-id="e6dc3-104">A microservice API is a contract between the service and its clients.</span></span> <span data-ttu-id="e6dc3-105">Sie können einen Microservice nur dann unabhängig weiterentwickeln, wenn Sie den zugehörigen API-Vertrag nicht brechen. Aus diesem Grund ist dieser Vertrag so wichtig.</span><span class="sxs-lookup"><span data-stu-id="e6dc3-105">You'll be able to evolve a microservice independently only if you do not break its API contract, which is why the contract is so important.</span></span> <span data-ttu-id="e6dc3-106">Wenn Sie den Vertrag ändern, wirkt sich dies auf Ihre Clientanwendungen oder Ihr API-Gateway aus.</span><span class="sxs-lookup"><span data-stu-id="e6dc3-106">If you change the contract, it will impact your client applications or your API Gateway.</span></span>

<span data-ttu-id="e6dc3-107">Die Art der API-Definition richtet sich nach dem von Ihnen verwendeten Protokoll.</span><span class="sxs-lookup"><span data-stu-id="e6dc3-107">The nature of the API definition depends on which protocol you're using.</span></span> <span data-ttu-id="e6dc3-108">Wenn Sie z.B. Messaging (wie [AMQP](http://www.amqp.org/)) verwenden, besteht die API aus den Nachrichtentypen.</span><span class="sxs-lookup"><span data-stu-id="e6dc3-108">For instance, if you're using messaging (like [AMQP](http://www.amqp.org/)), the API consists of the message types.</span></span> <span data-ttu-id="e6dc3-109">Wenn Sie HTTP- und RESTful-Dienste verwenden, besteht die API aus den URLs sowie den JSON-Formaten für Anforderungen und Antworten.</span><span class="sxs-lookup"><span data-stu-id="e6dc3-109">If you're using HTTP and RESTful services, the API consists of the URLs and the request and response JSON formats.</span></span>

<span data-ttu-id="e6dc3-110">Auch wenn Sie den ersten Vertrag gut durchdacht haben, wird sich die Dienst-API im Laufe der Zeit ändern.</span><span class="sxs-lookup"><span data-stu-id="e6dc3-110">However, even if you're thoughtful about your initial contract, a service API will need to change over time.</span></span> <span data-ttu-id="e6dc3-111">Wenn das geschieht, können Sie in der Regel nicht alle Clients dazu zwingen, ein Upgrade auf Ihren neuen API-Vertrag durchzuführen. Dies gilt besonders dann, wenn es sich bei Ihrer API um eine öffentliche API handelt, die von mehreren Clientanwendungen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="e6dc3-111">When that happens—and especially if your API is a public API consumed by multiple client applications — you typically can't force all clients to upgrade to your new API contract.</span></span> <span data-ttu-id="e6dc3-112">In der Regel müssen Sie neue Versionen eines Diensts inkrementell auf eine Weise bereitstellen, sodass sowohl die alte als auch die neue Version eines Dienstvertrags gleichzeitig ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="e6dc3-112">You usually need to incrementally deploy new versions of a service in a way that both old and new versions of a service contract are running simultaneously.</span></span> <span data-ttu-id="e6dc3-113">Deshalb ist es wichtig, dass eine Strategie für die Versionsverwaltung Ihres Diensts vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="e6dc3-113">Therefore, it's important to have a strategy for your service versioning.</span></span>

<span data-ttu-id="e6dc3-114">Wenn die Änderungen an der API klein sind, wenn Sie also Ihrer API zum Beispiel Attribute oder Parameter hinzufügen, sollten Clients, die eine ältere API verwenden, umschalten und mit der neueren Version des Diensts arbeiten.</span><span class="sxs-lookup"><span data-stu-id="e6dc3-114">When the API changes are small, like if you add attributes or parameters to your API, clients that use an older API should switch and work with the new version of the service.</span></span> <span data-ttu-id="e6dc3-115">Möglicherweise können Sie Standardwerte für fehlende Attribute bereitstellen, die erforderlich sind, und die Clients können überflüssige Antwortattribute ignorieren.</span><span class="sxs-lookup"><span data-stu-id="e6dc3-115">You might be able to provide default values for any missing attributes that are required, and the clients might be able to ignore any extra response attributes.</span></span>

<span data-ttu-id="e6dc3-116">Allerdings müssen Sie manchmal größere Änderungen an einer Dienst-API vornehmen und verstoßen dadurch gegen die Kompatibilitätsanforderungen.</span><span class="sxs-lookup"><span data-stu-id="e6dc3-116">However, sometimes you need to make major and incompatible changes to a service API.</span></span> <span data-ttu-id="e6dc3-117">Da Sie möglicherweise nicht dazu in der Lage sind, Clientanwendungen oder Dienste zu einem sofortigen Upgrade auf die neue Version zu zwingen, muss ein Dienst ältere Versionen der API für einen gewissen Zeitraum unterstützen.</span><span class="sxs-lookup"><span data-stu-id="e6dc3-117">Because you might not be able to force client applications or services to upgrade immediately to the new version, a service must support older versions of the API for some period.</span></span> <span data-ttu-id="e6dc3-118">Wenn Sie einen HTTP-basierten Mechanismus wie REST verwenden, können Sie z.B. die Versionsnummer der API in die URL oder in einen HTTP-Header einbetten.</span><span class="sxs-lookup"><span data-stu-id="e6dc3-118">If you're using an HTTP-based mechanism such as REST, one approach is to embed the API version number in the URL or into an HTTP header.</span></span> <span data-ttu-id="e6dc3-119">Dann können Sie sich entscheiden, ob Sie beide Versionen des Diensts gleichzeitig in die gleiche Dienstinstanz implementieren, oder ob Sie verschiedene Instanzen bereitstellen, die jeweils eine Version der API verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="e6dc3-119">Then you can decide between implementing both versions of the service simultaneously within the same service instance, or deploying different instances that each handle a version of the API.</span></span> <span data-ttu-id="e6dc3-120">Ein guter Ansatz für diese Funktionalität ist das [Vermittlermuster](https://en.wikipedia.org/wiki/Mediator_pattern) (z. B. die [MediatR-Bibliothek](https://github.com/jbogard/MediatR)) zum Entkoppeln der verschiedenen Implementierungsversionen in unabhängige Handler.</span><span class="sxs-lookup"><span data-stu-id="e6dc3-120">A good approach for this functionality is the [Mediator pattern](https://en.wikipedia.org/wiki/Mediator_pattern) (for example, [MediatR library](https://github.com/jbogard/MediatR)) to decouple the different implementation versions into independent handlers.</span></span>

<span data-ttu-id="e6dc3-121">Und wenn Sie eine REST-Architektur verwenden, ist [Hypermedia](https://www.infoq.com/articles/mark-baker-hypermedia) die beste Lösung für die Versionsverwaltung Ihrer Dienste und das Zulassen von APIs, die sich weiterentwickeln lassen.</span><span class="sxs-lookup"><span data-stu-id="e6dc3-121">Finally, if you're using a REST architecture, [Hypermedia](https://www.infoq.com/articles/mark-baker-hypermedia) is the best solution for versioning your services and allowing evolvable APIs.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="e6dc3-122">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="e6dc3-122">Additional resources</span></span>

- <span data-ttu-id="e6dc3-123">**Scott Hanselman. ASP.NET Core RESTful Web API versioning made easy (Versionsverwaltung von RESTful-Web-APIs in ASP.NET Core leicht gemacht)**  </span><span class="sxs-lookup"><span data-stu-id="e6dc3-123">**Scott Hanselman. ASP.NET Core RESTful Web API versioning made easy** </span></span>\
  <https://www.hanselman.com/blog/ASPNETCoreRESTfulWebAPIVersioningMadeEasy.aspx>

- <span data-ttu-id="e6dc3-124">**Versionsverwaltung einer RESTful-Web-API** </span><span class="sxs-lookup"><span data-stu-id="e6dc3-124">**Versioning a RESTful web API** </span></span>\
  <https://docs.microsoft.com/azure/architecture/best-practices/api-design#versioning-a-restful-web-api>

- <span data-ttu-id="e6dc3-125">**Roy Fielding. Versioning, Hypermedia, and REST (Versionsverwaltung, Hypermedia und REST)**  </span><span class="sxs-lookup"><span data-stu-id="e6dc3-125">**Roy Fielding. Versioning, Hypermedia, and REST** </span></span>\
  <https://www.infoq.com/articles/roy-fielding-on-versioning>

>[!div class="step-by-step"]
><span data-ttu-id="e6dc3-126">[Zurück](asynchronous-message-based-communication.md)
>[Weiter](microservices-addressability-service-registry.md)</span><span class="sxs-lookup"><span data-stu-id="e6dc3-126">[Previous](asynchronous-message-based-communication.md)
[Next](microservices-addressability-service-registry.md)</span></span>
