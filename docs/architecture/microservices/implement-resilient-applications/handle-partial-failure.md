---
title: Behandeln von Teilfehlern
description: Erfahren Sie, wie Teilfehler ordnungsgemäß behandelt werden. Ein Microservice ist möglicherweise nicht voll funktionsfähig, kann aber möglicherweise noch weitere nützliche Aufgaben ausführen.
ms.date: 10/16/2018
ms.openlocfilehash: f00e5349df74b543deb6ac941c751cb130b3837c
ms.sourcegitcommit: 22be09204266253d45ece46f51cc6f080f2b3fd6
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/07/2019
ms.locfileid: "73732962"
---
# <a name="handle-partial-failure"></a><span data-ttu-id="fee8b-104">Behandeln von Teilfehlern</span><span class="sxs-lookup"><span data-stu-id="fee8b-104">Handle partial failure</span></span>

<span data-ttu-id="fee8b-105">In verteilten Systemen wie Anwendungen, die auf Microservices basieren, gibt es ein allgegenwärtiges Risiko für Teilfehler.</span><span class="sxs-lookup"><span data-stu-id="fee8b-105">In distributed systems like microservices-based applications, there's an ever-present risk of partial failure.</span></span> <span data-ttu-id="fee8b-106">Zum Beispiel kann ein einzelner Microservice oder Container fehlschlagen oder für eine kurze Zeit nicht verfügbar sein, oder eine einzelne VM oder ein Server kann abstürzen.</span><span class="sxs-lookup"><span data-stu-id="fee8b-106">For instance, a single microservice/container can fail or might not be available to respond for a short time, or a single VM or server can crash.</span></span> <span data-ttu-id="fee8b-107">Da Clients und Dienste separate Vorgänge sind, kann ein Dienst möglicherweise nicht schnell genug auf die Anforderung eines Clients reagieren.</span><span class="sxs-lookup"><span data-stu-id="fee8b-107">Since clients and services are separate processes, a service might not be able to respond in a timely way to a client’s request.</span></span> <span data-ttu-id="fee8b-108">Der Dienst ist möglicherweise überlastet und antwortet sehr langsam auf Anforderungen, oder er ist aufgrund von Netzwerkproblemen vorübergehend nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="fee8b-108">The service might be overloaded and responding very slowly to requests or might simply not be accessible for a short time because of network issues.</span></span>

<span data-ttu-id="fee8b-109">Nehmen Sie sich ein Beispiel an der Seite „Auftragsdetails“ der Beispielanwendung „eShopOnContainers“.</span><span class="sxs-lookup"><span data-stu-id="fee8b-109">For example, consider the Order details page from the eShopOnContainers sample application.</span></span> <span data-ttu-id="fee8b-110">Wenn der Microservice für Bestellungen nicht mehr reagiert, wenn der Benutzer versucht, einen Auftrag zu übermitteln, würde eine schlechte Implementierung des Clientprozesses (die MVC-Webanwendung) Threads auf unbestimmte Zeit blockieren, da er auf eine Antwort wartet, z.B. wenn der Clientcode synchrone RPCs ohne Timeout verwendet.</span><span class="sxs-lookup"><span data-stu-id="fee8b-110">If the ordering microservice is unresponsive when the user tries to submit an order, a bad implementation of the client process (the MVC web application)—for example, if the client code were to use synchronous RPCs with no timeout—would block threads indefinitely waiting for a response.</span></span> <span data-ttu-id="fee8b-111">Dies reduziert nicht nur die Benutzerfreundlichkeit, denn zusätzlich verbraucht oder blockiert jeder Wartevorgang ohne Reaktion einen Thread. Threads sind in hochgradig skalierbaren Anwendungen jedoch sehr wertvoll.</span><span class="sxs-lookup"><span data-stu-id="fee8b-111">Besides creating a bad user experience, every unresponsive wait consumes or blocks a thread, and threads are extremely valuable in highly scalable applications.</span></span> <span data-ttu-id="fee8b-112">Wenn viele Threads blockiert werden, sind für die Laufzeit der Anwendung irgendwann keine Threads mehr verfügbar.</span><span class="sxs-lookup"><span data-stu-id="fee8b-112">If there are many blocked threads, eventually the application’s runtime can run out of threads.</span></span> <span data-ttu-id="fee8b-113">In diesem Fall kann es dazu kommen, dass die Anwendung wie in Abbildung 8-1 dargestellt global statt nur teilweise nicht mehr reagiert.</span><span class="sxs-lookup"><span data-stu-id="fee8b-113">In that case, the application can become globally unresponsive instead of just partially unresponsive, as shown in Figure 8-1.</span></span>

![Diagramm, das teilweise Fehler zeigt.](./media/handle-partial-failure/partial-failures-diagram.png)

<span data-ttu-id="fee8b-115">**Abbildung 8-1**.</span><span class="sxs-lookup"><span data-stu-id="fee8b-115">**Figure 8-1**.</span></span> <span data-ttu-id="fee8b-116">Teilfehler treten wegen Abhängigkeiten auf, die die Verfügbarkeit von Dienstthreads beeinflussen</span><span class="sxs-lookup"><span data-stu-id="fee8b-116">Partial failures because of dependencies that impact service thread availability</span></span>

<span data-ttu-id="fee8b-117">In einer großen, auf Microservices basierten Anwendung können Teilfehler vor allem verstärkt werden, wenn der Großteil der internen Interaktionen von Microservices auf synchronen HTTP-Aufrufen basiert (dies gilt als Antimuster).</span><span class="sxs-lookup"><span data-stu-id="fee8b-117">In a large microservices-based application, any partial failure can be amplified, especially if most of the internal microservices interaction is based on synchronous HTTP calls (which is considered an anti-pattern).</span></span> <span data-ttu-id="fee8b-118">Stellen Sie sich ein System vor, das täglich Millionen von eingehenden Aufrufen empfängt.</span><span class="sxs-lookup"><span data-stu-id="fee8b-118">Think about a system that receives millions of incoming calls per day.</span></span> <span data-ttu-id="fee8b-119">Wenn Ihr System schlecht entworfen ist und auf langen Ketten von synchronen HTTP-Aufrufen basiert, können diese eingehenden Aufrufe in vielen weiteren Millionen von ausgehenden Aufrufen (z.B. ein Verhältnis von 1:4) an dutzende interne Microservices als synchrone Abhängigkeiten resultieren.</span><span class="sxs-lookup"><span data-stu-id="fee8b-119">If your system has a bad design that's based on long chains of synchronous HTTP calls, these incoming calls might result in many more millions of outgoing calls (let’s suppose a ratio of 1:4) to dozens of internal microservices as synchronous dependencies.</span></span> <span data-ttu-id="fee8b-120">Diese Situation wird in Abbildung 8-2 veranschaulicht, insbesondere in Abhängigkeit \#3, die eine Kette beginnt, indem sie Abhängigkeit #4 aufruft,</span><span class="sxs-lookup"><span data-stu-id="fee8b-120">This situation is shown in Figure 8-2, especially dependency \#3, that starts a chain, calling dependency #4.</span></span> <span data-ttu-id="fee8b-121">die #5 aufruft.</span><span class="sxs-lookup"><span data-stu-id="fee8b-121">which the calls #5.</span></span>

![Diagramm, das mehrere verteilte Abhängigkeiten zeigt.](./media/handle-partial-failure/multiple-distributed-dependencies.png)

<span data-ttu-id="fee8b-123">**Abbildung 8-2**.</span><span class="sxs-lookup"><span data-stu-id="fee8b-123">**Figure 8-2**.</span></span> <span data-ttu-id="fee8b-124">Die Auswirkungen eines falschen Entwurfs mit langen Ketten von HTTP-Anforderungen</span><span class="sxs-lookup"><span data-stu-id="fee8b-124">The impact of having an incorrect design featuring long chains of HTTP requests</span></span>

<span data-ttu-id="fee8b-125">Zeitweilige Fehler sind in einem verteilten und cloudbasierten System garantiert, auch wenn jede Abhängigkeit eine hervorragende Verfügbarkeit aufweist.</span><span class="sxs-lookup"><span data-stu-id="fee8b-125">Intermittent failure is guaranteed in a distributed and cloud-based system, even if every dependency itself has excellent availability.</span></span> <span data-ttu-id="fee8b-126">Diese Tatsache müssen Sie berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="fee8b-126">It's a fact you need to consider.</span></span>

<span data-ttu-id="fee8b-127">Wenn Sie keine Techniken für die Fehlertoleranz entwerfen oder implementieren, können selbst kleine Ausfälle verstärkt werden.</span><span class="sxs-lookup"><span data-stu-id="fee8b-127">If you do not design and implement techniques to ensure fault tolerance, even small downtimes can be amplified.</span></span> <span data-ttu-id="fee8b-128">Wegen dieser ausbreitenden Wirkung würden zum Beispiel 50 Abhängigkeiten mit einer Verfügbarkeit von 99,99% für mehrere Stunden im Monat ausfallen.</span><span class="sxs-lookup"><span data-stu-id="fee8b-128">As an example, 50 dependencies each with 99.99% of availability would result in several hours of downtime each month because of this ripple effect.</span></span> <span data-ttu-id="fee8b-129">Wenn eine Microserviceabhängigkeit beim Behandeln einer großen Anzahl von Anforderungen fehlschlägt, kann dieser Fehler schnell alle verfügbaren Anforderungsthreads in jedem Dienst beanspruchen und die gesamte Anwendung zum Abstürzen bringen.</span><span class="sxs-lookup"><span data-stu-id="fee8b-129">When a microservice dependency fails while handling a high volume of requests, that failure can quickly saturate all available request threads in each service and crash the whole application.</span></span>

![Diagramm, das einen teilweisen Fehler zeigt, der sich in den Microservices verstärkt.](./media/handle-partial-failure/partial-failure-amplified-microservices.png)

<span data-ttu-id="fee8b-131">**Abbildung 8-3**.</span><span class="sxs-lookup"><span data-stu-id="fee8b-131">**Figure 8-3**.</span></span> <span data-ttu-id="fee8b-132">Teilfehler, der durch Microservices mit langen Ketten von synchronen HTTP-Aufrufen verstärkt wurde</span><span class="sxs-lookup"><span data-stu-id="fee8b-132">Partial failure amplified by microservices with long chains of synchronous HTTP calls</span></span>

<span data-ttu-id="fee8b-133">Zur Minimierung dieses Problems wird im Abschnitt [Asynchrone Integration von Microservices erzwingt die Autonomie eines Microservice](../architect-microservice-container-applications/communication-in-microservice-architecture.md#asynchronous-microservice-integration-enforces-microservices-autonomy) dieses Handbuchs empfohlen, die asynchrone Kommunikation in allen internen Microservices zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="fee8b-133">To minimize this problem, in the section [Asynchronous microservice integration enforce microservice’s autonomy](../architect-microservice-container-applications/communication-in-microservice-architecture.md#asynchronous-microservice-integration-enforces-microservices-autonomy), this guide encourages you to use asynchronous communication across the internal microservices.</span></span>

<span data-ttu-id="fee8b-134">Darüber hinaus ist es wichtig, dass Sie Ihre Microservices und Clientanwendungen dafür entwerfen, Teilfehler zu behandeln – d.h. robuste Microservices und Clientanwendungen zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="fee8b-134">In addition, it's essential that you design your microservices and client applications to handle partial failures—that is, to build resilient microservices and client applications.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="fee8b-135">[Zurück](index.md)
>[Weiter](partial-failure-strategies.md)</span><span class="sxs-lookup"><span data-stu-id="fee8b-135">[Previous](index.md)
[Next](partial-failure-strategies.md)</span></span>
